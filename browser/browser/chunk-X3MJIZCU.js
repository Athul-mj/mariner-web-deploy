import{D as cr,a as lr}from"./chunk-PWFIESBA.js";import{$ as fs,$a as xe,A as ii,Aa as li,Ab as Fs,B as wt,Ba as ci,Bb as Es,C as xr,Ca as Ur,Cb as ma,D as ps,Da as zr,Db as Ms,E as ot,Ea as Kr,Eb as fa,F as ri,Fa as Wr,Fb as Ca,G as U,Ga as jr,Gb as va,H as te,Ha as $r,Hb as ya,I as We,Ia as Et,Ib as Sa,J as Tr,Ja as Yr,Jb as pi,K as Ar,Ka as Mt,L as Fr,La as T,Lb as ba,M as b,Ma as F,Mb as Ps,N as xt,Na as qr,O as Er,Oa as Re,P as Ne,Pa as Ut,Q as gs,Qa as di,R as Mr,Ra as Xr,S as Pr,Sa as Zr,T as Tt,U as Ir,Ua as Jr,Ub as wa,V as ve,Va as ws,W as Rr,Wa as y,X as ai,Xa as Pt,Y as Ht,Ya as Qr,Z as ms,Za as xs,Zb as xa,_ as Dr,_a as ye,a as ie,aa as At,ab as ea,ba as Cs,bb as ct,c as or,ca as vs,cb as Ee,d as Se,da as Lr,db as ta,e as dr,ea as _r,eb as sa,f as hr,fa as ys,fb as ia,g as be,ga as kr,gb as ra,h as ur,ha as Or,hb as aa,i as ue,ia as lt,ib as It,j as ds,ja as Gr,jb as na,k as pr,ka as B,kb as oa,l as gr,la as Nr,lb as Rt,m as mr,ma as je,mb as la,n as we,na as ni,nb as Ts,o as fr,oa as oi,ob as ca,p as hs,pa as x,pb as hi,q as us,qa as Ss,qb as ui,r as Cr,ra as se,rb as w,s as vr,sa as bs,sb as Dt,t as yr,ta as Br,tb as da,u as Sr,ua as $e,ub as ha,v as si,va as Vr,vb as ua,w as j,wa as Be,wb as As,x as br,xa as ce,xb as pa,y as wr,ya as Hr,yb as ga,z as Ge,za as Ft,zb as Ye}from"./chunk-YSHTC3YG.js";import{b as Oe,c as me}from"./chunk-AYWO7N2Q.js";import{$ as Vt,$b as Q,$c as ar,Aa as Yi,Ab as O,Ba as qi,Cb as ke,D as tt,Da as Xs,E as is,F as rs,G as Ui,H as C,Ia as Ae,Ic as sr,J as zi,Ja as J,Kb as W,Lb as q,Mb as ze,Nb as rt,Ob as at,Pb as Zs,Qb as yt,Tb as Pe,Tc as ir,Vb as _,Wb as Js,X as Ki,Xb as Qs,Yb as Zi,Z as st,Zb as Ce,_b as nt,_c as rr,a as L,aa as Wi,ac as ee,ad as ei,b as N,bc as Ie,cc as Fe,da as ji,dc as St,ea as Y,ec as cs,f as et,fa as as,fb as R,fd as ti,gb as G,ha as $i,ib as H,ja as V,kc as Ji,kd as nr,l as Nt,mb as Xi,nc as bt,o as Gi,ob as os,oc as Qi,p as Ni,pa as vt,pc as er,qa as ns,qc as tr,ra as he,s as Bi,t as Vi,w as Bt,wc as Ke,xa as it,y as Hi,ya as ae,yb as oe,za as ne,zb as ls}from"./chunk-442KA2ER.js";var Qn=class{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility=this.md5("hello")!="5d41402abc4b2a76b9719d911017c592"}md5cycle(e,s){let t=e[0],i=e[1],r=e[2],a=e[3];t=this.ff(t,i,r,a,s[0],7,-680876936),a=this.ff(a,t,i,r,s[1],12,-389564586),r=this.ff(r,a,t,i,s[2],17,606105819),i=this.ff(i,r,a,t,s[3],22,-1044525330),t=this.ff(t,i,r,a,s[4],7,-176418897),a=this.ff(a,t,i,r,s[5],12,1200080426),r=this.ff(r,a,t,i,s[6],17,-1473231341),i=this.ff(i,r,a,t,s[7],22,-45705983),t=this.ff(t,i,r,a,s[8],7,1770035416),a=this.ff(a,t,i,r,s[9],12,-1958414417),r=this.ff(r,a,t,i,s[10],17,-42063),i=this.ff(i,r,a,t,s[11],22,-1990404162),t=this.ff(t,i,r,a,s[12],7,1804603682),a=this.ff(a,t,i,r,s[13],12,-40341101),r=this.ff(r,a,t,i,s[14],17,-1502002290),i=this.ff(i,r,a,t,s[15],22,1236535329),t=this.gg(t,i,r,a,s[1],5,-165796510),a=this.gg(a,t,i,r,s[6],9,-1069501632),r=this.gg(r,a,t,i,s[11],14,643717713),i=this.gg(i,r,a,t,s[0],20,-373897302),t=this.gg(t,i,r,a,s[5],5,-701558691),a=this.gg(a,t,i,r,s[10],9,38016083),r=this.gg(r,a,t,i,s[15],14,-660478335),i=this.gg(i,r,a,t,s[4],20,-405537848),t=this.gg(t,i,r,a,s[9],5,568446438),a=this.gg(a,t,i,r,s[14],9,-1019803690),r=this.gg(r,a,t,i,s[3],14,-187363961),i=this.gg(i,r,a,t,s[8],20,1163531501),t=this.gg(t,i,r,a,s[13],5,-1444681467),a=this.gg(a,t,i,r,s[2],9,-51403784),r=this.gg(r,a,t,i,s[7],14,1735328473),i=this.gg(i,r,a,t,s[12],20,-1926607734),t=this.hh(t,i,r,a,s[5],4,-378558),a=this.hh(a,t,i,r,s[8],11,-2022574463),r=this.hh(r,a,t,i,s[11],16,1839030562),i=this.hh(i,r,a,t,s[14],23,-35309556),t=this.hh(t,i,r,a,s[1],4,-1530992060),a=this.hh(a,t,i,r,s[4],11,1272893353),r=this.hh(r,a,t,i,s[7],16,-155497632),i=this.hh(i,r,a,t,s[10],23,-1094730640),t=this.hh(t,i,r,a,s[13],4,681279174),a=this.hh(a,t,i,r,s[0],11,-358537222),r=this.hh(r,a,t,i,s[3],16,-722521979),i=this.hh(i,r,a,t,s[6],23,76029189),t=this.hh(t,i,r,a,s[9],4,-640364487),a=this.hh(a,t,i,r,s[12],11,-421815835),r=this.hh(r,a,t,i,s[15],16,530742520),i=this.hh(i,r,a,t,s[2],23,-995338651),t=this.ii(t,i,r,a,s[0],6,-198630844),a=this.ii(a,t,i,r,s[7],10,1126891415),r=this.ii(r,a,t,i,s[14],15,-1416354905),i=this.ii(i,r,a,t,s[5],21,-57434055),t=this.ii(t,i,r,a,s[12],6,1700485571),a=this.ii(a,t,i,r,s[3],10,-1894986606),r=this.ii(r,a,t,i,s[10],15,-1051523),i=this.ii(i,r,a,t,s[1],21,-2054922799),t=this.ii(t,i,r,a,s[8],6,1873313359),a=this.ii(a,t,i,r,s[15],10,-30611744),r=this.ii(r,a,t,i,s[6],15,-1560198380),i=this.ii(i,r,a,t,s[13],21,1309151649),t=this.ii(t,i,r,a,s[4],6,-145523070),a=this.ii(a,t,i,r,s[11],10,-1120210379),r=this.ii(r,a,t,i,s[2],15,718787259),i=this.ii(i,r,a,t,s[9],21,-343485551),e[0]=this.add32(t,e[0]),e[1]=this.add32(i,e[1]),e[2]=this.add32(r,e[2]),e[3]=this.add32(a,e[3])}cmn(e,s,t,i,r,a){return s=this.add32(this.add32(s,e),this.add32(i,a)),this.add32(s<<r|s>>>32-r,t)}ff(e,s,t,i,r,a,n){return this.cmn(s&t|~s&i,e,s,r,a,n)}gg(e,s,t,i,r,a,n){return this.cmn(s&i|t&~i,e,s,r,a,n)}hh(e,s,t,i,r,a,n){return this.cmn(s^t^i,e,s,r,a,n)}ii(e,s,t,i,r,a,n){return this.cmn(t^(s|~i),e,s,r,a,n)}md51(e){let s=e.length,t=[1732584193,-271733879,-1732584194,271733878],i;for(i=64;i<=e.length;i+=64)this.md5cycle(t,this.md5blk(e.substring(i-64,i)));e=e.substring(i-64);let r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<e.length;i++)r[i>>2]|=e.charCodeAt(i)<<(i%4<<3);if(r[i>>2]|=128<<(i%4<<3),i>55)for(this.md5cycle(t,r),i=0;i<16;i++)r[i]=0;return r[14]=s*8,this.md5cycle(t,r),t}md5blk(e){let s=[];for(let t=0;t<64;t+=4)s[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return s}rhex(e){let s="0123456789abcdef".split(""),t="",i=0;for(;i<4;i++)t+=s[e>>i*8+4&15]+s[e>>i*8&15];return t}hex(e){for(let s=0;s<e.length;s++)e[s]=this.rhex(e[s]);return e.join("")}md5(e){return this.hex(this.md51(e))}add32(e,s){return this.ieCompatibility?this.add32Compat(e,s):this.add32Std(e,s)}add32Std(e,s){return e+s&4294967295}add32Compat(e,s){let t=(e&65535)+(s&65535);return(e>>16)+(s>>16)+(t>>16)<<16|t&65535}},Is={"01":"GRID","02":"CHARTS","0102":"BOTH"},Ta="https://www.ag-grid.com/licensing/",eo=(()=>{let e=class fe{constructor(t){this.watermarkMessage=void 0,this.totalMessageLength=124,this.document=t,this.md5=new Qn,this.md5.init()}validateLicense(){let t=this.getLicenseDetails(fe.licenseKey),i=`AG Grid ${t.currentLicenseType==="BOTH"?"and AG Charts ":""}Enterprise`,r=t.suppliedLicenseType===void 0?"":`AG ${t.suppliedLicenseType==="BOTH"?"Grid and AG Charts":t.suppliedLicenseType==="GRID"?"Grid":"Charts"} Enterprise`;if(t.missing)(!this.isWebsiteUrl()||this.isForceWatermark())&&this.outputMissingLicenseKey(i);else if(t.expired){let a=fe.getGridReleaseDate(),n=fe.formatDate(a);this.outputExpiredKey(t.expiry,n,i,r)}else t.valid?t.isTrial&&t.trialExpired&&this.outputExpiredTrialKey(t.expiry,i,r):this.outputInvalidLicenseKey(!!t.incorrectLicenseType,i,r)}static extractExpiry(t){let i=t.substring(t.lastIndexOf("_")+1,t.length);return new Date(parseInt(fe.decode(i),10))}static extractLicenseComponents(t){let i=t.replace(/[\u200B-\u200D\uFEFF]/g,"");if(i=i.replace(/\r?\n|\r/g,""),t.length<=32)return{md5:null,license:t,version:null,isTrial:null};let r=i.length-32,a=i.substring(r),n=i.substring(0,r),[o,l,c]=fe.extractBracketedInformation(i);return{md5:a,license:n,version:o,isTrial:l,type:c}}getLicenseDetails(t){let i=fe.chartsLicenseManager?"BOTH":"GRID";if(!t?.length)return{licenseKey:t,valid:!1,missing:!0,currentLicenseType:i};let r=fe.getGridReleaseDate(),{md5:a,license:n,version:o,isTrial:l,type:c}=fe.extractLicenseComponents(t),d=a===this.md5.md5(n)&&t.indexOf("For_Trialing_ag-Grid_Only")===-1,h,p,u=null,g=!1,f;function S(){h=u<new Date,p=void 0}if(d&&(u=fe.extractExpiry(n),d=!isNaN(u.getTime()),d))switch(p=r>u,o){case"legacy":case"2":{l&&S();break}case"3":c?.length?(f=c,c!==Is["01"]&&c!==Is["0102"]||i==="BOTH"&&f!=="BOTH"?(d=!1,g=!0):l&&S()):d=!1}return d?{licenseKey:t,valid:d,expiry:fe.formatDate(u),expired:p,version:o,isTrial:l,trialExpired:h,incorrectLicenseType:g,currentLicenseType:i,suppliedLicenseType:f}:{licenseKey:t,valid:d,incorrectLicenseType:g,currentLicenseType:i,suppliedLicenseType:f}}isDisplayWatermark(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!!this.watermarkMessage?.length}getWatermarkMessage(){return this.watermarkMessage||""}getHostname(){let i=(this.document.defaultView||window).location,{hostname:r=""}=i;return r}isForceWatermark(){let i=(this.document.defaultView||window).location,{pathname:r}=i;return r?r.indexOf("forceWatermark")!==-1:!1}isWebsiteUrl(){return this.getHostname().match(/^((?:[\w-]+\.)?ag-grid\.com)$/)!==null}isLocalhost(){return this.getHostname().match(/^(?:127\.0\.0\.1|localhost)$/)!==null}static formatDate(t){let i=["January","February","March","April","May","June","July","August","September","October","November","December"],r=t.getDate(),a=t.getMonth(),n=t.getFullYear();return r+" "+i[a]+" "+n}static getGridReleaseDate(){return new Date(parseInt(fe.decode(fe.RELEASE_INFORMATION),10))}static decode(t){let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="",a,n,o,l,c,d,h,p=0,u=t.replace(/[^A-Za-z0-9+/=]/g,"");for(;p<u.length;)l=i.indexOf(u.charAt(p++)),c=i.indexOf(u.charAt(p++)),d=i.indexOf(u.charAt(p++)),h=i.indexOf(u.charAt(p++)),a=l<<2|c>>4,n=(c&15)<<4|d>>2,o=(d&3)<<6|h,r=r+String.fromCharCode(a),d!=64&&(r=r+String.fromCharCode(n)),h!=64&&(r=r+String.fromCharCode(o));return r=fe.utf8_decode(r),r}static utf8_decode(t){t=t.replace(/rn/g,"n");let i="";for(let r=0;r<t.length;r++){let a=t.charCodeAt(r);a<128?i+=String.fromCharCode(a):a>127&&a<2048?(i+=String.fromCharCode(a>>6|192),i+=String.fromCharCode(a&63|128)):(i+=String.fromCharCode(a>>12|224),i+=String.fromCharCode(a>>6&63|128),i+=String.fromCharCode(a&63|128))}return i}static setChartsLicenseManager(t){this.chartsLicenseManager=t}static setLicenseKey(t){this.licenseKey=t,this.chartsLicenseManager?.setLicenseKey(t,!0)}static extractBracketedInformation(t){if(!t.includes("["))return["legacy",!1,void 0];let i=t.match(/\[(.*?)\]/g).map(l=>l.replace("[","").replace("]",""));if(!i||i.length===0)return["legacy",!1,void 0];let r=i.filter(l=>l==="TRIAL").length===1,a=i.filter(l=>l.indexOf("v")===0)[0],n=a?a.replace("v",""):"legacy",o=Is[i.filter(l=>Is[l])[0]];return[n,r,o]}centerPadAndOutput(t){let i=this.totalMessageLength-t.length;console.error(t.padStart(i/2+t.length,"*").padEnd(this.totalMessageLength,"*"))}padAndOutput(t,i="*",r=""){console.error(t.padEnd(this.totalMessageLength-r.length,i)+r)}outputInvalidLicenseKey(t,i,r){t?(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Incompatible License Key "),this.padAndOutput(`* Your license key is for ${r} only and does not cover you for ${i}.`," ","*"),this.padAndOutput(`* To troubleshoot your license key visit ${Ta}.`," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")):(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Invalid License Key "),this.padAndOutput("* Your license key is not valid."," ","*"),this.padAndOutput(`* To troubleshoot your license key visit ${Ta}.`," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(t,i,r){this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Trial Period Expired. "),this.padAndOutput(`* Your trial only license for ${r} expired on ${t}.`," ","*"),this.padAndOutput("* Please email info@ag-grid.com to purchase a license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(t){this.centerPadAndOutput(""),this.centerPadAndOutput(` ${t} License `),this.centerPadAndOutput(" License Key Not Found "),this.padAndOutput(`* All ${t} features are unlocked for trial.`," ","*"),this.padAndOutput("* If you want to hide the watermark please email info@ag-grid.com for a trial license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="For Trial Use Only"}outputExpiredKey(t,i,r,a){this.centerPadAndOutput(""),this.centerPadAndOutput(` ${r} License `),this.centerPadAndOutput(" Incompatible Software Version "),this.padAndOutput(`* Your license key works with versions of ${a} released before ${t}.`," ","*"),this.padAndOutput(`* The version you are trying to use was released on ${i}.`," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to renew your license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="License Expired"}};return e.RELEASE_INFORMATION="MTc0NDc4ODcwODE2Nw==",e})(),Rs=eo,to='.ag-watermark{bottom:20px;color:#9b9b9b;opacity:.7;position:absolute;transition:opacity 1s ease-out 3s;&:before{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDkiIGhlaWdodD0iMzYiIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyMDkgMzYiPjxwYXRoIGZpbGw9IiM5QjlCOUIiIGQ9Ik0xOTIuOTkzIDIzLjY1OHYtNy45NDZoLTEzLjU0MWwtNy45NDcgNy45NDZ6TTIwOC4yNSAzLjk1aC0xNi45NzRsLTguMDEgNy45NDdoMjQuOTg0ek0xNjMuNjIyIDMxLjYwNWw0LjA2OS00LjA2OWgxMy43MzJ2Ny45NDdoLTE3LjgwMXoiLz48cGF0aCBmaWxsPSIjOUI5QjlCIiBkPSJNMTY2LjYxIDE5Ljc4aDguNzczbDguMDEtNy45NDZIMTY2LjYxek0xNTcuMDExIDMxLjYwNWg2LjYxMWw3Ljg4My03Ljk0N2gtMTQuNDk0ek0xOTEuMjc2IDMuOTVsLTQuMDY4IDQuMDdIMTYxLjI3Vi4wNzJoMzAuMDA2ek0yMC44NCAzMC4yMDZIOC4zNzhsLTIuMTYyIDUuMzRILjc1TDEyLjI1NyA4LjU5Mmg0Ljc2OEwyOC41MyAzNS41NDZoLTUuNTN6bS0xLjcxNy00LjI2TDE0LjYwOSAxNC45NWwtNC41MTQgMTAuOTk4ek0xMDQuNDM3IDE4LjUwOWMxLjU4OS0yLjM1MiA1LjU5NC0yLjYwNyA3LjI0Ny0yLjYwN3Y0LjU3OGMtMi4wMzQgMC00LjA2OS4wNjMtNS4yNzcuOTUzLTEuMjA3Ljg5LTEuODQzIDIuMDk4LTEuODQzIDMuNTZ2MTAuNTUzaC00Ljk1OVYxNS45MDJoNC43Njh6TTExOS4zNzYgMTUuOTAyaC00Ljk1OHYxOS42NDRoNC45NTh6TTExOS4zNzYgNy4xM2gtNC45NTh2NS44NDhoNC45NTh6TTE0My45NzkgNy4xM3YyOC40MTZoLTQuNzY4bC0uMTI3LTIuOTg4YTguMyA4LjMgMCAwIDEtMi42NyAyLjQ4Yy0xLjA4MS41NzItMi40MTYuODktMy45NDIuODktMS4zMzUgMC0yLjYwNi0uMjU1LTMuNjg3LS43LTEuMTQ0LS41MDgtMi4xNjItMS4xNDQtMi45ODgtMi4wMzRhOS42IDkuNiAwIDAgMS0xLjk3MS0zLjE3OWMtLjUwOC0xLjIwNy0uNjk5LTIuNjA2LS42OTktNC4xMzJzLjI1NC0yLjkyNC42OTktNC4xOTZjLjUwOS0xLjI3MSAxLjE0NS0yLjM1MiAxLjk3MS0zLjI0MnMxLjg0NC0xLjU4OSAyLjk4OC0yLjA5OCAyLjM1Mi0uNzYzIDMuNjg3LS43NjNjMS41MjYgMCAyLjc5Ny4yNTUgMy44NzguODI3czEuOTcxIDEuMzM1IDIuNjcgMi40MTZWNy4xOTNoNC45NTl6bS0xMC40MjYgMjQuNTM4YzEuNjUzIDAgMi45MjQtLjU3MiAzLjk0MS0xLjY1M3MxLjUyNi0yLjU0MyAxLjUyNi00LjMyMy0uNTA5LTMuMTc4LTEuNTI2LTQuMzIyYy0xLjAxNy0xLjA4MS0yLjI4OC0xLjY1My0zLjk0MS0xLjY1My0xLjU5IDAtMi45MjUuNTcyLTMuODc4IDEuNjUzLTEuMDE3IDEuMDgtMS41MjYgMi41NDMtMS41MjYgNC4zMjIgMCAxLjc4LjUwOSAzLjE4IDEuNTI2IDQuMjYgMS4wMTcgMS4xNDQgMi4yODggMS43MTYgMy44NzggMS43MTZNNTcuMjAyIDIwLjM1M0g0NC45MzN2NC4yNTloNi45OTNjLS4xOSAyLjE2MS0xLjAxNyAzLjgxNC0yLjQxNiA1LjE1LTEuMzk4IDEuMjctMy4xNzggMS45MDYtNS40NjcgMS45MDYtMS4yNzEgMC0yLjQ4LS4yNTQtMy40OTYtLjY5OWE3IDcgMCAwIDEtMi43MzQtMS45N2MtLjc2My0uODI3LTEuMzM1LTEuODQ0LTEuNzgtMy4wNTJzLS42MzYtMi40OC0uNjM2LTMuOTQyLjE5LTIuNzMzLjYzNi0zLjk0MWMuMzgxLTEuMjA4IDEuMDE3LTIuMTYyIDEuNzgtMy4wNTIuNzYzLS44MjYgMS42NTMtMS40NjIgMi43MzMtMS45N2E5LjEgOS4xIDAgMCAxIDMuNTYtLjdxNC4wMDUgMCA2LjEwMyAxLjkwN2wzLjMwNi0zLjMwNWMtMi40OC0xLjkwNy01LjY1OC0yLjkyNS05LjQwOS0yLjkyNS0yLjA5NyAwLTQuMDA0LjMxOC01LjcyMSAxLjAxOC0xLjcxNi42OTktMy4xNzkgMS41ODktNC4zODYgMi43OTdBMTIuMSAxMi4xIDAgMCAwIDMxLjIgMTYuMjJjLS42MzUgMS43MTctLjk1MyAzLjYyNC0uOTUzIDUuNjU4cy4zMTggMy45NDIgMS4wMTcgNS42NThjLjcgMS43MTcgMS41OSAzLjE3OSAyLjc5NyA0LjM4N2ExMi4xIDEyLjEgMCAwIDAgNC4zODcgMi43OTdjMS43MTYuNyAzLjYyMyAxLjAxNyA1LjY1NyAxLjAxNyAyLjAzNSAwIDMuODc4LS4zMTggNS41MzEtMS4wMTcgMS42NTMtLjcgMy4wNTItMS41OSA0LjE5Ni0yLjc5N3ExLjcxNi0xLjgxMiAyLjY3LTQuMzg3Yy42MzYtMS43MTYuOTU0LTMuNjIzLjk1NC01LjY1OHYtLjgyNmMtLjE5MS0uMTI3LS4yNTUtLjQ0NS0uMjU1LS43TTk1Ljk4MiAyMC4zNTNoLTEyLjI3djQuMjU5aDYuOTkzYy0uMTkgMi4xNjEtMS4wMTcgMy44MTQtMi40MTYgNS4xNS0xLjM5OCAxLjI3LTMuMTc4IDEuOTA2LTUuNDY3IDEuOTA2LTEuMjcxIDAtMi40OC0uMjU0LTMuNDk2LS42OTlhNyA3IDAgMCAxLTIuNzM0LTEuOTdjLS43NjMtLjgyNy0xLjMzNS0xLjg0NC0xLjc4LTMuMDUycy0uNjM2LTIuNDgtLjYzNi0zLjk0Mi4xOS0yLjczMy42MzYtMy45NDFjLjM4MS0xLjIwOCAxLjAxNy0yLjE2MiAxLjc4LTMuMDUyLjc2My0uODI2IDEuNjUzLTEuNDYyIDIuNzM0LTEuOTdhOS4xIDkuMSAwIDAgMSAzLjU2LS43cTQuMDA1IDAgNi4xMDMgMS45MDdsMy4zMDUtMy4zMDVjLTIuNDc5LTEuOTA3LTUuNjU4LTIuOTI1LTkuNDA4LTIuOTI1LTIuMDk4IDAtNC4wMDUuMzE4LTUuNzIyIDEuMDE4LTEuNzE2LjY5OS0zLjE3OCAxLjU4OS00LjM4NiAyLjc5N2ExMi4xIDEyLjEgMCAwIDAtMi43OTcgNC4zODZjLS42MzYgMS43MTctLjk1NCAzLjYyNC0uOTU0IDUuNjU4cy4zMTggMy45NDIgMS4wMTcgNS42NThjLjcgMS43MTcgMS41OSAzLjE3OSAyLjc5NyA0LjM4N2ExMi4xIDEyLjEgMCAwIDAgNC4zODcgMi43OTdjMS43MTYuNyAzLjYyMyAxLjAxNyA1LjY1OCAxLjAxNyAyLjAzNCAwIDMuODc4LS4zMTggNS41My0xLjAxNyAxLjY1My0uNyAzLjA1Mi0xLjU5IDQuMTk2LTIuNzk3cTEuNzE4LTEuODEyIDIuNjctNC4zODdjLjYzNi0xLjcxNi45NTQtMy42MjMuOTU0LTUuNjU4di0uODI2Yy0uMTktLjEyNy0uMjU1LS40NDUtLjI1NS0uNyIvPjwvc3ZnPg==");background-repeat:no-repeat;background-size:170px 40px;content:"";display:block;height:40px;width:170px}}:where(.ag-ltr) .ag-watermark{right:25px}:where(.ag-rtl) .ag-watermark{left:25px}.ag-watermark-text{font-family:Impact,sans-serif;font-size:19px;font-weight:700;opacity:.5}:where(.ag-ltr) .ag-watermark-text{padding-left:.7rem}:where(.ag-rtl) .ag-watermark-text{padding-right:.7rem}',so={tag:"div",cls:"ag-watermark",children:[{tag:"div",ref:"eLicenseTextRef",cls:"ag-watermark-text"}]},io=class extends F{constructor(){super(so),this.eLicenseTextRef=T,this.registerCSS(to)}wireBeans(e){this.licenseManager=e.licenseManager}postConstruct(){let e=this.shouldDisplayWatermark();this.setDisplayed(e),e&&(this.eLicenseTextRef.textContent=this.licenseManager.getWatermarkMessage(),window.setTimeout(()=>this.addCssClass("ag-opacity-zero"),0),window.setTimeout(()=>this.setDisplayed(!1),5e3))}shouldDisplayWatermark(){return this.licenseManager.isDisplayWatermark()}},ro={selector:"AG-WATERMARK",component:io},ao=class extends x{constructor(){super(...arguments),this.beanName="licenseManager"}postConstruct(){this.validateLicense()}validateLicense(){this.licenseManager=new Rs(Tt(this.beans)),this.licenseManager.validateLicense()}static getLicenseDetails(e){return new Rs(null).getLicenseDetails(e)}getWatermarkSelector(){return ro}isDisplayWatermark(){return this.licenseManager.isDisplayWatermark()}getWatermarkMessage(){return this.licenseManager.getWatermarkMessage()}static setLicenseKey(e){Rs.setLicenseKey(e)}static setChartsLicenseManager(e){Rs.setChartsLicenseManager(e)}},no=9525,Aa={0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49},Ds=`\r
`;function Fa(e,s,t){if(!s&&s!==""&&s!==0)return"";let i=s;return typeof s=="boolean"&&t&&(i=t(s)),` ${e}="${i}"`}function oo(e={}){let s="<?",t="?>",i=["version"];e.version||(e.version="1.0"),e.encoding&&i.push("encoding"),e.standalone&&i.push("standalone");let r=i.map(a=>`${a}="${e[a]}"`).join(" ");return`${s}xml ${r} ${t}`}function qa(e,s){let t="";e.properties&&(e.properties.prefixedAttributes&&e.properties.prefixedAttributes.forEach(r=>{Object.keys(r.map).forEach(a=>{t+=Fa(r.prefix+a,r.map[a],s)})}),e.properties.rawMap&&Object.keys(e.properties.rawMap).forEach(r=>{t+=Fa(r,e.properties.rawMap[r],s)}));let i="<"+e.name+t;return!e.children&&e.textNode==null?i+"/>"+Ds:e.textNode!=null?i+">"+e.textNode+"</"+e.name+">"+Ds:(i+=">"+Ds,e.children&&e.children.forEach(r=>{i+=qa(r,s)}),i+"</"+e.name+">"+Ds)}var lo=e=>Math.round(e*96/72),Lt=e=>Math.ceil(e*no),co=e=>{if(e===void 0)return;let t=["Automatic","Roman","Swiss","Modern","Script","Decorative"].indexOf(e||"Automatic");return Math.max(t,0)},ks=(e,s)=>{if(!s)return;let t;return typeof s=="number"?t=s:t=s({rowIndex:e}),t},ho=(e,s)=>{let{colSpan:t,column:i}=e.position;if(e.width)if(t){let r=s.slice(i-1,i+t-1),a=0;for(let n=0;n<r.length;n++){let o=r[n].getActualWidth();if(e.width<a+o){e.position.colSpan=n+1,e.totalWidth=e.width,e.width=e.totalWidth-a;break}a+=o}}else e.totalWidth=e.width},uo=(e,s)=>{let{rowSpan:t,row:i}=e.position;if(e.height)if(t){let r=0,a=0;for(let n=i;n<i+t;n++){let o=lo(ks(n,s)||20);if(e.height<r+o){e.position.rowSpan=a+1,e.totalHeight=e.height,e.height=e.totalHeight-r;break}r+=o,a++}}else e.totalHeight=e.height},pe=(e,s)=>{let t=oo({encoding:"UTF-8",standalone:"yes"}),i=qa(e);return s?i:`${t}${i}`},pt=e=>{let i=String.fromCharCode,r=Math.floor(e/26),a=e%26;return!r||e===26?i(65+e-1):a?r<26?i(65+r-1)+i(65+a-1):pt(r)+i(65+a-1):pt(r-1)+"Z"},po=e=>e.replaceAll(`
`,"_x000a_"),Si=e=>{if(e==null)return null;let s="";for(let t=0;t<e.length;t++){let i=e.charCodeAt(t);if(i>=0&&i<=31&&i!==10){let n=`_x${i.toString(16).toUpperCase().padStart(4,"0")}_`;s+=n}else s+=e[t]}return s},go=e=>{let s=[];for(let t of e.keys()){let i=t.toString(),r={name:"t",textNode:se(Si(i),!1)};i.trim().length!==i.length&&(r.properties={rawMap:{"xml:space":"preserve"}}),s.push({name:"si",children:[r]})}return s},mo={getTemplate(e){let{name:s,ContentType:t,Extension:i,PartName:r}=e;return{name:s,properties:{rawMap:{Extension:i,PartName:r,ContentType:t}}}}},fo=mo,zs=e=>e==="jpg"?"jpeg":e,Co={getTemplate(e){let s=new Array(e).fill(void 0).map((c,d)=>({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",PartName:`/xl/worksheets/sheet${d+1}.xml`})),t=mt.size,i=Qe.size,r={};Ot.forEach(c=>{r[zs(c.type)]=!0});let a=new Array(t).fill(void 0).map((c,d)=>({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml",PartName:`/xl/drawings/drawing${d+1}.xml`})),n=[];Ue.forEach(({name:c})=>{n.push({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml",PartName:`/xl/tables/${c}.xml`})});let o=Object.keys(r).map(c=>({name:"Default",ContentType:`image/${c}`,Extension:c}));i&&o.push({name:"Default",Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"});let l=[...o,{name:"Default",Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"},{name:"Default",ContentType:"application/xml",Extension:"xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",PartName:"/xl/workbook.xml"},...s,{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml",PartName:"/xl/theme/theme1.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",PartName:"/xl/styles.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",PartName:"/xl/sharedStrings.xml"},...a,...n,{name:"Override",ContentType:"application/vnd.openxmlformats-package.core-properties+xml",PartName:"/docProps/core.xml"}].map(c=>fo.getTemplate(c));return{name:"Types",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"}},children:l}}},vo=Co,yo={getTemplate(e){let t=new Date().toJSON();return{name:"cp:coreProperties",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"}}]},children:[{name:"dc:creator",textNode:e},{name:"dc:title",textNode:"Workbook"},{name:"dcterms:created",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:t},{name:"dcterms:modified",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:t}]}}},So=yo,Ea=(e,s)=>({name:`xdr:${e}`,children:[{name:"xdr:col",textNode:s.col.toString()},{name:"xdr:colOff",textNode:s.offsetX.toString()},{name:"xdr:row",textNode:s.row.toString()},{name:"xdr:rowOff",textNode:s.offsetY.toString()}]}),bo=e=>{let s=[{name:"a:ext",properties:{rawMap:{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}},children:[{name:"a16:creationId",properties:{rawMap:{id:"{822E6D20-D7BC-2841-A643-D49A6EF008A2}","xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main"}}}]}];switch(e.recolor&&e.recolor.toLowerCase()){case"grayscale":case"sepia":case"washout":s.push({name:"a:ext",properties:{rawMap:{uri:"{C183D7F6-B498-43B3-948B-1728B52AA6E4}"}},children:[{name:"adec:decorative",properties:{rawMap:{val:"0","xmlns:adec":"http://schemas.microsoft.com/office/drawing/2017/decorative"}}}]})}return{name:"a:extLst",children:s}},wo=(e,s)=>({name:"xdr:nvPicPr",children:[{name:"xdr:cNvPr",properties:{rawMap:{id:s,name:e.id,descr:e.altText!=null?e.altText:void 0}},children:[bo(e)]},{name:"xdr:cNvPicPr",properties:{rawMap:{preferRelativeResize:"0"}},children:[{name:"a:picLocks"}]}]}),Ma=e=>{if(!e.saturation&&!e.tint)return;let s=[];return e.saturation&&s.push({name:"a:satMod",properties:{rawMap:{val:e.saturation*1e3}}}),e.tint&&s.push({name:"a:tint",properties:{rawMap:{val:e.tint*1e3}}}),s},xo=(e,s)=>({name:"a:duotone",children:[{name:"a:prstClr",properties:{rawMap:{val:e.color}},children:Ma(e)},{name:"a:srgbClr",properties:{rawMap:{val:s.color}},children:Ma(s)}]}),To=(e,s)=>{let t;if(e.transparency){let i=Math.min(Math.max(e.transparency,0),100);t=[{name:"a:alphaModFix",properties:{rawMap:{amt:1e5-Math.round(i*1e3)}}}]}if(e.recolor)switch(t||(t=[]),e.recolor.toLocaleLowerCase()){case"grayscale":t.push({name:"a:grayscl"});break;case"sepia":t.push(xo({color:"black"},{color:"D9C3A5",tint:50,saturation:180}));break;case"washout":t.push({name:"a:lum",properties:{rawMap:{bright:"70000",contrast:"-70000"}}});break;default:}return{name:"xdr:blipFill",children:[{name:"a:blip",properties:{rawMap:{cstate:"print","r:embed":`rId${s}`,"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}},children:t},{name:"a:stretch",children:[{name:"a:fillRect"}]}]}},Ao=(e,s)=>{let t={name:"a:xfrm",children:[{name:"a:off",properties:{rawMap:{x:0,y:0}}},{name:"a:ext",properties:{rawMap:{cx:s.width,cy:s.height}}}]};if(e.rotation){let a=e.rotation;t.properties={rawMap:{rot:Math.min(Math.max(a,0),360)*6e4}}}return{name:"xdr:spPr",children:[t,{name:"a:prstGeom",properties:{rawMap:{prst:"rect"}},children:[{name:"a:avLst"}]}]}},Fo=e=>{e.fitCell=!!e.fitCell||!e.width||!e.height;let{position:s={},fitCell:t,width:i=0,height:r=0,totalHeight:a,totalWidth:n}=e,{offsetX:o=0,offsetY:l=0,row:c=1,rowSpan:d=1,column:h=1,colSpan:p=1}=s;return{from:{row:c-1,col:h-1,offsetX:Lt(o),offsetY:Lt(l)},to:{row:c-1+(t?1:d-1),col:h-1+(t?1:p-1),offsetX:Lt(i+o),offsetY:Lt(r+l)},height:Lt(a||r),width:Lt(n||i)}},Eo=(e,s,t,i)=>({name:"xdr:pic",children:[wo(e,s+1),To(e,t+1),Ao(e,i)]}),Mo={getTemplate(e){let{sheetIndex:s}=e,t=mt.get(s),i=qt.get(s),r=t.map((a,n)=>{let o=Fo(a);return{name:"xdr:twoCellAnchor",properties:{rawMap:{editAs:"absolute"}},children:[Ea("from",o.from),Ea("to",o.to),Eo(a,n,i.get(a.id).index,o),{name:"xdr:clientData"}]}});return{name:"xdr:wsDr",properties:{rawMap:{"xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main","xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing"}},children:r}}},Po=Mo,Io={getTemplate(e){let{Id:s,Type:t,Target:i}=e;return{name:"Relationship",properties:{rawMap:{Id:s,Type:t,Target:i}}}}},Ro=Io,Do={getTemplate(e){let s=e.map(t=>Ro.getTemplate(t));return{name:"Relationships",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}},children:s}}},Zt=Do,Lo={getTemplate(e){return{name:"sst",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:e.size,uniqueCount:e.size}},children:go(e)}}},_o=Lo,ko=e=>{switch(e){case 1:return"thin";case 2:return"medium";case 3:return"thick";default:return"hair"}},Oo={None:"None",Dot:"Dotted",Dash:"Dashed",Double:"Double",DashDot:"DashDot",DashDotDot:"DashDotDot",SlantDashDot:"SlantDashDot",Continuous:"Continuous"},Go=["Dashed","DashDot","DashDotDot"],No={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinDiagStripe:"lightUp",ThinHorzCross:"lightGrid",ThinDiagCross:"lightTrellis",Gray125:"gray125",Gray0625:"gray0625"},Bo={Automatic:"general",Left:"left",Center:"center",Right:"right",Fill:"fill",Justify:"justify",CenterAcrossSelection:"centerContinuous",Distributed:"distributed",JustifyDistributed:"justify"},Vo={Automatic:void 0,Top:"top",Bottom:"bottom",Center:"center",Justify:"justify",Distributed:"distributed",JustifyDistributed:"justify"},Ho=e=>e?No[e]||e:"none",Je=e=>e==null?e:(e.charAt(0)==="#"&&(e=e.substring(1)),e.length===6?"FF"+e:e),Ls=(e,s)=>{if(!e)return"thin";let t=ko(s);if(e==="Continuous")return t;let i=Oo[e];return t==="medium"&&Go.some(r=>r===i)?`medium${i}`:`${i.charAt(0).toLowerCase()}${i.substring(1)}`},Uo=e=>Bo[e]||"general",zo=e=>Vo[e]||void 0,zt=e=>({name:"color",properties:{rawMap:{rgb:Je(e||"#000000")}}}),Ko={getTemplate(e){let{left:s,right:t,top:i,bottom:r,diagonal:a}=e,n=s?[zt(s.color)]:void 0,o=t?[zt(t.color)]:void 0,l=i?[zt(i.color)]:void 0,c=r?[zt(r.color)]:void 0,d=a?[zt(a.color)]:void 0;return{name:"border",children:[{name:"left",properties:{rawMap:{style:s&&s.style}},children:n},{name:"right",properties:{rawMap:{style:t&&t.style}},children:o},{name:"top",properties:{rawMap:{style:i&&i.style}},children:l},{name:"bottom",properties:{rawMap:{style:r&&r.style}},children:c},{name:"diagonal",properties:{rawMap:{style:a&&a.style}},children:d}]}}},Wo=Ko,jo={getTemplate(e){return{name:"borders",properties:{rawMap:{count:e.length}},children:e.map(s=>Wo.getTemplate(s))}}},$o=jo,Yo=e=>{let t=["Context","LeftToRight","RightToLeft"].indexOf(e);return Math.max(t,0)},qo={getTemplate(e){let{horizontal:s,indent:t,readingOrder:i,rotate:r,shrinkToFit:a,vertical:n,wrapText:o}=e;return{name:"alignment",properties:{rawMap:{horizontal:s&&Uo(s),indent:t,readingOrder:i&&Yo(i),textRotation:r,shrinkToFit:a,vertical:n&&zo(n),wrapText:o}}}}},Xo=qo,Zo={getTemplate(e){let s=e.protected===!1?0:1;return{name:"protection",properties:{rawMap:{hidden:e.hideFormula===!0?1:0,locked:s}}}}},Jo=Zo,Qo={getTemplate(e){let{alignment:s,borderId:t,fillId:i,fontId:r,numFmtId:a,protection:n,quotePrefix:o,xfId:l}=e,c=[];return s&&c.push(Xo.getTemplate(s)),n&&c.push(Jo.getTemplate(n)),{name:"xf",properties:{rawMap:{applyAlignment:s?1:void 0,applyProtection:n?1:void 0,applyBorder:t?1:void 0,applyFill:i?1:void 0,borderId:t,fillId:i,applyFont:r?1:void 0,fontId:r,applyNumberFormat:a?1:void 0,numFmtId:a,quotePrefix:o?1:void 0,xfId:l}},children:c.length?c:void 0}}},Xa=Qo,el={getTemplate(e){return{name:"cellStyleXfs",properties:{rawMap:{count:e.length}},children:e.map(s=>Xa.getTemplate(s))}}},tl=el,sl={getTemplate(e){let{builtinId:s,name:t,xfId:i}=e;return{name:"cellStyle",properties:{rawMap:{builtinId:s,name:t,xfId:i}}}}},il=sl,rl={getTemplate(e){return{name:"cellStyles",properties:{rawMap:{count:e.length}},children:e.map(s=>il.getTemplate(s))}}},al=rl,nl={getTemplate(e){return{name:"cellXfs",properties:{rawMap:{count:e.length}},children:e.map(s=>Xa.getTemplate(s))}}},ol=nl,ll={getTemplate(e){let{patternType:s,fgTheme:t,fgTint:i,fgRgb:r,bgRgb:a,bgIndexed:n}=e,o={name:"patternFill",properties:{rawMap:{patternType:s}}};return(t||i||r)&&(o.children=[{name:"fgColor",properties:{rawMap:{theme:t,tint:i,rgb:r}}}]),(n||a)&&(o.children||(o.children=[]),o.children.push({name:"bgColor",properties:{rawMap:{indexed:n,rgb:a}}})),{name:"fill",children:[o]}}},cl=ll,dl={getTemplate(e){return{name:"fills",properties:{rawMap:{count:e.length}},children:e.map(s=>cl.getTemplate(s))}}},hl=dl,ul={getTemplate(e){let{size:s,colorTheme:t,color:i="FF000000",fontName:r="Calibri",family:a,scheme:n,italic:o,bold:l,strikeThrough:c,outline:d,shadow:h,underline:p,verticalAlign:u}=e,g=[{name:"sz",properties:{rawMap:{val:s}}},{name:"color",properties:{rawMap:{theme:t,rgb:i}}},{name:"name",properties:{rawMap:{val:r}}}];return a&&g.push({name:"family",properties:{rawMap:{val:a}}}),n&&g.push({name:"scheme",properties:{rawMap:{val:n}}}),o&&g.push({name:"i"}),l&&g.push({name:"b"}),c&&g.push({name:"strike"}),d&&g.push({name:"outline"}),h&&g.push({name:"shadow"}),p&&g.push({name:"u",properties:{rawMap:{val:p}}}),u&&g.push({name:"vertAlign",properties:{rawMap:{val:u}}}),{name:"font",children:g}}},pl=ul,gl={getTemplate(e){return{name:"fonts",properties:{rawMap:{count:e.length}},children:e.map(s=>pl.getTemplate(s))}}},ml=gl;function fl(e){let s=e.split(/(\[[^\]]*\])/);for(let t=0;t<s.length;t++){let i=s[t];i.length&&(i.startsWith("[")||(i=i.replace(/\$/g,'"$"')),s[t]=se(i))}return s.join("")}var Cl={getTemplate(e){let{formatCode:s,numFmtId:t}=e;return s.length&&(s=fl(s)),{name:"numFmt",properties:{rawMap:{formatCode:s,numFmtId:t}}}}},vl=Cl,yl={getTemplate(e){return{name:"numFmts",properties:{rawMap:{count:e.length}},children:e.map(s=>vl.getTemplate(s))}}},Sl=yl,Gs,_t,Wt,jt,$t,Za,Ns,Ja,bi,Qa=(e,s)=>(e.indexOf("mixedStyle")!==-1&&s>1&&(e+=`_${s}`),e),en=()=>{Gs={base:0},_t=[],Wt=[{fontName:"Calibri",colorTheme:"1",family:"2",scheme:"minor"}],jt=[{patternType:"none"},{patternType:"gray125"}],$t=[{left:void 0,right:void 0,top:void 0,bottom:void 0,diagonal:void 0}],Za=[{borderId:0,fillId:0,fontId:0,numFmtId:0}],Ns=[{borderId:0,fillId:0,fontId:0,numFmtId:0,xfId:0}],Ja=[{builtinId:0,name:"Normal",xfId:0}]},bl=e=>{let s=Ho(e.pattern),t=Je(e.color),i=Je(e.patternColor),r=jt.findIndex(a=>{let{patternType:n,fgRgb:o,bgRgb:l}=a;return!(n!=s||o!=t||l!=i)});return r===-1&&(r=jt.length,jt.push({patternType:s,fgRgb:t,bgRgb:i})),r},wl=e=>{if(Aa[e])return Aa[e];let s=_t.findIndex(t=>t.formatCode===e);return s===-1?(s=_t.length+164,_t.push({formatCode:e,numFmtId:s})):s=_t[s].numFmtId,s},xl=e=>{let{borderBottom:s,borderTop:t,borderLeft:i,borderRight:r}=e,a,n,o,l,c,d,h,p;i&&(o=Ls(i.lineStyle,i.weight),h=Je(i.color)),r&&(l=Ls(r.lineStyle,r.weight),p=Je(r.color)),s&&(a=Ls(s.lineStyle,s.weight),c=Je(s.color)),t&&(n=Ls(t.lineStyle,t.weight),d=Je(t.color));let u=$t.findIndex(g=>{let{left:f,right:S,top:v,bottom:E}=g;if(!f&&(o||h)||!S&&(l||p)||!v&&(n||d)||!E&&(a||c))return!1;let{style:D,color:X}=f||{},{style:I,color:P}=S||{},{style:k,color:M}=v||{},{style:z,color:K}=E||{};return!(D!=o||X!=h||I!=l||P!=p||k!=n||M!=d||z!=a||K!=c)});return u===-1&&(u=$t.length,$t.push({left:{style:o,color:h},right:{style:l,color:p},top:{style:n,color:d},bottom:{style:a,color:c},diagonal:{style:void 0,color:void 0}})),u},Tl=e=>{let{fontName:s="Calibri",color:t,size:i,bold:r,italic:a,outline:n,shadow:o,strikeThrough:l,underline:c,family:d,verticalAlign:h}=e,p=Je(t),u=co(d),g=c?c.toLocaleLowerCase():void 0,f=h?h.toLocaleLowerCase():void 0,S=Wt.findIndex(v=>!(v.fontName!=s||v.color!=p||v.size!=i||v.bold!=r||v.italic!=a||v.outline!=n||v.shadow!=o||v.strikeThrough!=l||v.underline!=g||v.verticalAlign!=f||v.family!=u));return S===-1&&(S=Wt.length,Wt.push({fontName:s,color:p,size:i,bold:r,italic:a,outline:n,shadow:o,strikeThrough:l,underline:g,verticalAlign:f,family:u?.toString()})),S},Al=e=>{let{alignment:s,borders:t,font:i,interior:r,numberFormat:a,protection:n,quotePrefix:o}=e,{id:l}=e,c=0,d=0,h=0,p=0;l&&(l=Qa(l,bi),Gs[l]==null&&(r&&(c=bl(r)),t&&(d=xl(t)),i&&(h=Tl(i)),a&&(p=wl(a.format)),Gs[l]=Ns.length,Ns.push({alignment:s,borderId:d||0,fillId:c||0,fontId:h||0,numFmtId:p||0,protection:n,quotePrefix:o,xfId:0})))},Fl={getTemplate(e){let s=Sl.getTemplate(_t),t=ml.getTemplate(Wt.map(l=>N(L({},l),{size:l.size!=null?l.size:e}))),i=hl.getTemplate(jt),r=$o.getTemplate($t),a=tl.getTemplate(Za),n=ol.getTemplate(Ns),o=al.getTemplate(Ja);return en(),{name:"styleSheet",properties:{rawMap:{"mc:Ignorable":"x14ac x16r2 xr",xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision"}},children:[s,t,i,r,a,n,o,{name:"tableStyles",properties:{rawMap:{count:0,defaultPivotStyle:"PivotStyleLight16",defaultTableStyle:"TableStyleMedium2"}}}]}}},El=(e,s)=>Gs[Qa(e,s)]||0,Ml=(e,s)=>{bi=s,bi===1&&en(),e.forEach(Al)},Pl=Fl,Il={getTemplate(e,s){let{name:t,columns:i,rowRange:r,displayName:a,showRowStripes:n,showColumnStripes:o,showFilterButtons:l,highlightFirstColumn:c,highlightLastColumn:d}=e||{},h=!r||r[0]-r[1]===0;if(!e||!t||!Array.isArray(i)||!i.length||h)return{name:"table"};let p=i.map((E,D)=>({name:"filterColumn",properties:{rawMap:{colId:D.toString(),hiddenButton:l[D]?0:1}}})),u=`A${r[0]}`,g=`${pt(i.length)}${r[1]}`,f=`${u}:${g}`,S=`${s+1}`,v=s?`${a}_${S}`:a;return{name:"table",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"xr xr3","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision","xmlns:xr3":"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3",name:t,displayName:v,ref:f,totalsRowShown:0,id:S}},children:[{name:"autoFilter",properties:{rawMap:{ref:f}},children:p},{name:"tableColumns",properties:{rawMap:{count:i.length}},children:i.map((E,D)=>({name:"tableColumn",properties:{rawMap:{id:(D+1).toString(),name:po(E),dataCellStyle:"Normal"}}}))},{name:"tableStyleInfo",properties:{rawMap:{name:"TableStyleLight1",showFirstColumn:c?1:0,showLastColumn:d?1:0,showRowStripes:n?1:0,showColumnStripes:o?1:0}}}]}}},Rl=Il,Te=e=>{let[s,t,i,r]=e;return{name:`a:${s}`,children:[{name:`a:${t}`,properties:{rawMap:{val:i,lastClr:r}}}]}},Dl={getTemplate(){return{name:"a:clrScheme",properties:{rawMap:{name:"Office"}},children:[Te(["dk1","sysClr","windowText","000000"]),Te(["lt1","sysClr","window","FFFFFF"]),Te(["dk2","srgbClr","44546A"]),Te(["lt2","srgbClr","E7E6E6"]),Te(["accent1","srgbClr","4472C4"]),Te(["accent2","srgbClr","ED7D31"]),Te(["accent3","srgbClr","A5A5A5"]),Te(["accent4","srgbClr","FFC000"]),Te(["accent5","srgbClr","5B9BD5"]),Te(["accent6","srgbClr","70AD47"]),Te(["hlink","srgbClr","0563C1"]),Te(["folHlink","srgbClr","954F72"])]}}},Ll=Dl,m=e=>{let[s,t,i,r]=e;return{name:`a:${s}`,properties:{rawMap:{script:i,typeface:t,panose:r}}}},_l={getTemplate(){return{name:"a:fontScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:majorFont",children:[m(["latin","Calibri Light",void 0,"020F0302020204030204"]),m(["ea",""]),m(["cs",""]),m(["font","\u6E38\u30B4\u30B7\u30C3\u30AF Light","Jpan"]),m(["font","\uB9D1\uC740 \uACE0\uB515","Hang"]),m(["font","\u7B49\u7EBF Light","Hans"]),m(["font","\u65B0\u7D30\u660E\u9AD4","Hant"]),m(["font","Times New Roman","Arab"]),m(["font","Times New Roman","Hebr"]),m(["font","Tahoma","Thai"]),m(["font","Nyala","Ethi"]),m(["font","Vrinda","Beng"]),m(["font","Shruti","Gujr"]),m(["font","MoolBoran","Khmr"]),m(["font","Tunga","Knda"]),m(["font","Raavi","Guru"]),m(["font","Euphemia","Cans"]),m(["font","Plantagenet Cherokee","Cher"]),m(["font","Microsoft Yi Baiti","Yiii"]),m(["font","Microsoft Himalaya","Tibt"]),m(["font","MV Boli","Thaa"]),m(["font","Mangal","Deva"]),m(["font","Gautami","Telu"]),m(["font","Latha","Taml"]),m(["font","Estrangelo Edessa","Syrc"]),m(["font","Kalinga","Orya"]),m(["font","Kartika","Mlym"]),m(["font","DokChampa","Laoo"]),m(["font","Iskoola Pota","Sinh"]),m(["font","Mongolian Baiti","Mong"]),m(["font","Times New Roman","Viet"]),m(["font","Microsoft Uighur","Uigh"]),m(["font","Sylfaen","Geor"]),m(["font","Arial","Armn"]),m(["font","Leelawadee UI","Bugi"]),m(["font","Microsoft JhengHei","Bopo"]),m(["font","Javanese Text","Java"]),m(["font","Segoe UI","Lisu"]),m(["font","Myanmar Text","Mymr"]),m(["font","Ebrima","Nkoo"]),m(["font","Nirmala UI","Olck"]),m(["font","Ebrima","Osma"]),m(["font","Phagspa","Phag"]),m(["font","Estrangelo Edessa","Syrn"]),m(["font","Estrangelo Edessa","Syrj"]),m(["font","Estrangelo Edessa","Syre"]),m(["font","Nirmala UI","Sora"]),m(["font","Microsoft Tai Le","Tale"]),m(["font","Microsoft New Tai Lue","Talu"]),m(["font","Ebrima","Tfng"])]},{name:"a:minorFont",children:[m(["latin","Calibri",void 0,"020F0502020204030204"]),m(["ea",""]),m(["cs",""]),m(["font","\u6E38\u30B4\u30B7\u30C3\u30AF","Jpan"]),m(["font","\uB9D1\uC740 \uACE0\uB515","Hang"]),m(["font","\u7B49\u7EBF","Hans"]),m(["font","\u65B0\u7D30\u660E\u9AD4","Hant"]),m(["font","Arial","Arab"]),m(["font","Arial","Hebr"]),m(["font","Tahoma","Thai"]),m(["font","Nyala","Ethi"]),m(["font","Vrinda","Beng"]),m(["font","Shruti","Gujr"]),m(["font","DaunPenh","Khmr"]),m(["font","Tunga","Knda"]),m(["font","Raavi","Guru"]),m(["font","Euphemia","Cans"]),m(["font","Plantagenet Cherokee","Cher"]),m(["font","Microsoft Yi Baiti","Yiii"]),m(["font","Microsoft Himalaya","Tibt"]),m(["font","MV Boli","Thaa"]),m(["font","Mangal","Deva"]),m(["font","Gautami","Telu"]),m(["font","Latha","Taml"]),m(["font","Estrangelo Edessa","Syrc"]),m(["font","Kalinga","Orya"]),m(["font","Kartika","Mlym"]),m(["font","DokChampa","Laoo"]),m(["font","Iskoola Pota","Sinh"]),m(["font","Mongolian Baiti","Mong"]),m(["font","Arial","Viet"]),m(["font","Microsoft Uighur","Uigh"]),m(["font","Sylfaen","Geor"]),m(["font","Arial","Armn"]),m(["font","Leelawadee UI","Bugi"]),m(["font","Microsoft JhengHei","Bopo"]),m(["font","Javanese Text","Java"]),m(["font","Segoe UI","Lisu"]),m(["font","Myanmar Text","Mymr"]),m(["font","Ebrima","Nkoo"]),m(["font","Nirmala UI","Olck"]),m(["font","Ebrima","Osma"]),m(["font","Phagspa","Phag"]),m(["font","Estrangelo Edessa","Syrn"]),m(["font","Estrangelo Edessa","Syrj"]),m(["font","Estrangelo Edessa","Syre"]),m(["font","Nirmala UI","Sora"]),m(["font","Microsoft Tai Le","Tale"]),m(["font","Microsoft New Tai Lue","Talu"]),m(["font","Ebrima","Tfng"])]}]}}},kl=_l,De=(e,s,t)=>({name:`a:${e}`,properties:{rawMap:{val:s}},children:t}),gi=e=>{let[s,t,i,r,a,n]=e,o=[];return o.push(De("satMod",i)),r&&o.push(De("lumMod",r)),a&&o.push(De("tint",a)),n&&o.push(De("shade",n)),{name:"a:gs",properties:{rawMap:{pos:s}},children:[{name:"a:schemeClr",properties:{rawMap:{val:t}},children:o}]}},Bs=(e,s)=>({name:"a:solidFill",children:[De("schemeClr",e,s)]}),wi=e=>{let[s,t,i,r,a]=e,[n,o]=a;return{name:"a:gradFill",properties:{rawMap:{rotWithShape:s}},children:[{name:"a:gsLst",children:[gi(t),gi(i),gi(r)]},{name:"a:lin",properties:{rawMap:{ang:n,scaled:o}}}]}},mi=e=>{let[s,t,i,r]=e;return{name:"a:ln",properties:{rawMap:{w:s,cap:t,cmpd:i,algn:r}},children:[Bs("phClr"),De("prstDash","solid"),{name:"a:miter",properties:{rawMap:{lim:"800000"}}}]}},fi=e=>{let s=[];if(e){let[t,i,r,a,n]=e;s.push({name:"a:outerShdw",properties:{rawMap:{blurRad:t,dist:i,dir:r,algn:a,rotWithShape:n}},children:[De("srgbClr","000000",[De("alpha","63000")])]})}return{name:"a:effectStyle",children:[Object.assign({},{name:"a:effectLst"},s.length?{children:s}:{})]}},Ol=()=>({name:"a:fillStyleLst",children:[Bs("phClr"),wi(["1",["0","phClr","105000","110000","67000"],["50000","phClr","103000","105000","73000"],["100000","phClr","109000","105000","81000"],["5400000","0"]]),wi(["1",["0","phClr","103000","102000","94000"],["50000","phClr","110000","100000",void 0,"100000"],["100000","phClr","120000","99000",void 0,"78000"],["5400000","0"]])]}),Gl=()=>({name:"a:lnStyleLst",children:[mi(["6350","flat","sng","ctr"]),mi(["12700","flat","sng","ctr"]),mi(["19050","flat","sng","ctr"])]}),Nl=()=>({name:"a:effectStyleLst",children:[fi(),fi(),fi(["57150","19050","5400000","ctr","0"])]}),Bl=()=>({name:"a:bgFillStyleLst",children:[Bs("phClr"),Bs("phClr",[De("tint","95000"),De("satMod","170000")]),wi(["1",["0","phClr","150000","102000","93000","98000"],["50000","phClr","130000","103000","98000","90000"],["100000","phClr","120000",void 0,void 0,"63000"],["5400000","0"]])]}),Vl={getTemplate(){return{name:"a:fmtScheme",properties:{rawMap:{name:"Office"}},children:[Ol(),Gl(),Nl(),Bl()]}}},Hl=Vl,Ul={getTemplate(){return{name:"a:themeElements",children:[Ll.getTemplate(),kl.getTemplate(),Hl.getTemplate()]}}},zl=Ul,Kl={getTemplate(){return{name:"a:theme",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{a:"http://schemas.openxmlformats.org/drawingml/2006/main"}}],rawMap:{name:"Office Theme"}},children:[zl.getTemplate(),{name:"a:objectDefaults"},{name:"a:extraClrSchemeLst"}]}}},Wl=Kl,jl=()=>({name:"o:shapelayout",properties:{prefixedAttributes:[{prefix:"v:",map:{ext:"edit"}}]},children:[{name:"o:idmap",properties:{prefixedAttributes:[{prefix:"v:",map:{ext:"edit"}}],rawMap:{data:"1"}}}]}),$l=()=>({name:"v:stroke",properties:{rawMap:{joinstyle:"miter"}}}),Yl=e=>({name:"v:formulas",children:e.map(s=>({name:"v:f",properties:{rawMap:{eqn:s}}}))}),ql=()=>({name:"v:path",properties:{prefixedAttributes:[{prefix:"o:",map:{connecttype:"rect",extrusionok:"f"}}],rawMap:{gradientshapeok:"t"}}}),tn=e=>{let{aspectratio:s,rotation:t}=e||{},i={};return s&&(i.aspectratio="t"),t&&(i.rotation="t"),{name:"o:lock",properties:{prefixedAttributes:[{prefix:"v:",map:{ext:"edit"}}],rawMap:i}}};function Xl(e,s,t,i,r){return(e-s)/(t-s)*(r-i)+i}var Zl=(e,s)=>{let t,{recolor:i,brightness:r,contrast:a,id:n}=e;if(i&&(t={},(i==="Washout"||i==="Grayscale")&&(t.gain="19661f",t.blacklevel="22938f"),(i==="Black & White"||i==="Grayscale")&&(t.grayscale="t",i==="Black & White"&&(t.bilevel="t"))),!i||i==="Grayscale"){if(t||(t={}),a!=null&&a!==50){let o="1";a>=0&&(a<50?o=String(a/50):a<100?o=String(50/(100-a)):a===100&&(o="2147483647f")),t.gain=o}r!=null&&r!==50&&(t.blacklevel=Xl(r,0,100,-.5,.5).toString())}return{name:"v:imagedata",properties:{prefixedAttributes:[{prefix:"o:",map:{relid:`rId${s}`,title:n}}],rawMap:t}}},Jl=()=>{let e=["if lineDrawn pixelLineWidth 0","sum @0 1 0","sum 0 0 @1","prod @2 1 2","prod @3 21600 pixelWidth","prod @3 21600 pixelHeight","sum @0 0 1","prod @6 1 2","prod @7 21600 pixelWidth","sum @8 21600 0","prod @7 21600 pixelHeight","sum @10 21600 0"];return{name:"v:shapetype",properties:{prefixedAttributes:[{prefix:"o:",map:{spt:"75",preferrelative:"t"}}],rawMap:{coordsize:"21600,21600",filled:"f",id:"_x0000_t75",path:"m@4@5l@4@11@9@11@9@5xe",stroked:"f"}},children:[$l(),Yl(e),ql(),tn({aspectratio:!0})]}},Pa=e=>Math.floor((e??0)*.74999943307122),Ql=(e,s)=>{let{width:t=0,height:i=0,altText:r}=e,a=Pa(t),n=Pa(i);return{name:"v:shape",properties:{rawMap:{id:e.headerFooterPosition,"o:spid":"_x0000_s1025",style:`position: absolute; margin-left: 0; margin-top: 10in; margin-bottom: 0; margin-right: 0; width: ${a}pt; height: ${n}pt; z-index: ${s+1}`,type:"#_x0000_t75",alt:r}},children:[Zl(e,s+1),tn({rotation:!0})]}},ec={getTemplate(e){let s=Qe.get(e.sheetIndex)||[],t=[jl(),Jl(),...s.map((i,r)=>Ql(i,r))];return{name:"xml",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{v:"urn:schemas-microsoft-com:vml",o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel"}}]},children:t}}},tc=ec,sc={getTemplate(e,s){let t=(s+1).toString();return{name:"sheet",properties:{rawMap:{name:e,sheetId:t,"r:id":`rId${t}`}}}}},ic=sc,rc={getTemplate(e){return{name:"sheets",children:e.map((s,t)=>ic.getTemplate(s,t))}}},ac=rc,nc={getTemplate(e,s){return{name:"workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:[{name:"bookViews",children:[{name:"workbookView",properties:{rawMap:{activeTab:s}}}]},ac.getTemplate(e)]}}},oc=nc,lc=e=>Math.ceil((e-12)/7+1),cc={getTemplate(e){let{min:s,max:t,outlineLevel:i,s:r,width:a,hidden:n,bestFit:o}=e,l=1,c="0";return a>1&&(l=lc(a),c="1"),{name:"col",properties:{rawMap:{min:s,max:t,outlineLevel:i??void 0,width:l,style:r,hidden:n?"1":"0",bestFit:o?"1":"0",customWidth:c}}}}},dc=cc,hc={getTemplate(e){return{name:"mergeCell",properties:{rawMap:{ref:e}}}}},uc=hc,pc=e=>{let s=e.charAt(0).toLowerCase();return s==="s"?"inlineStr":s},gc={getTemplate(e,s,t){let{ref:i,data:r,styleId:a}=e,{type:n,value:o}=r||{type:"empty",value:null},l=n;n==="f"?l="str":n.charAt(0)===n.charAt(0).toUpperCase()&&(l=pc(n));let c={name:"c",properties:{rawMap:{r:i,t:l==="empty"?void 0:l,s:a?El(a,t):void 0}}};if(l==="empty")return c;let d;return l==="str"&&n==="f"?d=[{name:"f",textNode:se(Si(o),!1)}]:l==="inlineStr"?d=[{name:"is",children:[{name:"t",textNode:se(Si(o),!1)}]}]:d=[{name:"v",textNode:o}],Object.assign({},c,{children:d})}},mc=gc,fc=(e,s)=>{let t=[],i=0;for(let r=0;r<e.length;r++){let a=e[r];a.mergeAcross&&(t.push({pos:r,excelPos:i}),i+=a.mergeAcross),i++}if(t.length)for(let r=t.length-1;r>=0;r--){let a=[],n=e[t[r].pos];for(let o=1;o<=n.mergeAcross;o++)a.push({ref:`${pt(t[r].excelPos+1+o)}${s+1}`,styleId:n.styleId,data:{type:"empty",value:null}});a.length&&e.splice(t[r].pos+1,0,...a)}},Cc=e=>e.data?.value!==""||e.styleId!==void 0,vc={getTemplate(e,s,t){let{collapsed:i,hidden:r,height:a,outlineLevel:n,cells:o=[]}=e;fc(o,s);let l=o.filter(Cc).map((c,d)=>mc.getTemplate(c,d,t));return{name:"row",properties:{rawMap:{r:s+1,collapsed:i?"1":"0",hidden:r?"1":"0",ht:a,customHeight:a!=null?"1":"0",spans:"1:1",outlineLevel:n||void 0}},children:l}}},yc=vc,Sc=(e,s,t)=>{let i=[],r=[];e.forEach((o,l)=>{let c=o.cells,d=0,h;c.forEach((p,u)=>{let g=u+d+1,f=pt(g),S=l+1;if(p.mergeAcross){d+=p.mergeAcross;let E=pt(u+d+1);i.push(`${f}${S}:${E}${S}`)}s[g-1]||(s[g-1]={});let{collapsibleRanges:v}=p;v&&v.forEach(E=>{r.push([g+E[0],g+E[1]])}),h=s[g-1],h.min=g,h.max=g,p.ref=`${f}${S}`})}),r.sort((o,l)=>o[0]!==l[0]?o[0]-l[0]:l[1]-o[1]);let a=new Map,n=new Map;return r.filter(o=>{let l=o.toString();return a.get(l)?!1:(a.set(l,!0),!0)}).forEach(o=>{let l=s.find(d=>d.min==o[0]&&d.max==o[1]),c=n.get(o[0]);s.push({min:o[0],max:o[1],outlineLevel:t?void 0:c||1,width:(l||{width:100}).width}),n.set(o[0],(c||0)+1)}),i},bc=e=>!e||e!=="Portrait"&&e!=="Landscape"?"portrait":e.toLocaleLowerCase(),wc=e=>{if(e==null)return 1;let t=["Letter","Letter Small","Tabloid","Ledger","Legal","Statement","Executive","A3","A4","A4 Small","A5","A6","B4","B5","Folio","Envelope","Envelope DL","Envelope C5","Envelope B5","Envelope C3","Envelope C4","Envelope C6","Envelope Monarch","Japanese Postcard","Japanese Double Postcard"].indexOf(e);return t===-1?1:t+1},xc=e=>{let s={"&[Page]":"&P","&[Pages]":"&N","&[Date]":"&D","&[Time]":"&T","&[Tab]":"&A","&[Path]":"&Z","&[File]":"&F","&[Picture]":"&G"};for(let t of Object.keys(s))e=e.replace(t,s[t]);return e},Tc=e=>e==="Center"?"C":e==="Right"?"R":"L",Ac=(e,s)=>(s&&(e+="&amp;&quot;",e+=s.fontName||"Calibri",s.bold!==s.italic?e+=s.bold?",Bold":",Italic":s.bold?e+=",Bold Italic":e+=",Regular",e+="&quot;",s.size&&(e+=`&amp;${s.size}`),s.strikeThrough&&(e+="&amp;S"),s.underline&&(e+=`&amp;${s.underline==="Double"?"E":"U"}`),s.color&&(e+=`&amp;K${s.color.replace("#","").toUpperCase()}`)),e),Fc=(e,s,t)=>e.reduce((i,r,a)=>{let n=Tc(r.position),o=Ac(`${i}&amp;${n}`,r.font),l=["Left","Center","Right"];r.position||(r.position=l[a]);let{image:c}=r;if(r.value==="&[Picture]"&&c){let d=`${n}${s}${t}`;Xc(c,d)}return`${o}${se(xc(r.value))}`},""),Ec=e=>{let s=["all","first","even"],t=[];return s.forEach(i=>{let r=e[i],a=i==="all"?"odd":i;if(r)for(let n of Object.keys(r)){let o=r[n],l=`${n.charAt(0).toUpperCase()}${n.slice(1)}`,c=n[0].toUpperCase();if(o){let d=i==="all"?"":i.toUpperCase();t.push({name:`${a}${l}`,properties:{rawMap:{"xml:space":"preserve"}},textNode:Fc(o,c,d)})}}}),t},Mc=e=>s=>(e.length&&s.children.push({name:"cols",children:e.map(t=>dc.getTemplate(t))}),s),Pc=(e,s)=>t=>(e.length&&t.children.push({name:"sheetData",children:e.map((i,r)=>yc.getTemplate(i,r,s))}),t),Ic=e=>s=>(e.length&&s.children.push({name:"mergeCells",properties:{rawMap:{count:e.length}},children:e.map(t=>uc.getTemplate(t))}),s),Rc=e=>s=>{let{top:t=.75,right:i=.7,bottom:r=.75,left:a=.7,header:n=.3,footer:o=.3}=e;return s.children.push({name:"pageMargins",properties:{rawMap:{bottom:r,footer:o,header:n,left:a,right:i,top:t}}}),s},Dc=e=>s=>(e&&s.children.push({name:"pageSetup",properties:{rawMap:{horizontalDpi:0,verticalDpi:0,orientation:bc(e.orientation),paperSize:wc(e.pageSize)}}}),s),Lc=e=>s=>{if(!e)return s;let t=e.first!=null?1:0,i=e.even!=null?1:0;return s.children.push({name:"headerFooter",properties:{rawMap:{differentFirst:t,differentOddEven:i}},children:Ec(e)}),s},_c=e=>s=>(e&&s.children.push({name:"tableParts",properties:{rawMap:{count:"1"}},children:[{name:"tablePart",properties:{rawMap:{"r:id":`rId${++s.rIdCounter}`}}}]}),s),kc=e=>s=>(mt.get(e)?.length&&s.children.push({name:"drawing",properties:{rawMap:{"r:id":`rId${++s.rIdCounter}`}}}),s),Oc=e=>s=>(Qe.get(e)&&s.children.push({name:"legacyDrawingHF",properties:{rawMap:{"r:id":`rId${++s.rIdCounter}`}}}),s),Gc=(e=0,s=0)=>{let t=e>0||s>0;return t?[{name:"pane",properties:{rawMap:{state:t?"frozen":void 0,topLeftCell:t?`${pt(e+1)}${s+1}`:void 0,xSplit:e===0?void 0:e,ySplit:s===0?void 0:s}}}]:void 0},Nc=(e=!1,s,t)=>i=>(i.children.push({name:"sheetViews",children:[{name:"sheetView",properties:{rawMap:{rightToLeft:e===!0?"1":"0",workbookViewId:"0"}},children:Gc(s,t)}]}),i),Bc=()=>e=>(e.children.push({name:"sheetPr",children:[{name:"outlinePr",properties:{rawMap:{summaryBelow:0}}}]}),e),Vc=e=>s=>{let t=e.reduce((i,r)=>r.outlineLevel&&r.outlineLevel>i?r.outlineLevel:i,0);return s.children.push({name:"sheetFormatPr",properties:{rawMap:{baseColWidth:10,defaultRowHeight:16,outlineLevelRow:t||void 0}}}),s},Hc={getTemplate(e){let{worksheet:s,currentSheet:t,config:i}=e,{margins:r={},pageSetup:a,headerFooterConfig:n,suppressColumnOutline:o,rightToLeft:l,frozenRowCount:c,frozenColumnCount:d}=i,{table:h}=s,{rows:p,columns:u}=h,g=u&&u.length?Sc(p,u,!!o):[],f=Ue.get(t),{children:S}=[Bc(),Nc(l,d,c),Vc(p),Mc(u),Pc(p,t+1),Ic(g),Rc(r),Dc(a),Lc(n),kc(t),Oc(t),_c(f)].reduce((v,E)=>E(v),{children:[],rIdCounter:0});return{name:"worksheet",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:S}}},Uc=Hc,ut=new Map,He=[],gt=new Map,mt=new Map,Qe=new Map,Ot=new Map,qt=new Map,Ue=new Map,zc="AG-GRID-TABLE",Ei="SINGLE_SHEET";function Kc(){return Ei}function Wc(e){Ei=e}function jc(e,s,t){Jc(s),Ml(e,He.length);let i=Object.assign({},t);return t.exportAsExcelTable&&(t.colModel.isPivotActive()&&(Ia("pivot mode"),i.exportAsExcelTable=!1),t.gos.get("masterDetail")&&(Ia("master/detail"),i.exportAsExcelTable=!1)),qc(s,i),pd(s,i)}function Ia(e){b(163,{featureName:e})}function $c(e){return e.replace(/^[^a-zA-Z_]+/,"_").replace(/\s/g,"_").replace(/[^a-zA-Z0-9_]/g,"_")}function Yc(e,s){if(Ue.has(e)){b(164);return}Ue.set(e,s)}function qc(e,s){let{exportAsExcelTable:t,prependContent:i,appendContent:r,colModel:a}=s;if(!t)return;let n=typeof t=="boolean"?{}:t,{name:o,showColumnStripes:l,showRowStripes:c,showFilterButton:d,highlightFirstColumn:h,highlightLastColumn:p}=n,u=$c(o||zc),g=He.length-1,{table:f}=e,{rows:S,columns:v}=f,E=ca(a),D=i?i.length:0,X=r?r.length:0,I=S.length,P=v.length,k=[],M=[];for(let z=0;z<P;z++){let K=v[z];k.push(K.displayName||""),M.push(d==="match"||d===void 0?K.filterAllowed??!1:d)}if(!k||!k.length||!I||!u){b(165);return}Yc(g,{name:`table${Ue.size+1}`,displayName:u,columns:k,showFilterButtons:M,rowRange:[E+D,E+(I-E)-X],showRowStripes:c??!0,showColumnStripes:l??!1,highlightFirstColumn:h??!1,highlightLastColumn:p??!1})}function Xc(e,s){let t=He.length-1,i=e;i.headerFooterPosition=s,sn({imageToAdd:i,idx:t});let r=Qe.get(t);r||(r=[],Qe.set(t,r)),r.find(a=>a.id===e.id)||r.push(e)}function Zc(e,s,t,i,r){let a=He.length,{row:n,column:o}=e.position||{},l=e;i&&(s!=null&&t!=null&&(!n||!o)&&(e.position||(e.position={}),e.position=Object.assign({},e.position,{row:s,column:i.indexOf(t)+1})),ho(l,i),uo(l,r)),sn({imageToAdd:l,idx:a});let c=qt.get(a);c||(c=new Map,qt.set(a,c));let d=mt.get(a);d?d.push(l):mt.set(a,[l]),c.get(e.id)||c.set(e.id,{index:c.size,type:e.imageType})}function sn(e){let{imageToAdd:s,idx:t}=e,i=gt.get(s.id);if(i){let r=i.find(a=>a.sheetId===t);r?r.image.push(s):i.push({sheetId:t,image:[s]})}else gt.set(s.id,[{sheetId:t,image:[s]}]),Ot.set(s.id,{type:s.imageType,index:Ot.size})}function Jc(e){let s=se(e.name)||"",t="";for(;He.indexOf(`${s}${t}`)!==-1;)t===""?t="_1":t=`_${parseInt(t.slice(1),10)+1}`;e.name=`${s}${t}`,He.push(e.name)}function Ra(e){return ut.has(e)?ut.get(e):(ut.set(e,ut.size),ut.size-1)}function Da(){ut.clear(),gt.clear(),mt.clear(),Qe.clear(),Ot.clear(),qt.clear(),Ue.clear(),He=[],Ei="SINGLE_SHEET"}function Qc(e){return pe(oc.getTemplate(He,e))}function ed(e){return pe(Pl.getTemplate(e))}function td(){return pe(_o.getTemplate(ut))}function sd(e){return pe(So.getTemplate(e))}function id(e){return pe(vo.getTemplate(e))}function rd(){let e=Zt.getTemplate([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Target:"xl/workbook.xml"},{Id:"rId2",Type:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",Target:"docProps/core.xml"}]);return pe(e)}function ad(){return pe(Wl.getTemplate())}function nd(e,s){return pe(Rl.getTemplate(e,s))}function od(e){let s=new Array(e).fill(void 0).map((i,r)=>({Id:`rId${r+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:`worksheets/sheet${r+1}.xml`})),t=Zt.getTemplate([...s,{Id:`rId${e+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Target:"theme/theme1.xml"},{Id:`rId${e+2}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"},{Id:`rId${e+3}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}]);return pe(t)}function ld(e){return pe(Po.getTemplate({sheetIndex:e}))}function cd(e){let s=qt.get(e)||[],t=[];for(let[i,r]of s){let{index:a,type:n}=r;t.push({Id:`rId${a+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/image${Ot.get(i).index+1}.${zs(n)}`})}return pe(Zt.getTemplate(t))}function dd(e){return pe(tc.getTemplate({sheetIndex:e}),!0)}function hd(e){let s=Qe.get(e)||[],t=[];for(let i=0;i<s.length;i++){let r=s[i],a=Ot.get(r.id);if(!a)continue;let{index:n,type:o}=a;t.push({Id:`rId${i+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/image${n+1}.${zs(o)}`})}return pe(Zt.getTemplate(t))}function ud({drawingIndex:e,vmlDrawingIndex:s,tableName:t}={}){if(e===void 0&&s===void 0&&t===void 0)return"";let i=[];e!=null&&i.push({Id:`rId${i.length+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:`../drawings/drawing${e+1}.xml`}),s!=null&&i.push({Id:`rId${i.length+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",Target:`../drawings/vmlDrawing${s+1}.vml`}),t!=null&&i.push({Id:`rId${i.length+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table",Target:`../tables/${t}.xml`});let r=Zt.getTemplate(i);return pe(r)}function pd(e,s){return pe(Uc.getTemplate({worksheet:e,currentSheet:He.length-1,config:s}))}var gd=class extends Sa{constructor(e){super(e),this.mixedStyles={},this.mixedStyleCounter=0,this.rows=[],this.frozenRowCount=0,this.skipFrozenRows=!1,this.frozenColumnCount=0,this.skipFrozenColumns=!1,this.config=Object.assign({},e),this.stylesByIds={},this.config.baseExcelStyles.forEach(s=>{this.stylesByIds[s.id]=s}),this.excelStyles=[...this.config.baseExcelStyles,{id:"_quotePrefix",quotePrefix:1}]}addCustomContent(e){e.forEach(s=>{let t=this.rows.length+1,i;!this.config.suppressRowOutline&&s.outlineLevel!=null&&(i=s.outlineLevel);let r={height:ks(t,s.height||this.config.rowHeight),cells:(s.cells||[]).map((a,n)=>{let o=this.addImage(t,this.columnsToExport[n],a.data?.value),l=null;a.styleId&&(l=typeof a.styleId=="string"?[a.styleId]:a.styleId);let c=this.getStyleId(l);if(o)return this.createCell(c,this.getDataTypeForValue(o.value),o.value==null?"":o.value);let d=a.data?.value??"",h=this.getDataTypeForValue(d);return a.mergeAcross?this.createMergedCell(c,h,d,a.mergeAcross):this.createCell(c,h,d)}),outlineLevel:i};s.collapsed!=null&&(r.collapsed=s.collapsed),s.hidden!=null&&(r.hidden=s.hidden),this.rows.push(r)})}onNewHeaderGroupingRow(){let e=[],{freezeRows:s,headerRowHeight:t}=this.config;return this.rows.push({cells:e,height:ks(this.rows.length+1,t)}),s&&this.frozenRowCount++,{onColumn:(i,r,a,n,o)=>{let l=this.config.styleLinker({rowType:"HEADER_GROUPING",rowIndex:1,value:`grouping-${r}`,columnGroup:i});e.push(N(L({},this.createMergedCell(this.getStyleId(l),this.getDataTypeForValue("string"),r,n)),{collapsibleRanges:o}))}}}onNewHeaderRow(){let{freezeRows:e,headerRowHeight:s}=this.config;return e&&this.frozenRowCount++,this.onNewRow(this.onNewHeaderColumn,s)}onNewBodyRow(e){let{freezeRows:s,rowHeight:t}=this.config;this.skipFrozenRows||(s==="headersAndPinnedRows"&&e?.rowPinned==="top"?this.frozenRowCount++:typeof s=="function"?s(B(this.gos,{node:e}))?this.frozenRowCount++:this.skipFrozenRows=!0:this.skipFrozenRows=!0);let i=this.onNewRow(this.onNewBodyColumn,t);return e&&this.addRowOutlineIfNecessary(e),i}prepare(e){super.prepare(e),this.columnsToExport=[...e],this.cols=e.map((s,t)=>this.convertColumnToExcel(s,t))}parse(){let e=this.rows.reduce((r,a)=>Math.max(r,a.cells.length),0);for(;this.cols.length<e;)this.cols.push(this.convertColumnToExcel(null,this.cols.length+1));let{config:s}=this,t;if(s.sheetName!=null){let{sheetName:r}=s,a=typeof r=="function"?r(B(this.gos,{})):r;t=String(a).substring(0,31)}else t="ag-grid";let i={name:t,table:{columns:this.cols,rows:this.rows}};return this.createExcel(i)}addRowOutlineIfNecessary(e){let{gos:s,suppressRowOutline:t,rowGroupExpandState:i="expanded"}=this.config;if(s.get("groupHideOpenParents")||t||e.level==null)return;let a=e.footer?1:0,n=ce(this.rows),o=Math.min(e.level+a,7);if(n.outlineLevel=o,i==="expanded")return;let l=i==="collapsed";if(e.isExpandable()){let c=!l&&e.expanded;n.collapsed=!c}n.hidden=!!e.parent&&e.parent.level!==-1&&(l||this.isAnyParentCollapsed(e.parent))}isAnyParentCollapsed(e){for(;e&&e.level!==-1;){if(!e.expanded)return!0;e=e.parent}return!1}convertColumnToExcel(e,s){let t=this.config.columnWidth,r=(e?this.extractHeaderValue(e):void 0)??"",a=e?e.isFilterAllowed():!1;return t?typeof t=="number"?{width:t,displayName:r,filterAllowed:a}:{width:t({column:e,index:s}),displayName:r,filterAllowed:a}:e?{width:Math.max(e.getActualWidth(),75),displayName:r,filterAllowed:a}:{displayName:r,filterAllowed:a}}onNewHeaderColumn(e,s){return t=>{let i=this.extractHeaderValue(t),r=this.config.styleLinker({rowType:"HEADER",rowIndex:e,value:i,column:t});s.push(this.createCell(this.getStyleId(r),this.getDataTypeForValue("string"),i))}}onNewBodyColumn(e,s){let t=0,{freezeColumns:i,rightToLeft:r}=this.config;return(a,n,o)=>{if(t>0){t-=1;return}if(!this.skipFrozenColumns){let g=a.getPinned();i==="pinned"&&g&&(g===!0||g==="left")!==r?this.frozenColumnCount++:typeof i=="function"&&i(B(this.gos,{column:a}))?this.frozenColumnCount++:this.skipFrozenColumns=!0}let{value:l,valueFormatted:c}=this.extractRowCellValue(a,n,e,"excel",o),d=this.config.styleLinker({rowType:"BODY",rowIndex:e,value:l,column:a,node:o}),h=this.getStyleId(d),p=a.getColSpan(o),u=this.addImage(e,a,l);u?s.push(this.createCell(h,this.getDataTypeForValue(u.value),u.value==null?"":u.value)):p>1?(t=p-1,s.push(this.createMergedCell(h,this.getDataTypeForValue(l),l,p-1))):s.push(this.createCell(h,this.getDataTypeForValue(l),l,c))}}onNewRow(e,s){let t=[];return this.rows.push({cells:t,height:ks(this.rows.length+1,s)}),{onColumn:e.bind(this,this.rows.length,t)()}}createExcel(e){let{excelStyles:s,config:t}=this;return this.frozenColumnCount&&(t.frozenColumnCount=this.frozenColumnCount),this.frozenRowCount&&(t.frozenRowCount=this.frozenRowCount),jc(s,e,t)}getDataTypeForValue(e){return e===void 0?"empty":this.isNumerical(e)?"n":"s"}getTypeFromStyle(e,s){if(this.isFormula(s))return"f";if(e&&e.dataType)switch(e.dataType.toLocaleLowerCase()){case"formula":return"f";case"string":return"s";case"number":return"n";case"datetime":return"d";case"error":return"e";case"boolean":return"b";default:b(162,{id:e.id,dataType:e.dataType})}return null}addImage(e,s,t){if(!this.config.addImageToCell)return;let i=this.config.addImageToCell(e,s,t);if(i)return Zc(i.image,e,s,this.columnsToExport,this.config.rowHeight),i}createCell(e,s,t,i){let r=this.getStyleById(e);!r?.dataType&&s==="s"&&i!=null&&(t=i);let a=this.getTypeFromStyle(r,t)||s,{value:n,escaped:o}=this.getCellValue(a,t),l=[];return r&&l.push(e),o&&l.push("_quotePrefix"),e=this.getStyleId(l)||void 0,{styleId:e,data:{type:a,value:n}}}createMergedCell(e,s,t,i){let r=t??"";return{styleId:this.getStyleById(e)?e:void 0,data:{type:s,value:s==="s"?Ra(r).toString():t},mergeAcross:i}}getCellValue(e,s){let t=!1;if(s==null||e==="s"&&s==="")return{value:"",escaped:!1};if(e==="s")s&&s[0]==="'"&&(t=!0,s=s.slice(1)),s=Ra(s).toString();else if(e==="f")s=s.slice(1);else if(e==="n"){let i=Number(s);isNaN(i)?s="":s!==""&&(s=i.toString())}return{value:s,escaped:t}}getStyleId(e){if(!e||!e.length)return null;if(e.length===1)return e[0];let s=e.join("-");return this.mixedStyles[s]||this.addNewMixedStyle(e),this.mixedStyles[s].excelID}deepCloneObject(e){return JSON.parse(JSON.stringify(e))}addNewMixedStyle(e){this.mixedStyleCounter+=1;let s=`mixedStyle${this.mixedStyleCounter}`,t={};for(let r of e)for(let a of this.excelStyles)a.id===r&&Ss(t,this.deepCloneObject(a));t.id=s;let i=e.join("-");this.mixedStyles[i]={excelID:s,key:i,result:t},this.excelStyles.push(t),this.stylesByIds[s]=t}isFormula(e){return e==null?!1:this.config.autoConvertFormulas&&e.toString().startsWith("=")}isNumerical(e){return typeof e=="bigint"?!0:isFinite(e)&&e!==""&&!isNaN(parseFloat(e))}getStyleById(e){return e==null?null:this.stylesByIds[e]||null}},md=e=>et(void 0,null,function*(){let s=0,t=[],i=new WritableStream({write:n=>{t.push(n),s+=n.length}}),r=new ReadableStream({start:n=>{let o=new FileReader;o.onload=l=>{l.target?.result&&n.enqueue(l.target.result),n.close()},o.readAsArrayBuffer(e)}}),a=new window.CompressionStream("deflate-raw");return yield r.pipeThrough(a).pipeTo(i),{size:s,content:new Blob(t)}}),fd=e=>et(void 0,null,function*(){let s=new Blob([e]),{size:t,content:i}=yield md(s),r=new Uint8Array(yield i.arrayBuffer());return{size:t,content:r}}),Cd=e=>{let s=e.getHours();return s<<=6,s=s|e.getMinutes(),s<<=5,s=s|e.getSeconds()/2,s},vd=e=>{let s=e.getFullYear()-1980;return s<<=4,s=s|e.getMonth()+1,s<<=5,s=s|e.getDate(),s};function de(e,s){let t="";for(let i=0;i<s;i++)t+=String.fromCharCode(e&255),e>>>=8;return t}var La=e=>{if(!e.length)return 0;let s=-1,t=0,i=0,r=0;for(let a=0;a<e.length;a++)t=e[a],i=(s^t)&255,r=yd[i],s=s>>>8^r;return s^-1},_a=e=>e.length?La(typeof e=="string"?new TextEncoder().encode(e):e):0,yd=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function Sd(e){let s=String.fromCharCode;function t(h){let p=[];if(!h)return[];let u=h.length,g=0,f,S;for(;g<u;)f=h.charCodeAt(g++),f>=55296&&f<=56319&&g<u?(S=h.charCodeAt(g++),(S&64512)==56320?p.push(((f&1023)<<10)+(S&1023)+65536):(p.push(f),g--)):p.push(f);return p}function i(h){if(h>=55296&&h<=57343)throw Error(Er(255,{point:h}))}function r(h,p){return s(h>>p&63|128)}function a(h){if(!(h&4294967168))return s(h);let p="";return h&4294965248?h&4294901760?h&4292870144||(p=s(h>>18&7|240),p+=r(h,12),p+=r(h,6)):(i(h),p=s(h>>12&15|224),p+=r(h,6)):p=s(h>>6&31|192),p+=s(h&63|128),p}let n=t(e),o=n.length,l=-1,c,d="";for(;++l<o;)c=n[l],d+=a(c);return d}var rn=(e,s,t,i,r,a)=>{let{content:n,path:o,created:l}=e,c=Cd(l),d=vd(l),h=_a(r),p=a!==void 0?a:i,u=Sd(o),g=u!==o,f="";if(g){let D=de(1,1)+de(_a(u),4)+u;f="up"+de(D.length,2)+D}let S="\0"+(g?"\0\b":"\0\0")+de(s?8:0,2)+de(c,2)+de(d,2)+de(p?h:0,4)+de(a??i,4)+de(i,4)+de(u.length,2)+de(f.length,2),v="PK"+S+u+f,E="PK\0"+S+"\0\0\0\0\0\0"+(n?"\0\0\0\0":"\0\0\0")+de(t,4)+u+f;return{localFileHeader:Uint8Array.from(v,D=>D.charCodeAt(0)),centralDirectoryHeader:Uint8Array.from(E,D=>D.charCodeAt(0))}},an=e=>{let s;if(typeof e=="string"){let t=atob(e.split(";base64,")[1]);s=Uint8Array.from(t,i=>i.charCodeAt(0))}else s=e;return{size:s.length,content:s}},bd=(e,s)=>et(void 0,null,function*(){let{content:t}=e,{size:i,content:r}=t?an(t):{size:0,content:Uint8Array.from([])},a,n,o=!1;if(e.type==="file"&&r&&i>0){let d=yield fd(r);a=d.content,n=d.size,o=!0}let c=rn(e,o,s,i,r,n);return N(L({},c),{content:a||r,isCompressed:o})}),wd=(e,s)=>{let{content:t}=e,{content:i}=t?an(t):{content:Uint8Array.from([])},r=rn(e,!1,s,i.length,i,void 0);return N(L({},r),{content:i,isCompressed:!1})},xd=(e,s,t)=>{let i="PK\0\0\0\0"+de(e,2)+de(e,2)+de(s,4)+de(t,4)+"\0\0";return Uint8Array.from(i,r=>r.charCodeAt(0))},nn=class{constructor(){this.folders=[],this.files=[]}addFolders(e){e.forEach(this.addFolder.bind(this))}addFolder(e){this.folders.push({path:e,created:new Date,isBase64:!1,type:"folder"})}addFile(e,s,t=!1){this.files.push({path:e,created:new Date,content:t?s:new TextEncoder().encode(s),isBase64:t,type:"file"})}getZipFile(e="application/zip"){return et(this,null,function*(){let s=yield this.buildCompressedFileStream();return this.clearStream(),new Blob([s],{type:e})})}getUncompressedZipFile(e="application/zip"){let s=this.buildFileStream();return this.clearStream(),new Blob([s],{type:e})}clearStream(){this.folders=[],this.files=[]}packageFiles(e){let s=0,t=0;for(let c of e){let{localFileHeader:d,centralDirectoryHeader:h,content:p}=c;s+=d.length+p.length,t+=h.length}let i=new Uint8Array(s),r=new Uint8Array(t),a=0,n=0;for(let c of e){let{localFileHeader:d,centralDirectoryHeader:h,content:p}=c;i.set(d,a),a+=d.length,i.set(p,a),a+=p.length,r.set(h,n),n+=h.length}let o=xd(e.length,t,s),l=new Uint8Array(i.length+r.length+o.length);return l.set(i),l.set(r,i.length),l.set(o,i.length+r.length),l}buildCompressedFileStream(){return et(this,null,function*(){let e=[...this.folders,...this.files],s=[],t=0;for(let i of e){let r=yield bd(i,t),{localFileHeader:a,content:n}=r;s.push(r),t+=a.length+n.length}return this.packageFiles(s)})}buildFileStream(){let e=[...this.folders,...this.files],s=[],t=0;for(let i of e){let r=wd(i,t),{localFileHeader:a,content:n}=r;s.push(r),t+=a.length+n.length}return this.packageFiles(s)}},Td=e=>{if(e.addFolders(["_rels/","docProps/","xl/","xl/theme/","xl/_rels/","xl/worksheets/"]),!gt.size)return;e.addFolders(["xl/worksheets/_rels","xl/drawings/","xl/drawings/_rels","xl/media/"]);let s=0;gt.forEach(t=>{let i=t[0].image[0],{base64:r,imageType:a}=i;e.addFile(`xl/media/image${++s}.${zs(a)}`,r,!0)})},Ad=(e,s)=>{let t=0,i=0;for(let r=0;r<s.length;r++){let a=s[r];e.addFile(`xl/worksheets/sheet${r+1}.xml`,a,!1);let n=gt.size>0&&mt.has(r),o=Ue.size>0&&Ue.get(r),l=gt.size&&Qe.has(r);if(!n&&!o&&!l)continue;let c,d,h;n&&(Fd(e,r,t),d=t,t++),l&&(Ed(e,r,i),h=i,i++),o&&(c=o.name);let p=`xl/worksheets/_rels/sheet${r+1}.xml.rels`;e.addFile(p,ud({tableName:c,drawingIndex:d,vmlDrawingIndex:h}))}},Fd=(e,s,t)=>{let i="xl/drawings",r=`${i}/drawing${t+1}.xml`,a=`${i}/_rels/drawing${t+1}.xml.rels`;e.addFile(a,cd(s)),e.addFile(r,ld(s))},Ed=(e,s,t)=>{let i="xl/drawings",r=`${i}/vmlDrawing${t+1}.vml`,a=`${i}/_rels/vmlDrawing${t+1}.vml.rels`;e.addFile(r,dd(s)),e.addFile(a,hd(s))},Md=e=>{let s=Ue,t=Array.from(s.keys());for(let i=0;i<t.length;i++){let r=t[i],a=s.get(r);a&&e.addFile(`xl/tables/${a.name}.xml`,nd(a,i))}},Pd=(e,s,t,i,r)=>{e.addFile("xl/workbook.xml",Qc(r)),e.addFile("xl/styles.xml",ed(s)),e.addFile("xl/sharedStrings.xml",td()),e.addFile("xl/theme/theme1.xml",ad()),e.addFile("xl/_rels/workbook.xml.rels",od(i)),e.addFile("docProps/core.xml",sd(t)),e.addFile("[Content_Types].xml",id(i)),e.addFile("_rels/.rels",rd())},on=(e,s,t={})=>{if(!s||s.length===0)return b(159),Da(),!1;let{fontSize:i=11,author:r="AG Grid",activeTab:a=0}=t,n=s.length,o=Math.max(Math.min(a,n-1),0);return Td(e),Md(e),Ad(e,s),Pd(e,i,r,n,o),Da(),!0},ln=e=>{let{data:s,fontSize:t,author:i,activeSheetIndex:r}=e,a=e.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",n=new nn;return on(n,s,{author:i,fontSize:t,activeTab:r})?n.getZipFile(a):Promise.resolve(void 0)},ka=e=>{let{data:s,fontSize:t,author:i,activeSheetIndex:r}=e,a=e.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",n=new nn;if(on(n,s,{author:i,fontSize:t,activeTab:r}))return n.getUncompressedZipFile(a)},Id=e=>{let{fileName:s="export.xlsx"}=e;ln(e).then(t=>{if(t){let i=typeof s=="function"?s():s;pi(i,t)}})},Rd=class extends ya{constructor(){super(...arguments),this.beanName="excelCreator"}getMergedParams(e){let s=this.gos.get("defaultExcelExportParams");return Object.assign({},s,e)}export(e){if(this.isExportSuppressed()){b(160);return}let s=this.getMergedParams(e),i={data:[this.getData(s)],fontSize:s.fontSize,author:s.author,mimeType:s.mimeType};this.packageCompressedFile(i).then(r=>{if(r){let{fileName:a}=s,n=typeof a=="function"?a(B(this.gos,{})):a;pi(this.getFileName(n),r)}})}exportDataAsExcel(e){this.export(e)}getDataAsExcel(e){let s=this.getMergedParams(e),i={data:[this.getData(s)],fontSize:s.fontSize,author:s.author,mimeType:s.mimeType};return this.packageFile(i)}setFactoryMode(e){Wc(e)}getFactoryMode(){return Kc()}getSheetDataForExcel(e){let s=this.getMergedParams(e);return this.getData(s)}getMultipleSheetsAsExcel(e){return ka(e)}exportMultipleSheetsAsExcel(e){Id(e)}getDefaultFileExtension(){return"xlsx"}createSerializingSession(e){let{colModel:s,colNames:t,rowGroupColsSvc:i,valueSvc:r,gos:a}=this.beans,n=N(L({},e),{colModel:s,colNames:t,rowGroupColsSvc:i,valueSvc:r,gos:a,suppressRowOutline:e.suppressRowOutline||e.skipRowGroups,headerRowHeight:e.headerRowHeight||e.rowHeight,baseExcelStyles:a.get("excelStyles")||[],rightToLeft:e.rightToLeft??a.get("enableRtl"),styleLinker:this.styleLinker.bind(this)});return new gd(n)}styleLinker(e){let{rowType:s,rowIndex:t,value:i,column:r,columnGroup:a,node:n}=e,o=s==="HEADER",l=s==="HEADER_GROUPING",c=o?r:a,d=[],{gos:h,cellStyles:p}=this.beans;if(o||l)return d.push("header"),l&&d.push("headerGroup"),c&&(d=d.concat(Jr(c.getDefinition(),h,r||null,a||null))),d;let u=h.get("excelStyles"),g=["cell"];if(!u||!u.length)return g;let f=u.map(v=>v.id),S=r.getDefinition();return p?.processAllCellClasses(S,B(h,{value:i,data:n.data,node:n,colDef:S,column:r,rowIndex:t}),v=>{f.indexOf(v)>-1&&g.push(v)}),g.sort((v,E)=>f.indexOf(v)<f.indexOf(E)?-1:1)}isExportSuppressed(){return this.gos.get("suppressExcelExport")}packageCompressedFile(e){return ln(e)}packageFile(e){return ka(e)}},re="33.2.4",Le={moduleName:"EnterpriseCore",version:re,beans:[ao],icons:{accordionOpen:"tree-open",accordionClosed:"tree-closed",accordionIndeterminate:"tree-indeterminate",close:"cross",cancel:"cancel",maximize:"maximize",minimize:"minimize",columnDrag:"grip"},dependsOn:[]};var Dd=".ag-panel{background-color:var(--ag-panel-background-color);display:flex;flex-direction:column;overflow:hidden;position:relative}.ag-dialog{border:var(--ag-dialog-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dialog-shadow);position:absolute}.ag-panel-title-bar{align-items:center;background-color:var(--ag-panel-title-bar-background-color);border-bottom:var(--ag-panel-title-bar-border);color:var(--ag-panel-title-bar-text-color);cursor:default;display:flex;flex:none;font-weight:var(--ag-panel-title-bar-font-weight);height:var(--ag-header-height);padding:var(--ag-spacing) var(--ag-cell-horizontal-padding)}.ag-panel-title-bar-button{color:var(--ag-panel-title-bar-icon-color);cursor:pointer}:where(.ag-ltr) .ag-panel-title-bar-button{margin-left:calc(var(--ag-spacing)*2);margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-panel-title-bar-button{margin-left:var(--ag-spacing);margin-right:calc(var(--ag-spacing)*2)}.ag-panel-title-bar-title{flex:1 1 auto}.ag-panel-title-bar-buttons{display:flex}.ag-panel-content-wrapper{display:flex;flex:1 1 auto;overflow:hidden;position:relative}:where(.ag-dragging-fill-handle) .ag-dialog,:where(.ag-dragging-range-handle) .ag-dialog{opacity:.7;pointer-events:none}";function Ld(e){let s=e.cssIdentifier||"default";return{tag:"div",cls:`ag-panel ag-${s}-panel`,attrs:{tabindex:"-1"},children:[{tag:"div",ref:"eTitleBar",cls:`ag-panel-title-bar ag-${s}-panel-title-bar ag-unselectable`,children:[{tag:"span",ref:"eTitle",cls:`ag-panel-title-bar-title ag-${s}-panel-title-bar-title`},{tag:"div",ref:"eTitleBarButtons",cls:`ag-panel-title-bar-buttons ag-${s}-panel-title-bar-buttons`}]},{tag:"div",ref:"eContentWrapper",cls:`ag-panel-content-wrapper ag-${s}-panel-content-wrapper`}]}}var _d=class extends F{constructor(e){super(Ld(e)),this.config=e,this.closable=!0,this.eContentWrapper=T,this.eTitleBar=T,this.eTitleBarButtons=T,this.eTitle=T,this.registerCSS(Dd)}postConstruct(){let{component:e,closable:s,hideTitleBar:t,title:i,minWidth:r=250,width:a,minHeight:n=250,height:o,centered:l,popup:c,x:d,y:h}=this.config;this.positionableFeature=new Rt(this.getGui(),{minWidth:r,width:a,minHeight:n,height:o,centered:l,x:d,y:h,popup:c,calculateTopBuffer:()=>this.positionableFeature.getHeight()-this.getBodyHeight()}),this.createManagedBean(this.positionableFeature);let p=this.getGui();e&&this.setBodyComponent(e),t?j(this.eTitleBar,!1):(i&&this.setTitle(i),this.setClosable(s??this.closable)),this.addManagedElementListeners(this.eTitleBar,{mousedown:u=>{if(p.contains(u.relatedTarget)||p.contains(ve(this.beans))||this.eTitleBarButtons.contains(u.target)){u.preventDefault();return}let g=this.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");g&&g.focus()}}),!(c&&this.positionableFeature.isPositioned())&&(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")}renderComponent(){let e=this.getGui();e.focus(),this.close=()=>{e.parentElement.removeChild(e),this.destroy()}}getHeight(){return this.positionableFeature.getHeight()}setHeight(e){this.positionableFeature.setHeight(e)}getWidth(){return this.positionableFeature.getWidth()}setWidth(e){this.positionableFeature.setWidth(e)}setClosable(e){if(e!==this.closable&&(this.closable=e),e){let s=this.closeButtonComp=new F({tag:"div",cls:"ag-button"});this.createBean(s);let t=s.getGui(),i=w("close",this.beans);i.classList.add("ag-panel-title-bar-button-icon"),t.appendChild(i),this.addTitleBarButton(s),s.addManagedElementListeners(t,{click:this.onBtClose.bind(this)})}else if(this.closeButtonComp){let s=this.closeButtonComp.getGui();s.parentElement.removeChild(s),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}}setBodyComponent(e){e.setParentComponent(this),this.eContentWrapper.appendChild(e.getGui())}addTitleBarButton(e,s){let t=this.eTitleBarButtons,i=t.children,r=i.length;s==null&&(s=r),s=Math.max(0,Math.min(s,r)),e.addCssClass("ag-panel-title-bar-button");let a=e.getGui();s===0?t.insertAdjacentElement("afterbegin",a):s===r?t.insertAdjacentElement("beforeend",a):i[s-1].insertAdjacentElement("afterend",a),e.setParentComponent(this)}getBodyHeight(){return br(this.eContentWrapper)}getBodyWidth(){return wr(this.eContentWrapper)}setTitle(e){this.eTitle.innerText=e}onBtClose(){this.close()}destroy(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));let e=this.getGui();e&&wt(e)&&this.close(),super.destroy()}},kd=class extends _d{constructor(e){super(N(L({},e),{popup:!0})),this.isMaximizable=!1,this.isMaximized=!1,this.maximizeListeners=[],this.resizeListenerDestroy=null,this.lastPosition={x:0,y:0,width:0,height:0}}wireBeans(e){this.popupSvc=e.popupSvc}postConstruct(){let e=this.getGui(),{movable:s,resizable:t,maximizable:i,modal:r,postProcessPopupParams:a}=this.config;if(this.addCssClass("ag-dialog"),super.postConstruct(),a){let{type:n,eventSource:o,column:l,mouseEvent:c,rowNode:d}=a;this.popupSvc?.callPostProcessPopup(n,e,o,c,l,d)}if(this.tabGuardFeature=this.createManagedBean(new ga(this)),this.tabGuardFeature.initialiseTabGuard({isFocusableContainer:!0,onFocusIn:()=>{this.popupSvc?.bringPopupToFront(e)},onTabKeyDown:n=>{if(r)return;let o=n.shiftKey,l=xe(this.beans,e,!1,o);(!l||this.tabGuardFeature.getTabGuardCtrl().isTabGuard(l))&&ct(this.beans,o)&&n.preventDefault()}}),s&&this.setMovable(s),i&&this.setMaximizable(i),t&&this.setResizable(t),!this.config.modal){let n=this.beans.ctrlsSvc.get("gridCtrl");n.addFocusableContainer(this),this.addDestroyFunc(()=>n.removeFocusableContainer(this))}}setAllowFocus(e){this.tabGuardFeature.getTabGuardCtrl().setAllowFocus(e)}renderComponent(){let e=this.getGui(),{alwaysOnTop:s,modal:t,title:i,afterGuiAttached:r}=this.config,a=this.getLocaleTextFunc(),n=this.popupSvc?.addPopup({modal:t,eChild:e,closeOnEsc:!0,closedCallback:this.onClosed.bind(this),alwaysOnTop:s,ariaLabel:i||a("ariaLabelDialog","Dialog"),afterGuiAttached:r});n&&(this.close=n.hideFunc)}onClosed(e){this.destroy(),this.config.closedCallback?.(e)}toggleMaximize(){let e=this.positionableFeature.getPosition();if(this.isMaximized){let{x:s,y:t,width:i,height:r}=this.lastPosition;this.setWidth(i),this.setHeight(r),this.positionableFeature.offsetElement(s,t)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=e.x,this.lastPosition.y=e.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()}refreshMaximizeIcon(){j(this.maximizeIcon,!this.isMaximized),j(this.minimizeIcon,this.isMaximized)}clearMaximizebleListeners(){this.maximizeListeners.length&&(this.maximizeListeners.forEach(e=>e()),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)}destroy(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),super.destroy()}setResizable(e){this.positionableFeature.setResizable(e)}setMovable(e){this.positionableFeature.setMovable(e,this.eTitleBar)}setMaximizable(e){if(!e){this.clearMaximizebleListeners(),this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0);return}let s=this.eTitleBar;if(!s||e===this.isMaximizable)return;let t=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),t.addManagedElementListeners(t.getGui(),{click:this.toggleMaximize.bind(this)}),this.addTitleBarButton(t,0),this.maximizeListeners.push(...this.addManagedElementListeners(s,{dblclick:this.toggleMaximize.bind(this)})),[this.resizeListenerDestroy]=this.addManagedListeners(this.positionableFeature,{resize:()=>{this.isMaximized=!1,this.refreshMaximizeIcon()}})}buildMaximizeAndMinimizeElements(){let e=this.maximizeButtonComp=this.createBean(new F({tag:"div",cls:"ag-dialog-button"})),s=e.getGui();return this.maximizeIcon=w("maximize",this.beans),s.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=w("minimize",this.beans),s.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),e}};function Od(e){return{tag:"div",cls:`ag-virtual-list-viewport ag-${e}-virtual-list-viewport`,role:"presentation",children:[{tag:"div",ref:"eContainer",cls:`ag-virtual-list-container ag-${e}-virtual-list-container`}]}}var cn=class extends Ye{constructor(e){super(Od(e?.cssIdentifier||"default")),this.renderedRows=new Map,this.rowHeight=20,this.pageSize=-1,this.isScrolling=!1,this.isHeightFromTheme=!0,this.eContainer=T,this.awaitStableCallbacks=[];let{cssIdentifier:s="default",ariaRole:t="listbox",listName:i,moveItemCallback:r}=e||{};this.cssIdentifier=s,this.ariaRole=t,this.listName=i,this.moveItemCallback=r}wireBeans(e){this.environment=e.environment}postConstruct(){this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e),focusInnerElement:e=>this.focusInnerElement(e),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)}),this.refreshAriaProperties(),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanged.bind(this)})}onGridStylesChanged(e){e.listItemHeightChanged&&(this.rowHeight=this.getItemHeight(),this.refresh())}refreshAriaProperties(){let s=this.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),t=this.eContainer;be(t,this.model?.getRowCount()>0?this.ariaRole:"presentation"),ue(t,s)}addResizeObserver(){let e=()=>ri(this.beans,()=>this.drawVirtualRows()),s=ps(this.beans,this.getGui(),e);this.addDestroyFunc(s)}focusInnerElement(e){return this.focusRow(e?this.model.getRowCount()-1:0),!0}onFocusIn(e){let s=e.target;s.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=ur(s)-1)}onFocusOut(e){this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null)}handleKeyDown(e){let{key:s,shiftKey:t}=e;switch(s){case y.UP:case y.DOWN:{let i=s===y.UP;e.preventDefault(),t?this.moveItem(i):this.navigate(i)}break;case y.PAGE_HOME:case y.PAGE_END:case y.PAGE_UP:case y.PAGE_DOWN:this.navigateToPage(s)!==null&&e.preventDefault();break}}onTabKeyDown(e){je(e),this.forceFocusOutOfContainer(e.shiftKey)}getNextRow(e){if(this.lastFocusedRowIndex==null)return;let s=this.lastFocusedRowIndex+(e?-1:1);if(!(s<0||s>=this.model.getRowCount()))return s}moveItem(e){if(!this.moveItemCallback)return;let s=this.getComponentAt(this.lastFocusedRowIndex);s&&this.moveItemCallback(s,e)}navigate(e){let s=this.getNextRow(e);s!==void 0&&this.focusRow(s)}navigateToPage(e,s="focused"){let t=!1;s==="focused"&&(s=this.getLastFocusedRow(),t=!0);let i=this.model.getRowCount()-1,r=-1;return e===y.PAGE_HOME?r=0:e===y.PAGE_END?r=i:e===y.PAGE_DOWN?r=Math.min(s+this.pageSize,i):e===y.PAGE_UP&&(r=Math.max(s-this.pageSize,0)),r===-1?null:(t?this.focusRow(r):this.ensureIndexVisible(r),r)}getLastFocusedRow(){return this.lastFocusedRowIndex}focusRow(e){this.isScrolling||(this.isScrolling=!0,this.ensureIndexVisible(e),ri(this.beans,()=>{if(this.isScrolling=!1,!this.isAlive())return;let s=this.renderedRows.get(e);s&&s.eDiv.focus()}))}getComponentAt(e){let s=this.renderedRows.get(e);return s&&s.rowComponent}forEachRenderedRow(e){this.renderedRows.forEach((s,t)=>e(s.rowComponent,t))}getItemHeight(){return this.isHeightFromTheme?this.environment.getDefaultListItemHeight():this.rowHeight}ensureIndexVisible(e,s=!0){let t=this.model.getRowCount();if(typeof e!="number"||e<0||e>=t)return b(229,{index:e}),!1;let i=e*this.rowHeight,r=i+this.rowHeight,a=this.getGui(),n=a.scrollTop,o=a.offsetHeight,l=n+o,c=s?0:this.rowHeight,d=n>i+c,h=l<r-c;if(d)return a.scrollTop=i,!0;if(h){let p=r-o;return a.scrollTop=p,!0}return!1}setComponentCreator(e){this.componentCreator=e}setComponentUpdater(e){this.componentUpdater=e}getRowHeight(){return this.rowHeight}getScrollTop(){return this.getGui().scrollTop}setRowHeight(e){this.isHeightFromTheme=!1,this.rowHeight=e,this.refresh()}refresh(e){if(this.model==null||!this.isAlive())return;let s=this.model.getRowCount();this.eContainer.style.height=`${s*this.rowHeight}px`,this.refreshAriaProperties(),this.awaitStable(()=>{this.isAlive()&&(this.canSoftRefresh(e)?this.drawVirtualRows(!0):(this.clearVirtualRows(),this.drawVirtualRows()))})}awaitStable(e){if(this.awaitStableCallbacks.push(e),this.awaitStableCallbacks.length>1)return;let s=this.model.getRowCount();Fr(()=>this.eContainer.clientHeight>=s*this.rowHeight,()=>{if(!this.isAlive())return;let t=this.awaitStableCallbacks;this.awaitStableCallbacks=[],t.forEach(i=>i())})}canSoftRefresh(e){return!!(e&&this.renderedRows.size&&typeof this.model.areRowsEqual=="function"&&this.componentUpdater)}clearVirtualRows(){this.renderedRows.forEach((e,s)=>this.removeRow(s))}drawVirtualRows(e){if(!this.isAlive()||!this.model)return;let s=this.getGui(),t=s.scrollTop,i=t+s.offsetHeight;if(t===i)this.clearVirtualRows();else{let r=Math.floor(t/this.rowHeight),a=Math.floor(i/this.rowHeight);this.pageSize=Math.floor((i-t)/this.rowHeight),this.ensureRowsRendered(r,a,e)}}ensureRowsRendered(e,s,t){this.renderedRows.forEach((i,r)=>{(r<e||r>s)&&r!==this.lastFocusedRowIndex&&this.removeRow(r)}),t&&this.refreshRows();for(let i=e;i<=s;i++)this.renderedRows.has(i)||i<this.model.getRowCount()&&this.insertRow(i)}insertRow(e){let s=this.model.getRow(e),t=this.ariaRole==="tree"?"treeitem":"option",i=U({tag:"div",cls:`ag-virtual-list-item ag-${this.cssIdentifier}-virtual-list-item`,role:t,attrs:{tabindex:"-1"}});hs(i,this.model.getRowCount()),us(i,e+1),i.style.height=`${this.rowHeight}px`,i.style.top=`${this.rowHeight*e}px`;let r=this.componentCreator(s,i);r.addGuiEventListener("focusin",()=>this.lastFocusedRowIndex=e),i.appendChild(r.getGui()),this.renderedRows.has(e-1)?this.renderedRows.get(e-1).eDiv.insertAdjacentElement("afterend",i):this.renderedRows.has(e+1)?this.renderedRows.get(e+1).eDiv.insertAdjacentElement("beforebegin",i):this.eContainer.appendChild(i),this.renderedRows.set(e,{rowComponent:r,eDiv:i,value:s})}removeRow(e){let s=this.renderedRows.get(e);this.eContainer.removeChild(s.eDiv),this.destroyBean(s.rowComponent),this.renderedRows.delete(e)}refreshRows(){let e=this.model.getRowCount();this.renderedRows.forEach((s,t)=>{if(t>=e)this.removeRow(t);else{let i=this.model.getRow(t);this.model.areRowsEqual?.(s.value,i)?this.componentUpdater(i,s.rowComponent):this.removeRow(t)}})}addScrollListener(){this.addGuiEventListener("scroll",()=>this.drawVirtualRows(),{passive:!0})}setModel(e){this.model=e}getAriaElement(){return this.eContainer}destroy(){this.isAlive()&&(this.clearVirtualRows(),this.awaitStableCallbacks.length=0,super.destroy())}};var Ci="ag-list-item-hovered",Gd=class extends x{constructor(e,s,t){super(),this.comp=e,this.virtualList=s,this.params=t,this.currentDragValue=null,this.lastHoveredListItem=null}wireBeans(e){this.dragAndDrop=e.dragAndDrop}postConstruct(){this.addManagedListeners(this.params.eventSource,{[this.params.listItemDragStartEvent]:this.listItemDragStart.bind(this),[this.params.listItemDragEndEvent]:this.listItemDragEnd.bind(this)}),this.createDropTarget(),this.createAutoScrollService()}listItemDragStart(e){this.currentDragValue=this.params.getCurrentDragValue(e),this.moveBlocked=this.params.isMoveBlocked(this.currentDragValue)}listItemDragEnd(){window.setTimeout(()=>{this.currentDragValue=null,this.moveBlocked=!1},10)}createDropTarget(){let e={isInterestedIn:s=>s===this.params.dragSourceType,getIconName:()=>this.moveBlocked?"pinned":"move",getContainer:()=>this.comp.getGui(),onDragging:s=>this.onDragging(s),onDragStop:()=>this.onDragStop(),onDragLeave:()=>this.onDragLeave(),onDragCancel:()=>this.onDragCancel()};this.dragAndDrop?.addDropTarget(e)}createAutoScrollService(){let e=this.virtualList.getGui();this.autoScrollService=new ta({scrollContainer:e,scrollAxis:"y",getVerticalPosition:()=>e.scrollTop,setVerticalPosition:s=>e.scrollTop=s})}onDragging(e){if(!this.currentDragValue||this.moveBlocked)return;let s=this.getListDragItem(e),t=this.virtualList.getComponentAt(s.rowIndex);if(!t)return;let i=t.getGui().parentElement;this.lastHoveredListItem&&this.lastHoveredListItem.rowIndex===s.rowIndex&&this.lastHoveredListItem.position===s.position||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredListItem=s,si(i,Ci),si(i,`ag-item-highlight-${s.position}`))}getListDragItem(e){let s=this.virtualList.getGui(),t=parseFloat(window.getComputedStyle(s).paddingTop),i=this.virtualList.getRowHeight(),r=this.virtualList.getScrollTop(),a=Math.max(0,(e.y-t+r)/i),n=this.params.getNumRows(this.comp)-1,o=Math.min(n,a)|0;return{rowIndex:o,position:Math.round(a)>a||a>n?"bottom":"top",component:this.virtualList.getComponentAt(o)}}onDragStop(){this.moveBlocked||(this.params.moveItem(this.currentDragValue,this.lastHoveredListItem),this.clearDragProperties())}onDragCancel(){this.clearDragProperties()}onDragLeave(){this.clearDragProperties()}clearDragProperties(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()}clearHoveredItems(){this.virtualList.getGui().querySelectorAll(`.${Ci}`).forEach(s=>{[Ci,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach(t=>{s.classList.remove(t)})}),this.lastHoveredListItem=null}};function Nd(e){return e.sideBar?.comp.isDisplayed()??!1}function Bd(e,s){e.sideBar?.comp.setDisplayed(s)}function Vd(e,s){e.sideBar?.comp.setSideBarPosition(s)}function Hd(e,s){e.sideBar?.comp.openToolPanel(s,"api")}function Ud(e){e.sideBar?.comp.close("api")}function zd(e){return e.sideBar?.comp.openedItem()??null}function Kd(e){e.sideBar?.comp.refresh()}function Wd(e){return e.sideBar?.comp.isToolPanelShowing()??!1}function jd(e,s){let t=e.sideBar?.comp.getToolPanelInstance(s);return Xr(t)}function $d(e){return e.sideBar?.comp.getDef()}function xi(e,s){if(!s)return null;let t=xs(e),i=t.indexOf(s);if(i===-1)return null;let r=-1;for(let a=i-1;a>=0;a--)if(t[a].classList.contains(pa.TAB_GUARD_TOP)){r=a;break}return r<=0?null:t[r-1]}function dn(e,s){if(!s)return!1;let t=e.querySelectorAll(`.${la}`);if(!t.length)return!1;for(let i=0;i<t.length;i++)if(t[i].contains(s))return!0;return!1}var Yd='.ag-tool-panel-wrapper{display:flex;overflow:hidden auto;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-side-bar-panel-width)}.ag-select-agg-func-item{align-items:center;display:flex;flex:1 1 auto;flex-flow:row nowrap;height:100%;overflow:hidden;position:relative;text-overflow:ellipsis;white-space:nowrap;>*{flex:none}}.ag-tool-panel-horizontal-resize{cursor:ew-resize;height:100%;position:absolute;top:0;width:5px;z-index:1}.ag-side-bar{background-color:var(--ag-side-bar-background-color);display:flex;flex-direction:row-reverse;position:relative}:where(.ag-ltr) :where(.ag-side-bar-left) .ag-tool-panel-horizontal-resize{right:-3px}:where(.ag-rtl) :where(.ag-side-bar-left) .ag-tool-panel-horizontal-resize{left:-3px}:where(.ag-ltr) :where(.ag-side-bar-right) .ag-tool-panel-horizontal-resize{left:-3px}:where(.ag-rtl) :where(.ag-side-bar-right) .ag-tool-panel-horizontal-resize{right:-3px}.ag-side-bar-left{flex-direction:row;order:-1}.ag-side-buttons{background-color:var(--ag-side-button-bar-background-color);padding-top:var(--ag-side-button-bar-top-padding);position:relative}.ag-side-button{background-color:var(--ag-side-button-background-color);border-bottom:var(--ag-side-button-border);border-top:var(--ag-side-button-border);color:var(--ag-side-button-text-color);margin-top:-1px;position:relative;&:before{background-color:transparent;bottom:0;content:"";display:block;position:absolute;top:0;transition:background-color var(--ag-side-button-selected-underline-transition-duration);width:var(--ag-side-button-selected-underline-width)}&:hover{background-color:var(--ag-side-button-hover-background-color);color:var(--ag-side-button-hover-text-color)}&.ag-selected{background-color:var(--ag-side-button-selected-background-color);border-bottom:var(--ag-side-button-selected-border);border-top:var(--ag-side-button-selected-border);color:var(--ag-side-button-selected-text-color);&:before{background-color:var(--ag-side-button-selected-underline-color)}}}:where(.ag-ltr) .ag-side-button{&:before{left:0}}:where(.ag-rtl) .ag-side-button{&:before{right:0}}.ag-side-button-button{align-items:center;display:flex;flex-direction:column;gap:var(--ag-spacing);position:relative;white-space:nowrap;width:100%;&:focus{box-shadow:none}}:where(.ag-ltr) .ag-side-button-button{padding:var(--ag-side-button-vertical-padding) var(--ag-side-button-right-padding) var(--ag-side-button-vertical-padding) var(--ag-side-button-left-padding)}:where(.ag-rtl) .ag-side-button-button{padding:var(--ag-side-button-vertical-padding) var(--ag-side-button-left-padding) var(--ag-side-button-vertical-padding) var(--ag-side-button-right-padding)}.ag-side-button-button:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-side-button-label{writing-mode:vertical-lr}@media (resolution <= 1.5x){.ag-side-button-label{font-family:"Segoe UI",var(--ag-font-family)}:where(.ag-ltr) .ag-side-button-label{transform:rotate(.05deg)}:where(.ag-rtl) .ag-side-button-label{transform:rotate(-.05deg)}}:where(.ag-ltr) .ag-side-bar-left,:where(.ag-rtl) .ag-side-bar-right{border-right:var(--ag-side-panel-border);:where(.ag-tool-panel-wrapper){border-left:var(--ag-side-panel-border)}}:where(.ag-ltr) .ag-side-bar-right,:where(.ag-rtl) .ag-side-bar-left{border-left:var(--ag-side-panel-border);:where(.ag-tool-panel-wrapper){border-right:var(--ag-side-panel-border)}}',qd={tag:"div",cls:"ag-side-button",role:"presentation",children:[{tag:"button",ref:"eToggleButton",cls:"ag-button ag-side-button-button",role:"tab",attrs:{type:"button",tabindex:"-1","aria-expanded":"false"},children:[{tag:"div",ref:"eIconWrapper",cls:"ag-side-button-icon-wrapper",attrs:{"aria-hidden":"true"}},{tag:"span",ref:"eLabel",cls:"ag-side-button-label"}]}]},Xd=class extends F{constructor(e){super(),this.toolPanelDef=e,this.eToggleButton=T,this.eIconWrapper=T,this.eLabel=T}getToolPanelId(){return this.toolPanelDef.id}postConstruct(){this.setTemplate(qd,[]),this.setLabel(),this.setIcon(),this.addManagedElementListeners(this.eToggleButton,{click:this.onButtonPressed.bind(this)}),this.eToggleButton.setAttribute("id",`ag-${this.getCompId()}-button`)}setLabel(){let e=this.getLocaleTextFunc(),s=this.toolPanelDef,t=e(s.labelKey,s.labelDefault);this.eLabel.innerText=t}setIcon(){this.eIconWrapper.insertAdjacentElement("afterbegin",w(this.toolPanelDef.iconKey,this.beans))}onButtonPressed(){this.dispatchLocalEvent({type:"toggleButtonClicked"})}setSelected(e){this.addOrRemoveCssClass("ag-selected",e),we(this.eToggleButton,e)}},Zd={tag:"div",cls:"ag-side-buttons",role:"tablist"},Jd=class extends F{constructor(){super(Zd),this.buttonComps=[]}postConstruct(){this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){if(!(e.key!==y.TAB||!e.shiftKey)){if(ct(this.beans,!0)){e.preventDefault();return}je(e)}}setActiveButton(e){this.buttonComps.forEach(s=>{s.setSelected(e===s.getToolPanelId())})}addButtonComp(e){let s=this.createBean(new Xd(e));return this.buttonComps.push(s),this.appendChild(s),s.addEventListener("toggleButtonClicked",()=>{this.dispatchLocalEvent({type:"sideBarButtonClicked",toolPanelId:e.id})}),s}clearButtons(){this.buttonComps=this.destroyBeans(this.buttonComps),Ge(this.getGui()),super.destroy()}destroy(){this.clearButtons(),super.destroy()}},Qd={selector:"AG-SIDE-BAR-BUTTONS",component:Jd},hn={id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columnsToolPanel",toolPanel:"agColumnsToolPanel"},un={id:"filters",labelDefault:"Filters",labelKey:"filters",iconKey:"filtersToolPanel",toolPanel:"agFiltersToolPanel"},Vs={columns:hn,filters:un};function Ti(e){if(!e)return;if(e===!0)return{toolPanels:[hn,un],defaultToolPanel:"columns"};if(typeof e=="string")return Ti([e]);if(Array.isArray(e)){let t=[];return e.forEach(i=>{let r=Vs[i];if(!r){b(215,{key:i,defaultByKey:Vs});return}t.push(r)}),t.length===0?void 0:{toolPanels:t,defaultToolPanel:t[0].id}}return{toolPanels:eh(e.toolPanels),defaultToolPanel:e.defaultToolPanel,hiddenByDefault:e.hiddenByDefault,position:e.position}}function eh(e){let s=[];return e&&e.forEach(t=>{let i=null;if(typeof t=="string"){let r=Vs[t];if(!r){b(215,{key:t,defaultByKey:Vs});return}i=r}else i=t;s.push(i)}),s}var th=class extends F{constructor(){super({tag:"div",cls:"ag-tool-panel-horizontal-resize"}),this.minWidth=100,this.maxWidth=null}postConstruct(){let e=this.beans.horizontalResizeSvc.addResizeBar({eResizeBar:this.getGui(),dragStartPixels:1,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this),onResizeEnd:this.onResizeEnd.bind(this)});this.addDestroyFunc(e),this.inverted=this.gos.get("enableRtl")}dispatchResizeEvent(e,s,t){this.eventSvc.dispatchEvent({type:"toolPanelSizeChanged",width:t,started:e,ended:s})}onResizeStart(){this.startingWidth=this.elementToResize.offsetWidth,this.dispatchResizeEvent(!0,!1,this.startingWidth)}onResizeEnd(e){return this.onResizing(e,!0)}onResizing(e,s=!1){let t=this.inverted?-1:1,i=Math.max(this.minWidth,Math.floor(this.startingWidth-e*t));this.maxWidth!=null&&(i=Math.min(this.maxWidth,i)),this.elementToResize.style.width=`${i}px`,this.dispatchResizeEvent(!1,s,i)}};function sh(e,s,t){return e.getCompDetails(s,ih,void 0,t,!0)}var ih={name:"toolPanel",optionalMethods:["refresh","getState"]},rh={tag:"div",cls:"ag-tool-panel-wrapper",role:"tabpanel"},ah=class extends F{constructor(){super(rh)}postConstruct(){let e=this.getGui(),s=this.resizeBar=this.createManagedBean(new th);e.setAttribute("id",`ag-${this.getCompId()}`),s.elementToResize=e,this.appendChild(s)}getToolPanelId(){return this.toolPanelId}setToolPanelDef(e,s){let{id:t,minWidth:i,maxWidth:r,width:a}=e;this.toolPanelId=t,this.width=a;let n=sh(this.beans.userCompFactory,e,s);if(n==null)return!1;let o=n.newAgStackInstance();this.params=n.params,o.then(this.setToolPanelComponent.bind(this));let l=this.resizeBar;return i!=null&&(l.minWidth=i),r!=null&&(l.maxWidth=r),!0}setToolPanelComponent(e){this.toolPanelCompInstance=e,this.appendChild(e.getGui()),this.addDestroyFunc(()=>{this.destroyBean(e)});let s=this.width;s&&(this.getGui().style.width=`${s}px`)}getToolPanelInstance(){return this.toolPanelCompInstance}setResizerSizerSide(e){let s=this.gos.get("enableRtl"),t=e==="left",i=s?t:!t;this.resizeBar.inverted=i}refresh(){this.toolPanelCompInstance?.refresh(this.params)}},nh={tag:"div",cls:"ag-side-bar ag-unselectable",children:[{tag:"ag-side-bar-buttons",ref:"sideBarButtons"}]},oh=class extends F{constructor(){super(nh,[Qd]),this.sideBarButtons=T,this.toolPanelWrappers=[],this.registerCSS(Yd)}postConstruct(){this.sideBarButtons.addEventListener("sideBarButtonClicked",this.onToolPanelButtonClicked.bind(this));let{beans:e,gos:s}=this,{sideBar:t}=s.get("initialState")??{};this.setSideBarDef({sideBarDef:Ti(s.get("sideBar")),sideBarState:t}),this.addManagedPropertyListener("sideBar",this.onSideBarUpdated.bind(this)),e.sideBar.comp=this;let i=this.getFocusableElement();this.createManagedBean(new Ts(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)})),Qr(e,this,i)}onTabKeyDown(e){if(e.defaultPrevented)return;let{beans:s,sideBarButtons:t}=this,i=this.getGui(),r=t.getGui(),a=ve(s),n=i.querySelector(".ag-tool-panel-wrapper:not(.ag-hidden)"),o=e.target,l=e.shiftKey;if(!n)return ct(s,l)?(e.preventDefault(),!0):ct(s,l,!0);if(r.contains(a)){ye(n,l)&&e.preventDefault();return}if(!l)return;let c=null;n.contains(a)?c=xe(s,n,void 0,!0):dn(n,o)&&l&&(c=xi(n,o)),c||(c=r.querySelector(".ag-selected button")),c&&c!==e.target&&(e.preventDefault(),c.focus())}handleKeyDown(e){let s=ve(this.beans),t=this.sideBarButtons;if(!t.getGui().contains(s))return;let i=t.getGui(),r=Array.prototype.slice.call(i.querySelectorAll(".ag-side-button")),a=r.findIndex(l=>l.contains(s)),n=null;switch(e.key){case y.LEFT:case y.UP:n=Math.max(0,a-1);break;case y.RIGHT:case y.DOWN:n=Math.min(a+1,r.length-1);break}if(n===null)return;let o=r[n].querySelector("button");o&&(o.focus(),e.preventDefault())}onToolPanelButtonClicked(e){let s=e.toolPanelId;this.openedItem()===s?this.openToolPanel(void 0,"sideBarButtonClicked"):this.openToolPanel(s,"sideBarButtonClicked")}clearDownUi(){this.sideBarButtons.clearButtons(),this.destroyToolPanelWrappers()}setSideBarDef({sideBarDef:e,sideBarState:s,existingToolPanelWrappers:t}){if(this.setDisplayed(!1),this.sideBar=e,e&&e.toolPanels){let i=e.toolPanels;if(this.createToolPanelsAndSideButtons(i,s,t),!this.toolPanelWrappers.length)return;let r=s?s.visible:!e.hiddenByDefault;if(this.setDisplayed(r),this.setSideBarPosition(s?s.position:e.position),r)if(s){let{openToolPanel:a}=s;a&&this.openToolPanel(a,"sideBarInitializing")}else this.openToolPanel(e.defaultToolPanel,"sideBarInitializing")}}getDef(){return this.sideBar}setSideBarPosition(e){e||(e="right"),this.position=e;let s=e==="left",t=s?"right":"left";return this.addOrRemoveCssClass("ag-side-bar-left",s),this.addOrRemoveCssClass("ag-side-bar-right",!s),this.toolPanelWrappers.forEach(i=>{i.setResizerSizerSide(t)}),this.dispatchSideBarUpdated(),this}setDisplayed(e,s){super.setDisplayed(e,s),this.dispatchSideBarUpdated()}getState(){let e={};return this.toolPanelWrappers.forEach(s=>{e[s.getToolPanelId()]=s.getToolPanelInstance()?.getState?.()}),{visible:this.isDisplayed(),position:this.position,openToolPanel:this.openedItem(),toolPanels:e}}createToolPanelsAndSideButtons(e,s,t){for(let i of e)this.createToolPanelAndSideButton(i,s?.toolPanels?.[i.id],t?.[i.id])}validateDef(e){return e.id==null?(b(212),!1):e.toolPanel==="agFiltersToolPanel"&&this.beans.filterManager?.isAdvFilterEnabled()?(b(213),!1):!0}createToolPanelAndSideButton(e,s,t){if(!this.validateDef(e))return;let i;if(t)i=t;else if(i=this.createBean(new ah),!i.setToolPanelDef(e,B(this.gos,{initialState:s,onStateUpdated:()=>this.dispatchSideBarUpdated()})))return;i.setDisplayed(!1);let r=i.getGui();this.appendChild(r),this.toolPanelWrappers.push(i);let a=this.sideBarButtons.addButtonComp(e);vr(a.eToggleButton,r)}refresh(){this.toolPanelWrappers.forEach(e=>e.refresh())}openToolPanel(e,s="api"){let t=this.openedItem();if(t===e)return;this.toolPanelWrappers.forEach(a=>{let n=e===a.getToolPanelId();a.setDisplayed(n)});let i=this.openedItem();t!==i&&(this.sideBarButtons.setActiveButton(e),this.raiseToolPanelVisibleEvent(e,t??void 0,s))}getToolPanelInstance(e){let s=this.toolPanelWrappers.filter(t=>t.getToolPanelId()===e)[0];if(!s){b(214,{key:e});return}return s.getToolPanelInstance()}raiseToolPanelVisibleEvent(e,s,t){let i=!!e&&!!s,r=this.eventSvc;s&&r.dispatchEvent({type:"toolPanelVisibleChanged",source:t,key:s,visible:!1,switchingToolPanel:i}),e&&r.dispatchEvent({type:"toolPanelVisibleChanged",source:t,key:e,visible:!0,switchingToolPanel:i})}close(e="api"){this.openToolPanel(void 0,e)}isToolPanelShowing(){return!!this.openedItem()}openedItem(){let e=null;return this.toolPanelWrappers.forEach(s=>{s.isDisplayed()&&(e=s.getToolPanelId())}),e}onSideBarUpdated(){let e=Ti(this.gos.get("sideBar")),s={};e&&this.sideBar&&e.toolPanels?.forEach(t=>{let{id:i}=t;if(!i)return;let r=this.sideBar.toolPanels?.find(l=>l.id===i);if(!r||t.toolPanel!==r.toolPanel)return;let a=this.toolPanelWrappers.find(l=>l.getToolPanelId()===i);if(!a)return;let n=B(this.gos,N(L({},t.toolPanelParams??{}),{onStateUpdated:()=>this.dispatchSideBarUpdated()}));a.getToolPanelInstance()?.refresh(n)===!0&&(this.toolPanelWrappers=this.toolPanelWrappers.filter(l=>l!==a),ii(a.getGui()),s[i]=a)}),this.clearDownUi(),this.setSideBarDef({sideBarDef:e,existingToolPanelWrappers:s})}dispatchSideBarUpdated(){this.eventSvc.dispatchEvent({type:"sideBarUpdated"})}destroyToolPanelWrappers(){this.toolPanelWrappers.forEach(e=>{ii(e.getGui()),this.destroyBean(e)}),this.toolPanelWrappers.length=0}destroy(){this.destroyToolPanelWrappers(),super.destroy()}},lh={selector:"AG-SIDE-BAR",component:oh},ch=class extends x{constructor(){super(...arguments),this.beanName="sideBar"}getSelector(){return lh}},dh={moduleName:"SideBar",version:re,beans:[ch],apiFunctions:{isSideBarVisible:Nd,setSideBarVisible:Bd,setSideBarPosition:Vd,openToolPanel:Hd,closeToolPanel:Ud,getOpenedToolPanel:zd,refreshToolPanel:Kd,isToolPanelShowing:Wd,getToolPanelInstance:jd,getSideBar:$d},dependsOn:[Le,ma]},hh={tag:"div"},uh=class extends F{constructor(){super(hh)}init(e){this.params=e,this.cssClassPrefix=this.params.cssClassPrefix??"ag-menu-option",this.addAriaAttributes(),this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu()}configureDefaults(){return!0}addAriaAttributes(){let{checked:e,subMenu:s}=this.params,t=this.getGui();e&&Cr(t,e),s&&we(t,!1)}addIcon(){if(this.params.isCompact)return;let e=U({tag:"span",ref:"eIcon",cls:`${this.getClassName("part")} ${this.getClassName("icon")}`,role:"presentation"}),{checked:s,icon:t}=this.params;s?e.appendChild(w("check",this.beans)):t&&(xr(t)?e.appendChild(t):typeof t=="string"?e.innerHTML=t:b(227)),this.getGui().appendChild(e)}addName(){let e=U({tag:"span",ref:"eName",cls:`${this.getClassName("part")} ${this.getClassName("text")}`,children:this.params.name||""});this.getGui().appendChild(e)}addShortcut(){if(this.params.isCompact)return;let e=U({tag:"span",ref:"eShortcut",cls:`${this.getClassName("part")} ${this.getClassName("shortcut")}`,children:this.params.shortcut||""});this.getGui().appendChild(e)}addSubMenu(){let e=U({tag:"span",ref:"ePopupPointer",cls:`${this.getClassName("part")} ${this.getClassName("popup-pointer")}`}),s=this.getGui();if(this.params.subMenu){let t=this.gos.get("enableRtl")?"subMenuOpenRtl":"subMenuOpen";e.appendChild(w(t,this.beans))}s.appendChild(e)}getClassName(e){return`${this.cssClassPrefix}-${e}`}},ph='.ag-menu-list{cursor:default;display:table;padding:var(--ag-spacing) 0;width:100%}.ag-menu-option,.ag-menu-separator{display:table-row}.ag-menu-option-part,.ag-menu-separator-part{display:table-cell;vertical-align:middle}.ag-menu-option{cursor:pointer;font-weight:500}:where(.ag-ltr) :where(.ag-menu-option-popup-pointer) .ag-icon{text-align:right}:where(.ag-rtl) :where(.ag-menu-option-popup-pointer) .ag-icon{text-align:left}.ag-menu-option-text{white-space:nowrap}.ag-menu-option-custom{display:contents}.ag-compact-menu-option{display:flex;flex-wrap:nowrap;width:100%}.ag-compact-menu-option-text{flex:1 1 auto;white-space:nowrap}.ag-menu-separator{height:calc(var(--ag-spacing)*2 + 1px)}.ag-menu-separator-part:after{border-top:1px solid var(--ag-menu-separator-color);content:"";display:block}.ag-compact-menu-option-active,.ag-menu-option-active{background-color:var(--ag-row-hover-color)}.ag-compact-menu-option-part,.ag-menu-option-part{line-height:var(--ag-icon-size);padding:calc(var(--ag-spacing) + 2px) 0}.ag-compact-menu-option-disabled,.ag-menu-option-disabled{cursor:not-allowed;opacity:.5}.ag-compact-menu-option-icon,.ag-menu-option-icon{width:var(--ag-icon-size)}:where(.ag-ltr) .ag-compact-menu-option-icon,:where(.ag-ltr) .ag-menu-option-icon{padding-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-compact-menu-option-icon,:where(.ag-rtl) .ag-menu-option-icon{padding-right:calc(var(--ag-spacing)*2)}.ag-compact-menu-option-text,.ag-menu-option-text{padding-left:calc(var(--ag-spacing)*2);padding-right:calc(var(--ag-spacing)*2)}:where(.ag-ltr) .ag-compact-menu-option-shortcut,:where(.ag-ltr) .ag-menu-option-shortcut{padding-right:var(--ag-spacing)}:where(.ag-rtl) .ag-compact-menu-option-shortcut,:where(.ag-rtl) .ag-menu-option-shortcut{padding-left:var(--ag-spacing)}:where(.ag-ltr) .ag-compact-menu-option-popup-pointer,:where(.ag-ltr) .ag-menu-option-popup-pointer{padding-right:var(--ag-spacing)}:where(.ag-rtl) .ag-compact-menu-option-popup-pointer,:where(.ag-rtl) .ag-menu-option-popup-pointer{padding-left:var(--ag-spacing)}.ag-menu-column-select-wrapper{height:265px;overflow:auto;:where(.ag-column-select){height:100%}}.ag-menu:where(.ag-tabs){min-width:290px}.ag-context-menu-loading-icon{pointer-events:none;position:absolute}',pn={moduleName:"MenuItem",version:re,userComponents:{agMenuItem:uh},icons:{check:"tick",subMenuOpen:"small-right",subMenuOpenRtl:"small-left"},css:[ph]},gh=".ag-column-select{display:flex;flex:3 1 0px;flex-direction:column;overflow:hidden;position:relative}.ag-column-select-header{align-items:center;display:flex;flex:none;gap:var(--ag-widget-horizontal-spacing);height:var(--ag-header-height);padding-left:var(--ag-widget-container-horizontal-padding);padding-right:var(--ag-widget-container-horizontal-padding);position:relative}.ag-column-select-column,.ag-column-select-column-group{align-items:center;display:flex;gap:var(--ag-widget-horizontal-spacing);height:100%;position:relative;&:where(:not(:last-child)){margin-bottom:var(--ag-widget-vertical-spacing)}}:where(.ag-ltr) .ag-column-select-column,:where(.ag-ltr) .ag-column-select-column-group{padding-left:calc(var(--ag-indentation-level)*var(--ag-column-select-indent-size))}:where(.ag-rtl) .ag-column-select-column,:where(.ag-rtl) .ag-column-select-column-group{padding-right:calc(var(--ag-indentation-level)*var(--ag-column-select-indent-size))}.ag-column-select-header-icon{border-radius:var(--ag-border-radius);cursor:pointer;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);&:focus-visible{box-shadow:var(--ag-focus-shadow)}}.ag-column-select-header-filter-wrapper{flex:1 1 auto}.ag-column-select-header-filter{width:100%}.ag-column-select-list{flex:1 1 0px;overflow:hidden}:where(.ag-ltr) .ag-column-select-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-spacing)*1.5)}:where(.ag-rtl) .ag-column-select-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-spacing)*1.5)}.ag-column-select-column-group-readonly,.ag-column-select-column-readonly{opacity:.5;pointer-events:none}.ag-column-select-virtual-list-viewport{padding:calc(var(--ag-widget-container-vertical-padding)*.5) 0}.ag-column-select-virtual-list-item{padding:0 var(--ag-widget-container-horizontal-padding)}.ag-column-select-column-label{flex:1 1 auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-column-select-checkbox{display:flex}",mh=300,fh={tag:"div",cls:"ag-column-select-header",role:"presentation",children:[{tag:"div",ref:"eExpand",cls:"ag-column-select-header-icon"},{tag:"ag-checkbox",ref:"eSelect",cls:"ag-column-select-header-checkbox"},{tag:"ag-input-text-field",ref:"eFilterTextField",cls:"ag-column-select-header-filter-wrapper"}]},Ch=class extends F{constructor(){super(fh,[Dt,ua]),this.eExpand=T,this.eSelect=T,this.eFilterTextField=T}postConstruct(){this.createExpandIcons(),this.addManagedListeners(this.eExpand,{click:this.onExpandClicked.bind(this),keydown:s=>{s.key===y.SPACE&&(s.preventDefault(),this.onExpandClicked())}}),this.addManagedElementListeners(this.eSelect.getInputElement(),{click:this.onSelectClicked.bind(this)}),this.addManagedPropertyListener("functionsReadOnly",()=>this.onFunctionsReadOnlyPropChanged()),this.eFilterTextField.setAutoComplete(!1).onValueChange(()=>this.onFilterTextChanged()),this.addManagedEventListeners({newColumnsLoaded:this.showOrHideOptions.bind(this)});let e=this.getLocaleTextFunc();this.eSelect.setInputAriaLabel(e("ariaColumnSelectAll","Toggle All Columns Visibility")),this.eFilterTextField.setInputAriaLabel(e("ariaFilterColumnsInput","Filter Columns Input")),this.activateTabIndex([this.eExpand])}onFunctionsReadOnlyPropChanged(){let e=this.gos.get("functionsReadOnly");this.eSelect.setReadOnly(e),this.eSelect.addOrRemoveCssClass("ag-column-select-column-readonly",e)}init(e){this.params=e;let s=this.gos.get("functionsReadOnly");this.eSelect.setReadOnly(s),this.eSelect.addOrRemoveCssClass("ag-column-select-column-readonly",s),this.beans.colModel.ready&&this.showOrHideOptions()}createExpandIcons(){let e=this.beans;this.eExpand.appendChild(this.eExpandChecked=w("columnSelectOpen",e)),this.eExpand.appendChild(this.eExpandUnchecked=w("columnSelectClosed",e)),this.eExpand.appendChild(this.eExpandIndeterminate=w("columnSelectIndeterminate",e)),this.setExpandState(0)}showOrHideOptions(){let e=this.params,s=!e.suppressColumnFilter,t=!e.suppressColumnSelectAll,i=!e.suppressColumnExpandAll,r=!!this.beans.colModel.colDefCols?.treeDepth,a=this.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(a("searchOoo","Search...")),j(this.eFilterTextField.getGui(),s),j(this.eSelect.getGui(),t),j(this.eExpand,i&&r)}onFilterTextChanged(){this.onFilterTextChangedDebounced||(this.onFilterTextChangedDebounced=Ar(this,()=>{let e=this.eFilterTextField.getValue();this.dispatchLocalEvent({type:"filterChanged",filterText:e})},mh)),this.onFilterTextChangedDebounced()}onSelectClicked(){this.dispatchLocalEvent({type:this.selectState?"unselectAll":"selectAll"})}onExpandClicked(){this.dispatchLocalEvent({type:this.expandState===0?"collapseAll":"expandAll"})}setExpandState(e){this.expandState=e,j(this.eExpandChecked,e===0),j(this.eExpandUnchecked,e===1),j(this.eExpandIndeterminate,e===2)}setSelectionState(e){this.selectState=e,this.eSelect.setValue(this.selectState)}},vh={selector:"AG-PRIMARY-COLS-HEADER",component:Ch};function kt(e){return!!e&&typeof e.children<"u"}function qe(e){return kt(e)?e.groupId:e.colId}function gn(e,s,t){let i=(n,o)=>{let c=n.children.map(qe).includes(qe(o)),d=ce(n.children),h=d&&qe(d)!==qe(o);return c&&h};if(!kt(e))return!0;let r=e,a=t;if(i(r,a)||r.groupId===s&&!r.children.map(qe).includes(qe(a)))return r.children.push(a),!0;for(let n=r.children.length-1;n>=0&&!gn(r.children[n],s,t);n--);return!1}function yh(e){let s=(r,a)=>kt(r)&&kt(a)&&qe(r)===qe(a),t=(r,a)=>{if(!kt(a))return r;let n=r,o=a;return o.children&&o.groupId&&gn(n,o.groupId,o.children[0])||o.children.forEach(l=>t(n,l)),n},i=[];for(let r=1;r<=e.length;r++){let a=e[r-1],n=e[r];s(a,n)?e[r]=t(a,n):i.push(a)}return i}function Sh(e,s){let t=[],i=(a,n)=>{if(kt(a)){let o=a,l=typeof o.groupId<"u"?o.groupId:o.headerName,c=new Vr(o,l,!1,n),d=[];return o.children.forEach(h=>{let p=i(h,n+1);p&&d.push(p)}),c.setChildren(d),c}else{let o=a,l=o.colId?o.colId:o.field,c=e.getColDefCol(l);return c||t.push(o),c}},r=[];return s.forEach(a=>{let n=i(a,0);n&&r.push(n)}),t.length>0&&b(217,{invalidColIds:t}),r}function bh(e,s){let t=wh(e),i=yh(t);s(i)}function wh(e){let s=(r,a)=>{let n;if($e(r))if(r.isPadding())n=a;else{let l=Object.assign({},r.getColGroupDef());l.groupId=r.getGroupId(),l.children=[a],n=l}else{let l=Object.assign({},r.getColDef());l.colId=r.getColId(),n=l}let o=r.getOriginalParent();return o?s(o,n):n};return e.getCols().filter(r=>{let a=r.getColDef();return r.isPrimary()&&!a.showRowGroup}).map(r=>s(r,r.getColDef()))}var Oa=class{constructor(e,s,t,i=!1,r){this.displayName=e,this.depth=t,this.group=i,this.localEventService=new dr,i?(this.columnGroup=s,this._expanded=r,this.children=[]):this.column=s}get expanded(){return!!this._expanded}set expanded(e){e!==this._expanded&&(this._expanded=e,this.localEventService.dispatchEvent({type:"expandedChanged"}))}addEventListener(e,s){this.localEventService.addEventListener(e,s)}removeEventListener(e,s){this.localEventService.removeEventListener(e,s)}};function mn(e,s,t,i){let r=xh(s);fn(e,r,t,i)}function fn(e,s,t,i){e.colModel.isPivotMode()?Ah(e,s,t,i):Th(e,s,t,i)}function xh(e){let s=[],t=i=>{i.forEach(r=>{r.passesFilter&&(r.group?t(r.children):s.push(r.column))})};return t(e),s}function Th(e,s,t,i){let r=[];s.forEach(a=>{a.getColDef().lockVisible||a.isVisible()!=t&&r.push({colId:a.getId(),hide:!t})}),r.length>0&&Et(e,{state:r},i),e.selectionColSvc?.refreshVisibility(i)}function Ah(e,s,t,i){Fh(e,s,t,i)}function Fh(e,s,t,i){let r=[],o=t?l=>{if(!l.isAnyFunctionActive())if(l.isAllowValue()){let c=typeof l.getAggFunc()=="string"?l.getAggFunc():e.aggFuncSvc?.getDefaultAggFunc(l);r.push({colId:l.getId(),aggFunc:c})}else l.isAllowRowGroup()?r.push({colId:l.getId(),rowGroup:!0}):l.isAllowPivot()&&r.push({colId:l.getId(),pivot:!0})}:l=>{(l.isPivotActive()||l.isRowGroupActive()||l.isValueActive())&&r.push({colId:l.getId(),pivot:!1,rowGroup:!1,aggFunc:null})};s.forEach(o),r.length>0&&Et(e,{state:r},i)}function Cn(e,s){let{columns:t,visibleState:i,pivotState:r,eventType:a}=s,n=t.map(o=>{let l=o.getColId();if(e.colModel.isPivotMode()){let c=r?.[l];return{colId:l,pivot:c?.pivot,rowGroup:c?.rowGroup,aggFunc:c?.aggFunc}}else return{colId:l,hide:!i?.[l]}});Et(e,{state:n},a)}function vn(e){return{pivot:e.isPivotActive(),rowGroup:e.isRowGroupActive(),aggFunc:e.isValueActive()?e.getAggFunc():void 0}}function yn(e,s,t){e.group!==t&&(e.group&&!t&&(e.expanded=!1),e.group=t,e.updateHasChildren(),s.selectionSvc?.updateRowSelectable(e),e.dispatchRowEvent("groupChanged"))}function Xt(e,s){let{gos:t,rowGroupColsSvc:i}=s;if(!i||!e)return!1;let r=t.get("groupLockGroupColumns");if(!e.isRowGroupActive()||r===0)return!1;if(r===-1)return!0;let a=i.columns.findIndex(n=>n.getColId()===e.getColId());return r>a}var Eh=class extends Ye{constructor(e){super(),this.setTemplateFromElement(e.getGui(),void 0,void 0,!0)}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)})}handleKeyDown(e){e.key===y.ESCAPE&&this.closePanel()}onTabKeyDown(e){e.defaultPrevented||(this.closePanel(),e.preventDefault())}closePanel(){let e=this.parentComponent;e.closeSubMenu(),setTimeout(()=>e.getGui().focus(),0)}};function Mh(e,s,t){return e.getCompDetails(s,Ph,"agMenuItem",t,!0)}var Ph={name:"menuItem",optionalMethods:["setActive","select","setExpanded","configureDefaults"]},Ih={tag:"div",cls:"ag-menu",role:"presentation"},Ga=class extends x{constructor(){super(...arguments),this.ACTIVATION_DELAY=80,this.isActive=!1,this.subMenuIsOpen=!1,this.subMenuIsOpening=!1,this.suppressRootStyles=!0,this.suppressAria=!0,this.suppressFocus=!0}wireBeans(e){this.popupSvc=e.popupSvc,this.userCompFactory=e.userCompFactory,this.registry=e.registry}init(e){let{menuItemDef:s,isAnotherSubMenuOpen:t,level:i,childComponent:r,contextParams:a}=e;return this.params=e.menuItemDef,this.level=i,this.isAnotherSubMenuOpen=t,this.childComponent=r,this.contextParams=a,this.cssClassPrefix=this.params.menuItemParams?.cssClassPrefix??"ag-menu-option",Mh(this.userCompFactory,this.params,B(this.gos,N(L({},s),{level:i,isAnotherSubMenuOpen:t,openSubMenu:o=>this.openSubMenu(o),closeSubMenu:()=>this.closeSubMenu(),closeMenu:o=>this.closeMenu(o),updateTooltip:(o,l)=>this.refreshTooltip(o,l),onItemActivated:()=>this.onItemActivated()})))?.newAgStackInstance().then(o=>{this.menuItemComp=o;let l=o.configureDefaults?.();l&&this.configureDefaults(l===!0?void 0:l)})??Re.resolve()}addListeners(e,s){s?.suppressClick||this.addManagedElementListeners(e,{click:t=>this.onItemSelected(t)}),s?.suppressKeyboardSelect||this.addManagedElementListeners(e,{keydown:t=>{(t.key===y.ENTER||t.key===y.SPACE)&&(t.preventDefault(),this.onItemSelected(t))}}),s?.suppressMouseDown||this.addManagedElementListeners(e,{mousedown:t=>{t.stopPropagation(),t.preventDefault()}}),s?.suppressMouseOver||this.addManagedElementListeners(e,{mouseenter:()=>this.onMouseEnter(),mouseleave:()=>this.onMouseLeave()})}isDisabled(){return!!this.params.disabled}openSubMenu(e=!1,s){if(this.closeSubMenu(),!this.params.subMenu)return;this.subMenuIsOpening=!0;let t=U(Ih);this.eSubMenuGui=t;let i,r=()=>{this.subMenuIsOpening=!1};if(this.childComponent){let c=this.createBean(new Eh(this.childComponent));c.setParentComponent(this);let d=c.getGui(),h="mouseenter",p=()=>this.cancelDeactivate();d.addEventListener(h,p),i=()=>{d.removeEventListener(h,p),this.destroyBean(c)},t.appendChild(d),this.childComponent.afterGuiAttached&&(r=()=>{this.childComponent.afterGuiAttached(),this.subMenuIsOpening=!1})}else if(this.params.subMenu){let c=this.createBean(new Ks(this.level+1,this.contextParams));c.setParentComponent(this),c.addMenuItems(this.params.subMenu),t.appendChild(c.getGui()),this.addManagedListeners(c,{closeMenu:d=>this.dispatchLocalEvent(d)}),c.addGuiEventListener("mouseenter",()=>this.cancelDeactivate()),i=()=>this.destroyBean(c),e&&(r=()=>{c.activateFirstItem(),this.subMenuIsOpening=!1})}let{popupSvc:a}=this,n=()=>{let c=this.eGui,{column:d,node:h}=this.contextParams;a?.positionPopupForMenu({eventSource:c,ePopup:t,event:s instanceof MouseEvent?s:void 0,column:d,node:h})},o=this.getLocaleTextFunc(),l=a?.addPopup({modal:!0,eChild:t,positionCallback:n,anchorToElement:this.eGui,ariaLabel:o("ariaLabelSubMenu","SubMenu"),afterGuiAttached:r});this.subMenuIsOpen=!0,this.setAriaExpanded(!0),this.hideSubMenu=()=>{l&&l.hideFunc(),this.subMenuIsOpen=!1,this.setAriaExpanded(!1),i(),this.menuItemComp.setExpanded?.(!1),this.eSubMenuGui=void 0},this.menuItemComp.setExpanded?.(!0)}setAriaExpanded(e){this.suppressAria||we(this.eGui,e)}closeSubMenu(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,this.setAriaExpanded(!1))}isSubMenuOpen(){return this.subMenuIsOpen}isSubMenuOpening(){return this.subMenuIsOpening}activate(e,s){this.cancelActivate(),!(this.params.disabled&&!s)&&(this.isActive=!0,this.suppressRootStyles||this.eGui.classList.add(`${this.cssClassPrefix}-active`),this.menuItemComp.setActive?.(!0),this.suppressFocus||ot(this.beans,()=>this.eGui.focus({preventScroll:!s})),e&&this.params.subMenu&&window.setTimeout(()=>{this.isAlive()&&this.isActive&&this.openSubMenu()},300),this.onItemActivated())}deactivate(){this.cancelDeactivate(),this.suppressRootStyles||this.eGui.classList.remove(`${this.cssClassPrefix}-active`),this.menuItemComp.setActive?.(!1),this.isActive=!1,this.subMenuIsOpen&&this.closeSubMenu()}getGui(){return this.menuItemComp.getGui()}getParentComponent(){return this.parentComponent}setParentComponent(e){this.parentComponent=e}getSubMenuGui(){return this.eSubMenuGui}onItemSelected(e){this.menuItemComp.select?.(),this.params.action?this.beans.frameworkOverrides.wrapOutgoing(()=>this.params.action(B(this.gos,L({},this.contextParams)))):this.openSubMenu(e&&e.type==="keydown",e),!(this.params.subMenu&&!this.params.action||this.params.suppressCloseOnSelect)&&this.closeMenu(e)}closeMenu(e){let s={type:"closeMenu"};e&&(e instanceof MouseEvent?s.mouseEvent=e:s.keyboardEvent=e),this.dispatchLocalEvent(s)}onItemActivated(){let e={type:"menuItemActivated",menuItem:this};this.dispatchLocalEvent(e)}cancelActivate(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)}cancelDeactivate(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)}onMouseEnter(){this.cancelDeactivate(),this.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout(()=>this.activate(!0),this.ACTIVATION_DELAY):this.activate(!0)}onMouseLeave(){this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout(()=>this.deactivate(),this.ACTIVATION_DELAY):this.deactivate()}configureDefaults(e){if(!this.menuItemComp){setTimeout(()=>this.configureDefaults(e));return}let s=this.menuItemComp.getGui(),{suppressRootStyles:t,suppressTooltip:i,suppressAria:r,suppressTabIndex:a,suppressFocus:n}=e||{},o=this.menuItemComp.getRootElement?.();o&&(t||s.classList.add("ag-menu-option-custom"),s=o),this.eGui=s,this.suppressRootStyles=!!t,this.suppressRootStyles||(s.classList.add(this.cssClassPrefix),this.params.cssClasses?.forEach(l=>s.classList.add(l)),this.params.disabled&&s.classList.add(`${this.cssClassPrefix}-disabled`)),i||this.refreshTooltip(this.params.tooltip),this.suppressAria=!!r,this.suppressAria||(be(s,"menuitem"),this.params.subMenu&&yr(s,this.params.subMenuRole??"menu"),this.params.disabled&&gr(s,!0)),a||s.setAttribute("tabindex","-1"),this.params.disabled||this.addListeners(s,e),this.suppressFocus=!!n}refreshTooltip(e,s){if(this.tooltip=e,this.tooltipFeature=this.destroyBean(this.tooltipFeature),!e||!this.menuItemComp)return;let t=this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui(),getTooltipValue:()=>this.tooltip,getLocation:()=>"menu",shouldDisplayTooltip:s});t&&(this.tooltipFeature=this.createBean(t))}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),this.menuItemComp?.destroy?.(),super.destroy()}},Ks=class extends Ye{constructor(e=0,s){super({tag:"div",cls:"ag-menu-list",role:"menu"}),this.level=e,this.menuItems=[],this.params=s??{column:null,node:null,value:null}}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>ot(this.beans,()=>this.handleKeyDown(e)),onFocusIn:e=>this.handleFocusIn(e),onFocusOut:e=>this.handleFocusOut(e)})}onTabKeyDown(e){this.getParentComponent()?.getGui()?.classList.contains("ag-focus-managed")||e.preventDefault(),e.shiftKey&&this.closeIfIsChild(e)}handleKeyDown(e){switch(e.key){case y.UP:case y.RIGHT:case y.DOWN:case y.LEFT:e.preventDefault(),this.handleNavKey(e.key);break;case y.ESCAPE:this.closeIfIsChild()&&je(e);break}}handleFocusIn(e){let s=e.relatedTarget;!this.tabGuardFeature.getTabGuardCtrl().isTabGuard(s)&&(this.getGui().contains(s)||this.activeMenuItem?.getSubMenuGui()?.contains(s))||(this.activeMenuItem?this.activeMenuItem.activate():this.activateFirstItem())}handleFocusOut(e){let s=e.relatedTarget;!this.activeMenuItem||this.getGui().contains(s)||this.activeMenuItem.getSubMenuGui()?.contains(s)||this.activeMenuItem.isSubMenuOpening()||this.activeMenuItem.deactivate()}clearActiveItem(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)}addMenuItems(e){e!=null&&Re.all(e.map(s=>s==="separator"?Re.resolve({eGui:this.createSeparator()}):typeof s=="string"?(b(228,{menuItemOrString:s}),Re.resolve({eGui:null})):this.addItem(s))).then(s=>{(s??[]).forEach(t=>{t?.eGui&&(this.appendChild(t.eGui),t.comp&&this.menuItems.push(t.comp))})})}addItem(e){let s=this.createManagedBean(new Ga);return s.init({menuItemDef:e,isAnotherSubMenuOpen:()=>this.menuItems.some(t=>t.isSubMenuOpen()),level:this.level,contextParams:this.params}).then(()=>(s.setParentComponent(this),this.addManagedListeners(s,{closeMenu:t=>{this.dispatchLocalEvent(t)},menuItemActivated:t=>{this.activeMenuItem&&this.activeMenuItem!==t.menuItem&&this.activeMenuItem.deactivate(),this.activeMenuItem=t.menuItem}}),{comp:s,eGui:s.getGui()}))}activateFirstItem(){let e=this.menuItems.filter(s=>!s.isDisabled())[0];e&&e.activate()}createSeparator(){let e={tag:"div",cls:"ag-menu-separator-part"};return U({tag:"div",cls:"ag-menu-separator",attrs:{"aria-hidden":"true"},children:[e,e,e,e]})}handleNavKey(e){switch(e){case y.UP:case y.DOWN:{let t=this.findNextItem(e===y.UP);t&&t!==this.activeMenuItem&&t.activate(!1,!0);return}}let s=this.gos.get("enableRtl")?y.RIGHT:y.LEFT;e===s?this.closeIfIsChild():this.openChild()}closeIfIsChild(e){let s=this.getParentComponent();return s&&s instanceof Ga?(e&&e.preventDefault(),s.closeSubMenu(),s.getGui().focus(),!0):!1}openChild(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)}findNextItem(e){let s=[...this.menuItems];if(!s.length)return;if(!this.activeMenuItem)return e?ce(s):s[0];e&&s.reverse();let t,i=!1;for(let r of s){if(!i){r===this.activeMenuItem&&(i=!0);continue}t=r;break}return i&&!t?s[0]:t||this.activeMenuItem}destroy(){this.clearActiveItem(),super.destroy()}},Sn=class extends F{constructor(e,s,t){super({tag:"div",cls:"ag-menu"}),this.column=e,this.mouseEvent=s,this.parentEl=t,this.displayName=null}postConstruct(){let{column:e,beans:{colNames:s}}=this;this.initializeProperties(e);let t;if(bs(e)?t=s.getDisplayNameForColumn(e,"columnToolPanel"):t=s.getDisplayNameForProvidedColumnGroup(null,e,"columnToolPanel"),this.displayName=t,this.buildMenuItemMap(),this.isActive()){this.mouseEvent.preventDefault();let i=this.getMappedMenuItems();if(i.length===0)return;this.displayContextMenu(i)}}initializeProperties(e){let s;$e(e)?s=e.getLeafColumns():s=[e],this.columns=s,this.allowGrouping=s.some(t=>t.isPrimary()&&t.isAllowRowGroup()),this.allowValues=s.some(t=>t.isPrimary()&&t.isAllowValue()),this.allowPivoting=this.beans.colModel.isPivotMode()&&s.some(t=>t.isPrimary()&&t.isAllowPivot())}buildMenuItemMap(){let e=this.getLocaleTextFunc(),{beans:s,displayName:t}=this,{rowGroupColsSvc:i,valueColsSvc:r,pivotColsSvc:a,colModel:n}=s,o=new Map;this.menuItemMap=o,o.set("rowGroup",{allowedFunction:l=>l.isPrimary()&&l.isAllowRowGroup()&&!Xt(l,s),activeFunction:l=>l.isRowGroupActive(),activateLabel:()=>`${e("groupBy","Group by")} ${t}`,deactivateLabel:()=>`${e("ungroupBy","Un-Group by")} ${t}`,activateFunction:()=>i?.setColumns(this.addColumnsToList(i.columns),"toolPanelUi"),deActivateFunction:()=>i?.setColumns(this.removeColumnsFromList(i.columns),"toolPanelUi"),addIcon:"menuAddRowGroup",removeIcon:"menuRemoveRowGroup"}),o.set("value",{allowedFunction:l=>l.isPrimary()&&l.isAllowValue(),activeFunction:l=>l.isValueActive(),activateLabel:()=>e("addToValues",`Add ${t} to values`,[t]),deactivateLabel:()=>e("removeFromValues",`Remove ${t} from values`,[t]),activateFunction:()=>r?.setColumns(this.addColumnsToList(r.columns),"toolPanelUi"),deActivateFunction:()=>r?.setColumns(this.removeColumnsFromList(r.columns),"toolPanelUi"),addIcon:"valuePanel",removeIcon:"valuePanel"}),o.set("pivot",{allowedFunction:l=>n.isPivotMode()&&l.isPrimary()&&l.isAllowPivot(),activeFunction:l=>l.isPivotActive(),activateLabel:()=>e("addToLabels",`Add ${t} to labels`,[t]),deactivateLabel:()=>e("removeFromLabels",`Remove ${t} from labels`,[t]),activateFunction:()=>a?.setColumns(this.addColumnsToList(a.columns),"toolPanelUi"),deActivateFunction:()=>a?.setColumns(this.removeColumnsFromList(a.columns),"toolPanelUi"),addIcon:"pivotPanel",removeIcon:"pivotPanel"})}addColumnsToList(e){return[...e].concat(this.columns.filter(s=>e.indexOf(s)===-1))}removeColumnsFromList(e){return e.filter(s=>this.columns.indexOf(s)===-1)}displayContextMenu(e){let s=this.getGui(),t=this.createBean(new Ks),i=this.getLocaleTextFunc(),r=()=>{};s.appendChild(t.getGui()),t.addMenuItems(e),t.addManagedListeners(t,{closeMenu:()=>{this.parentEl.focus(),r()}});let a=this.beans.popupSvc,n=a.addPopup({modal:!0,eChild:s,closeOnEsc:!0,afterGuiAttached:()=>ye(t.getGui()),ariaLabel:i("ariaLabelContextMenu","Context Menu"),closedCallback:o=>{o instanceof KeyboardEvent&&this.parentEl.focus(),this.destroyBean(t)}});n&&(r=n.hideFunc),a.positionPopupUnderMouseEvent({type:"columnContextMenu",mouseEvent:this.mouseEvent,ePopup:s})}isActive(){return this.allowGrouping||this.allowValues||this.allowPivoting}getMappedMenuItems(){let e=[],{menuItemMap:s,columns:t,displayName:i,beans:r}=this;for(let a of s.values()){let n=t.some(l=>a.allowedFunction(l)&&!a.activeFunction(l)),o=t.some(l=>a.allowedFunction(l)&&a.activeFunction(l));n&&e.push({name:a.activateLabel(i),icon:w(a.addIcon,r,null),action:()=>a.activateFunction()}),o&&e.push({name:a.deactivateLabel(i),icon:w(a.removeIcon,r,null),action:()=>a.deActivateFunction()})}return e}},Rh={tag:"div",cls:"ag-column-select-column-group",children:[{tag:"span",ref:"eColumnGroupIcons",cls:"ag-column-group-icons",children:[{tag:"span",ref:"eGroupClosedIcon",cls:"ag-column-group-closed-icon"},{tag:"span",ref:"eGroupOpenedIcon",cls:"ag-column-group-opened-icon"}]},{tag:"ag-checkbox",ref:"cbSelect",cls:"ag-column-select-checkbox"},{tag:"span",ref:"eLabel",cls:"ag-column-select-column-label"}]},bn=class extends F{constructor(e,s,t,i){super(),this.modelItem=e,this.allowDragging=s,this.eventType=t,this.focusWrapper=i,this.cbSelect=T,this.eLabel=T,this.eGroupOpenedIcon=T,this.eGroupClosedIcon=T,this.eColumnGroupIcons=T,this.processingColumnStateChange=!1;let{columnGroup:r,depth:a,displayName:n}=e;this.columnGroup=r,this.columnDepth=a,this.displayName=n}postConstruct(){this.setTemplate(Rh,[Dt]);let{beans:e,cbSelect:s,eLabel:t,displayName:i,columnDepth:r,modelItem:a,focusWrapper:n,columnGroup:o}=this,{registry:l,gos:c}=e,d=w("columnDrag",e);this.eDragHandle=d,d.classList.add("ag-drag-handle","ag-column-select-column-group-drag-handle");let h=s.getGui(),p=s.getInputElement();h.insertAdjacentElement("afterend",d),p.setAttribute("tabindex","-1"),t.innerHTML=i??"",this.setupExpandContract(),this.addCssClass("ag-column-select-indent-"+r),this.getGui().style.setProperty("--ag-indentation-level",String(r)),this.tooltipFeature=this.createOptionalManagedBean(l.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui(),getLocation:()=>"columnToolPanelColumnGroup",shouldDisplayTooltip:As(c,()=>t)})),this.addManagedEventListeners({columnPivotModeChanged:this.onColumnStateChanged.bind(this)}),this.addManagedElementListeners(t,{click:this.onLabelClicked.bind(this)}),this.addManagedListeners(s,{fieldValueChanged:this.onCheckboxChanged.bind(this)}),this.addManagedListeners(a,{expandedChanged:this.onExpandChanged.bind(this)}),this.addManagedListeners(n,{keydown:this.handleKeyDown.bind(this),contextmenu:this.onContextMenu.bind(this)}),this.setOpenClosedIcons(),this.setupDragging(),this.onColumnStateChanged(),this.addVisibilityListenersToAllChildren(),this.refreshAriaExpanded(),this.refreshAriaLabel(),this.setupTooltip(),ws(o.getColGroupDef(),c,null,o).forEach(g=>this.addOrRemoveCssClass(g,!0))}getColumns(){return this.columnGroup.getLeafColumns()}setupTooltip(){let e=this.columnGroup.getColGroupDef();if(!e)return;let s=()=>this.tooltipFeature?.setTooltipAndRefresh(e.headerTooltip);s(),this.addManagedEventListeners({newColumnsLoaded:s})}handleKeyDown(e){switch(e.key){case y.LEFT:e.preventDefault(),this.modelItem.expanded=!1;break;case y.RIGHT:e.preventDefault(),this.modelItem.expanded=!0;break;case y.SPACE:e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected());break}}onContextMenu(e){let{columnGroup:s,gos:t}=this;if(t.get("functionsReadOnly"))return;let i=this.createBean(new Sn(s,e,this.focusWrapper));this.addDestroyFunc(()=>{i.isAlive()&&this.destroyBean(i)})}addVisibilityListenersToAllChildren(){let e=this.onColumnStateChanged.bind(this);this.columnGroup.getLeafColumns().forEach(s=>{this.addManagedListeners(s,{visibleChanged:e,columnValueChanged:e,columnPivotChanged:e,columnRowGroupChanged:e})})}setupDragging(){if(!this.allowDragging){j(this.eDragHandle,!1);return}let e=this.beans,{gos:s,eventSvc:t,dragAndDrop:i}=e,r=!s.get("suppressDragLeaveHidesColumns"),a={type:Ee.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDefaultIconName:()=>r?"hide":"notAllowed",getDragItem:()=>this.createDragItem(),onDragStarted:()=>{r=!s.get("suppressDragLeaveHidesColumns"),t.dispatchEvent({type:"columnPanelItemDragStart",column:this.columnGroup})},onDragStopped:()=>{t.dispatchEvent({type:"columnPanelItemDragEnd"})},onGridEnter:n=>{r&&Cn(e,{columns:this.columnGroup.getLeafColumns(),visibleState:n?.visibleState,pivotState:n?.pivotState,eventType:this.eventType})},onGridExit:()=>{r&&this.onChangeCommon(!1)}};i.addDragSource(a,!0),this.addDestroyFunc(()=>i.removeDragSource(a))}createDragItem(){let e=this.columnGroup.getLeafColumns(),s={},t={};return e.forEach(i=>{let r=i.getId();s[r]=i.isVisible(),t[r]=vn(i)}),{columns:e,visibleState:s,pivotState:t}}setupExpandContract(){let{beans:e,eGroupClosedIcon:s,eGroupOpenedIcon:t,eColumnGroupIcons:i}=this;s.appendChild(ui("columnSelectClosed",e,null)),t.appendChild(ui("columnSelectOpen",e,null));let r=this.onExpandOrContractClicked.bind(this);this.addManagedElementListeners(s,{click:r}),this.addManagedElementListeners(t,{click:r});let a=new Fs(i,!0);this.addManagedListeners(a,{tap:r}),this.addDestroyFunc(a.destroy.bind(a))}onLabelClicked(){let e=!this.cbSelect.getValue();this.onChangeCommon(e)}onCheckboxChanged(e){this.onChangeCommon(e.selected)}getVisibleLeafColumns(){let e=[],s=t=>{t.forEach(i=>{i.passesFilter&&(i.group?s(i.children):e.push(i.column))})};return s(this.modelItem.children),e}onChangeCommon(e){this.refreshAriaLabel(),!this.processingColumnStateChange&&mn(this.beans,this.modelItem.children,e,this.eventType)}refreshAriaLabel(){let{cbSelect:e,focusWrapper:s,displayName:t}=this,i=this.getLocaleTextFunc(),r=i("ariaColumnGroup","Column Group"),a=e.getValue(),n=a===void 0?i("ariaIndeterminate","indeterminate"):a?i("ariaVisible","visible"):i("ariaHidden","hidden"),o=i("ariaToggleVisibility","Press SPACE to toggle visibility");ue(s,`${t} ${r}`),e.setInputAriaLabel(`${o} (${n})`),ds(s,e.getInputElement().id)}onColumnStateChanged(){let e=this.workOutSelectedValue(),s=this.workOutReadOnlyValue();this.processingColumnStateChange=!0;let t=this.cbSelect;t.setValue(e),t.setReadOnly(s),this.addOrRemoveCssClass("ag-column-select-column-group-readonly",s),this.processingColumnStateChange=!1}workOutSelectedValue(){let e=this.beans.colModel.isPivotMode(),s=this.getVisibleLeafColumns(),t=0,i=0;if(s.forEach(r=>{!e&&r.getColDef().lockVisible||(this.isColumnChecked(r,e)?t++:i++)}),!(t>0&&i>0))return t>0}workOutReadOnlyValue(){let e=this.beans.colModel.isPivotMode(),s=0;return this.columnGroup.getLeafColumns().forEach(t=>{e?t.isAnyFunctionAllowed()&&s++:t.getColDef().lockVisible||s++}),s===0}isColumnChecked(e,s){if(s){let t=e.isPivotActive(),i=e.isRowGroupActive(),r=e.isValueActive();return t||i||r}return e.isVisible()}onExpandOrContractClicked(){let e=this.modelItem,s=e.expanded;e.expanded=!s}onExpandChanged(){this.setOpenClosedIcons(),this.refreshAriaExpanded()}setOpenClosedIcons(){let e=this.modelItem.expanded;j(this.eGroupClosedIcon,!e),j(this.eGroupOpenedIcon,e)}refreshAriaExpanded(){we(this.focusWrapper,this.modelItem.expanded)}getDisplayName(){return this.displayName}onSelectAllChanged(e){let s=this.cbSelect,t=s.getValue();!s.isReadOnly()&&(e&&!t||!e&&t)&&s.toggle()}isSelected(){return this.cbSelect.getValue()}isSelectable(){return!this.cbSelect.isReadOnly()}setSelected(e){this.cbSelect.setValue(e,!0)}},vi=e=>$e(e)?e.getLeafColumns():e?[e]:[],Dh=(e,s,t,i)=>{if(!t||!s)return null;let r=e.colModel.getCols(),a=r.indexOf(t),n=i?a:a+1,o=Lh(r,s,n);return n-o},Lh=(e,s,t)=>{if(!s)return 0;let i=s[0],r=s.length;return e.indexOf(i)<t?r:0},Na=(e,s,t)=>e.get("suppressMovableColumns")||s.colModel.isPivotMode()?!0:!!t.find(({colDef:a})=>!!a.suppressMovable||!!a.lockPosition),Ba=(e,s,t)=>{if(!t)return;let{component:i}=t,r=null,a=t.position==="top";if(i instanceof bn?(r=i.getColumns()[0],a=!0):i&&(r=i.column),!r)return;let n=Dh(e,s,r,a);n!=null&&e.colMoves?.moveColumns(s,n,"toolPanelUi")},_h=e=>e.column,kh={tag:"div",cls:"ag-column-select-column",children:[{tag:"ag-checkbox",ref:"cbSelect",cls:"ag-column-select-checkbox"},{tag:"span",ref:"eLabel",cls:"ag-column-select-column-label"}]},Oh=class extends F{constructor(e,s,t,i){super(),this.modelItem=e,this.allowDragging=s,this.groupsExist=t,this.focusWrapper=i,this.eLabel=T,this.cbSelect=T,this.processingColumnStateChange=!1;let{column:r,depth:a,displayName:n}=e;this.column=r,this.columnDepth=a,this.displayName=n}postConstruct(){this.setTemplate(kh,[Dt]);let{beans:e,cbSelect:s,displayName:t,eLabel:i,columnDepth:r,groupsExist:a,column:n,gos:o,focusWrapper:l}=this,c=w("columnDrag",e);this.eDragHandle=c,c.classList.add("ag-drag-handle","ag-column-select-column-drag-handle");let d=s.getGui(),h=s.getInputElement();d.insertAdjacentElement("afterend",c),h.setAttribute("tabindex","-1");let p=se(t);i.innerHTML=p,a&&this.addCssClass("ag-column-select-add-group-indent"),this.addCssClass(`ag-column-select-indent-${r}`),this.getGui().style.setProperty("--ag-indentation-level",String(r)),this.tooltipFeature=this.createOptionalManagedBean(e.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui(),getLocation:()=>"columnToolPanelColumn",getColDef:()=>n.getColDef(),shouldDisplayTooltip:As(o,()=>i)})),this.setupDragging();let u=this.onColumnStateChanged.bind(this);this.addManagedEventListeners({columnPivotModeChanged:u}),this.addManagedListeners(n,{columnValueChanged:u,columnPivotChanged:u,columnRowGroupChanged:u,visibleChanged:u}),this.addManagedListeners(l,{keydown:this.handleKeyDown.bind(this),contextmenu:this.onContextMenu.bind(this)}),this.addManagedPropertyListener("functionsReadOnly",this.onColumnStateChanged.bind(this)),this.addManagedListeners(s,{fieldValueChanged:this.onCheckboxChanged.bind(this)}),this.addManagedElementListeners(i,{click:this.onLabelClicked.bind(this)}),this.onColumnStateChanged(),this.refreshAriaLabel(),this.setupTooltip(),ws(n.getColDef(),o,n,null).forEach(f=>this.addOrRemoveCssClass(f,!0))}getColumn(){return this.column}setupTooltip(){let e=()=>this.tooltipFeature?.setTooltipAndRefresh(this.column.getColDef().headerTooltip);e(),this.addManagedEventListeners({newColumnsLoaded:e})}onContextMenu(e){let{column:s,gos:t}=this;if(t.get("functionsReadOnly"))return;let i=this.createBean(new Sn(s,e,this.focusWrapper));this.addDestroyFunc(()=>{i.isAlive()&&this.destroyBean(i)})}handleKeyDown(e){e.key===y.SPACE&&(e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected()))}onLabelClicked(){if(this.gos.get("functionsReadOnly"))return;let e=!this.cbSelect.getValue();this.onChangeCommon(e)}onCheckboxChanged(e){this.onChangeCommon(e.selected)}onChangeCommon(e){this.cbSelect.isReadOnly()||(this.refreshAriaLabel(),!this.processingColumnStateChange&&fn(this.beans,[this.column],e,"toolPanelUi"))}refreshAriaLabel(){let{cbSelect:e,focusWrapper:s,displayName:t}=this,i=this.getLocaleTextFunc(),r=i("ariaColumn","Column"),a=e.getValue()?i("ariaVisible","visible"):i("ariaHidden","hidden"),n=i("ariaToggleVisibility","Press SPACE to toggle visibility");ue(s,`${t} ${r}`),this.cbSelect.setInputAriaLabel(`${n} (${a})`),ds(s,e.getInputElement().id)}setupDragging(){let e=this.eDragHandle;if(!this.allowDragging){j(e,!1);return}let s=this.beans,{gos:t,eventSvc:i,dragAndDrop:r}=s,a=!t.get("suppressDragLeaveHidesColumns"),n={type:Ee.ToolPanel,eElement:e,dragItemName:this.displayName,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:()=>this.createDragItem(),onDragStarted:()=>{a=!t.get("suppressDragLeaveHidesColumns"),i.dispatchEvent({type:"columnPanelItemDragStart",column:this.column})},onDragStopped:()=>{i.dispatchEvent({type:"columnPanelItemDragEnd"})},onGridEnter:o=>{a&&Cn(s,{columns:[this.column],visibleState:o?.visibleState,pivotState:o?.pivotState,eventType:"toolPanelUi"})},onGridExit:()=>{a&&this.onChangeCommon(!1)}};r.addDragSource(n,!0),this.addDestroyFunc(()=>r.removeDragSource(n))}createDragItem(){let e=this.column.getColId(),s={[e]:this.column.isVisible()},t={[e]:vn(this.column)};return{columns:[this.column],visibleState:s,pivotState:t}}onColumnStateChanged(){this.processingColumnStateChange=!0;let e=this.beans.colModel.isPivotMode();if(e){let i=this.column.isAnyFunctionActive();this.cbSelect.setValue(i)}else this.cbSelect.setValue(this.column.isVisible());let s=!0,t=!0;if(e){let i=this.gos.get("functionsReadOnly"),r=!this.column.isAnyFunctionAllowed();s=!i&&!r,t=s}else{let{enableRowGroup:i,enableValue:r,lockPosition:a,suppressMovable:n,lockVisible:o}=this.column.getColDef(),l=!!i||!!r,c=!!a||!!n;s=!o,t=l||!c}this.cbSelect.setReadOnly(!s),this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!t),this.addOrRemoveCssClass("ag-column-select-column-readonly",!t&&!s),this.cbSelect.setPassive(!1),this.processingColumnStateChange=!1}getDisplayName(){return this.displayName}onSelectAllChanged(e){let s=this.cbSelect;e!==s.getValue()&&(s.isReadOnly()||s.toggle())}isSelected(){return this.cbSelect.getValue()}isSelectable(){return!this.cbSelect.isReadOnly()}isExpandable(){return!1}setExpanded(e){b(158)}},Gh=class{constructor(e){this.items=e}getRowCount(){return this.items.length}getRow(e){return this.items[e]}},Nh="ag-column-select-list",Bh=class extends F{constructor(){super({tag:"div",cls:Nh,role:"presentation"}),this.destroyColumnItemFuncs=[],this.hasLoadedInitialState=!1,this.isInitialState=!1,this.skipRefocus=!1}wireBeans(e){this.colModel=e.colModel}destroy(){this.destroyColumnTree(),super.destroy()}destroyColumnTree(){this.allColsTree=[],this.destroyColumnItemFuncs.forEach(e=>e()),this.destroyColumnItemFuncs=[]}init(e,s,t){this.params=e;let{suppressSyncLayoutWithGrid:i,contractColumnSelection:r,suppressColumnMove:a}=e;this.allowDragging=s,this.eventType=t,i||this.addManagedEventListeners({columnMoved:this.onColumnsChanged.bind(this)}),this.addManagedEventListeners({newColumnsLoaded:this.onColumnsChanged.bind(this)});let n=this.fireSelectionChangedEvent.bind(this);this.addManagedEventListeners({columnPivotChanged:n,columnPivotModeChanged:n,columnRowGroupChanged:n,columnValueChanged:n,columnVisible:n,newColumnsLoaded:n}),this.expandGroupsByDefault=!r;let o=a||i,l=this.createManagedBean(new cn({cssIdentifier:"column-select",ariaRole:"tree",moveItemCallback:(c,d)=>{o||this.moveItems(c,d)}}));this.virtualList=l,this.appendChild(l.getGui()),l.setComponentCreator((c,d)=>(pr(d,c.depth+1),this.createComponentFromItem(c,d))),this.colModel.ready&&this.onColumnsChanged(),!o&&this.createItemDragFeature()}createItemDragFeature(){let{gos:e,beans:s,eventSvc:t,virtualList:i}=this;this.createManagedBean(new Gd(this,i,{dragSourceType:Ee.ToolPanel,listItemDragStartEvent:"columnPanelItemDragStart",listItemDragEndEvent:"columnPanelItemDragEnd",eventSource:t,getCurrentDragValue:r=>_h(r),isMoveBlocked:r=>Na(e,s,vi(r)),getNumRows:r=>r.getDisplayedColsList().length,moveItem:(r,a)=>Ba(s,vi(r),a)}))}moveItems(e,s){let{gos:t,beans:i}=this,{modelItem:r}=e,{group:a,columnGroup:n,column:o,expanded:l}=r,c=vi(a?n:o);if(Na(t,i,c))return;let d=this.displayedColsList.indexOf(r),h=s?-1:1,p=0;if(s){let g=e.columnDepth>0&&o.getParent()?.getChildren();g&&g.length&&o===g[0]&&(p=-1)}else a&&(p=l?r.children.length:0);let u=Math.min(Math.max(d+p+h,0),this.displayedColsList.length-1);this.skipRefocus=!0,Ba(i,c,{rowIndex:u,position:s?"top":"bottom",component:this.virtualList.getComponentAt(u)}),this.focusRowIfAlive(u-p).then(()=>{this.skipRefocus=!1})}createComponentFromItem(e,s){let t=this.allowDragging;if(e.group){let r=new bn(e,t,this.eventType,s);return this.createBean(r),r}let i=new Oh(e,t,this.groupsExist,s);return this.createBean(i),i}onColumnsChanged(){let e=this.params;this.hasLoadedInitialState||(this.hasLoadedInitialState=!0,this.isInitialState=!!e.initialState);let s=this.getExpandedStates(),t=this.colModel.isPivotMode();!e.suppressSyncLayoutWithGrid&&!t?this.buildTreeFromWhatGridIsDisplaying():this.buildTreeFromProvidedColumnDefs(),this.setExpandedStates(s),this.markFilteredColumns(),this.flattenAndFilterModel(),this.isInitialState=!1}getDisplayedColsList(){return this.displayedColsList}getExpandedStates(){let e={};if(this.isInitialState){let{expandedGroupIds:s}=this.params.initialState;return s.forEach(t=>{e[t]=!0}),e}return this.allColsTree?(this.forEachItem(s=>{if(!s.group)return;let t=s.columnGroup;t&&(e[t.getId()]=s.expanded)}),e):{}}setExpandedStates(e){if(!this.allColsTree)return;let{isInitialState:s}=this;this.forEachItem(t=>{if(!t.group)return;let i=t.columnGroup;if(i){let r=e[i.getId()];(r!=null||s)&&(t.expanded=!!r)}})}buildTreeFromWhatGridIsDisplaying(){bh(this.colModel,this.setColumnLayout.bind(this))}setColumnLayout(e){let s=Sh(this.colModel,e);this.buildListModel(s),this.groupsExist=e.some(t=>t&&typeof t.children<"u"),this.markFilteredColumns(),this.flattenAndFilterModel()}buildTreeFromProvidedColumnDefs(){let e=this.colModel;this.buildListModel(e.getColDefColTree()),this.groupsExist=!!e.colDefCols?.treeDepth}buildListModel(e){let s=this.onColumnExpanded.bind(this),t=o=>{o.addEventListener("expandedChanged",s);let l=o.removeEventListener.bind(o,"expandedChanged",s);this.destroyColumnItemFuncs.push(l)},i=this.beans.colNames,r=(o,l,c)=>{o.forEach(d=>{$e(d)?a(d,l,c):n(d,l,c)})},a=(o,l,c)=>{let d=o.getColGroupDef();if(d&&d.suppressColumnsToolPanel)return;if(o.isPadding()){r(o.getChildren(),l,c);return}let p=i.getDisplayNameForProvidedColumnGroup(null,o,"columnToolPanel"),u=new Oa(p,o,l,!0,this.expandGroupsByDefault);c.push(u),t(u),r(o.getChildren(),l+1,u.children)},n=(o,l,c)=>{if(o.getColDef()&&o.getColDef().suppressColumnsToolPanel)return;let h=i.getDisplayNameForColumn(o,"columnToolPanel");c.push(new Oa(h,o,l))};this.destroyColumnTree(),r(e,0,this.allColsTree)}onColumnExpanded(){this.flattenAndFilterModel()}flattenAndFilterModel(){this.displayedColsList=[];let e=i=>{i.passesFilter&&(this.displayedColsList.push(i),i.group&&i.expanded&&i.children.forEach(e))},s=this.virtualList;this.allColsTree.forEach(e),s.setModel(new Gh(this.displayedColsList));let t=null;this.skipRefocus||(t=s.getLastFocusedRow()),s.refresh(),t!=null&&this.focusRowIfAlive(t),this.notifyListeners(),this.refreshAriaLabel()}refreshAriaLabel(){let e=this.getLocaleTextFunc(),s=e("ariaColumnPanelList","Column List"),t=e("columns","Columns"),i=this.displayedColsList.length;ue(this.virtualList.getAriaElement(),`${s} ${i} ${t}`)}focusRowIfAlive(e){return e===-1?Promise.resolve():new Promise(s=>{window.setTimeout(()=>{this.isAlive()&&this.virtualList.focusRow(e),s()},0)})}forEachItem(e){let s=i=>{i.forEach(r=>{e(r),r.group&&s(r.children)})},t=this.allColsTree;t&&s(t)}doSetExpandedAll(e){this.forEachItem(s=>{s.group&&(s.expanded=e)})}setGroupsExpanded(e,s){if(!s){this.doSetExpandedAll(e);return}let t=[];this.forEachItem(r=>{if(!r.group)return;let a=r.columnGroup.getId();s.indexOf(a)>=0&&(r.expanded=e,t.push(a))});let i=s.filter(r=>!t.includes(r));i.length>0&&b(157,{unrecognisedGroupIds:i})}getExpandState(){let e=0,s=0;return this.forEachItem(t=>{t.group&&(t.expanded?e++:s++)}),e>0&&s>0?2:s>0?1:0}doSetSelectedAll(e){mn(this.beans,this.allColsTree,e,this.eventType)}getSelectionState(){let e=0,s=0,t=this.colModel.isPivotMode();if(this.forEachItem(i=>{if(i.group||!i.passesFilter)return;let r=i.column,a=r.getColDef(),n;if(t){if(!r.isAllowPivot()&&!r.isAllowRowGroup()&&!r.isAllowValue())return;n=r.isValueActive()||r.isPivotActive()||r.isRowGroupActive()}else{if(a.lockVisible)return;n=r.isVisible()}n?e++:s++}),!(e>0&&s>0))return!(e===0||s>0)}setFilterText(e){this.filterText=te(e)?e.toLowerCase():null,this.markFilteredColumns(),this.flattenAndFilterModel()}markFilteredColumns(){let e=t=>{if(!te(this.filterText))return!0;let i=t.displayName;return i==null||i.toLowerCase().indexOf(this.filterText)!==-1},s=(t,i)=>{let r=!1;if(t.group){let n=e(t);t.children.forEach(o=>{let l=s(o,n||i);l&&(r=l)})}let a=i||r?!0:e(t);return t.passesFilter=a,a};this.allColsTree.forEach(t=>s(t,!1))}notifyListeners(){this.fireGroupExpandedEvent(),this.fireSelectionChangedEvent()}fireGroupExpandedEvent(){let e=this.getExpandState();this.dispatchLocalEvent({type:"groupExpanded",state:e})}fireSelectionChangedEvent(){if(!this.allColsTree)return;let e=this.getSelectionState();this.dispatchLocalEvent({type:"selectionChanged",state:e})}getExpandedGroups(){let e=[];return this.allColsTree&&this.forEachItem(s=>{s.group&&s.expanded&&e.push(s.columnGroup.getId())}),e}},Vh={selector:"AG-PRIMARY-COLS-LIST",component:Bh},Hh={tag:"div",cls:"ag-column-select",children:[{tag:"ag-primary-cols-header",ref:"primaryColsHeaderPanel"},{tag:"ag-primary-cols-list",ref:"primaryColsListPanel"}]},wn=class extends F{constructor(){super(Hh,[vh,Vh]),this.primaryColsHeaderPanel=T,this.primaryColsListPanel=T,this.registerCSS(gh)}init(e,s,t){let{primaryColsHeaderPanel:i,primaryColsListPanel:r}=this;i.init(s);let a=s.suppressColumnFilter,n=s.suppressColumnSelectAll;s.suppressColumnExpandAll&&a&&n&&i.setDisplayed(!1),this.addManagedListeners(r,{groupExpanded:l=>{i.setExpandState(l.state),s.onStateUpdated()},selectionChanged:l=>i.setSelectionState(l.state)}),r.init(s,e,t),this.addManagedListeners(i,{expandAll:r.doSetExpandedAll.bind(r,!0),collapseAll:r.doSetExpandedAll.bind(r,!1),selectAll:r.doSetSelectedAll.bind(r,!0),unselectAll:r.doSetSelectedAll.bind(r,!1),filterChanged:l=>r.setFilterText(l.filterText)}),this.positionableFeature=this.createManagedBean(new Rt(this.getGui(),{minHeight:100}))}toggleResizable(e){this.positionableFeature.setResizable(e?{bottom:!0}:!1)}expandGroups(e){this.primaryColsListPanel.setGroupsExpanded(!0,e)}collapseGroups(e){this.primaryColsListPanel.setGroupsExpanded(!1,e)}setColumnLayout(e){this.primaryColsListPanel.setColumnLayout(e)}syncLayoutWithGrid(){this.primaryColsListPanel.onColumnsChanged()}getExpandedGroups(){return this.primaryColsListPanel.getExpandedGroups()}},Uh=".ag-column-panel{display:flex;flex:1 1 auto;flex-direction:column;overflow:hidden}.ag-pivot-mode-panel{display:flex;height:var(--ag-header-height)}.ag-pivot-mode-select{align-items:center;display:flex}:where(.ag-ltr) .ag-pivot-mode-select{margin-left:var(--ag-widget-container-horizontal-padding)}:where(.ag-rtl) .ag-pivot-mode-select{margin-right:var(--ag-widget-container-horizontal-padding)}.ag-column-panel-column-select{border-bottom:var(--ag-tool-panel-separator-border)}.ag-column-panel-column-select:where(:nth-child(n+2 of :not(.ag-hidden))){border-top:var(--ag-tool-panel-separator-border)}:where(.ag-column-panel) .ag-column-drop-vertical{flex:1 1 0px;min-height:50px;&:where(:not(.ag-last-column-drop)){border-bottom:var(--ag-tool-panel-separator-border)}}",zh=class extends F{constructor(){super({tag:"div",cls:"ag-column-panel"}),this.initialised=!1,this.childDestroyFuncs=[],this.registerCSS(Uh)}wireBeans(e){this.colToolPanelFactory=e.colToolPanelFactory}setVisible(e){super.setDisplayed(e),e&&!this.initialised&&this.init(this.params)}init(e){let s=B(this.gos,{suppressColumnMove:!1,suppressColumnSelectAll:!1,suppressColumnFilter:!1,suppressColumnExpandAll:!1,contractColumnSelection:!1,suppressPivotMode:!1,suppressRowGroups:!1,suppressValues:!1,suppressPivots:!1,suppressSyncLayoutWithGrid:!1}),t=L(L({},s),e);this.params=t;let{childDestroyFuncs:i,colToolPanelFactory:r,gos:a}=this,n=a.isModuleRegistered("SharedPivot"),o=n||a.isModuleRegistered("SharedRowGrouping");!t.suppressPivotMode&&r&&n&&(this.pivotModePanel=r.createPivotModePanel(this,i));let l=this.createBean(new wn);if(this.primaryColsPanel=l,i.push(()=>this.destroyBean(this.primaryColsPanel)),l.init(!0,t,"toolPanelUi"),l.addCssClass("ag-column-panel-column-select"),this.appendChild(l),r){!t.suppressRowGroups&&o&&(this.rowGroupDropZonePanel=r.createRowGroupPanel(this,i)),!t.suppressValues&&o&&(this.valuesDropZonePanel=r.createValuesPanel(this,i)),!t.suppressPivots&&n&&(this.pivotDropZonePanel=r.createPivotPanel(this,i)),this.setLastVisible();let[c]=this.addManagedEventListeners({columnPivotModeChanged:()=>{this.resetChildrenHeight(),this.setLastVisible()}});i.push(()=>c())}this.initialised=!0}setPivotModeSectionVisible(e){let s=this.colToolPanelFactory;s&&(this.pivotModePanel=s.setPanelVisible(this.pivotModePanel,e,s.createPivotModePanel.bind(s,this,this.childDestroyFuncs,!0)),this.setLastVisible())}setRowGroupsSectionVisible(e){let s=this.colToolPanelFactory;s&&(this.rowGroupDropZonePanel=s.setPanelVisible(this.rowGroupDropZonePanel,e,s.createRowGroupPanel.bind(s,this,this.childDestroyFuncs)),this.setLastVisible())}setValuesSectionVisible(e){let s=this.colToolPanelFactory;s&&(this.valuesDropZonePanel=s.setPanelVisible(this.valuesDropZonePanel,e,s.createValuesPanel.bind(s,this,this.childDestroyFuncs)),this.setLastVisible())}setPivotSectionVisible(e){let s=this.colToolPanelFactory;s&&(this.pivotDropZonePanel=s.setPanelVisible(this.pivotDropZonePanel,e,s.createPivotPanel.bind(s,this,this.childDestroyFuncs)),this.pivotDropZonePanel?.setDisplayed(e),this.setLastVisible())}setResizers(){[this.primaryColsPanel,this.rowGroupDropZonePanel,this.valuesDropZonePanel,this.pivotDropZonePanel].forEach(e=>{if(!e)return;let s=e.getGui();e.toggleResizable(!s.classList.contains("ag-last-column-drop")&&!s.classList.contains("ag-hidden"))})}setLastVisible(){let e=this.getGui();Array.prototype.slice.call(e.querySelectorAll(".ag-column-drop")).forEach(r=>r.classList.remove("ag-last-column-drop"));let t=e.querySelectorAll(".ag-column-drop:not(.ag-hidden)"),i=ce(t);i&&i.classList.add("ag-last-column-drop"),this.setResizers()}resetChildrenHeight(){let s=this.getGui().children;for(let t=0;t<s.length;t++){let{style:i}=s[t];i.removeProperty("height"),i.removeProperty("flex")}}expandColumnGroups(e){this.primaryColsPanel.expandGroups(e)}collapseColumnGroups(e){this.primaryColsPanel.collapseGroups(e)}setColumnLayout(e){this.primaryColsPanel.setColumnLayout(e)}syncLayoutWithGrid(){this.primaryColsPanel.syncLayoutWithGrid()}destroyChildren(){let e=this.childDestroyFuncs;e.forEach(s=>s()),e.length=0,Ge(this.getGui())}refresh(e){return this.destroyChildren(),this.init(e),!0}getState(){return{expandedGroupIds:this.primaryColsPanel.getExpandedGroups()}}destroy(){this.destroyChildren(),super.destroy()}},Kh=".ag-column-drop{align-items:center;display:inline-flex;overflow:auto;position:relative;width:100%}.ag-column-drop-list{align-items:center;display:flex}.ag-column-drop-cell{align-items:center;background-color:var(--ag-column-drop-cell-background-color);border:var(--ag-column-drop-cell-border);border-radius:500px;color:var(--ag-column-drop-cell-text-color);display:flex;padding:calc(var(--ag-spacing)*.25);position:relative;&:focus-visible{box-shadow:var(--ag-focus-shadow)}:where(.ag-drag-handle){color:var(--ag-column-drop-cell-drag-handle-color)}}:where(.ag-ltr) .ag-column-drop-cell{padding-left:calc(var(--ag-spacing)*.75)}:where(.ag-rtl) .ag-column-drop-cell{padding-right:calc(var(--ag-spacing)*.75)}.ag-column-drop-cell-text{flex:1 1 auto;margin:0 var(--ag-spacing);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-column-drop-vertical{align-items:stretch;display:flex;flex-direction:column;min-height:75px;overflow:hidden}.ag-column-drop-vertical-title-bar{align-items:center;display:flex;flex:none;padding:var(--ag-widget-container-vertical-padding) calc(var(--ag-spacing)*2) 0}.ag-column-drop-vertical-list{align-items:stretch;flex-direction:column;flex-grow:1;overflow-x:auto;padding-bottom:var(--ag-spacing);padding-left:var(--ag-spacing);padding-right:var(--ag-spacing);position:relative;>*{flex:none}}:where(.ag-column-drop-empty) .ag-column-drop-vertical-list{overflow:hidden}.ag-column-drop-cell-button{cursor:pointer;min-width:0;opacity:.75;&:hover{opacity:1}}.ag-column-drop-wrapper{display:flex}.ag-column-drop-horizontal-half-width{width:50%!important}.ag-column-drop-cell-ghost{opacity:.5}.ag-column-drop-horizontal{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;white-space:nowrap}:where(.ag-ltr) .ag-column-drop-horizontal{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-column-drop-horizontal{padding-right:var(--ag-cell-horizontal-padding)}.ag-column-drop-horizontal-list{gap:var(--ag-cell-widget-spacing)}.ag-column-drop-vertical-cell{margin-top:var(--ag-spacing)}:where(.ag-ltr) .ag-column-drop-vertical-icon{margin-right:var(--ag-widget-horizontal-spacing)}:where(.ag-rtl) .ag-column-drop-vertical-icon{margin-left:var(--ag-widget-horizontal-spacing)}.ag-select-agg-func-popup{background:var(--ag-background-color);border:1px solid var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);height:calc(var(--ag-spacing)*5*3.5);padding:0;position:absolute}.ag-select-agg-func-virtual-list-item{cursor:default;&:hover{background-color:var(--ag-selected-row-background-color)}}:where(.ag-ltr) .ag-select-agg-func-virtual-list-item{padding-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-select-agg-func-virtual-list-item{padding-right:calc(var(--ag-spacing)*2)}:where(.ag-ltr) .ag-column-drop-horizontal-half-width:where(:not(:last-child)){border-right:1px solid var(--ag-border-color)}:where(.ag-rtl) .ag-column-drop-horizontal-half-width:where(:not(:last-child)){border-left:1px solid var(--ag-border-color)}";function Va(e,s,t){e==null||s==null||e.splice(t,0,...s)}var Wh={tag:"div",cls:"ag-unselectable",role:"presentation"},jh=class extends F{constructor(e){super(Wh),this.horizontal=e,this.state="notDragging",this.guiDestroyFunctions=[],this.childPillComponents=[],this.resizeEnabled=!1,this.addElementClasses(this.getGui()),this.ePillDropList=U({tag:"div"}),this.addElementClasses(this.ePillDropList,"list"),this.registerCSS(Kh)}toggleResizable(e){this.positionableFeature.setResizable(e?{bottom:!0}:!1),this.resizeEnabled=e}isSourceEventFromTarget(e){let{dropZoneTarget:s,dragSource:t}=e;return s.contains(t.eElement)}destroy(){this.destroyGui(),super.destroy()}destroyGui(){this.guiDestroyFunctions.forEach(e=>e()),this.guiDestroyFunctions.length=0,this.childPillComponents.length=0,Ge(this.getGui()),Ge(this.ePillDropList)}init(e){this.params=e??{},this.createManagedBean(new Ts(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.onKeyDown.bind(this)})),this.setupDropTarget(),this.positionableFeature=new Rt(this.getGui()),this.createManagedBean(this.positionableFeature),this.refreshGui(),ue(this.ePillDropList,this.getAriaLabel())}onTabKeyDown(e){let s=xs(this.getFocusableElement(),null,!0),t=s.length;if(t===0)return;let{shiftKey:i}=e,r=ve(this.beans),a=r===s[0],n=r===ce(s);t===1||a&&i||n&&!i||s[i?0:t-1].focus()}onKeyDown(e){let{key:s}=e,t=!this.horizontal,i=s===y.DOWN,r=s===y.UP;if(!t){let a=this.gos.get("enableRtl");i=!a&&s===y.RIGHT||a&&s===y.LEFT,r=!a&&s===y.LEFT||a&&s===y.RIGHT}if(!(!i&&!r))if(e.preventDefault(),e.shiftKey)this.moveFocusedItem(r);else{let a=xe(this.beans,this.getFocusableElement(),!1,r);a&&a.focus()}}moveFocusedItem(e){let s=this.getFocusedItem();if(s===-1)return;let t=e?-1:1;if(!this.normalizeAndUpdateInsertIndex(s,s+t))return;let r=this.childPillComponents[s];if(!r.isMovable())return;let a=r.getItem();this.focusItemAtIndex(this.insertIndex),this.rearrangeItems([a],!0)}addElementClasses(e,s){s=s?`-${s}`:"";let t=this.horizontal?"horizontal":"vertical";e.classList.add(`ag-column-drop${s}`,`ag-column-drop-${t}${s}`)}setupDropTarget(){this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),onDragCancel:this.onDragCancel.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},this.beans.dragAndDrop?.addDropTarget(this.dropTarget)}minimumAllowedNewInsertIndex(){return 0}checkInsertIndex(e){let s=this.getNewInsertIndex(e);return s<0?!1:this.normalizeAndUpdateInsertIndex(this.insertIndex,s)}normalizeAndUpdateInsertIndex(e,s){let t=this.minimumAllowedNewInsertIndex(),i=Math.max(t,s),r=i!==e;return r&&(this.insertIndex=i),r}getNewInsertIndex(e){let s=e.event,t=this.horizontal?s.clientX:s.clientY,i=this.childPillComponents.map(a=>a.getGui().getBoundingClientRect()),r=i.findIndex(a=>this.horizontal?a.right>t&&a.left<t:a.top<t&&a.bottom>t);if(r===-1){let a=this.gos.get("enableRtl");return i.every(l=>t>(this.horizontal?l.right:l.bottom))?a&&this.horizontal?0:this.childPillComponents.length:i.every(l=>t<(this.horizontal?l.left:l.top))?a&&this.horizontal?this.childPillComponents.length:0:this.insertIndex}return this.insertIndex<=r?r+1:r}checkDragStartedBySelf(e){this.state==="notDragging"&&(this.state="rearrangeItems",this.potentialDndItems=this.getItems(e.dragSource.getDragItem()),this.refreshGui(),this.checkInsertIndex(e),this.refreshGui())}onDragging(e){this.checkDragStartedBySelf(e),this.checkInsertIndex(e)&&this.refreshGui()}handleDragEnterEnd(e){}onDragEnter(e){let s=this.getItems(e.dragSource.getDragItem());this.state="newItemsIn";let t=s.filter(r=>this.isItemDroppable(r,e)),i=t.every(r=>this.childPillComponents.map(a=>a.getItem()).indexOf(r)!==-1);if(t.length!==0){if(this.potentialDndItems=t,i){this.state="notDragging";return}this.handleDragEnterEnd(e),this.checkInsertIndex(e),this.refreshGui()}}isPotentialDndItems(){return!!this.potentialDndItems?.length}handleDragLeaveEnd(e){}onDragLeave(e){if(this.state==="rearrangeItems"){let s=this.getItems(e.dragSource.getDragItem());this.removeItems(s)}this.isPotentialDndItems()&&(this.handleDragLeaveEnd(e),this.potentialDndItems=[],this.refreshGui()),this.state="notDragging"}onDragCancel(e){this.isPotentialDndItems()&&(this.state==="newItemsIn"&&this.handleDragLeaveEnd(e),this.potentialDndItems=[],this.refreshGui()),this.state="notDragging"}onDragStop(){this.isPotentialDndItems()&&(this.state==="newItemsIn"?this.addItems(this.potentialDndItems):this.rearrangeItems(this.potentialDndItems),this.potentialDndItems=[],this.refreshGui()),this.state="notDragging"}removeItems(e){let s=this.getExistingItems().filter(t=>!e.includes(t));this.updateItems(s)}addItems(e){if(!e)return;let s=this.getExistingItems().slice(),t=e.filter(i=>s.indexOf(i)<0);Va(s,t,this.insertIndex),this.updateItems(s)}addItem(e){this.insertIndex=this.getExistingItems().length,this.addItems([e]),this.refreshGui()}rearrangeItems(e,s){let t;return s?t=this.getExistingItems().filter(i=>e.indexOf(i)===-1):t=this.getNonGhostItems().slice(),Va(t,e,this.insertIndex),Hr(t,this.getExistingItems())?!1:(this.updateItems(t),!0)}refreshGui(){let e=0;this.horizontal||(e=this.ePillDropList.scrollTop);let s=this.resizeEnabled,t=this.getFocusedItem(),{eGridDiv:i}=this.beans,r=Pt(),a=null;r&&(a=xe(this.beans,i)??xe(this.beans,i,!1,!0)),this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addItemsToGui(),e!==0&&(this.ePillDropList.scrollTop=e),s&&this.toggleResizable(s),r&&this.restoreFocus(t,a)}getFocusedItem(){let e=this.getGui(),s=ve(this.beans);return e.contains(s)?Array.from(e.querySelectorAll(".ag-column-drop-cell")).indexOf(s):-1}focusItemAtIndex(e){let s=this.getGui(),i=Array.from(s.querySelectorAll(".ag-column-drop-cell"))[e];i&&i.focus({preventScroll:!0})}restoreFocus(e,s){let t=this.getGui(),i=Array.from(t.querySelectorAll(".ag-column-drop-cell"));if(e===-1)return;i.length===0&&s.focus();let r=Math.min(i.length-1,e),a=i[r];a&&a.focus()}focusList(e){let s=e?this.childPillComponents.length-1:0;this.restoreFocus(s,this.getFocusableElement())}getNonGhostItems(){let e=this.getExistingItems();return this.isPotentialDndItems()?e.filter(s=>!this.potentialDndItems.includes(s)):e}addItemsToGui(){let s=this.getNonGhostItems().map(t=>this.createItemComponent(t,!1));if(this.isPotentialDndItems()){let t=this.potentialDndItems.map(i=>this.createItemComponent(i,!0));this.insertIndex>=s.length?s.push(...t):s.splice(this.insertIndex,0,...t)}this.appendChild(this.ePillDropList),s.forEach((t,i)=>{i>0&&this.addArrow(this.ePillDropList),this.ePillDropList.appendChild(t.getGui())}),this.addAriaLabelsToComponents()}addAriaLabelsToComponents(){let{childPillComponents:e,ePillDropList:s}=this,t=e.length;be(s,t===0?"presentation":"listbox");for(let i=0;i<t;i++){let a=e[i].getGui();us(a,i+1),hs(a,t)}}createItemComponent(e,s){let t=this.createPillComponent(e,this.dropTarget,s,this.horizontal);return t.addEventListener("columnRemove",this.removeItems.bind(this,[e])),this.createBean(t),this.guiDestroyFunctions.push(()=>this.destroyBean(t)),s||this.childPillComponents.push(t),t}addIconAndTitleToGui(){let{title:e,icon:s}=this.params;if(!e||!s)return;let t=U({tag:"div"});if(mr(t,!0),this.addElementClasses(t,"title-bar"),this.addElementClasses(s,"icon"),this.addOrRemoveCssClass("ag-column-drop-empty",this.isExistingItemsEmpty()),t.appendChild(s),!this.horizontal){let i=U({tag:"span"});this.addElementClasses(i,"title"),i.textContent=e,t.appendChild(i)}this.appendChild(t)}isExistingItemsEmpty(){return this.getExistingItems().length===0}addEmptyMessageToGui(){let{emptyMessage:e}=this.params;if(!e||!this.isExistingItemsEmpty()||this.isPotentialDndItems())return;let s=U({tag:"span"});s.textContent=e,this.addElementClasses(s,"empty-message"),this.ePillDropList.appendChild(s)}addArrow(e){if(this.horizontal){let s=this.gos.get("enableRtl"),t=w(s?"panelDelimiterRtl":"panelDelimiter",this.beans);this.addElementClasses(t,"cell-separator"),e.appendChild(t)}}},$h={tag:"span",role:"option",children:[{tag:"span",ref:"eDragHandle",cls:"ag-drag-handle ag-column-drop-cell-drag-handle",role:"presentation"},{tag:"span",ref:"eText",cls:"ag-column-drop-cell-text",attrs:{"aria-hidden":"true"}},{tag:"span",ref:"eButton",cls:"ag-column-drop-cell-button",role:"presentation"}]},Yh=class extends F{constructor(e,s,t,i,r){super(),this.dragSourceDropTarget=e,this.ghost=s,this.horizontal=t,this.template=i,this.agComponents=r,this.eText=T,this.eDragHandle=T,this.eButton=T}postConstruct(){this.setTemplate(this.template??$h,this.agComponents);let e=this.getGui(),{beans:s,eDragHandle:t,eText:i,eButton:r}=this;this.addElementClasses(e),this.addElementClasses(t,"drag-handle"),this.addElementClasses(i,"text"),this.addElementClasses(r,"button"),t.appendChild(w("columnDrag",s)),r.appendChild(w("cancel",s)),this.tooltipFeature=this.createOptionalManagedBean(s.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui()})),this.setupComponents(),!this.ghost&&this.isDraggable()&&this.addDragSource(),this.setupAria(),this.setupTooltip(),this.activateTabIndex(),this.refreshDraggable()}isDraggable(){return!0}refreshDraggable(){this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!this.isDraggable())}setupAria(){let e=this.getLocaleTextFunc(),s=[this.getAriaDisplayName()];this.addAdditionalAriaInstructions(s,e),ue(this.getGui(),s.join(". "))}addAdditionalAriaInstructions(e,s){if(this.isRemovable()){let t=s("ariaDropZoneColumnComponentDescription","Press DELETE to remove");e.push(t)}}setupTooltip(){let e=()=>this.tooltipFeature?.setTooltipAndRefresh(this.getTooltip());e(),this.addManagedEventListeners({newColumnsLoaded:e})}getDragSourceId(){}getDefaultIconName(){return"notAllowed"}addDragSource(){let{beans:{dragAndDrop:e},eDragHandle:s}=this,t=this.createGetDragItem(),i=this.getDefaultIconName(),r={type:this.getDragSourceType(),sourceId:this.getDragSourceId(),eElement:s,getDefaultIconName:()=>i,getDragItem:t,dragItemName:this.getDisplayName()};e?.addDragSource(r,!0),this.addDestroyFunc(()=>e?.removeDragSource(r))}setupComponents(){this.setTextValue(),this.setupRemove(),this.ghost&&this.addCssClass("ag-column-drop-cell-ghost")}isRemovable(){return!0}refreshRemove(){j(this.eButton,this.isRemovable())}setupRemove(){this.refreshRemove();let e={type:"columnRemove"};this.addGuiEventListener("keydown",t=>this.onKeyDown(t)),this.addManagedElementListeners(this.eButton,{click:t=>{this.dispatchLocalEvent(e),t.stopPropagation()}});let s=new Fs(this.eButton);this.addManagedListeners(s,{tap:()=>this.dispatchLocalEvent(e)}),this.addDestroyFunc(s.destroy.bind(s))}onKeyDown(e){e.key===y.DELETE&&this.isRemovable()&&(e.preventDefault(),this.dispatchLocalEvent({type:"columnRemove"}))}getDisplayValue(){return this.getDisplayName()}setTextValue(){let e=this.getDisplayValue(),s=se(e);this.eText.innerHTML=s}addElementClasses(e,s){s=s?`-${s}`:"";let t=this.horizontal?"horizontal":"vertical";e.classList.add(`ag-column-drop-cell${s}`,`ag-column-drop-${t}-cell${s}`)}destroy(){super.destroy(),this.dragSourceDropTarget=null}},qh=class extends Yh{constructor(e,s,t,i,r){super(s,t,r),this.column=e,this.dropZonePurpose=i,this.eSortIndicator=T,this.popupShowing=!1}postConstruct(){let{sortSvc:e,colNames:s}=this.beans;this.template={tag:"span",role:"option",children:[{tag:"span",ref:"eDragHandle",cls:"ag-drag-handle ag-column-drop-cell-drag-handle",role:"presentation"},{tag:"span",ref:"eText",cls:"ag-column-drop-cell-text",attrs:{"aria-hidden":"true"}},e?{tag:"ag-sort-indicator",ref:"eSortIndicator"}:void 0,{tag:"span",ref:"eButton",cls:"ag-column-drop-cell-button",role:"presentation"}]},e&&(this.agComponents=[e.getSortIndicatorSelector()]),this.displayName=s.getDisplayNameForColumn(this.column,"columnDrop"),super.postConstruct(),e&&(this.setupSort(),this.addManagedEventListeners({sortChanged:()=>{this.setupAria()}})),this.isGroupingZone()&&this.addManagedPropertyListener("groupLockGroupColumns",()=>{this.refreshRemove(),this.refreshDraggable(),this.setupAria()})}getItem(){return this.column}getDisplayName(){return this.displayName}getTooltip(){return this.column.getColDef().headerTooltip}addAdditionalAriaInstructions(e,s){let t=this.gos.get("rowGroupPanelSuppressSort"),i=this.gos.get("functionsReadOnly");if(this.isAggregationZone()&&!i){let r=s("ariaDropZoneColumnValueItemDescription","Press ENTER to change the aggregation type");e.push(r)}if(this.isGroupingZone()&&this.column.isSortable()&&!t){let r=s("ariaDropZoneColumnGroupItemDescription","Press ENTER to sort");e.push(r)}super.addAdditionalAriaInstructions(e,s)}isMovable(){return this.isDraggable()}isDraggable(){return this.isReadOnly()}isRemovable(){return this.isReadOnly()}isReadOnly(){return!this.isGroupingAndLocked()&&!this.gos.get("functionsReadOnly")}getAriaDisplayName(){let e=this.getLocaleTextFunc(),{name:s,aggFuncName:t}=this.getColumnAndAggFuncName(),i=e("ariaDropZoneColumnComponentAggFuncSeparator"," of "),r={asc:e("ariaDropZoneColumnComponentSortAscending","ascending"),desc:e("ariaDropZoneColumnComponentSortDescending","descending")},a=this.column.getSort(),n=this.gos.get("rowGroupPanelSuppressSort");return[t&&`${t}${i}`,s,this.isGroupingZone()&&!n&&a&&`, ${r[a]}`].filter(o=>!!o).join("")}getColumnAndAggFuncName(){let e=this.displayName,s="";if(this.isAggregationZone()){let t=this.column.getAggFunc(),i=typeof t=="string"?t:"agg";s=this.getLocaleTextFunc()(i,i)}return{name:e,aggFuncName:s}}setupSort(){if(!(!this.column.isSortable()||!this.isGroupingZone())&&!this.gos.get("rowGroupPanelSuppressSort")){this.eSortIndicator.setupSort(this.column,!0);let e=s=>{s.preventDefault(),this.beans.sortSvc.progressSortFromEvent(this.column,s)};this.addGuiEventListener("click",e),this.addGuiEventListener("keydown",s=>{s.key===y.ENTER&&this.isGroupingZone()&&e(s)})}}getDefaultIconName(){return"hide"}createGetDragItem(){let{column:e}=this;return()=>{let s={};return s[e.getId()]=e.isVisible(),{columns:[e],visibleState:s}}}setupComponents(){super.setupComponents(),this.isAggregationZone()&&!this.gos.get("functionsReadOnly")&&this.addGuiEventListener("click",this.onShowAggFuncSelection.bind(this))}onKeyDown(e){super.onKeyDown(e),e.key===y.ENTER&&this.isAggregationZone()&&!this.gos.get("functionsReadOnly")&&(e.preventDefault(),this.onShowAggFuncSelection())}getDisplayValue(){let{name:e,aggFuncName:s}=this.getColumnAndAggFuncName();return this.isAggregationZone()?`${s}(${e})`:e}onShowAggFuncSelection(){if(this.popupShowing)return;this.popupShowing=!0;let{aggFuncSvc:e,popupSvc:s}=this.beans,t=new cn({cssIdentifier:"select-agg-func"}),i=e.getFuncNames(this.column),r=this.getGui(),a=t.getGui();t.setModel({getRow:function(p){return i[p]},getRowCount:function(){return i.length}}),this.createBean(t);let n=U({tag:"div",cls:"ag-select-agg-func-popup"});n.style.top="0px",n.style.left="0px",n.appendChild(a),n.style.width=`${r.clientWidth}px`;let[o]=this.addManagedElementListeners(n,{focusout:p=>{!n.contains(p.relatedTarget)&&d&&d.hideFunc()}}),l=p=>{this.destroyBean(t),this.popupShowing=!1,p?.key==="Escape"&&r.focus(),o&&o()},c=this.getLocaleTextFunc(),d=s.addPopup({modal:!0,eChild:n,closeOnEsc:!0,closedCallback:l,ariaLabel:c("ariaLabelAggregationFunction","Aggregation Function")});d&&t.setComponentCreator(this.createAggSelect.bind(this,d.hideFunc)),t.addGuiEventListener("keydown",p=>{if(p.key===y.ENTER||p.key===y.SPACE){let u=t.getLastFocusedRow();if(u==null)return;let g=t.getComponentAt(u);g&&g.selectItem()}}),s.positionPopupByComponent({type:"aggFuncSelect",eventSource:r,ePopup:n,keepWithinBounds:!0,column:this.column,position:"under"}),t.refresh();let h=i.findIndex(p=>p===this.column.getAggFunc());h===-1&&(h=0),t.focusRow(h)}createAggSelect(e,s){let t=()=>{e(),this.getGui().focus(),this.beans.valueColsSvc?.setColumnAggFunc?.(this.column,s,"toolPanelDragAndDrop")},i=this.getLocaleTextFunc(),r=s.toString(),a=i(r,r);return new Xh(t,a)}isGroupingAndLocked(){return this.isGroupingZone()&&Xt(this.column,this.beans)}isAggregationZone(){return this.dropZonePurpose==="aggregation"}isGroupingZone(){return this.dropZonePurpose==="rowGroup"}getDragSourceType(){return Ee.ToolPanel}destroy(){super.destroy(),this.column=null}},Xh=class extends F{constructor(e,s){super({tag:"div",cls:"ag-select-agg-func-item"}),this.selectItem=e,this.getGui().innerText=s,this.addGuiEventListener("click",this.selectItem)}},Mi=class extends jh{constructor(e,s){super(e),this.dropZonePurpose=s,this.addElementClasses(this.getGui(),this.dropZonePurpose.toLowerCase())}init(e){super.init(e),this.addManagedEventListeners({newColumnsLoaded:this.refreshGui.bind(this)}),this.addManagedPropertyListeners(["functionsReadOnly","rowGroupPanelSuppressSort","groupLockGroupColumns"],this.refreshGui.bind(this))}getItems(e){return e.columns??[]}isInterestedIn(e){return e===Ee.HeaderCell||e===Ee.ToolPanel}minimumAllowedNewInsertIndex(){let{gos:e,rowGroupColsSvc:s}=this.beans,t=e.get("groupLockGroupColumns"),i=s?.columns.length??0;return t===-1?i:Math.min(t,i)}showOrHideColumnOnExit(e){return this.isRowGroupPanel()&&ys(this.gos,!0)&&!e.fromNudge}handleDragEnterEnd(e){if(this.showOrHideColumnOnExit(e)){let i=e.dragSource.getDragItem().columns;this.setColumnsVisible(i,!1,"uiColumnDragged")}}handleDragLeaveEnd(e){if(this.showOrHideColumnOnExit(e)){let t=e.dragSource.getDragItem();this.setColumnsVisible(t.columns,!0,"uiColumnDragged")}}setColumnsVisible(e,s,t){if(e){let i=e.filter(r=>!r.getColDef().lockVisible);this.beans.colModel.setColsVisible(i,s,t)}}isRowGroupPanel(){return this.dropZonePurpose==="rowGroup"}createPillComponent(e,s,t,i){return new qh(e,s,t,this.dropZonePurpose,i)}},Zh=class extends Mi{constructor(e){super(e,"pivot")}postConstruct(){let e=this.getLocaleTextFunc(),s=e("pivotColumnsEmptyMessage","Drag here to set column labels"),t=e("pivots","Column Labels");super.init({icon:w("pivotPanel",this.beans,null),emptyMessage:s,title:t}),this.addManagedEventListeners({newColumnsLoaded:this.refresh.bind(this),columnPivotChanged:this.refresh.bind(this),columnPivotModeChanged:this.checkVisibility.bind(this)}),this.refresh()}getAriaLabel(){return this.getLocaleTextFunc()("ariaPivotDropZonePanelLabel","Column Labels")}refresh(){this.checkVisibility(),this.refreshGui()}checkVisibility(){let e=this.beans.colModel,s=e.isPivotMode();if(this.horizontal)switch(this.gos.get("pivotPanelShow")){case"always":this.setDisplayed(s);break;case"onlyWhenPivoting":{let t=e.isPivotActive();this.setDisplayed(s&&t);break}default:this.setDisplayed(!1);break}else this.setDisplayed(s)}isItemDroppable(e,s){return this.gos.get("functionsReadOnly")||!e.isPrimary()?!1:e.isAllowPivot()&&(!e.isPivotActive()||this.isSourceEventFromTarget(s))}updateItems(e){this.beans.pivotColsSvc?.setColumns(e,"toolPanelUi")}getIconName(){return this.isPotentialDndItems()?"pivot":"notAllowed"}getExistingItems(){return this.beans.pivotColsSvc?.columns??[]}},Jh=class extends Mi{constructor(e){super(e,"rowGroup")}postConstruct(){let e=this.getLocaleTextFunc(),s=e("rowGroupColumnsEmptyMessage","Drag here to set row groups"),t=e("groups","Row Groups");super.init({icon:w("rowGroupPanel",this.beans,null),emptyMessage:s,title:t}),this.addManagedEventListeners({columnRowGroupChanged:this.refreshGui.bind(this)})}getAriaLabel(){return this.getLocaleTextFunc()("ariaRowGroupDropZonePanelLabel","Row Groups")}isItemDroppable(e,s){return this.gos.get("functionsReadOnly")||!e.isPrimary()||e.colDef.showRowGroup?!1:e.isAllowRowGroup()&&(!e.isRowGroupActive()||this.isSourceEventFromTarget(s))}updateItems(e){this.beans.rowGroupColsSvc?.setColumns(e,"toolPanelUi")}getIconName(){return this.isPotentialDndItems()?"group":"notAllowed"}getExistingItems(){return this.beans.rowGroupColsSvc?.columns??[]}},Qh=class extends Mi{constructor(e){super(e,"aggregation")}postConstruct(){let e=this.getLocaleTextFunc(),s=e("valueColumnsEmptyMessage","Drag here to aggregate"),t=e("values","Values");super.init({icon:w("valuePanel",this.beans,null),emptyMessage:s,title:t}),this.addManagedEventListeners({columnValueChanged:this.refreshGui.bind(this)})}getAriaLabel(){return this.getLocaleTextFunc()("ariaValuesDropZonePanelLabel","Values")}getIconName(){return this.isPotentialDndItems()?"aggregate":"notAllowed"}isItemDroppable(e,s){return this.gos.get("functionsReadOnly")||!e.isPrimary()?!1:e.isAllowValue()&&(!e.isValueActive()||this.isSourceEventFromTarget(s))}updateItems(e){this.beans.valueColsSvc?.setColumns(e,"toolPanelUi")}getExistingItems(){return this.beans.valueColsSvc?.columns??[]}},eu={tag:"div",cls:"ag-pivot-mode-panel",children:[{tag:"ag-toggle-button",ref:"cbPivotMode",cls:"ag-pivot-mode-select"}]},tu=class extends F{constructor(){super(...arguments),this.cbPivotMode=T}postConstruct(){this.setTemplate(eu,[ha]);let e=this.cbPivotMode,{colModel:s,ctrlsSvc:t,gos:i}=this.beans;e.setValue(s.isPivotMode());let r=this.getLocaleTextFunc();e.setLabel(r("pivotMode","Pivot Mode"));let a=()=>{let o=!!e.getValue();o!==s.isPivotMode()&&(i.updateGridOptions({options:{pivotMode:o},source:"toolPanelUi"}),t.getHeaderRowContainerCtrls().forEach(l=>l.refresh()))},n=()=>{let o=s.isPivotMode();e.setValue(o)};this.addManagedListeners(e,{fieldValueChanged:a}),this.addManagedEventListeners({newColumnsLoaded:n,columnPivotModeChanged:n})}},su=class extends x{constructor(){super(...arguments),this.beanName="colToolPanelFactory"}setPanelVisible(e,s,t){return e?e.setDisplayed(s):s&&(e=t()),e}createRowGroupPanel(e,s){return this.createPanel(e,s,new Jh(!1))}createValuesPanel(e,s){return this.createPanel(e,s,new Qh(!1))}createPivotPanel(e,s){return this.createPanel(e,s,new Zh(!1))}createPivotModePanel(e,s,t){return this.createPanel(e,s,new tu,t)}createPanel(e,s,t,i){return t=e.createBean(t),s.push(()=>e.destroyBean(t)),i?e.prependChild(t):e.appendChild(t),t}},Rf={moduleName:"ColumnsToolPanel",version:re,beans:[su],userComponents:{agColumnsToolPanel:zh},icons:{columnsToolPanel:"columns",menuAddRowGroup:"group",menuRemoveRowGroup:"group",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate"},dependsOn:[Le,dh,Ms,Es,Ps,pn]},iu=class extends x{constructor(){super(...arguments),this.beanName="chartMenuItemMapper"}getChartItems(e){let s=this.beans,t=s.chartSvc,i=e==="pivotChart";if(!t)return null;let r=this.getLocaleTextFunc.bind(this),a=i?new ru(s,t,r):new au(s,t,r),n=t.isEnterprise(),o=a.getMenuItem();if(o&&o.subMenu&&!n){let c=d=>N(L({},d),{subMenu:d.subMenu?.filter(h=>!h._enterprise).map(h=>c(h))});o=c(o)}let l=this.gos.get("chartToolPanelsDef")?.settingsPanel?.chartGroupsDef;return l&&(o=this.filterAndOrderChartMenu(o,l,a.getConfigLookup())),this.cleanInternals(o)}cleanInternals(e){if(!e)return e;let s=t=>(delete t?._key,delete t?._enterprise,t?.subMenu?.forEach(i=>s(i)),t);return s(e)}buildLookup(e){let s={},t=i=>{s[i._key]=i,i.subMenu&&i.subMenu.forEach(r=>t(r))};return t(e),s}filterAndOrderChartMenu(e,s,t){let i=this.buildLookup(e),r=N(L({},e),{subMenu:[]});for(let a of Object.keys(s)){let n=s[a],o=t[a];if(o===null)continue;if(o==null){b(173,{group:a});continue}let l=i[o._key];if(l)if(l.subMenu){let c=n.map(d=>{let h=o[d];if(h==null){b(174,{group:a,chartType:d});return}return i[h]}).filter(d=>d!==void 0);c.length>0&&(l.subMenu=c,r.subMenu?.push(l))}else r.subMenu?.push(l)}return r.subMenu?.length==0?null:r}},ru=class{constructor(e,s,t){this.beans=e,this.chartSvc=s,this.getLocaleTextFunc=t}getMenuItem(){let e=this.getLocaleTextFunc(),s=(t,i,r,a,n=!1)=>({name:e(t,i+"\u200E"),action:()=>this.chartSvc.createPivotChart({chartType:r}),_key:a,_enterprise:n});return{name:e("pivotChart","Pivot Chart"),_key:"pivotChart",subMenu:[{_key:"pivotColumnChart",name:e("columnChart","Column"),subMenu:[s("groupedColumn","Grouped","groupedColumn","pivotGroupedColumn"),s("stackedColumn","Stacked","stackedColumn","pivotStackedColumn"),s("normalizedColumn","100% Stacked","normalizedColumn","pivotNormalizedColumn")]},{_key:"pivotBarChart",name:e("barChart","Bar"),subMenu:[s("groupedBar","Grouped","groupedBar","pivotGroupedBar"),s("stackedBar","Stacked","stackedBar","pivotStackedBar"),s("normalizedBar","100% Stacked","normalizedBar","pivotNormalizedBar")]},{_key:"pivotPieChart",name:e("pieChart","Pie"),subMenu:[s("pie","Pie","pie","pivotPie"),s("donut","Donut","donut","pivotDonut")]},{_key:"pivotLineChart",name:e("lineChart","Line"),subMenu:[s("lineChart","Line","line","pivotLineChart"),s("stackedLine","Stacked","stackedLine","pivotStackedLine"),s("normalizedLine","100% Stacked","normalizedLine","pivotNormalizedLine")]},{_key:"pivotAreaChart",name:e("areaChart","Area"),subMenu:[s("areaChart","Area","area","pivotArea"),s("stackedArea","Stacked","stackedArea","pivotStackedArea"),s("normalizedArea","100% Stacked","normalizedArea","pivotNormalizedArea")]},{_key:"pivotXYChart",name:e("xyChart","X Y (Scatter)"),subMenu:[s("scatter","Scatter","scatter","pivotScatter"),s("bubble","Bubble","bubble","pivotBubble")]},{_key:"pivotStatisticalChart",_enterprise:!1,name:e("statisticalChart","Statistical"),subMenu:[s("histogramChart","Histogram","histogram","pivotHistogram",!1)]},{_key:"pivotHierarchicalChart",_enterprise:!0,name:e("hierarchicalChart","Hierarchical"),subMenu:[s("treemapChart","Treemap","treemap","pivotTreemap",!0),s("sunburstChart","Sunburst","sunburst","pivotSunburst",!0)]},{_key:"pivotFunnel",name:e("funnel","Funnel"),subMenu:[s("funnel","Funnel","funnel","pivotFunnel"),s("coneFunnel","Cone Funnel","coneFunnel","pivotConeFunnel"),s("pyramid","Pyramid","pyramid","pivotPyramid")]},{_key:"pivotCombinationChart",name:e("combinationChart","Combination"),subMenu:[s("columnLineCombo","Column & Line","columnLineCombo","pivotColumnLineCombo"),s("AreaColumnCombo","Area & Column","areaColumnCombo","pivotAreaColumnCombo")]}],icon:w("chart",this.beans,void 0)}}getConfigLookup(){return{columnGroup:{_key:"pivotColumnChart",column:"pivotGroupedColumn",stackedColumn:"pivotStackedColumn",normalizedColumn:"pivotNormalizedColumn"},barGroup:{_key:"pivotBarChart",bar:"pivotGroupedBar",stackedBar:"pivotStackedBar",normalizedBar:"pivotNormalizedBar"},pieGroup:{_key:"pivotPieChart",pie:"pivotPie",donut:"pivotDonut",doughnut:"pivotDonut"},lineGroup:{_key:"pivotLineChart",line:"pivotLineChart",stackedLine:"pivotStackedLine",normalizedLine:"pivotNormalizedLine"},areaGroup:{_key:"pivotAreaChart",area:"pivotArea",stackedArea:"pivotStackedArea",normalizedArea:"pivotNormalizedArea"},scatterGroup:{_key:"pivotXYChart",bubble:"pivotBubble",scatter:"pivotScatter"},combinationGroup:{_key:"pivotCombinationChart",columnLineCombo:"pivotColumnLineCombo",areaColumnCombo:"pivotAreaColumnCombo",customCombo:null},hierarchicalGroup:{_key:"pivotHierarchicalChart",treemap:"pivotTreemap",sunburst:"pivotSunburst"},statisticalGroup:{_key:"pivotStatisticalChart",histogram:"pivotHistogram",rangeBar:null,rangeArea:null,boxPlot:null},funnelGroup:{_key:"pivotFunnel",funnel:"pivotFunnel",coneFunnel:"pivotConeFunnel",pyramid:"pivotPyramid"},polarGroup:null,specializedGroup:null}}},au=class{constructor(e,s,t){this.beans=e,this.chartSvc=s,this.getLocaleTextFunc=t}getMenuItem(){let e=this.getLocaleTextFunc(),s=(t,i,r,a,n=!1)=>({name:e(t,i),action:()=>this.chartSvc.createChartFromCurrentRange(r),_key:a,_enterprise:n});return{name:e("chartRange","Chart Range"),_key:"chartRange",subMenu:[{name:e("columnChart","Column"),subMenu:[s("groupedColumn","Grouped","groupedColumn","rangeGroupedColumn"),s("stackedColumn","Stacked","stackedColumn","rangeStackedColumn"),s("normalizedColumn","100% Stacked","normalizedColumn","rangeNormalizedColumn")],_key:"rangeColumnChart"},{name:e("barChart","Bar"),subMenu:[s("groupedBar","Grouped","groupedBar","rangeGroupedBar"),s("stackedBar","Stacked","stackedBar","rangeStackedBar"),s("normalizedBar","100% Stacked","normalizedBar","rangeNormalizedBar")],_key:"rangeBarChart"},{name:e("pieChart","Pie"),subMenu:[s("pie","Pie","pie","rangePie"),s("donut","Donut","donut","rangeDonut")],_key:"rangePieChart"},{name:e("lineChart","Line"),subMenu:[s("lineChart","Line","line","rangeLineChart"),s("stackedLine","Stacked","stackedLine","rangeStackedLine"),s("normalizedLine","100% Stacked","normalizedLine","rangeNormalizedLine")],_key:"rangeLineChart"},{name:e("areaChart","Area"),subMenu:[s("areaChart","Area","area","rangeArea"),s("stackedArea","Stacked","stackedArea","rangeStackedArea"),s("normalizedArea","100% Stacked","normalizedArea","rangeNormalizedArea")],_key:"rangeAreaChart"},{name:e("xyChart","X Y (Scatter)"),subMenu:[s("scatter","Scatter","scatter","rangeScatter"),s("bubble","Bubble","bubble","rangeBubble")],_key:"rangeXYChart"},{name:e("polarChart","Polar"),subMenu:[s("radarLine","Radar Line","radarLine","rangeRadarLine"),s("radarArea","Radar Area","radarArea","rangeRadarArea"),s("nightingale","Nightingale","nightingale","rangeNightingale"),s("radialColumn","Radial Column","radialColumn","rangeRadialColumn"),s("radialBar","Radial Bar","radialBar","rangeRadialBar")],_key:"rangePolarChart",_enterprise:!0},{name:e("statisticalChart","Statistical"),subMenu:[s("boxPlot","Box Plot","boxPlot","rangeBoxPlot",!0),s("histogramChart","Histogram","histogram","rangeHistogram",!1),s("rangeBar","Range Bar","rangeBar","rangeRangeBar",!0),s("rangeArea","Range Area","rangeArea","rangeRangeArea",!0)],_key:"rangeStatisticalChart",_enterprise:!1},{name:e("hierarchicalChart","Hierarchical"),subMenu:[s("treemap","Treemap","treemap","rangeTreemap"),s("sunburst","Sunburst","sunburst","rangeSunburst")],_key:"rangeHierarchicalChart",_enterprise:!0},{name:e("specializedChart","Specialized"),subMenu:[s("heatmap","Heatmap","heatmap","rangeHeatmap"),s("waterfall","Waterfall","waterfall","rangeWaterfall")],_key:"rangeSpecializedChart",_enterprise:!0},{name:e("funnel","Funnel"),subMenu:[s("funnel","Funnel","funnel","rangeFunnel"),s("coneFunnel","Cone Funnel","coneFunnel","rangeConeFunnel"),s("pyramid","Pyramid","pyramid","rangePyramid")],_key:"rangeFunnel",_enterprise:!0},{name:e("combinationChart","Combination"),subMenu:[s("columnLineCombo","Column & Line","columnLineCombo","rangeColumnLineCombo"),s("AreaColumnCombo","Area & Column","areaColumnCombo","rangeAreaColumnCombo")],_key:"rangeCombinationChart"}],icon:w("chart",this.beans,void 0)}}getConfigLookup(){return{columnGroup:{_key:"rangeColumnChart",column:"rangeGroupedColumn",stackedColumn:"rangeStackedColumn",normalizedColumn:"rangeNormalizedColumn"},barGroup:{_key:"rangeBarChart",bar:"rangeGroupedBar",stackedBar:"rangeStackedBar",normalizedBar:"rangeNormalizedBar"},pieGroup:{_key:"rangePieChart",pie:"rangePie",donut:"rangeDonut",doughnut:"rangeDonut"},lineGroup:{_key:"rangeLineChart",line:"rangeLineChart",stackedLine:"rangeStackedLine",normalizedLine:"rangeNormalizedLine"},areaGroup:{_key:"rangeAreaChart",area:"rangeArea",stackedArea:"rangeStackedArea",normalizedArea:"rangeNormalizedArea"},scatterGroup:{_key:"rangeXYChart",bubble:"rangeBubble",scatter:"rangeScatter"},polarGroup:{_key:"rangePolarChart",radarLine:"rangeRadarLine",radarArea:"rangeRadarArea",nightingale:"rangeNightingale",radialColumn:"rangeRadialColumn",radialBar:"rangeRadialBar"},statisticalGroup:{_key:"rangeStatisticalChart",boxPlot:"rangeBoxPlot",histogram:"rangeHistogram",rangeBar:"rangeRangeBar",rangeArea:"rangeRangeArea"},hierarchicalGroup:{_key:"rangeHierarchicalChart",treemap:"rangeTreemap",sunburst:"rangeSunburst"},specializedGroup:{_key:"rangeSpecializedChart",heatmap:"rangeHeatmap",waterfall:"rangeWaterfall"},funnelGroup:{_key:"rangeFunnel",funnel:"rangeFunnel",coneFunnel:"rangeConeFunnel",pyramid:"rangePyramid"},combinationGroup:{_key:"rangeCombinationChart",columnLineCombo:"rangeColumnLineCombo",areaColumnCombo:"rangeAreaColumnCombo",customCombo:null}}}},nu=class extends x{constructor(){super(...arguments),this.beanName="colChooserFactory"}createColumnSelectPanel(e,s,t,i){let r=e.createManagedBean(new wn),a=i??s?.getColDef().columnChooserParams??{},{contractColumnSelection:n,suppressColumnExpandAll:o,suppressColumnFilter:l,suppressColumnSelectAll:c,suppressSyncLayoutWithGrid:d,columnLayout:h}=a;return r.init(!!t,B(this.gos,{suppressColumnMove:!1,suppressValues:!1,suppressPivots:!1,suppressRowGroups:!1,suppressPivotMode:!1,contractColumnSelection:!!n,suppressColumnExpandAll:!!o,suppressColumnFilter:!!l,suppressColumnSelectAll:!!c,suppressSyncLayoutWithGrid:!!h||!!d,onStateUpdated:()=>{}}),"columnMenu"),h&&r.setColumnLayout(h),r}showColumnChooser({column:e,chooserParams:s,eventSource:t,headerPosition:i}){this.hideActiveColumnChooser();let r=this.createColumnSelectPanel(this,e,!0,s),a=this.getLocaleTextFunc(),n=this.beans,{visibleCols:o,focusSvc:l,menuUtils:c}=n,d=o.allCols.indexOf(e),h=e?l.focusedHeader??i??null:null;this.activeColumnChooserDialog=this.createBean(new kd({title:a("chooseColumns","Choose Columns"),component:r,width:300,height:300,resizable:!0,movable:!0,centered:!0,closable:!0,afterGuiAttached:()=>{xe(n,r.getGui())?.focus({preventScroll:!0}),this.dispatchVisibleChangedEvent(!0,e)},closedCallback:p=>{let u=this.activeColumnChooser.getGui();this.destroyBean(this.activeColumnChooser),this.activeColumnChooser=void 0,this.activeColumnChooserDialog=void 0,this.dispatchVisibleChangedEvent(!1,e),e&&c.restoreFocusOnClose({column:e,headerPosition:h,columnIndex:d,eventSource:t},u,p,!0)},postProcessPopupParams:{type:"columnChooser",column:e,eventSource:t}})),this.activeColumnChooser=r}hideActiveColumnChooser(){this.destroyBean(this.activeColumnChooserDialog)}dispatchVisibleChangedEvent(e,s){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:"columnChooser",column:s??null})}},dt="separator";function xn(e,s){if(e)for(let t=e.length-2;t>=0;t--){let i=e[t]===s,r=e[t+1]===s;i&&r&&e.splice(t+1,1)}}var ou=class extends x{constructor(){super(...arguments),this.beanName="menuItemMapper"}mapWithStockItems(e,s,t,i){if(!e)return[];let r=[],a=this.getLocaleTextFunc(),{beans:n,gos:o}=this,{validation:l,pinnedCols:c,colAutosize:d,aggFuncSvc:h,rowGroupColsSvc:p,colNames:u,colModel:g,clipboardSvc:f,expansionSvc:S,focusSvc:v,csvCreator:E,excelCreator:D,menuSvc:X,colChooserFactory:I,sortSvc:P,chartMenuItemMapper:k,valueColsSvc:M}=n,z=(K,A,ge,Z)=>{switch(l?.validateMenuItem(K),K){case"pinSubMenu":return c&&A?{name:a("pinColumn","Pin Column"),icon:w("menuPin",n,null),subMenu:["clearPinned","pinLeft","pinRight"]}:null;case"pinLeft":return c&&A?{name:a("pinLeft","Pin Left"),action:()=>c.setColsPinned([A],"left",Z),checked:!!A&&A.isPinnedLeft()}:null;case"pinRight":return c&&A?{name:a("pinRight","Pin Right"),action:()=>c.setColsPinned([A],"right",Z),checked:!!A&&A.isPinnedRight()}:null;case"clearPinned":return c&&A?{name:a("noPin","No Pin"),action:()=>c.setColsPinned([A],null,Z),checked:!!A&&!A.isPinned()}:null;case"valueAggSubMenu":return h&&M&&(A?.isPrimary()||A?.getColDef().pivotValueColumn)?{name:a("valueAggregation","Value Aggregation"),icon:w("menuValue",n,null),subMenu:lu(A,h,M,a),disabled:o.get("functionsReadOnly")}:null;case"autoSizeThis":return d?{name:a("autosizeThisColumn","Autosize This Column"),action:()=>d.autoSizeColumn(A,Z,o.get("skipHeaderOnAutoSize"))}:null;case"autoSizeAll":return d?{name:a("autosizeAllColumns","Autosize All Columns"),action:()=>d.autoSizeAllColumns(Z,o.get("skipHeaderOnAutoSize"))}:null;case"rowGroup":return p?{name:a("groupBy","Group by")+" "+se(u.getDisplayNameForColumn(A,"header")),disabled:o.get("functionsReadOnly")||A?.isRowGroupActive()||!A?.getColDef().enableRowGroup,action:()=>p.addColumns([A],Z),icon:w("menuAddRowGroup",n,null)}:null;case"rowUnGroup":if(p&&o.isModuleRegistered("SharedRowGrouping")){let le=A?.getColDef().showRowGroup,ft=o.get("groupLockGroupColumns"),Ct,ts,ss;if(le===!0)Ct=a("ungroupAll","Un-Group All"),ts=o.get("functionsReadOnly")||ft===-1||ft>=(p.columns.length??0),ss=()=>p.setColumns(p.columns.slice(0,ft),Z);else if(typeof le=="string"){let qs=g.getColDefCol(le),Jn=qs!=null?se(u.getDisplayNameForColumn(qs,"header")):le;Ct=a("ungroupBy","Un-Group by")+" "+Jn,ts=o.get("functionsReadOnly")||Xt(qs,n),ss=()=>{p.removeColumns([le],Z)}}else Ct=a("ungroupBy","Un-Group by")+" "+se(u.getDisplayNameForColumn(A,"header")),ts=o.get("functionsReadOnly")||!A?.isRowGroupActive()||!A?.getColDef().enableRowGroup||Xt(A,n),ss=()=>p.removeColumns([A],Z);return{name:Ct,disabled:ts,action:ss,icon:w("menuRemoveRowGroup",n,null)}}else return null;case"resetColumns":return{name:a("resetColumns","Reset Columns"),action:()=>Yr(n,Z)};case"expandAll":return S?{name:a("expandAll","Expand All Row Groups"),action:()=>S.expandAll(!0)}:null;case"contractAll":return S?{name:a("collapseAll","Collapse All Row Groups"),action:()=>S.expandAll(!1)}:null;case"copy":return f?{name:a("copy","Copy"),shortcut:a("ctrlC","Ctrl+C"),icon:w("clipboardCopy",n,null),action:()=>f.copyToClipboard()}:null;case"copyWithHeaders":return f?{name:a("copyWithHeaders","Copy with Headers"),icon:w("clipboardCopy",n,null),action:()=>f.copyToClipboard({includeHeaders:!0})}:null;case"copyWithGroupHeaders":return f?{name:a("copyWithGroupHeaders","Copy with Group Headers"),icon:w("clipboardCopy",n,null),action:()=>f.copyToClipboard({includeHeaders:!0,includeGroupHeaders:!0})}:null;case"cut":if(f){let le=v.getFocusedCell(),ft=le?ra(n,le):null,Ct=ft?le?.column.isCellEditable(ft):!1;return{name:a("cut","Cut"),shortcut:a("ctrlX","Ctrl+X"),icon:w("clipboardCut",n,null),disabled:!Ct||o.get("suppressCutToClipboard"),action:()=>f.cutToClipboard(void 0,"contextMenu")}}else return null;case"paste":return f?{name:a("paste","Paste"),shortcut:a("ctrlV","Ctrl+V"),disabled:!0,icon:w("clipboardPaste",n,null),action:()=>f.pasteFromClipboard()}:null;case"export":{let le=[];return!o.get("suppressCsvExport")&&E&&le.push("csvExport"),!o.get("suppressExcelExport")&&D&&le.push("excelExport"),le.length?{name:a("export","Export"),subMenu:le,icon:w("save",n,null)}:null}case"csvExport":return E?{name:a("csvExport","CSV Export"),icon:w("csvExport",n,null),action:()=>E.exportDataAsCsv()}:null;case"excelExport":return D?{name:a("excelExport","Excel Export"),icon:w("excelExport",n,null),action:()=>D.exportDataAsExcel()}:null;case"separator":return"separator";case"pivotChart":case"chartRange":return k.getChartItems(K);case"columnFilter":return X&&A?{name:a("columnFilter","Column Filter"),icon:w("filter",n,null),action:()=>X.showFilterMenu({column:A,buttonElement:ge(),containerType:"columnFilter",positionBy:"button"})}:null;case"columnChooser":{let le=v.focusedHeader;return I?{name:a("columnChooser","Choose Columns"),icon:w("columns",n,null),action:()=>I.showColumnChooser({column:A,eventSource:ge(),headerPosition:le})}:null}case"sortAscending":return P?{name:a("sortAscending","Sort Ascending"),icon:w("sortAscending",n,null),action:()=>P.setSortForColumn(A,"asc",!1,Z)}:null;case"sortDescending":return P?{name:a("sortDescending","Sort Descending"),icon:w("sortDescending",n,null),action:()=>P.setSortForColumn(A,"desc",!1,Z)}:null;case"sortUnSort":return P?{name:a("sortUnSort","Clear Sort"),icon:w("sortUnSort",n,null),action:()=>P.setSortForColumn(A,null,!1,Z)}:null;default:return b(176,{key:K}),null}};return e.forEach(K=>{let A;if(typeof K=="string"?A=z(K,s,t,i):A=L({},K),!A)return;let ge=A,{subMenu:Z}=ge;Z&&Z instanceof Array&&(ge.subMenu=this.mapWithStockItems(Z,s,t,i)),A!=null&&r.push(A)}),xn(r,dt),r}};function lu(e,s,t,i){let r;if(e.isPrimary())r=e;else{let n=e.getColDef().pivotValueColumn;r=te(n)?n:void 0}let a=[];if(r){let n=r.isValueActive(),o=s.getFuncNames(r);a.push({name:i("noAggregation","None"),action:()=>{t.removeColumns([r],"contextMenu"),t.setColumnAggFunc(r,void 0,"contextMenu")},checked:!n}),o.forEach(l=>{a.push({name:i(l,s.getDefaultFuncLabel(l)),action:()=>{t.setColumnAggFunc(r,l,"contextMenu"),t.addColumns([r],"contextMenu")},checked:n&&r.getAggFunc()===l})})}return a}var cu=class extends x{constructor(){super(...arguments),this.beanName="colMenuFactory"}createMenu(e,s,t,i){let r=e.createManagedBean(new Ks(0,{column:t??null,node:null,value:null})),a=this.beans.menuItemMapper.mapWithStockItems(s,t??null,i,"columnMenu");return r.addMenuItems(a),r}getMenuItems(e=null,s=null){let t=this.getDefaultMenuOptions(e),i,r=(e?.getColDef()??s?.getColGroupDef())?.mainMenuItems;if(Array.isArray(r))i=r;else if(typeof r=="function")i=r(B(this.gos,{column:e,columnGroup:s,defaultItems:t}));else{let a=this.gos.getCallback("getMainMenuItems");a?i=a({column:e,columnGroup:s,defaultItems:t}):i=t}return xn(i,dt),i}getDefaultMenuOptions(e){let s=[],{beans:t,gos:i}=this,{colChooserFactory:r,rowGroupColsSvc:a,colModel:n,expansionSvc:o,sortSvc:l,menuSvc:c,pinnedCols:d,aggFuncSvc:h,colAutosize:p}=t,u=lt(i),g=()=>{!u&&r&&s.push("columnChooser"),s.push("resetColumns")};if(!e)return g(),s;let{colDef:f}=e,S=d&&!f.lockPinned,v=a?.columns.length??0,E=v>0,D=e.isPrimary(),X=h&&D&&E&&e.isAllowValue()||!D;if(l&&!u&&e.isSortable()){let I=e.getSort();I!=="asc"&&s.push("sortAscending"),I!=="desc"&&s.push("sortDescending"),I&&s.push("sortUnSort"),s.push(dt)}if(c?.isFilterMenuItemEnabled(e)&&(s.push("columnFilter"),s.push(dt)),S&&s.push("pinSubMenu"),X&&s.push("valueAggSubMenu"),(S||X)&&s.push(dt),p&&(s.push("autoSizeThis"),s.push("autoSizeAll"),s.push(dt)),a&&i.isModuleRegistered("SharedRowGrouping")){let I=s.length;f.showRowGroup?s.push("rowUnGroup"):e.isAllowRowGroup()&&D&&(e.isRowGroupActive()?Xt(e,t)||s.push("rowUnGroup"):s.push("rowGroup")),s.length>I&&s.push(dt)}return g(),o&&Ne(i)&&(i.get("treeData")||v>(n.isPivotMode()?1:0))&&(s.push("expandAll"),s.push("contractAll")),s}},du="ag-menu",Ha="ag-context-menu-open",hu="ag-context-menu-loading-icon",uu=class extends x{constructor(){super(...arguments),this.beanName="contextMenuSvc",this.destroyLoadingSpinner=null,this.lastPromise=0}hideActiveMenu(){this.destroyBean(this.activeMenu)}getMenuItems(e,s,t,i){let r=[],{clipboardSvc:a,chartSvc:n,csvCreator:o,excelCreator:l,colModel:c,rangeSvc:d,gos:h}=this.beans;if(te(e)&&a&&s&&(h.get("suppressCutToClipboard")||r.push("cut"),r.push("copy","copyWithHeaders","copyWithGroupHeaders","paste","separator")),h.get("enableCharts")&&n&&(c.isPivotMode()&&r.push("pivotChart"),d&&!d.isEmpty()&&r.push("chartRange")),te(e)){let f=h.get("suppressExcelExport")||!l,S=h.get("suppressCsvExport")||!o;!Sr()&&(!f||!S)&&r.push("export")}let p=r.length?r:void 0,u=s?.getColDef().contextMenuItems;return Array.isArray(u)?u:typeof u=="function"?u(B(h,{column:s,node:e,value:t,defaultItems:p,event:i})):h.getCallback("getContextMenuItems")?.({column:s,node:e,value:t,defaultItems:p,event:i})??r}getContextMenuPosition(e,s){let t=this.getRowCtrl(e),i=this.getCellGui(t,s);if(!i)return{x:0,y:t?.getRowYPosition()??0};let r=i.getBoundingClientRect();return{x:r.x+r.width/2,y:r.y+r.height/2}}showContextMenu(e){let s=e.rowNode??null,t=e.column??null,{anchorToElement:i,value:r,source:a}=e;s&&t&&r==null&&(r=this.beans.valueSvc.getValueForDisplay(t,s)),i==null&&(i=this.getContextMenuAnchorElement(s,t)),this.beans.menuUtils.onContextMenu({mouseEvent:e.mouseEvent??null,touchEvent:e.touchEvent??null,showMenuCallback:n=>this.showMenu(s,t,r,n,i),source:a})}handleContextMenuMouseEvent(e,s,t,i){let r=i?.rowNode??t?.rowNode??null,a=i?.column??t?.findFullWidthInfoForEvent(e||s)?.column??null,{valueSvc:n,ctrlsSvc:o}=this.beans,l=a?n.getValue(a,r):null,c=o.getGridBodyCtrl(),d=i?i.eGui:c.eGridBody;this.showContextMenu({mouseEvent:e,touchEvent:s,rowNode:r,column:a,value:l,anchorToElement:d,source:"ui"})}showMenu(e,s,t,i,r){let a=this.getMenuItems(e,s,t,i);if(qr(a)){let n=this.lastPromise+1;return this.lastPromise=n,this.destroyLoadingSpinner||this.createLoadingIcon(i),a.then(o=>{if(this.lastPromise!==n)return;let{target:l}=i,c=!l;o&&o.length&&(c||wt(l))&&!this.beans.overlays?.isExclusive()&&this.createContextMenu({menuItems:o,node:e,column:s,value:t,mouseEvent:i,anchorToElement:r}),this.destroyLoadingSpinner?.()}),!0}return a===void 0||!a?.length?!1:(this.createContextMenu({menuItems:a,node:e,column:s,value:t,mouseEvent:i,anchorToElement:r}),!0)}createLoadingIcon(e){let{beans:s}=this,t=this.getLocaleTextFunc(),i=w("loadingMenuItems",s),r=U({tag:"div",cls:hu});r.appendChild(i);let a=Ir(s),n=Rr(s);if(!n){b(54);return}n.appendChild(r),s.ariaAnnounce?.announceValue(t("ariaLabelLoadingContextMenu","Loading Context Menu"),"contextmenu"),s.environment.applyThemeClasses(r),ai(r,e,s);let o=l=>{ai(r,l,s)};a.addEventListener("mousemove",o),this.destroyLoadingSpinner=()=>{a.removeEventListener("mousemove",o),n.removeChild(r),this.destroyLoadingSpinner=null}}createContextMenu(e){let{menuItems:s,node:t,column:i,value:r,mouseEvent:a,anchorToElement:n}=e,{ctrlsSvc:o,focusSvc:l,popupSvc:c}=this.beans,d=o.getGridBodyCtrl().eGridBody,h=new pu(s,i,t,r);this.createBean(h);let p=h.getGui();i||l.clearFocusedCell();let u={column:i,rowNode:t,type:"contextMenu",mouseEvent:a,ePopup:p,nudgeY:1},g=this.getLocaleTextFunc(),f=c?.addPopup({modal:!0,eChild:p,closeOnEsc:!0,closedCallback:v=>{ot(this.beans,()=>{d.classList.remove(Ha),this.destroyBean(h),this.dispatchVisibleChangedEvent(!1,v===void 0?"api":"ui")})},click:a,positionCallback:()=>{let v=this.gos.get("enableRtl");c?.positionPopupUnderMouseEvent(N(L({},u),{nudgeX:v?(p.offsetWidth+1)*-1:1}))},anchorToElement:n,ariaLabel:g("ariaLabelContextMenu","Context Menu")});f&&(d.classList.add(Ha),h.afterGuiAttached({container:"contextMenu",hidePopup:f.hideFunc})),this.activeMenu&&this.hideActiveMenu(),this.activeMenu=h,h.addEventListener("destroyed",()=>{this.activeMenu===h&&(this.activeMenu=null)}),f&&h.addEventListener("closeMenu",v=>f.hideFunc({mouseEvent:v.mouseEvent??void 0,keyboardEvent:v.keyboardEvent??void 0,forceHide:!0}));let S=a&&a instanceof MouseEvent&&a.type==="mousedown";this.dispatchVisibleChangedEvent(!0,S?"api":"ui")}dispatchVisibleChangedEvent(e,s="ui"){this.eventSvc.dispatchEvent({type:"contextMenuVisibleChanged",visible:e,source:s})}getRowCtrl(e){let{rowIndex:s,rowPinned:t}=e||{};if(s!=null)return this.beans.rowRenderer.getRowByPosition({rowIndex:s,rowPinned:t})||void 0}getCellGui(e,s){return!e||!s?void 0:e.getCellCtrl(s)?.eGui||void 0}getContextMenuAnchorElement(e,s){let t=this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody,i=this.getRowCtrl(e);if(!i)return t;let r=this.getCellGui(i,s);return r||(i.isFullWidth()?i.getFullWidthElement():t)}destroy(){this.destroyLoadingSpinner?.(),super.destroy()}},pu=class extends F{constructor(e,s,t,i){super({tag:"div",cls:du,role:"presentation"}),this.menuItems=e,this.column=s,this.node=t,this.value=i,this.menuList=null,this.focusedCell=null}postConstruct(){let e=this.createManagedBean(new Ks(0,{column:this.column,node:this.node,value:this.value})),s=this.beans.menuItemMapper.mapWithStockItems(this.menuItems,null,()=>this.getGui(),"contextMenu");e.addMenuItems(s),this.appendChild(e),this.menuList=e,e.addEventListener("closeMenu",t=>this.dispatchLocalEvent(t))}afterGuiAttached({hidePopup:e}){e&&this.addDestroyFunc(e),this.focusedCell=this.beans.focusSvc.getFocusedCell();let s=this.menuList;s&&ot(this.beans,()=>ye(s.getGui()))}restoreFocusedCell(){let{beans:e,focusedCell:s}=this,t=e.focusSvc,i=t.getFocusedCell();if(i&&s&&sa(i,s)){let{rowIndex:r,rowPinned:a,column:n}=s;Ht(e)&&t.setFocusedCell({rowIndex:r,column:n,rowPinned:a,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!Pt()})}}destroy(){super.destroy(),this.restoreFocusedCell()}};function gu(e){return{tag:"div",cls:`ag-tabs ${e}`,children:[{tag:"div",ref:"eHeader"},{tag:"div",ref:"eBody",role:"presentation",cls:`ag-tabs-body ${e?`${e}-body`:""}`}]}}var mu=class extends Ye{constructor(e){super(gu(e.cssClass)),this.eHeader=T,this.eBody=T,this.items=[],this.tabbedItemScrollMap=new Map,this.params=e}postConstruct(){this.setupHeader(),this.params.items&&this.params.items.forEach(e=>this.addItem(e)),this.initialiseTabGuard({onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),focusInnerElement:this.focusInnerElement.bind(this),focusTrapActive:!0}),this.addDestroyFunc(()=>this.activeItem?.tabbedItem?.afterDetachedCallback?.())}setupHeader(){let{enableCloseButton:e,cssClass:s}=this.params,t=(i,r)=>{i.classList.add(`ag-tabs-${r}`),s&&i.classList.add(`${s}-${r}`)};e?(this.setupCloseButton(t),this.eTabHeader=Tt(this.beans).createElement("div"),t(this.eHeader,"header-wrapper"),be(this.eHeader,"presentation"),this.eHeader.appendChild(this.eTabHeader)):this.eTabHeader=this.eHeader,be(this.eTabHeader,"tablist"),t(this.eTabHeader,"header")}setupCloseButton(e){let s=Tt(this.beans),t=s.createElement("button");e(t,"close-button");let i=w("close",this.beans);ue(t,this.params.closeButtonAriaLabel),t.appendChild(i),this.addManagedElementListeners(t,{click:()=>this.params.onCloseClicked?.()});let r=s.createElement("div");e(r,"close-button-wrapper"),be(r,"presentation"),r.appendChild(t),this.eHeader.appendChild(r),this.eCloseButton=t}handleKeyDown(e){switch(e.key){case y.RIGHT:case y.LEFT:{if(!this.eTabHeader.contains(ve(this.beans)))return;let s=e.key===y.RIGHT,t=this.gos.get("enableRtl"),i=this.items.indexOf(this.activeItem),r=s!==t?Math.min(i+1,this.items.length-1):Math.max(i-1,0);if(i===r)return;e.preventDefault();let a=this.items[r];this.showItemWrapper(a),a.eHeaderButton.focus();break}case y.UP:case y.DOWN:e.stopPropagation();break}}onTabKeyDown(e){if(e.defaultPrevented)return;let{beans:s,eHeader:t,eBody:i,activeItem:r,params:a}=this,{suppressTrapFocus:n,enableCloseButton:o}=a,l=ve(s),c=e.target,d=e.shiftKey;if(t.contains(l)){e.preventDefault(),o&&d&&!this.eCloseButton?.contains(l)?this.eCloseButton?.focus():n&&d?xi(Tt(s).body,c)?.focus():this.focusBody(e.shiftKey);return}let h=null;if(dn(i,c)&&(d&&(h=xi(i,c)),!h&&!n&&(h=r.eHeaderButton)),!h&&i.contains(l)&&(h=xe(s,i,!1,d),!h)){n&&!d?this.forceFocusOutOfContainer(d):o&&!d?(e.preventDefault(),this.eCloseButton?.focus()):(e.preventDefault(),this.focusHeader());return}h&&(e.preventDefault(),h.focus())}focusInnerElement(e){return e?this.focusBody(!0):(this.focusHeader(),!0)}focusHeader(e){this.activeItem.eHeaderButton.focus({preventScroll:e})}focusBody(e){return ye(this.eBody,e)}setAfterAttachedParams(e){this.afterAttachedParams=e}showFirstItem(){this.items.length>0&&this.showItemWrapper(this.items[0])}addItem(e){let s=U({tag:"span",cls:"ag-tab",role:"tab",attrs:{tabindex:"-1"}});s.appendChild(e.title),this.eTabHeader.appendChild(s),ue(s,e.titleLabel);let t={tabbedItem:e,eHeaderButton:s};this.items.push(t),s.addEventListener("click",this.showItemWrapper.bind(this,t))}showItem(e){let s=this.items.find(t=>t.tabbedItem===e);s&&this.showItemWrapper(s)}showItemWrapper(e){let{tabbedItem:s,eHeaderButton:t}=e;if(this.params.onItemClicked?.({item:s}),this.activeItem===e){this.params.onActiveItemClicked?.();return}this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),Ge(this.eBody),s.bodyPromise.then(i=>{this.eBody.appendChild(i);let r=!Pt();if(this.params.suppressFocusBodyOnOpen||ye(this.eBody,!1,r),s.afterAttachedCallback&&s.afterAttachedCallback(this.afterAttachedParams),this.params.keepScrollPosition){let a=s.getScrollableContainer&&s.getScrollableContainer()||i;[this.lastScrollListener]=this.addManagedElementListeners(a,{scroll:()=>{this.tabbedItemScrollMap.set(s.name,a.scrollTop)}});let n=this.tabbedItemScrollMap.get(s.name);n!==void 0&&setTimeout(()=>{a.scrollTop=n},0)}}),this.activeItem&&(this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),this.activeItem.tabbedItem.afterDetachedCallback?.()),t.classList.add("ag-tab-selected"),this.activeItem=e}},Xe="filterMenuTab",Ze="generalMenuTab",ht="columnsMenuTab",Os=[Ze,Xe,ht],fu=class extends x{constructor(){super(...arguments),this.beanName="enterpriseMenuFactory"}hideActiveMenu(){this.destroyBean(this.activeMenu)}showMenuAfterMouseEvent(e,s,t,i,r){let{column:a,columnGroup:n}=this.splitColumnOrGroup(e),o=r?"filterMenuTab":void 0;this.showMenu(a,n,l=>{let c=l.getGui();this.beans.popupSvc.positionPopupUnderMouseEvent({type:t,column:a,mouseEvent:s,ePopup:c}),o&&l.showTab?.(o),this.dispatchVisibleChangedEvent(!0,!1,a,n,o)},t,o,void 0,s.target,i)}splitColumnOrGroup(e){let s=e&&bs(e);return{column:s?e:void 0,columnGroup:s?void 0:e}}showMenuAfterButtonClick(e,s,t,i,r){let a=-1,n="left";this.gos.get("enableRtl")&&(a=1,n="right");let o=r?"filterMenuTab":void 0,l=o?[o]:void 0,c=lt(this.gos),d=(c?9:4)*a,h=c?-23:4,{column:p,columnGroup:u}=this.splitColumnOrGroup(e);this.showMenu(p,u,g=>{let f=g.getGui();this.beans.popupSvc.positionPopupByComponent({type:t,column:p,eventSource:s,ePopup:f,alignSide:n,nudgeX:d,nudgeY:h,position:"under",keepWithinBounds:!0}),o&&g.showTab?.(o),this.dispatchVisibleChangedEvent(!0,!1,p,u,o)},t,o,l,s,i)}showMenu(e,s,t,i,r,a,n,o){let l=this.getMenuParams(e,s,a,n);if(!l)return;let{menu:c,eMenuGui:d,anchorToElement:h,restoreFocusParams:p}=l,u=[],{menuUtils:g,popupSvc:f}=this.beans;u.push(v=>{let E=c.getGui();this.destroyBean(c),e&&(hi(e,!1,"contextMenu"),g.restoreFocusOnClose(p,E,v)),o?.()});let S=this.getLocaleTextFunc();if(f.addPopup({modal:!0,eChild:d,closeOnEsc:!0,closedCallback:v=>{u.forEach(E=>E(v)),this.dispatchVisibleChangedEvent(!1,!1,e,s,r)},afterGuiAttached:v=>c.afterGuiAttached(Object.assign({},{container:i},v)),positionCallback:r?()=>t(c):void 0,ariaLabel:S("ariaLabelColumnMenu","Column Menu")}),r||(c.showTabBasedOnPreviousSelection?.(),t(c)),Gr(this.gos)){let v=f.setPopupPositionRelatedToElement(d,h);v&&e&&this.addStopAnchoring(v,e,u)}c.addEventListener("tabSelected",v=>{this.dispatchVisibleChangedEvent(!1,!0,e),this.lastSelectedTab=v.key,this.dispatchVisibleChangedEvent(!0,!0,e)}),e&&hi(e,!0,"contextMenu"),this.activeMenu=c,c.addEventListener("destroyed",()=>{this.activeMenu===c&&(this.activeMenu=null)})}addStopAnchoring(e,s,t){e.then(i=>{s.__addEventListener("leftChanged",i),s.__addEventListener("visibleChanged",i),t.push(()=>{s.__removeEventListener("leftChanged",i),s.__removeEventListener("visibleChanged",i)})})}getMenuParams(e,s,t,i){let{focusSvc:r,visibleCols:a,ctrlsSvc:n}=this.beans,o={column:e,headerPosition:r.focusedHeader,columnIndex:a.allCols.indexOf(e),eventSource:i},l=this.createMenu(e,s,o,t,i);return l?{menu:l,eMenuGui:l.getGui(),anchorToElement:i||n.getGridBodyCtrl().eGridBody,restoreFocusParams:o}:void 0}createMenu(e,s,t,i,r){if(lt(this.gos))return this.createBean(new Cu(e,t,this.lastSelectedTab,i,r));{let a=this.beans.colMenuFactory.getMenuItems(e,s);return a.length?this.createBean(new vu(a,e,t,r)):void 0}}dispatchVisibleChangedEvent(e,s,t,i,r){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:s,key:this.lastSelectedTab??r??(lt(this.gos)?Ze:"columnMenu"),column:t??null,columnGroup:i??null})}isMenuEnabled(e){if(!lt(this.gos))return!0;let s=!this.beans.filterManager?.isFilterAllowed(e),t=e.getColDef().menuTabs??Os;return(s&&t.includes(Xe)?t.length-1:t.length)>0}showMenuAfterContextMenuEvent(e,s,t){this.beans.menuUtils.onContextMenu({mouseEvent:s,touchEvent:t,source:"ui",showMenuCallback:i=>(this.showMenuAfterMouseEvent(e,i,"columnMenu"),!0)})}},Cu=class extends x{constructor(e,s,t,i,r){super(),this.column=e,this.restoreFocusParams=s,this.initialSelection=t,this.restrictTo=i,this.sourceElement=r,this.tabFactories={},this.includeChecks={};let{tabFactories:a,includeChecks:n}=this;a[Ze]=this.createMainPanel.bind(this),a[Xe]=this.createFilterPanel.bind(this),a[ht]=this.createColumnsPanel.bind(this),n[Ze]=()=>!0,n[Xe]=()=>e?!!this.beans.filterManager?.isFilterAllowed(e):!1,n[ht]=()=>!0}postConstruct(){let e=this.getTabsToCreate().map(t=>this.createTab(t)),s=new mu({items:e,cssClass:"ag-menu",onActiveItemClicked:this.onHidePopup.bind(this),onItemClicked:this.onTabItemClicked.bind(this)});this.tabbedLayout=this.createBean(s),this.mainMenuList?.setParentComponent(s),this.addDestroyFunc(()=>this.destroyBean(s))}getTabsToCreate(){return this.restrictTo?this.restrictTo:(this.column?.getColDef().menuTabs??Os).filter(e=>this.isValidMenuTabItem(e)&&this.isNotSuppressed(e))}isValidMenuTabItem(e){let s=!0,t=Os;return this.restrictTo!=null&&(s=this.restrictTo.indexOf(e)>-1,t=this.restrictTo),s=s&&Os.indexOf(e)>-1,s||b(175,{menuTabName:e,itemsToConsider:t}),s}isNotSuppressed(e){return this.includeChecks[e]()}createTab(e){return this.tabFactories[e]()}showTabBasedOnPreviousSelection(){this.showTab(this.initialSelection)}showTab(e){let{tabItemColumns:s,tabbedLayout:t,tabItemFilter:i,tabItemGeneral:r}=this;s&&e===ht?t.showItem(s):i&&e===Xe?t.showItem(i):r&&e===Ze?t.showItem(r):t.showFirstItem()}onTabItemClicked(e){let s=null;switch(e.item){case this.tabItemColumns:s=ht;break;case this.tabItemFilter:s=Xe;break;case this.tabItemGeneral:s=Ze;break}s&&this.activateTab(s)}activateTab(e){let s={type:"tabSelected",key:e};this.dispatchLocalEvent(s)}createMainPanel(){let{beans:e,column:s}=this,t=e.colMenuFactory,i=t.createMenu(this,t.getMenuItems(s),this.column,()=>this.sourceElement??this.getGui());this.mainMenuList=i,i.addEventListener("closeMenu",this.onHidePopup.bind(this));let r={title:w("legacyMenu",e,s),titleLabel:Ze.replace("MenuTab",""),bodyPromise:Re.resolve(i.getGui()),name:Ze};return this.tabItemGeneral=r,r}onHidePopup(e){this.beans.menuUtils.closePopupAndRestoreFocusOnSelect(this.hidePopupFunc,this.restoreFocusParams,e)}createFilterPanel(){let e=this.column?this.createBean(new oa(this.column,"COLUMN_MENU")):null;this.filterComp=e,e?.hasFilter()||xt(119);let s=i=>e?.afterGuiAttached(i),t=()=>e?.afterGuiDetached();return this.tabItemFilter={title:w("filterTab",this.beans,this.column),titleLabel:Xe.replace("MenuTab",""),bodyPromise:Re.resolve(e?.getGui()),afterAttachedCallback:s,afterDetachedCallback:t,name:Xe},this.tabItemFilter}createColumnsPanel(){let e=U({tag:"div",cls:"ag-menu-column-select-wrapper"}),{beans:s,column:t}=this,r=s.colChooserFactory.createColumnSelectPanel(this,t).getGui();r.classList.add("ag-menu-column-select"),e.appendChild(r);let a={title:w("columns",s,t),titleLabel:ht.replace("MenuTab",""),bodyPromise:Re.resolve(e),name:ht};return this.tabItemColumns=a,a}afterGuiAttached(e){let{container:s,hidePopup:t}=e;this.tabbedLayout.setAfterAttachedParams({container:s,hidePopup:t}),t&&(this.hidePopupFunc=t,this.addDestroyFunc(t))}getGui(){return this.tabbedLayout.getGui()}destroy(){super.destroy(),this.destroyBean(this.filterComp)}},vu=class extends F{constructor(e,s,t,i){super({tag:"div",ref:"eColumnMenu",cls:"ag-menu ag-column-menu",role:"presentation"}),this.menuItems=e,this.column=s,this.restoreFocusParams=t,this.sourceElement=i,this.eColumnMenu=T}postConstruct(){let e=this.beans.colMenuFactory.createMenu(this,this.menuItems,this.column,()=>this.sourceElement??this.getGui());this.mainMenuList=e,e.addEventListener("closeMenu",this.onHidePopup.bind(this)),this.eColumnMenu.appendChild(e.getGui())}onHidePopup(e){this.beans.menuUtils.closePopupAndRestoreFocusOnSelect(this.hidePopupFunc,this.restoreFocusParams,e)}afterGuiAttached({hidePopup:e}){e&&(this.hidePopupFunc=e,this.addDestroyFunc(e)),ye(this.mainMenuList.getGui())}};function yu(e,s){let{contextMenuSvc:t}=e;if(!t)return;let{rowNode:i,column:r,value:a,x:n,y:o}=s||{},{x:l,y:c}=t.getContextMenuPosition(i,r);n!=null&&(l=n),o!=null&&(c=o),t.showContextMenu({mouseEvent:new MouseEvent("mousedown",{clientX:l,clientY:c}),rowNode:i,column:r,value:a,source:"api"})}function Su(e,s){e.colChooserFactory?.showColumnChooser({chooserParams:s})}function bu(e){e.colChooserFactory?.hideActiveColumnChooser()}var wu=class extends x{constructor(){super(...arguments),this.beanName="menuUtils"}restoreFocusOnClose(e,s,t,i){let{eventSource:r}=e,a=t instanceof KeyboardEvent;if(!i&&!a||!r)return;let n=ve(this.beans);!s.contains(n)&&!Ht(this.beans)||this.focusHeaderCell(e)}closePopupAndRestoreFocusOnSelect(e,s,t){let i;t&&t.keyboardEvent&&(i=t.keyboardEvent),e(i&&{keyboardEvent:i});let r=this.beans,a=r.focusSvc,n=a.getFocusedCell();if(Ht(r))if(n){let{rowIndex:o,rowPinned:l,column:c}=n;a.setFocusedCell({rowIndex:o,column:c,rowPinned:l,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}else this.focusHeaderCell(s)}onContextMenu(e){let{mouseEvent:s,touchEvent:t,showMenuCallback:i,source:r}=e;if(!this.gos.get("allowContextMenuWithControlKey")&&s&&(s.ctrlKey||s.metaKey)||(s&&this.blockMiddleClickScrollsIfNeeded(s),r==="ui"&&this.gos.get("suppressContextMenu")))return;let a=s??t.touches[0];if(i(a)){let n=s??t;n&&n.cancelable&&n.preventDefault()}}focusHeaderCell(e){return et(this,null,function*(){let{column:s,columnIndex:t,headerPosition:i,eventSource:r}=e,{visibleCols:a,headerNavigation:n,focusSvc:o}=this.beans,l=yield a.allCols.some(c=>c===s);if(this.isAlive()){if(s?.isAlive()&&l&&r&&wt(r)){let c=ea(r);c&&(n?.scrollToColumn(s),c.focus())}else if(i&&t!==-1){let c=a.allCols,d=c[t]||ce(c);d&&o.focusHeaderPosition({headerPosition:{headerRowIndex:i.headerRowIndex,column:d}})}}})}blockMiddleClickScrollsIfNeeded(e){this.gos.get("suppressMiddleClickScrolls")&&e.which===2&&e.preventDefault()}},Tn={moduleName:"MenuCore",version:re,beans:[ou,iu,wu],icons:{chart:"chart",columns:"columns",loadingMenuItems:"loading",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",save:"save",csvExport:"csv",excelExport:"excel",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"},dependsOn:[Le,Ps,ba,pn]},Hf={moduleName:"ColumnMenu",version:re,beans:[fu,cu,nu],icons:{legacyMenu:"menu",filterTab:"filter",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate"},apiFunctions:{showColumnChooser:Su,hideColumnChooser:bu},dependsOn:[Tn,Es,Ms]},Uf={moduleName:"ContextMenu",version:re,beans:[uu],apiFunctions:{showContextMenu:yu},dependsOn:[Tn]};function An(e){return e.excelCreator?.getFactoryMode()==="MULTI_SHEET"?(b(161),!1):!0}function xu(e,s){if(An(e))return e.excelCreator?.getDataAsExcel(s)}function Tu(e,s){An(e)&&e.excelCreator?.exportDataAsExcel(s)}function Au(e,s){return e.excelCreator?.setFactoryMode("MULTI_SHEET"),e.excelCreator?.getSheetDataForExcel(s)}function Fu(e,s){return e.excelCreator?.getMultipleSheetsAsExcel(s)}function Eu(e,s){e.excelCreator?.exportMultipleSheetsAsExcel(s)}var Wf={moduleName:"ExcelExport",version:re,beans:[Rd],apiFunctions:{getDataAsExcel:xu,exportDataAsExcel:Tu,getSheetDataForExcel:Au,getMultipleSheetsAsExcel:Fu,exportMultipleSheetsAsExcel:Eu},dependsOn:[wa,Le]};var Mu=class extends x{constructor(){super(...arguments),this.beanName="aggColNameSvc"}getHeaderName(e,s){if(this.gos.get("suppressAggFuncInHeader"))return s;let{valueColsSvc:t,colModel:i,rowGroupColsSvc:r}=this.beans,a=e.getColDef().pivotValueColumn,n=te(a),o=null,l;if(n){let c=t?.columns??[],d=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&c.length===1,h=e.getColDef().pivotTotalColumnIds!==void 0;if(d&&!h)return s;o=a?a.getAggFunc():null,l=!0}else{let c=e.isValueActive(),d=i.isPivotMode()||r?.columns.length!==0;c&&d?(o=e.getAggFunc(),l=!0):l=!1}if(l){let c=typeof o=="string"?o:"func";return`${this.getLocaleTextFunc()(c,c)}(${s})`}return s}},Pu={sum:"Sum",first:"First",last:"Last",min:"Min",max:"Max",count:"Count",avg:"Average"},Iu=class extends x{constructor(){super(...arguments),this.beanName="aggFuncSvc",this.aggFuncsMap={},this.initialised=!1}postConstruct(){this.init()}init(){this.initialised||(this.initialiseWithDefaultAggregations(),this.addAggFuncs(this.gos.get("aggFuncs")))}initialiseWithDefaultAggregations(){let e=this.aggFuncsMap;e.sum=Ru,e.first=Du,e.last=Lu,e.min=_u,e.max=ku,e.count=Ou,e.avg=Gu,this.initialised=!0}isAggFuncPossible(e,s){let i=this.getFuncNames(e).includes(s),r=te(this.aggFuncsMap[s]);return i&&r}getDefaultFuncLabel(e){return Pu[e]??e}getDefaultAggFunc(e){let s=e.getColDef().defaultAggFunc;if(te(s)&&this.isAggFuncPossible(e,s))return s;if(this.isAggFuncPossible(e,"sum"))return"sum";let t=this.getFuncNames(e);return t?.length?t[0]:null}addAggFuncs(e){if(this.init(),!!e)for(let s of Object.keys(e))this.aggFuncsMap[s]=e[s]}getAggFunc(e){return this.init(),this.aggFuncsMap[e]}getFuncNames(e){let s=e.getColDef().allowedAggFuncs;return s??Object.keys(this.aggFuncsMap).sort()}clear(){this.aggFuncsMap={}}};function Ru(e){let{values:s}=e,t=null;for(let i=0;i<s.length;i++){let r=s[i];typeof r=="number"?t===null?t=r:t+=typeof t=="number"?r:BigInt(r):typeof r=="bigint"&&(t===null?t=r:t=(typeof t=="bigint"?t:BigInt(t))+r)}return t}function Du(e){return e.values.length>0?e.values[0]:null}function Lu(e){return e.values.length>0?ce(e.values):null}function _u(e){let{values:s}=e,t=null;for(let i=0;i<s.length;i++){let r=s[i];(typeof r=="number"||typeof r=="bigint")&&(t===null||t>r)&&(t=r)}return t}function ku(e){let{values:s}=e,t=null;for(let i=0;i<s.length;i++){let r=s[i];(typeof r=="number"||typeof r=="bigint")&&(t===null||t<r)&&(t=r)}return t}function Ou(e){let{values:s}=e,t=0;for(let r=0;r<s.length;r++){let a=s[r];t+=a!=null&&typeof a.value=="number"?a.value:1}let i=e.rowNode?.aggData?.[e.column.getColId()];return i&&i.value===t?i:{value:t,toString:function(){return this.value.toString()},toNumber:function(){return this.value}}}function Gu(e){let{values:s}=e,t=0,i=0;for(let n=0;n<s.length;n++){let o=s[n],l=null;typeof o=="number"||typeof o=="bigint"?(l=o,i++):o!=null&&(typeof o.value=="number"||typeof o.value=="bigint")&&typeof o.count=="number"&&(l=o.value*(typeof o.value=="number"?o.count:BigInt(o.count)),i+=o.count),typeof l=="number"?t+=typeof t=="number"?l:BigInt(l):typeof l=="bigint"&&(t=(typeof t=="bigint"?t:BigInt(t))+l)}let r=null;i>0&&(r=t/(typeof t=="number"?i:BigInt(i)));let a=e.rowNode?.aggData?.[e.column?.getColId()];return a&&a.count===i&&a.value===r?a:{count:i,value:r,toString:function(){return typeof this.value=="number"||typeof this.value=="bigint"?this.value.toString():""},toNumber:function(){return this.value}}}function Nu(e,s){e.aggFuncSvc&&e.aggFuncSvc.addAggFuncs(s)}function Bu(e){e.aggFuncSvc&&e.aggFuncSvc.clear()}function Vu(e,s,t){e.valueColsSvc?.setColumnAggFunc?.(s,t,"api")}function yi(e,s,t,i,r,a){let n=typeof t=="string"?e.aggFuncSvc.getAggFunc(t):t;if(typeof n!="function")return xt(109,{aggFuncOrString:t}),null;let o=B(e.gos,{values:s,column:i,colDef:i.colDef,pivotResultColumn:a,rowNode:r,data:r?.data});return n(o)}var Hu=class extends x{constructor(){super(...arguments),this.beanName="aggStage",this.refreshProps=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","suppressAggFilteredOnly","grandTotalRow"]),this.step="aggregate"}wireBeans(e){this.colModel=e.colModel,this.pivotColsSvc=e.pivotColsSvc,this.valueColsSvc=e.valueColsSvc,this.pivotResultCols=e.pivotResultCols,this.valueSvc=e.valueSvc}execute(e){let s=!this.valueColsSvc?.columns?.length,t=!this.gos.getCallback("getGroupRowAgg");if(s&&t&&e.changedPath?.active)return;let i=this.createAggDetails(e);this.recursivelyCreateAggData(i)}createAggDetails(e){let s=this.colModel.isPivotActive(),t=this.valueColsSvc?.columns,i=s&&this.pivotColsSvc?this.pivotColsSvc.columns:[];return{alwaysAggregateAtRootLevel:this.gos.get("alwaysAggregateAtRootLevel"),groupIncludeTotalFooter:!!At(this.gos),changedPath:e.changedPath,valueColumns:t??[],pivotColumns:i,filteredOnly:!this.isSuppressAggFilteredOnly(),userAggFunc:this.gos.getCallback("getGroupRowAgg")}}isSuppressAggFilteredOnly(){return fs(this.gos)!==void 0||this.gos.get("suppressAggFilteredOnly")}recursivelyCreateAggData(e){let s=t=>{if(!t.hasChildren()){t.aggData&&this.setAggData(t,null);return}if(t.level===-1&&!e.groupIncludeTotalFooter){let a=!this.colModel.isPivotMode();if(!e.alwaysAggregateAtRootLevel&&a){this.setAggData(t,null);return}}this.aggregateRowNode(t,e)};e.changedPath.forEachChangedNodeDepthFirst(s,!0)}aggregateRowNode(e,s){let t=s.valueColumns.length===0,i=s.pivotColumns.length===0,r;s.userAggFunc?r=s.userAggFunc({nodes:e.childrenAfterFilter}):t?r=null:i?r=this.aggregateRowNodeUsingValuesOnly(e,s):r=this.aggregateRowNodeUsingValuesAndPivot(e),this.setAggData(e,r),e.sibling&&this.setAggData(e.sibling,r)}aggregateRowNodeUsingValuesAndPivot(e){let s={},t=this.pivotResultCols?.getPivotResultCols()?.list??[],i=!0,r=this.beans;for(let a=0;a<t.length;a++){let n=t[a],o=n.getColDef();if(o.pivotTotalColumnIds!=null){i=!1;continue}let l=o.pivotKeys??[],c;e.leafGroup?c=this.getValuesFromMappedSet(e.childrenMapped,l,o.pivotValueColumn):c=this.getValuesPivotNonLeaf(e,o.colId),s[o.colId]=yi(r,c,o.pivotValueColumn.getAggFunc(),o.pivotValueColumn,e,n)}if(!i)for(let a=0;a<t.length;a++){let n=t[a],o=n.getColDef();if(o.pivotTotalColumnIds==null||!o.pivotTotalColumnIds.length)continue;let l=o.pivotTotalColumnIds.map(c=>s[c]);s[o.colId]=yi(r,l,o.pivotValueColumn.getAggFunc(),o.pivotValueColumn,e,n)}return s}aggregateRowNodeUsingValuesOnly(e,s){let t={},{changedPath:i,valueColumns:r,filteredOnly:a}=s,n=i.active?i.getValueColumnsForNode(e,r):r,o=i.active?i.getNotValueColumnsForNode(e,r):null,l=this.getValuesNormal(e,n,a),c=e.aggData,d=this.beans;return n.forEach((h,p)=>{t[h.getId()]=yi(d,l[p],h.getAggFunc(),h,e)}),o&&c&&o.forEach(h=>{t[h.getId()]=c[h.getId()]}),t}getValuesPivotNonLeaf(e,s){return e.childrenAfterFilter.map(t=>t.aggData[s])}getValuesFromMappedSet(e,s,t){let i=e;for(let r=0;r<s.length;r++){let a=s[r];i=i?i[a]:null}return i?i.map(r=>this.valueSvc.getValue(t,r)):[]}getValuesNormal(e,s,t){let i=[];s.forEach(()=>i.push([]));let r=s.length,a=t?e.childrenAfterFilter:e.childrenAfterGroup,n=a.length;for(let o=0;o<n;o++){let l=a[o];for(let c=0;c<r;c++){let d=s[c],h=this.valueSvc.getValue(d,l);i[c].push(h)}}return i}setAggData(e,s){let t=e.aggData;if(e.aggData=s,e.__localEventService){let i=r=>{let a=e.aggData?e.aggData[r]:void 0,n=t?t[r]:void 0;if(a===n)return;let o=this.colModel.getCol(r);o&&e.dispatchCellChangedEvent(o,a,n)};if(t)for(let r of Object.keys(t))i(r);if(s)for(let r of Object.keys(s))(!t||!(r in t))&&i(r)}}},Uu=class extends x{constructor(){super(...arguments),this.beanName="filterAggStage",this.refreshProps=new Set([]),this.step="filter_aggregates"}wireBeans(e){this.filterManager=e.filterManager}execute(e){let s=this.beans.colModel.isPivotMode(),t=this.filterManager?.isAggregateFilterPresent()||this.filterManager?.isAggregateQuickFilterPresent(),i=c=>!c.node.group,r=c=>c.node.leafGroup,a=fs(this.gos)||(s?r:i),{changedPath:n}=e,o=(c,d=!1)=>{c.childrenAfterFilter&&(c.childrenAfterAggFilter=c.childrenAfterFilter,d&&c.childrenAfterAggFilter.forEach(h=>o(h,d)),this.setAllChildrenCount(c)),c.sibling&&(c.sibling.childrenAfterAggFilter=c.childrenAfterAggFilter)},l=c=>{c.childrenAfterAggFilter=c.childrenAfterFilter?.filter(d=>a({node:d})&&this.filterManager.doesRowPassAggregateFilters({rowNode:d})?(o(d,!0),!0):d.childrenAfterAggFilter?.length)||null,this.setAllChildrenCount(c),c.sibling&&(c.sibling.childrenAfterAggFilter=c.childrenAfterAggFilter)};n.forEachChangedNodeDepthFirst(t?l:o,!0)}setAllChildrenCountTreeData(e){let s=e.childrenAfterAggFilter,t=0;if(s){let i=s.length;t=i;for(let r=0;r<i;++r)t+=s[r].allChildrenCount??0}e.setAllChildrenCount(t===0&&e.level>=0?null:t)}setAllChildrenCountGridGrouping(e){let s=0;e.childrenAfterAggFilter.forEach(t=>{t.group?s+=t.allChildrenCount:s++}),e.setAllChildrenCount(s)}setAllChildrenCount(e){if(!e.hasChildren()){e.setAllChildrenCount(null);return}this.gos.get("treeData")?this.setAllChildrenCountTreeData(e):this.setAllChildrenCountGridGrouping(e)}},zu=new Set(["__localEventService","__objectId","sticky","__autoHeights","__checkAutoHeightsDebounced"]);function Yt(e,s){if(e.sibling)return;let t=new It(s);Object.keys(e).forEach(i=>{zu.has(i)||(t[i]=e[i])}),t.footer=!0,t.setRowTop(null),t.setRowIndex(null),t.oldRowTop=null,t.id="rowGroupFooter_"+e.id,t.sibling=e,e.sibling=t}function Ku(e){e.sibling&&(e.sibling.setRowTop(null),e.sibling.setRowIndex(null),e.sibling=void 0)}var Wu=class extends x{constructor(){super(...arguments),this.beanName="footerSvc"}addTotalRows(e,s,t,i,r,a){let n=e;if(r)return(i&&At(this.gos))===a&&(Yt(s,this.beans),t(s.sibling,n++)),n;let o=Cs(this.gos);return(i&&o({node:s}))===a&&(Yt(s,this.beans),t(s.sibling,n++)),n}getTopDisplayIndex(e,s,t,i){let r=s;if(e[0].footer){if(s===0)return 0;r-=1}let a=e[e.length-1],n=r>=t.length;return a.footer&&n?a.rowIndex:i(r)}getTotalValue(e){return this.getLocaleTextFunc()("footerTotal","Total")+" "+(e??"")}},Fn=class extends Mt{constructor(){super(...arguments),this.beanName="valueColsSvc",this.eventName="columnValueChanged",this.columnProcessors={set:(e,s,t)=>this.setValueActive(s,e,t),add:(e,s,t)=>this.setValueActive(!0,e,t),remove:(e,s,t)=>this.setValueActive(!1,e,t)},this.columnExtractors={setFlagFunc:(e,s,t)=>this.setColValueActive(e,s,t),getIndexFunc:()=>{},getInitialIndexFunc:()=>{},getValueFunc:e=>{let s=e.aggFunc;if(s===null||s==="")return null;if(s!==void 0)return!!s},getInitialValueFunc:e=>e.initialAggFunc!=null&&e.initialAggFunc!=""},this.modifyColumnsNoEventsCallbacks={addCol:e=>this.columns.push(e),removeCol:e=>Ft(this.columns,e)}}extractCols(e,s){return this.columns=super.extractCols(e,s),this.columns.forEach(t=>{let i=t.getColDef();i.aggFunc!=null&&i.aggFunc!=""?this.setColAggFunc(t,i.aggFunc):t.getAggFunc()||this.setColAggFunc(t,i.initialAggFunc)}),this.columns}setColumnAggFunc(e,s,t){if(!e)return;let i=this.colModel.getColDefCol(e);i&&(this.setColAggFunc(i,s),this.dispatchColumnChangedEvent(this.eventSvc,this.eventName,[i],t))}syncColumnWithState(e,s,t){let i=t("aggFunc").value1;i!==void 0&&(typeof i=="string"?(this.setColAggFunc(e,i),e.isValueActive()||(this.setColValueActive(e,!0,s),this.modifyColumnsNoEventsCallbacks.addCol(e))):(te(i)&&b(33),e.isValueActive()&&(this.setColValueActive(e,!1,s),this.modifyColumnsNoEventsCallbacks.removeCol(e))))}setValueActive(e,s,t){if(e!==s.isValueActive()&&(this.setColValueActive(s,e,t),e&&!s.getAggFunc()&&this.aggFuncSvc)){let i=this.aggFuncSvc.getDefaultAggFunc(s);this.setColAggFunc(s,i)}}setColAggFunc(e,s){e.aggFunc=s,e.dispatchStateUpdatedEvent("aggFunc")}setColValueActive(e,s,t){e.aggregationActive!==s&&(e.aggregationActive=s,e.dispatchColEvent("columnValueChanged",t))}},En={moduleName:"SharedAggregation",version:re,beans:[Iu,Mu,Wu,Fn],apiFunctions:{addAggFuncs:Nu,clearAggFuncs:Bu,setColumnAggFunc:Vu},dependsOn:[Le]},ju={moduleName:"Aggregation",version:re,beans:[Hu,Uu],rowModels:["clientSide"],dependsOn:[En]},$u=class extends Mt{constructor(){super(...arguments),this.beanName="pivotColsSvc",this.eventName="columnPivotChanged",this.columnProcessors={set:(e,s,t)=>this.setColPivotActive(e,s,t),add:(e,s,t)=>this.setColPivotActive(e,!0,t),remove:(e,s,t)=>this.setColPivotActive(e,!1,t)},this.columnOrdering={enableProp:"pivot",initialEnableProp:"initialPivot",indexProp:"pivotIndex",initialIndexProp:"initialPivotIndex"},this.columnExtractors={setFlagFunc:(e,s,t)=>this.setColPivotActive(e,s,t),getIndexFunc:e=>e.pivotIndex,getInitialIndexFunc:e=>e.initialPivotIndex,getValueFunc:e=>e.pivot,getInitialValueFunc:e=>e.initialPivot},this.modifyColumnsNoEventsCallbacks={addCol:e=>this.columns.push(e),removeCol:e=>Ft(this.columns,e)}}syncColumnWithState(e,s,t,i){let{value1:r,value2:a}=t("pivot","pivotIndex");(r!==void 0||a!==void 0)&&(typeof a=="number"||r?(e.isPivotActive()||(this.setColPivotActive(e,!0,s),this.modifyColumnsNoEventsCallbacks.addCol(e)),i&&typeof a=="number"&&(i[e.getId()]=a)):e.isPivotActive()&&(this.setColPivotActive(e,!1,s),this.modifyColumnsNoEventsCallbacks.removeCol(e)))}setColPivotActive(e,s,t){e.pivotActive!==s&&(e.pivotActive=s,e.dispatchColEvent("columnPivotChanged",t)),e.dispatchStateUpdatedEvent("pivot")}},Yu=class extends Mt{constructor(){super(...arguments),this.beanName="rowGroupColsSvc",this.eventName="columnRowGroupChanged",this.columnProcessors={set:(e,s,t)=>this.setActive(s,e,t),add:(e,s,t)=>this.setActive(!0,e,t),remove:(e,s,t)=>this.setActive(!1,e,t)},this.columnOrdering={enableProp:"rowGroup",initialEnableProp:"initialRowGroup",indexProp:"rowGroupIndex",initialIndexProp:"initialRowGroupIndex"},this.columnExtractors={setFlagFunc:(e,s,t)=>this.setColRowGroupActive(e,s,t),getIndexFunc:e=>e.rowGroupIndex,getInitialIndexFunc:e=>e.initialRowGroupIndex,getValueFunc:e=>e.rowGroup,getInitialValueFunc:e=>e.initialRowGroup},this.modifyColumnsNoEventsCallbacks={addCol:e=>this.columns.push(e),removeCol:e=>Ft(this.columns,e)}}moveColumn(e,s,t){if(this.columns.length===0)return;let i=this.columns[e],r=this.columns.slice(e,s);this.columns.splice(e,1),this.columns.splice(s,0,i),this.updateIndexMap(),this.eventSvc.dispatchEvent({type:this.eventName,columns:r,column:r.length===1?r[0]:null,source:t})}syncColumnWithState(e,s,t,i){let{value1:r,value2:a}=t("rowGroup","rowGroupIndex");(r!==void 0||a!==void 0)&&(typeof a=="number"||r?(e.isRowGroupActive()||(this.setColRowGroupActive(e,!0,s),this.modifyColumnsNoEventsCallbacks.addCol(e)),i&&typeof a=="number"&&(i[e.getId()]=a)):e.isRowGroupActive()&&(this.setColRowGroupActive(e,!1,s),this.modifyColumnsNoEventsCallbacks.removeCol(e)))}setActive(e,s,t){e!==s.isRowGroupActive()&&(this.setColRowGroupActive(s,e,t),ys(this.gos,e)&&this.colModel.setColsVisible([s],!e,t))}setColRowGroupActive(e,s,t){e.rowGroupActive!==s&&(e.rowGroupActive=s,e.dispatchColEvent("columnRowGroupChanged",t)),e.dispatchStateUpdatedEvent("rowGroup")}},qu=class extends x{constructor(){super(...arguments),this.beanName="autoColSvc"}postConstruct(){this.addManagedPropertyListener("autoGroupColumnDef",this.updateColumns.bind(this))}addColumns(e){this.columns!=null&&(e.list=this.columns.list.concat(e.list),e.tree=this.columns.tree.concat(e.tree),Kr(e))}createColumns(e,s){let t=this.beans,{colModel:i,gos:r,rowGroupColsSvc:a,colGroupSvc:n}=t,o=i.isPivotMode(),l=Lr(r,o),c=o?r.get("pivotSuppressAutoColumn"):this.isSuppressAutoCol(),d=a?.columns,p=!(d&&d.length>0||r.get("treeData"))||c||l,u=()=>{this.columns&&(ci(t,this.columns.tree),this.columns=null)};if(p){u();return}let g=this.generateAutoCols(d),f=zr(g,this.columns?.list||null),S=e.treeDepth,E=(this.columns?this.columns.treeDepth:-1)==S;if(f&&E)return;u();let D=n?.findDepth(e.tree)??0,X=n?.balanceTreeForAutoCols(g,D)??[];this.columns={list:g,tree:X,treeDepth:D,map:{}},s(P=>{if(!P)return null;let k=P.filter(M=>!Ur(M));return[...g,...k]})}updateColumns(e){let s=Wr(e.source);this.columns?.list.forEach((t,i)=>this.updateOneAutoCol(t,i,s))}getColumn(e){return this.columns?.list.find(s=>jr(s,e))??null}getColumns(){return this.columns?.list??null}generateAutoCols(e=[]){let s=[],t=this.gos.get("treeData"),i=vs(this.gos);return t&&i&&(b(182),i=!1),i?e.forEach((r,a)=>{s.push(this.createOneAutoCol(r,a))}):s.push(this.createOneAutoCol()),s}isSuppressAutoCol(){let e=this.gos;return e.get("groupDisplayType")==="custom"?!0:e.get("treeDataDisplayType")==="custom"}createOneAutoCol(e,s){let t;e?t=`${li}-${e.getId()}`:t=li;let i=this.createAutoColDef(t,e,s);i.colId=t;let r=new Br(i,null,t,!0);return this.createBean(r),r}updateOneAutoCol(e,s,t){let i=e.getColDef(),r=typeof i.showRowGroup=="string"?i.showRowGroup:void 0,a=this.beans,n=r!=null?a.colModel.getColDefCol(r):void 0,o=e.getId(),l=this.createAutoColDef(o,n??void 0,s);e.setColDef(l,null,t),Et(a,{state:[L({colId:o},l)]},t)}createAutoColDef(e,s,t){let i=this.createBaseColDef(s),r=this.gos.get("autoGroupColumnDef");Ss(i,r),i=$r(this.beans,i,e,!0),this.gos.get("treeData")||We(i.field)&&We(i.valueGetter)&&We(i.filterValueGetter)&&i.filter!=="agGroupColumnFilter"&&(i.filter=!1),t&&t>0&&(i.headerCheckboxSelection=!1);let a=Dr(this.gos),n=i.valueGetter||i.field!=null;return a&&!n&&(i.sortIndex=void 0,i.initialSort=void 0),i}createBaseColDef(e){let s=this.gos.get("autoGroupColumnDef"),i={headerName:this.getLocaleTextFunc()("group","Group"),showRowGroup:e?.getColId()??!0};return s&&(s.cellRenderer||s.cellRendererSelector)||(i.cellRenderer="agGroupCellRenderer",this.beans.findSvc?.setupGroupCol(i)),e&&(i.headerName=this.beans.colNames.getDisplayNameForColumn(e,"header")??void 0,i.headerValueGetter=e.colDef.headerValueGetter),i}destroy(){ci(this.beans,this.columns?.tree),super.destroy()}},Xu=class extends x{addExpandedCss(e,s){s.isExpandable()&&(e.push("ag-row-group"),e.push(s.expanded?"ag-row-group-expanded":"ag-row-group-contracted"))}getRowExpandedListeners(e){let{rowNode:s}=e,t=this.updateExpandedCss.bind(this,e,s);return{expandedChanged:t,hasChildrenChanged:t}}setExpanded(e,s,t,i){if(e.expanded===s)return;e.expanded=s,e.dispatchRowEvent("expandedChanged");let r=N(L({},na(e,this.gos,"rowGroupOpened")),{expanded:s,event:t||null});this.dispatchExpandedEvent(r,i),this.beans.rowRenderer.refreshCells({rowNodes:[e]})}isExpandable(e){return e.footer?!1:this.beans.colModel.isPivotMode()?e.hasChildren()&&!e.leafGroup:e.hasChildren()||e.master}updateExpandedCss(e,s){let t=s.isExpandable(),i=s.expanded==!0;e.forEachGui(void 0,r=>{let a=r.rowComp;a.addOrRemoveCssClass("ag-row-group",t),a.addOrRemoveCssClass("ag-row-group-expanded",t&&i),a.addOrRemoveCssClass("ag-row-group-contracted",t&&!i),we(r.element,t&&i)})}},Zu=class extends Xu{constructor(){super(...arguments),this.beanName="expansionSvc",this.events=[]}wireBeans(e){this.rowModel=e.rowModel}expandRows(e){let s=new Set(e);this.rowModel.forEachNode(t=>{t.id&&s.has(t.id)&&(t.expanded=!0)}),this.onGroupExpandedOrCollapsed()}expandAll(e){let{gos:s,colModel:t,eventSvc:i}=this.beans,r=this.rowModel,a=s.get("treeData"),n=t.isPivotActive(),o=c=>{c&&c.forEach(d=>{let h=()=>{d.expanded=e,o(d.childrenAfterGroup)};if(a){te(d.childrenAfterGroup)&&h();return}if(n){!d.leafGroup&&h();return}d.group&&h()})},l=r.rootNode;l&&o(l.childrenAfterGroup),r.refreshModel({step:"map"}),i.dispatchEvent({type:"expandOrCollapseAll",source:e?"expandAll":"collapseAll"})}onGroupExpandedOrCollapsed(){this.rowModel.refreshModel({step:"map"})}dispatchExpandedEvent(e,s){this.events.push(e);let t=()=>{this.rowModel.onRowGroupOpened(),this.events.forEach(i=>this.eventSvc.dispatchEvent(i)),this.events=[]};s?t():(this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.debounce(t)),this.dispatchExpandedDebounced())}debounce(e){let s=this.beans.animationFrameSvc;if(!s)return()=>window.setTimeout(e,0);let t=!1;return()=>{if(!s.active){window.setTimeout(e,0);return}t||(t=!0,s.addDestroyTask(()=>{t=!1,e()}))}}};function Ju(e){let s=e.get("groupHideParentOfSingleChild");return s||(s=e.get("groupRemoveSingleChildren"),!s&&e.get("groupRemoveLowestSingleChildren")&&(s="leafGroupsOnly")),{groupHideParentOfSingleChild:s,isGroupMultiAutoColumn:vs(e),hideOpenParents:e.get("groupHideOpenParents"),grandTotalRow:At(e),groupTotalRow:Cs(e)}}function Qu(e,s,t){return e.groupHideParentOfSingleChild===!0&&t&&s.childrenAfterGroup.length===1}function ep(e,s,t){return e.groupHideParentOfSingleChild==="leafGroupsOnly"&&t&&s.leafGroup&&s.childrenAfterGroup.length===1}function tp(e,s,t,i,r,a){let n=i&&!t,o=i&&s.leafGroup,l=e.hideOpenParents&&s.expanded&&!s.master&&!o;return!n&&!l&&!r&&!a}var sp=class extends x{constructor(){super(...arguments),this.beanName="flattenStage",this.refreshProps=new Set(["groupHideParentOfSingleChild","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupTotalRow","masterDetail"]),this.step="map"}execute(e){let s=e.rowNode,t=[],i=this.beans.colModel.isPivotMode(),r=i&&s.leafGroup&&s.aggData,a=r?[s]:s.childrenAfterSort,n=Ju(this.gos);this.recursivelyAddToRowsToDisplay(n,a,t,i,0);let o=t.length>0;if(!r&&o&&n.grandTotalRow){Yt(s,this.beans);let c=n.grandTotalRow==="top";this.addRowNodeToRowsToDisplay(n,s.sibling,t,0,c)}return t}recursivelyAddToRowsToDisplay(e,s,t,i,r){if(s?.length)for(let a=0;a<s.length;a++){let n=s[a],o=n.hasChildren(),l=Qu(e,n,o),c=ep(e,n,o);if(tp(e,n,o,i,l,c)&&this.addRowNodeToRowsToDisplay(e,n,t,r),!(i&&n.leafGroup))if(o){let h=l||c;if(n.expanded||h){let p=e.groupTotalRow({node:n});p||Ku(n);let u=h?r:r+1;p==="top"&&(Yt(n,this.beans),this.addRowNodeToRowsToDisplay(e,n.sibling,t,u)),this.recursivelyAddToRowsToDisplay(e,n.childrenAfterSort,t,i,u),p==="bottom"&&(Yt(n,this.beans),this.addRowNodeToRowsToDisplay(e,n.sibling,t,u))}}else{let h=this.beans.masterDetailSvc?.getDetail(n);h&&this.addRowNodeToRowsToDisplay(e,h,t,r)}}}addRowNodeToRowsToDisplay(e,s,t,i,r){r?t.unshift(s):t.push(s),s.setUiLevel(e.isGroupMultiAutoColumn?0:i)}},ip=class extends x{constructor(){super(...arguments),this.beanName="groupStage",this.refreshProps=new Set(["groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType","treeData","treeDataChildrenField","treeDataParentIdField"]),this.step="group",this.approach=null,this.strategy=void 0}destroy(){super.destroy(),this.strategy=void 0,this.approach=null}createStrategy(){let{beans:e,approach:s}=this,t;switch(s){case"treeSelfRef":t="treeParentIdStrategy";break;case"group":t="groupStrategy";break}if(t){let i=e.registry.createDynamicBean(t,!1);return this.createOptionalManagedBean(i),i}}execute(e){let s=this.strategy,t=Nr(this.gos);return this.approach!==t&&(this.approach=t,this.destroyBean(s),s&&this.approach!=="treeNested"&&this.approach!=="treePath"&&rp(e.rowNode),s=this.createStrategy(),this.strategy=s),s?.execute(e),!!s}},rp=e=>{let s=e.allLeafChildren,t=e.sibling;e.treeNodeFlags=0,e.childrenAfterGroup=s,e.childrenMapped=null,e.groupData=null,t&&(t.childrenAfterGroup=e.childrenAfterGroup,t.childrenAfterAggFilter=e.childrenAfterAggFilter,t.childrenAfterFilter=e.childrenAfterFilter,t.childrenAfterSort=e.childrenAfterSort,t.childrenMapped=null,t.groupData=null);for(let i of s){let r=i.sibling;Ua(i),r&&Ua(r),i.parent=e,i.level=0,i.key=null,i.treeNodeFlags=0,(i.group||i.hasChildren())&&(i.group=!1,i.updateHasChildren())}e.updateHasChildren()},Ua=e=>{e.allLeafChildren=null,e.childrenAfterGroup=null,e.childrenAfterAggFilter=null,e.childrenAfterFilter=null,e.childrenAfterSort=null,e.childrenMapped=null,e.groupData&&(e.groupData=null)};function Ai(e,s,t){let i=e,r=i.level-s.level;if(r<=0||!t.get("groupHideOpenParents"))return!1;for(let n=0;n<r;n++){if(!(i.parent?.childrenAfterSort?.[0]===i))return!1;i=i.parent}return i===s}function za(e,s,t,i){let r=t.key==="",a=!!t.rowGroupColumn&&(!e||e?.isRowGroupDisplayed(t.rowGroupColumn.getId()));if(r&&a){let n=Ai(s,t,i.gos);if(t===s||n)return hr(i.localeSvc)("blanks","(Blanks)")}return null}var Mn=class extends x{constructor(){super(...arguments),this.indentClass=null}init(e,s,t,i,r,a,n){this.params=n,this.eGui=s,this.eCheckbox=t,this.eExpanded=i,this.eContracted=r,this.comp=e,this.compClass=a;let{node:o,column:l}=n;if(this.node=o,this.displayedNode=o,!this.isEmbeddedRowMismatch()){if(o.footer){this.initFooterCell();return}if(!l){this.initFullWidthCell();return}this.displayedNode=this.beans.valueSvc.getDisplayedNode(o,l)??this.node,this.setupExpand(),this.setupCheckbox(),this.addGroupValue(),this.setupIndent()}}initFooterCell(){let{node:e,column:s}=this.params,t=e.level===-1;!(e.rowGroupColumn&&s&&s.isRowGroupDisplayed(e.rowGroupColumn.getId()))&&!t||(this.addFooterValue(),this.setupIndent(),t||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!0))}initFullWidthCell(){let e=()=>{let{rowDragSvc:s}=this.beans;if(!this.params.rowDrag||!s)return;let t=s.createRowDragComp(()=>this.params.value,this.params.node);this.createManagedBean(t),this.eGui.insertAdjacentElement("afterbegin",t.getGui())};this.setupExpand(),e(),this.setupCheckbox(),this.addGroupValue(),this.setupIndent()}getCellAriaRole(){let e=this.params.colDef?.cellAriaRole,s=this.params.column?.getColDef().cellAriaRole;return e||s||"gridcell"}isEmbeddedRowMismatch(){if(!this.params.fullWidth||!this.gos.get("embedFullWidthRows"))return!1;let{visibleCols:e}=this.beans,s=this.params.pinned==="left",t=this.params.pinned==="right",i=!s&&!t;return this.gos.get("enableRtl")?e.isPinningLeft()?!t:!i:e.isPinningLeft()?!s:!i}addGroupValue(){let{params:{column:e,value:s},node:t,displayedNode:i,beans:r}=this,a=this.getFormattedValue()??za(e,t,i,r),n=this.getInnerCompDetails(a);this.comp.setInnerRenderer(n,a??s??null)}getFormattedValue(){let{valueSvc:e}=this.beans,{value:s,valueFormatted:t,column:i}=this.params,{rowGroupColumn:r}=this.displayedNode;return!r||!i?t:i?.isRowGroupDisplayed(r.getId())?e.formatValue(r,this.node,s):null}addFooterValue(){let{expressionSvc:e,footerSvc:s}=this.beans,{totalValueGetter:t,column:i,node:r,value:a}=this.params,n=this.getFormattedValue()??za(i,r,r,this.beans),o="";t?typeof t=="function"?o=t(N(L({},this.params),{valueFormatted:n})):typeof t=="string"?o=e?.evaluate(t,N(L({},this.params),{valueFormatted:n})):b(179):o=s?.getTotalValue(n??a);let l=this.getInnerCompDetails(n);this.comp.setInnerRenderer(l,o??"")}setupExpand(){let{colModel:e}=this.beans,{eGridCell:s,column:t,suppressDoubleClickExpand:i}=this.params,r=(c,d)=>{let h=w(c,this.beans,null);h&&(d.appendChild(h),this.addDestroyFunc(()=>d.removeChild(h)))};r("groupExpanded",this.eExpanded),r("groupContracted",this.eContracted);let a=this.comp,n=()=>{if(!this.isExpandable())return;let d=this.displayedNode.expanded;a.setExpandedDisplayed(d),a.setContractedDisplayed(!d),we(s,!!this.displayedNode.expanded)},o=()=>{let c=this.isExpandable();a.addOrRemoveCssClass("ag-cell-expandable",c),a.addOrRemoveCssClass("ag-row-group",c);let d=!c&&e.isPivotMode();a.addOrRemoveCssClass("ag-pivot-leaf-group",d);let h=!e.isPivotMode()&&(!this.displayedNode.footer||this.displayedNode.level!==-1);a.addOrRemoveCssClass("ag-row-group-leaf-indent",!c&&h);let p=this.getChildCount(),u=p>0?`(${p})`:"";a.setChildCount(u),c?n():(a.setExpandedDisplayed(!1),a.setContractedDisplayed(!1),fr(s))};(()=>{!(t?.isCellEditable(this.displayedNode)&&this.gos.get("enableGroupEdit"))&&!i&&this.addManagedListeners(s,{dblclick:this.onCellDblClicked.bind(this)}),this.addManagedListeners(this.eExpanded,{click:this.onExpandClicked.bind(this)}),this.addManagedListeners(this.eContracted,{click:this.onExpandClicked.bind(this)}),this.addManagedListeners(s,{keydown:this.onKeyDown.bind(this)}),this.addManagedListeners(this.displayedNode,{allChildrenCountChanged:o,masterChanged:o,groupChanged:o,hasChildrenChanged:o,expandedChanged:n})})(),o()}getInnerCompDetails(e){let{userCompFactory:s,findSvc:t}=this.beans,i=N(L({},this.params),{valueFormatted:e});if(i.fullWidth){let c=this.gos.get("groupRowRendererParams"),d=Ut(s,c,i);return d||(t?.isMatch(i.node,null)?Ut(s,N(L({},c),{innerRenderer:"agFindCellRenderer"}),i):void 0)}let r=c=>c&&c.componentClass==this.compClass,a=Ut(s,i,i);if(a&&!r(a))return a;let{displayedNode:{rowGroupColumn:n}}=this,o=n?.colDef,l=n&&i.column?.isRowGroupDisplayed(n.getId());if(o&&l){let c=di(s,o,i);if(c)if(r(c)){if(o?.cellRendererParams?.innerRenderer)return Ut(s,o.cellRendererParams,i)}else return c}if(t?.isMatch(i.node,i.column))return di(s,N(L({},o??i.colDef),{cellRenderer:"agFindCellRenderer"}),i)}getChildCount(){let{column:e,suppressCount:s}=this.params;if(s)return 0;let{allChildrenCount:t,rowGroupColumn:i}=this.displayedNode;return!((t??0)>0&&(!i||!e||e?.isRowGroupDisplayed(i.getId())))||this.gos.get("showOpenedGroup")&&this.displayedNode!==this.node&&!Ai(this.node,this.displayedNode,this.gos)?0:t??0}isExpandable(){let{node:e,column:s,colDef:t}=this.params;if(!this.displayedNode.isExpandable())return!1;if(!s)return!0;if(e.hasChildren()&&t){let{showRowGroup:a}=t;if(!a)return!1;if(a===!0)return!0}return e===this.displayedNode?e.rowGroupColumn&&s?.isRowGroupDisplayed(e.rowGroupColumn.getId())?!0:e.master?t?.showRowGroup===!0||t?.showRowGroup==null:!1:Ai(this.node,this.displayedNode,this.gos)}setupIndent(){let{suppressPadding:e,node:s,colDef:t}=this.params;if(e)return;let i=()=>{let r=0;t&&t.showRowGroup!==!0?r=0:r=s.uiLevel;let a="ag-row-group-indent-"+r;a!==this.indentClass&&(this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass=a,this.comp.addOrRemoveCssClass(a,!0),this.eGui.style.setProperty("--ag-indentation-level",String(r)))};this.addManagedListeners(s,{uiLevelChanged:i.bind(this)}),i()}setupCheckbox(){let{node:e}=this.params;!e.footer&&!e.rowPinned&&!e.detail&&(this.addManagedPropertyListener("rowSelection",({currentValue:t,previousValue:i})=>{let r=typeof t=="object"?t:void 0,a=typeof i=="object"?i:void 0;r?.checkboxLocation!==a?.checkboxLocation&&(this.destroyCheckbox(),this.addCheckbox())}),this.addCheckbox())}addCheckbox(){let{selectionSvc:e}=this.beans;if(!e||!Mr(this.gos))return;let{node:s,column:t}=this.params,i=this.gos.get("rowSelection"),r=Or(i);if(r==="selectionColumn")return;if(r==="autoGroupColumn"){let c=t?.getColDef().showRowGroup!=null,d=!t&&s.group;if(!(c||d))return}let a=typeof i=="object"?kr(i):this.params.checkbox;if(!(typeof a=="function"||a===!0))return;if(typeof t?.getColDef().showRowGroup=="string"&&!this.isExpandable()){this.comp.setCheckboxSpacing(!0);return}let l=e.createCheckboxSelectionComponent();this.cbComp=l,this.createBean(l),l.init({rowNode:s,column:t,overrides:{isVisible:a,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(l.getGui()),this.comp.setCheckboxVisible(!0)}destroyCheckbox(){this.comp.setCheckboxSpacing(!1),this.comp.setCheckboxVisible(!1),this.cbComp&&this.eCheckbox.removeChild(this.cbComp.getGui()),this.cbComp=this.destroyBean(this.cbComp)}onExpandClicked(e){ni(e)||(je(e),this.onExpandOrContract(e))}onKeyDown(e){!(e.key===y.ENTER)||this.params.suppressEnterExpand||this.params.column&&this.params.column.isCellEditable(this.params.node)||this.onExpandOrContract(e)}onCellDblClicked(e){if(ni(e))return;oi(this.eExpanded,e)||oi(this.eContracted,e)||this.onExpandOrContract(e)}onExpandOrContract(e){if(!this.isExpandable())return;let s=this.displayedNode,t=!s.expanded;!t&&s.sticky&&this.beans.ctrlsSvc.getScrollFeature().setVerticalScrollPosition(s.rowTop-s.stickyRowTop),s.setExpanded(t,e)}destroy(){super.destroy(),this.destroyCheckbox()}},ap={tag:"span",cls:"ag-cell-wrapper",children:[{tag:"span",ref:"eExpanded",cls:"ag-group-expanded ag-hidden"},{tag:"span",ref:"eContracted",cls:"ag-group-contracted ag-hidden"},{tag:"span",ref:"eCheckbox",cls:"ag-group-checkbox ag-invisible"},{tag:"span",ref:"eValue",cls:"ag-group-value"},{tag:"span",ref:"eChildCount",cls:"ag-group-child-count"}]},Ka=class extends F{constructor(){super(ap),this.eExpanded=T,this.eContracted=T,this.eCheckbox=T,this.eValue=T,this.eChildCount=T}init(e){let s={setInnerRenderer:(a,n)=>this.setRenderDetails(a,n),setChildCount:a=>this.eChildCount.textContent=a,addOrRemoveCssClass:(a,n)=>this.addOrRemoveCssClass(a,n),setContractedDisplayed:a=>j(this.eContracted,a),setExpandedDisplayed:a=>j(this.eExpanded,a),setCheckboxVisible:a=>this.eCheckbox.classList.toggle("ag-invisible",!a),setCheckboxSpacing:a=>this.eCheckbox.classList.toggle("ag-group-checkbox-spacing",a)},t=this.createManagedBean(new Mn),i=!e.colDef,r=this.getGui();t.init(s,r,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,e),i&&be(r,t.getCellAriaRole())}setRenderDetails(e,s){e?e.newAgStackInstance().then(t=>{if(!t)return;let i=()=>this.destroyBean(t);this.isAlive()?(this.eValue.appendChild(t.getGui()),this.addDestroyFunc(i)):i()}):this.eValue.innerText=s}destroy(){this.destroyBean(this.innerCellRenderer),super.destroy()}refresh(){return!1}},np=".ag-group-checkbox-spacing{width:var(--ag-icon-size)}:where(.ag-ltr) .ag-group-checkbox-spacing{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-checkbox-spacing{margin-left:var(--ag-cell-widget-spacing)}",op=class extends x{constructor(){super(...arguments),this.beanName="showRowGroupCols"}refresh(){this.showRowGroupCols=[],this.showRowGroupColsMap={};let{colModel:e,rowGroupColsSvc:s}=this.beans;e.getCols().forEach(t=>{let r=t.getColDef().showRowGroup,a=typeof r=="string";!a&&!(r===!0)||(this.showRowGroupCols.push(t),a?this.showRowGroupColsMap[r]=t:s&&s.columns.forEach(o=>{this.showRowGroupColsMap[o.getId()]=t}))})}getShowRowGroupCols(){return this.showRowGroupCols}getShowRowGroupCol(e){return this.showRowGroupColsMap[e]}getSourceColumnsForGroupColumn(e){let s=e.getColDef().showRowGroup;if(!s)return null;let{rowGroupColsSvc:t,colModel:i}=this.beans;if(s===!0&&t)return t.columns.slice(0);let r=i.getColDefCol(s);return r?[r]:null}isRowGroupDisplayed(e,s){let{colDef:t}=e;if(t?.showRowGroup==null)return!1;let i=t.showRowGroup===!0,r=t.showRowGroup===s;return i||r}},lp=class extends x{constructor(e,s){super(),this.createRowCon=e,this.destroyRowCtrls=s,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.extraTopHeight=0,this.extraBottomHeight=0}postConstruct(){this.isClientSide=Ne(this.gos),this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl}),this.resetStickyContainers()}setOffsetTop(e){this.extraTopHeight!==e&&(this.extraTopHeight=e,this.eventSvc.dispatchEvent({type:"stickyTopOffsetChanged",offset:e}))}setOffsetBottom(e){this.extraBottomHeight!==e&&(this.extraBottomHeight=e)}resetOffsets(){this.setOffsetBottom(0),this.setOffsetTop(0)}getLastPixelOfGroup(e){return this.isClientSide?dp(e):cp(e)}getFirstPixelOfGroup(e){return e.footer?e.sibling.rowTop+e.sibling.rowHeight-1:e.hasChildren()?e.rowTop-1:0}updateStickyRows(e){let s=e==="top",t=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(e,new Set,t);let{rowModel:i,rowRenderer:r}=this.beans,a=s?r.firstVisibleVPixel-this.extraTopHeight:r.lastVisibleVPixel-this.extraTopHeight,n=new Set,o=h=>{if(n.add(h),s){let p=this.getLastPixelOfGroup(h),u=a+t+h.rowHeight;p<u?h.stickyRowTop=t+(p-u):h.stickyRowTop=t}else{let p=this.getFirstPixelOfGroup(h),u=a-(t+h.rowHeight);p>u?h.stickyRowTop=t-(p-u):h.stickyRowTop=t}t=0,n.forEach(p=>{let u=p.stickyRowTop+p.rowHeight;t<u&&(t=u)})},l=this.areFooterRowsStickySuppressed(),c=this.gos.get("suppressGroupRowsSticky"),d=h=>{if(!h.displayed)return!1;if(h.footer){if(l===!0||l==="grand"&&h.level===-1||l==="group"&&h.level>-1)return!1;let p=h.sibling.rowIndex?h.sibling.rowIndex+1===h.rowIndex:!1;return e==="bottom"&&p?!1:!n.has(h)}return h.isExpandable()?c===!0||e==="bottom"?!1:!n.has(h)&&h.expanded:!1};for(let h=0;h<100;h++){let p=a+t;s||(p=a-t);let u=i.getRowIndexAtPixel(p),g=i.getRow(u);if(g==null)break;let S=this.getStickyAncestors(g).find(E=>(s?E.rowIndex<u:E.rowIndex>u)&&d(E));if(S){o(S);continue}if((s?g.rowTop<p:g.rowTop+g.rowHeight>p)&&d(g)){o(g);continue}break}return s||n.forEach(h=>{h.stickyRowTop=t-(h.stickyRowTop+h.rowHeight)}),this.refreshNodesAndContainerHeight(e,n,t)}areFooterRowsStickySuppressed(){let e=this.gos.get("suppressStickyTotalRow");if(e===!0)return!0;let s=e==="group",t=e==="grand";return s&&t?!0:t?"grand":s?"group":!1}canRowsBeSticky(){let e=ms(this.gos),s=this.areFooterRowsStickySuppressed(),t=this.gos.get("suppressGroupRowsSticky");return e&&(!s||!t)}getStickyAncestors(e){let s=[],t=e.footer?e.sibling:e.parent;for(;t;)t.sibling&&s.push(t.sibling),s.push(t),t=t.parent;return s.reverse()}checkStickyRows(){let e=this.updateStickyRows("top"),s=this.updateStickyRows("bottom");return e||s}destroyStickyCtrls(){this.resetStickyContainers()}resetStickyContainers(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(e){let s=new Set;if(this.stickyTopRowCtrls.some(t=>t.rowNode===e)){for(let t=0;t<this.stickyTopRowCtrls.length;t++){let i=this.stickyTopRowCtrls[t].rowNode;i!==e&&s.add(i)}this.refreshNodesAndContainerHeight("top",s,this.topContainerHeight)&&this.checkStickyRows();return}for(let t=0;t<this.stickyBottomRowCtrls.length;t++){let i=this.stickyBottomRowCtrls[t].rowNode;i!==e&&s.add(i)}this.refreshNodesAndContainerHeight("bottom",s,this.bottomContainerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(e,s,t){let i=e==="top",r=i?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,a={},n=[];for(let u=0;u<r.length;u++){let g=r[u].rowNode;if(!s.has(g)){a[g.id]=r[u],g.sticky=!1;continue}n.push(r[u])}let o=new Set;for(let u=0;u<n.length;u++)o.add(n[u].rowNode);let l=[];s.forEach(u=>{o.has(u)||(u.sticky=!0,l.push(this.createRowCon(u,!1,!1)))});let c=!!l.length||n.length!==r.length;i?this.topContainerHeight!==t&&(this.topContainerHeight=t,this.gridBodyCtrl.setStickyTopHeight(t),c=!0):this.bottomContainerHeight!==t&&(this.bottomContainerHeight=t,this.gridBodyCtrl.setStickyBottomHeight(t),c=!0),this.destroyRowCtrls(a,!1);let d=[...n,...l];d.sort((u,g)=>g.rowNode.rowIndex-u.rowNode.rowIndex),i||d.reverse(),d.forEach(u=>u.setRowTop(u.rowNode.stickyRowTop));let h=this.beans.pageBounds,p=0;return i?(s.forEach(u=>{u.rowIndex<h.getFirstRow()&&(p+=u.rowHeight)}),p>this.topContainerHeight&&(p=this.topContainerHeight),this.setOffsetTop(p)):(s.forEach(u=>{u.rowIndex>h.getLastRow()&&(p+=u.rowHeight)}),p>this.bottomContainerHeight&&(p=this.bottomContainerHeight),this.setOffsetBottom(p)),c?(i?this.stickyTopRowCtrls=d:this.stickyBottomRowCtrls=d,!0):!1}ensureRowHeightsValid(){let e=!1,s=t=>{let i=t.rowNode;if(i.rowHeightEstimated){let r=Pr(this.beans,i);i.setRowHeight(r.height),e=!0}};return this.stickyTopRowCtrls.forEach(s),this.stickyBottomRowCtrls.forEach(s),e}};function cp(e){if(e.isExpandable()||e.footer){if(e.master&&e.detailNode)return e.detailNode.rowTop+e.detailNode.rowHeight;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let t=e.childStore?.getStoreBounds();return e.footer&&(t=e.sibling.childStore?.getStoreBounds()),(t?.heightPx??0)+(t?.topPx??0)}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}function dp(e){if(e.isExpandable()||e.footer){if(e.footer&&e.rowIndex===0)return Number.MAX_SAFE_INTEGER;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let i=e.footer?e.sibling:e;for(;i.isExpandable()&&i.expanded;)if(i.master&&i.detailNode)i=i.detailNode;else if(i.childrenAfterSort){if(i.childrenAfterSort.length===0)break;i=ce(i.childrenAfterSort)}return i.rowTop+i.rowHeight}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}var hp=class extends x{constructor(){super(...arguments),this.beanName="stickyRowSvc"}createStickyRowFeature(e,s,t){let i=this.gos;if(ms(i)&&Ne(i)||gs(i))return e.createManagedBean(new lp(s,t))}},Pn={moduleName:"GroupCellRenderer",version:re,userComponents:{agGroupRowRenderer:Ka,agGroupCellRenderer:Ka},dynamicBeans:{groupCellRendererCtrl:Mn},icons:{groupContracted:"tree-closed",groupExpanded:"tree-open"},css:[np],dependsOn:[Le]},up={moduleName:"GroupColumn",version:re,beans:[qu,op,Yu,$u,Fn],dependsOn:[Le,Pn]},In={moduleName:"ClientSideRowModelHierarchy",version:re,rowModels:["clientSide"],beans:[ip,sp,Zu],dependsOn:[Le]},Rn={moduleName:"StickyRow",version:re,beans:[hp]};var Dn=class extends x{constructor(){super(...arguments),this.loadRowDataVersion=0}wireBeans(e){this.environment=e.environment}init(e,s){this.params=s,this.comp=e,s.pinned==null&&(this.setAutoHeightClasses(),this.setupRefreshStrategy(),this.createDetailGrid(),this.loadRowData(),this.addManagedEventListeners({fullWidthRowFocused:this.onFullWidthRowFocused.bind(this)}))}onFullWidthRowFocused(e){let s=this.params,t={rowIndex:s.node.rowIndex,rowPinned:s.node.rowPinned},i={rowIndex:e.rowIndex,rowPinned:e.rowPinned};ia(t,i)&&ye(this.comp.getGui(),e.fromBelow)}setAutoHeightClasses(){let e=this.gos.get("detailRowAutoHeight"),s=e?"ag-details-row-auto-height":"ag-details-row-fixed-height",t=e?"ag-details-grid-auto-height":"ag-details-grid-fixed-height",i=this.comp;i.addOrRemoveCssClass(s,!0),i.addOrRemoveDetailGridCssClass(t,!0)}setupRefreshStrategy(){let e=this.params.refreshStrategy;if(e=="everything"||e=="nothing"||e=="rows"){this.refreshStrategy=e;return}e!=null&&b(170,{providedStrategy:e}),this.refreshStrategy="rows"}createDetailGrid(){let{params:e,gos:s}=this;if(We(e.detailGridOptions)){b(171);return}let t=s.get("theme"),i=e.detailGridOptions.theme;i&&i!==t&&b(267);let r=N(L({themeStyleContainer:this.environment.eStyleContainer},e.detailGridOptions),{theme:t});s.get("detailRowAutoHeight")&&(r.domLayout="autoHeight"),this.comp.setDetailGrid(r)}registerDetailWithMaster(e){let{params:s,beans:{selectionSvc:t,findSvc:i}}=this,r=s.node.id,a=s.api,n={id:r,api:e},o=s.node;if(a.isDestroyed())return;a.addDetailGridInfo(r,n),o.detailGridInfo=n;let l=o.parent;i?.registerDetailGrid(o,e);function c(){l&&t?.refreshMasterNodeState(l)}function d({node:h,source:p}){h!==l||p==="masterDetail"||e.isDestroyed()||t?.setDetailSelectionState(l,s.detailGridOptions,e)}e.addEventListener("firstDataRendered",()=>{e.isDestroyed()||a.isDestroyed()||(t?.setDetailSelectionState(l,s.detailGridOptions,e),e.addEventListener("selectionChanged",c),a.addEventListener("rowSelected",d))}),this.addDestroyFunc(()=>{o.detailGridInfo===n&&(a.isDestroyed()||a.removeDetailGridInfo(r),o.detailGridInfo=null)})}loadRowData(){this.loadRowDataVersion++;let e=this.loadRowDataVersion,s=this.params;if(s.detailGridOptions?.rowModelType==="serverSide"){s.node.detailGridInfo?.api?.refreshServerSide({purge:!0});return}let t=s.getDetailRowData;if(!t){b(172);return}let i=a=>{this.loadRowDataVersion===e&&this.comp.setRowData(a)},r={node:s.node,data:s.node.data,successCallback:i,context:B(this.gos,{}).context};t(r)}refresh(){switch(this.refreshStrategy){case"nothing":return!0;case"everything":return!1}return this.loadRowData(),!0}},pp=class{constructor(e){this.parentWrapper=e}wrap(e,s,t,i){return this.parentWrapper.wrap(e,s,t,i)}},gp={tag:"div",cls:"ag-details-row"},mp={tag:"div",cls:"ag-details-row",role:"gridcell",children:[{tag:"div",ref:"eDetailGrid",cls:"ag-details-grid",role:"presentation"}]},fp=class extends F{constructor(){super(...arguments),this.eDetailGrid=T}wireBeans(e){this.context=e.context}init(e){this.params=e,this.selectAndSetTemplate();let s={addOrRemoveCssClass:(t,i)=>this.addOrRemoveCssClass(t,i),addOrRemoveDetailGridCssClass:(t,i)=>this.eDetailGrid.classList.toggle(t,i),setDetailGrid:t=>this.setDetailGrid(t),setRowData:t=>this.setRowData(t),getGui:()=>this.eDetailGrid};this.ctrl=this.createManagedBean(new Dn),this.ctrl.init(s,e)}refresh(){return this.ctrl?.refresh()??!1}selectAndSetTemplate(){let e=this.params;if(e.pinned){this.setTemplate(gp);return}let s=()=>{this.setTemplate(mp)};if(We(e.template))s();else if(typeof e.template=="string")this.setTemplate(e.template,[]);else if(typeof e.template=="function"){let t=e.template,i=t(e);this.setTemplate(i,[])}else b(168),s();this.eDetailGrid==null&&b(169)}setDetailGrid(e){if(!this.eDetailGrid)return;let s=this.context.getBean("frameworkCompWrapper"),t=new pp(s),{frameworkOverrides:i}=this.beans,r=Ca(this.eDetailGrid,e,{frameworkOverrides:i,providedBeanInstances:{frameworkCompWrapper:t},modules:Zr(this.params.api.getGridId(),e.rowModelType??"clientSide")});this.detailApi=r,this.ctrl?.registerDetailWithMaster(r),this.addDestroyFunc(()=>{r.destroy()})}setRowData(e){this.detailApi?.setGridOption("rowData",e)}};function Ws(e,s){let t=e.masterDetailSvc?.store;return t?s(t):void 0}function Cp(e,s,t){Ws(e,i=>{i[s]=t})}function vp(e,s){Ws(e,t=>{delete t[s]})}function yp(e,s){return Ws(e,t=>t[s])}function Sp(e,s){Ws(e,t=>{let i=0;Object.values(t).forEach(r=>{r&&s(r,i++)})})}var bp=".ag-details-row{width:100%}.ag-details-row-fixed-height{height:100%}.ag-details-grid{width:100%}.ag-details-grid-fixed-height{height:100%}",wp=class extends x{constructor(){super(...arguments),this.beanName="masterDetailSvc",this.store={}}isEnabled(){let e=this.gos;return e.get("masterDetail")&&!e.get("treeData")}postConstruct(){Ne(this.gos)&&(this.enabled=this.isEnabled(),this.addManagedEventListeners({beforeRefreshModel:this.beforeRefreshModel.bind(this)}))}beforeRefreshModel({params:e}){if(e.changedProps){let s=this.isEnabled();if(this.enabled!==s){this.setMasters(null);return}}e.rowDataUpdated&&this.setMasters(e.changedRowNodes)}setMasters(e){let s=this.isEnabled();this.enabled=s;let t=this.gos,i=t.get("isRowMaster"),r=t.get("groupDefaultExpanded"),a=(n,o,l)=>{let c=n.master,d=s;if(s)if(o||l){if(i){let h=n.data;d=!!h&&!!i(h)}}else d=c;if(d&&o)if(r===-1)n.expanded=!0;else{let h=this.beans.rowGroupColsSvc?.columns.length??0;n.expanded=h<r}else!d&&c&&(n.expanded=!1);d!==c&&(n.master=d,n.dispatchRowEvent("masterChanged"))};if(e){for(let n of e.updates)a(n,!1,!0);for(let n of e.adds)a(n,!0,!1)}else{let n=va(this.beans)?.rootNode?.allLeafChildren;if(n)for(let o=0,l=n.length;o<l;++o)a(n[o],!0,!1)}}getDetail(e){if(!e.master||!e.expanded)return null;let s=e.detailNode;return s||(s=new It(this.beans),s.detail=!0,s.selectable=!1,s.parent=e,te(e.id)&&(s.id="detail_"+e.id),s.data=e.data,s.level=e.level+1,e.detailNode=s,s)}setupDetailRowAutoHeight(e,s){let{gos:t,beans:i}=this;if(!t.get("detailRowAutoHeight"))return;let r=()=>{let n=s.clientHeight;if(n!=null&&n>0){let o=()=>{let{rowModel:l}=this.beans,{rowNode:c}=e;c.setRowHeight(n),(Ne(t,l)||gs(t,l))&&l.onRowHeightChanged()};window.setTimeout(o,0)}},a=ps(i,s,r);e.addDestroyFunc(a),r()}destroy(){this.store={},super.destroy()}},xp={moduleName:"SharedMasterDetail",version:re,beans:[wp],userComponents:{agDetailCellRenderer:fp},dynamicBeans:{detailCellRendererCtrl:Dn},apiFunctions:{addDetailGridInfo:Cp,removeDetailGridInfo:vp,getDetailGridInfo:yp,forEachDetailGridInfo:Sp},dependsOn:[Le,Pn,Rn],css:[bp]},vC={moduleName:"MasterDetail",version:re,dependsOn:[xp,In,xa]};var Tp=(e,s)=>e.treeNode.sourceIdx-s.treeNode.sourceIdx,Ap=Be.values(),Fp=class Fi{constructor(s,t){this.parent=s,this.key=t,this.children=null,this.invalidatedHead=null,this.invalidatedNext=void 0,this.row=null,this.oldRow=null,this.duplicateRows=null,this.childrenAfterGroup=Be,this.allLeafChildren=null,this.childrenChanged=!1,this.leafChildrenChanged=!1,this.sourceIdx=-1}get size(){return this.children?.size??0}isEmptyFillerNode(){return!this.row?.data&&!this.children?.size}enumChildren(){return this.children?.values()??Ap}upsertKey(s){typeof s!="string"&&(s=String(s));let t=this.children?.get(s);return t||(t=new Fi(this,s),(this.children??(this.children=new Map))?.set(t.key,t)),t}appendKey(s){let t=this.children;typeof s!="string"&&(s=String(s));let i=t?.get(s);return i?(t.delete(s),t.set(s,i)):(i=new Fi(this,s),(this.children??(this.children=new Map))?.set(i.key,i)),i}destroy(){let{row:s,parent:t}=this;s!==null&&s.treeNode===this&&(s.treeNode=null),t!==null&&(this.parent=null,t.children?.delete(this.key))}setRow(s){let t=this.row;return t===s?!1:(t!==null&&(t.treeNode=null),s!==null&&(s.treeNode=this),this.row=s,!0)}removeRow(s){let{row:t,duplicateRows:i}=this;if(t===s){if(this.row=null,i!==null)for(let r of i){this.row=r,i.delete(r);break}}else if(!i?.delete(s))return!1;return i?.size===0&&(this.duplicateRows=null),s.treeNode=null,!0}addDuplicateRow(s){let t=this.duplicateRows;if(t===null)t=new Set,this.duplicateRows=t;else if(t.has(s))return!1;return t.add(s),s.treeNode=this,s.childrenAfterGroup=Be,s.allLeafChildren=null,!0}sortFirstDuplicateRow(){let s=this.duplicateRows,t=this.row;if(!t||!s)return t;let i=t;for(let r of s)r.sourceRowIndex<i.sourceRowIndex&&(i=r);return i!==t&&(s.delete(i),s.add(t),this.row=i),i}dequeueInvalidated(){for(;;){let s=this.invalidatedHead;if(!s)return null;if(this.invalidatedHead=s.invalidatedNext??null,s.parent===this)return s.invalidatedNext=void 0,s}}invalidate(){let s=this,t=this.parent;for(;t!==null&&s.invalidatedNext===void 0;)s.invalidatedNext=t.invalidatedHead,t.invalidatedHead=s,s=t,t=s.parent}invalidateOrder(){let s=this.parent;!s||s.childrenChanged||((s.children?.size??0)>1||(this.children?.size??0)>1||!s.row?.data)&&(s.childrenChanged=!0,s.invalidate())}getNewSourceIdx(){let s=this.row;return s?.data?s.sourceRowIndex:this.childrenAfterGroup[0]?.treeNode?.sourceIdx??this.sourceIdx}updateChildrenAfterGroup(s,t){this.childrenChanged=!1;let i=s&&this.children?.size;if(!i)return this.childrenAfterGroup.length===0?!1:(this.childrenAfterGroup=t?[]:Be,this.leafChildrenChanged=!0,!0);let r=!1,a=this.childrenAfterGroup;a===Be?(a=new Array(i),this.childrenAfterGroup=a,r=!0):a.length!==i&&(a.length=i,r=!0);let n=0,o=-1,l=!1;for(let c of this.enumChildren()){let d=c.getNewSourceIdx();d<o&&(l=!0),o=d,c.sourceIdx=d;let h=c.row;a[n]!==h&&(a[n]=h,r=!0),++n}return r&&(this.leafChildrenChanged=!0),l&&this.reorderChildrenList(a),r||l}reorderChildrenList(s){let t=s.length,i=this.children;s.sort(Tp),i.clear();for(let r=0;r<t;++r){let a=s[r].treeNode;i.set(a.key,a)}}updateAllLeafChildren(){let{parent:s,childrenAfterGroup:t}=this;this.leafChildrenChanged=!1;let i=!1,r=t.length;if(r===0)this.allLeafChildren&&(i||(i=this.allLeafChildren.length!==0),this.allLeafChildren=null);else{let a=this.allLeafChildren??(this.allLeafChildren=[]),n=a.length,o=0;for(let l=0;l<r;++l){let c=t[l],d=c.treeNode?.allLeafChildren,h=d?.length;if(c.data&&((o>=n||a[o]!==c)&&(a[o]=c,i=!0),++o),h)for(let p=0;p<h;++p){let u=d[p];(o>=n||a[o]!==u)&&(a[o]=u,i=!0),++o}}n!==o&&(a.length=o,i=!0)}i&&s&&(s.leafChildrenChanged=!0)}},Ep=e=>(e.treeNodeFlags&1)!==0,Ln=e=>(e.treeNodeFlags&2)!==0,Wa=e=>(e.treeNodeFlags&4)!==0,Mp=e=>(e.treeNodeFlags&8)!==0,ja=e=>(e.treeNodeFlags&16)!==0,$a=(e,s)=>{s?e.treeNodeFlags|=2:e.treeNodeFlags&=-3},Pp=e=>{let s=e.treeNodeFlags;s&1&&(e.treeNodeFlags=s|4)},Ip=e=>{let s=e.treeNodeFlags;s&1&&(e.treeNodeFlags=s|12)},Ve=e=>{e&&(e.treeNodeFlags|=16)},Ya=e=>{let s=e.level<0,t=e.treeNodeFlags,i=(t&1)!==0;if(e.treeNodeFlags=1|t&-29,!i||s){let r=e.childrenAfterGroup;e.childrenAfterFilter=r,e.childrenAfterAggFilter=r,e.childrenAfterSort=r}if(s){let r=e.sibling;r&&(r.childrenAfterGroup=e.childrenAfterGroup,r.childrenMapped=e.childrenMapped)}},Kt=e=>{e.treeNodeFlags=0},Rp=(e,s,t)=>{if(s!==t&&s!==null&&s.group&&Ln(s)&&!e.isGroupOpenByDefault)return s.expanded;let i=e.isGroupOpenByDefault;return i?i({rowNode:t,field:t.field,key:t.key,level:t.level,rowGroupColumn:t.rowGroupColumn})==!0:e.expandByDefault===-1||t.level<e.expandByDefault},_n=class extends da{constructor(){super(...arguments),this.oldGroupDisplayColIds="",this.rowsPendingDestruction=null,this.treeCommitPending=!0,this.treeRoot=null}activate(e){super.activate(e),this.treeSetRootNode(e),this.treeCommitPending=!0}treeSetRootNode(e){let s=this.treeRoot;s||(s=new Fp(null,""),s.childrenChanged=!0,this.treeRoot=s),s.row=e,e.treeNode=s}destroy(){super.destroy(),this.treeRoot=null,this.rowsPendingDestruction=null,this.oldGroupDisplayColIds=""}deactivate(){let{treeRoot:e,rootNode:s}=this;e&&(s&&e.removeRow(s),this.treeDestroy(e),e.destroy()),s&&Kt(s),this.commitDestroyedRows(),super.deactivate(),this.treeRoot=null,this.oldGroupDisplayColIds=""}treeSetRow(e,s,t){let i=e.row;if(e===this.treeRoot)return!1;let r=!1;if(i!==s){let a=s.treeNode;a!==null&&a!==e&&(a.removeRow(s),a.invalidate()),i===null?(e.setRow(s),r=!0):i.data?e.addDuplicateRow(s)&&(r=!0):(e.setRow(s),this.destroyRow(i,!0),r=!0)}return!t&&!Wa(s)&&(Pp(s),r=!0),r&&e.invalidate(),this.rowsPendingDestruction?.delete(s),r}treeRemove(e,s){if(e===this.treeRoot)return;let t=!1;if(e.removeRow(s)){let i=e.parent;i&&(i.childrenChanged=!0),this.destroyRow(s,!s.data),t=!0}t&&e.invalidate()}treeCommit(e){let{treeRoot:s,rootNode:t}=this;if(!s||!t)return;this.treeCommitPending=!1;let i=this.treeData,r=e?.active?e:null,a={rootNode:t,activeChangedPath:r,treeData:i,expandByDefault:this.gos.get("groupDefaultExpanded"),isGroupOpenByDefault:this.gos.getCallback("isGroupOpenByDefault")};this.treeCommitChildren(a,s,!1,0);let n=s.row;n&&(i&&(n.leafGroup=!1),s.childrenChanged&&s.updateChildrenAfterGroup(i,!0)&&Ve(n),(i||!r)&&(n.childrenAfterGroup=s.childrenAfterGroup),r&&ja(n)&&r.addParentNode(n),Ya(n),n.updateHasChildren()),this.commitDestroyedRows(),i&&this.beans.selectionSvc?.updateSelectableAfterGrouping(e)}treeCommitChildren(e,s,t,i){for(;;){let r=s.dequeueInvalidated();if(r===null)break;r.parent===s&&this.treeCommitChild(e,r,t||!(s.row?.expanded??!0),i)}s.childrenChanged||(s.childrenChanged=(e.treeData?s.size:0)!==s.row.childrenAfterGroup?.length)}treeCommitChild(e,s,t,i){if(s.isEmptyFillerNode()){this.treeClear(s);return}if(this.treeCommitPreOrder(e,s,i),this.treeCommitChildren(e,s,t,i+1),s.isEmptyFillerNode()){this.treeClear(s);return}this.treeCommitPostOrder(e,s,t)}treeCommitPreOrder(e,s,t){let i=s.row;if(i===null?(i=this.createFillerRow(s,t),s.setRow(i)):(i=s.sortFirstDuplicateRow(),i.allChildrenCount===void 0&&(i.allChildrenCount=null)),e.treeData){if(i.level=t,i.parent=s.parent.row,s.oldRow!==i)for(let a of s.enumChildren()){let n=a.row;n!==null&&(n.parent=i)}let r=s.key;i.key!==r?(i.key=r,Ip(i),this.setGroupData(i,r)):i.groupData||this.setGroupData(i,r)}else e.activeChangedPath||(i.level=0,i.parent=e.rootNode,i.key=s.key)}treeCommitPostOrder(e,s,t){let i=s.parent,r=s.row,a=s.oldRow,n=r.group;if(s.childrenChanged&&s.updateChildrenAfterGroup(e.treeData,!1)&&Ve(r),s.leafChildrenChanged&&s.updateAllLeafChildren(),e.treeData||!e.activeChangedPath){r.childrenAfterGroup=s.childrenAfterGroup,r.allLeafChildren=s.allLeafChildren;let c=s.childrenAfterGroup.length>0,d=c||!r.data;n!==d?(Ve(r),yn(r,this.beans,d),!d&&!r.expanded&&$a(r,!1)):r.hasChildren()!==c&&(Ve(r),r.updateHasChildren()),d&&!Ln(r)&&(r.expanded=Rp(e,a,r),$a(r,!0)),Wa(r)&&(Ve(i.row),Mp(r)&&r.setData(r.data))}a!==r&&(s.oldRow=r,a!==null&&(n||s.size!==0)&&Ve(r),i.childrenChanged=!0,Ve(i.row)),ja(r)&&(this.treeData?e.activeChangedPath?.addParentNode(r):Ve(e.rootNode)),Ya(r),s.duplicateRows?.size&&!s.duplicateRowsWarned&&(s.duplicateRowsWarned=!0,b(186,{rowId:r.id,rowData:r.data,duplicateRowsData:Array.from(s.duplicateRows).map(c=>c.data)})),t&&r.rowIndex!==null&&r.clearRowTopAndRowIndex();let o=s.getNewSourceIdx(),l=s.sourceIdx;l!==o&&(s.sourceIdx=o,l!==-1&&(i.childrenChanged=!0))}createFillerRow(e,s){let t=new It(this.beans);t.key=e.key,t.group=!0,t.field=null,t.leafGroup=!1,t.rowGroupIndex=null,t.allChildrenCount=null;let i=s+"-"+e.key,r=e.parent;for(;r!==null;){let a=r.parent;if(a===null)break;--s,i=`${s}-${r.key}-${i}`,r=a}return t.id=aa+i,t}setGroupData(e,s){e.groupValue=s;let t={};e.groupData=t;let i=this.beans.showRowGroupCols?.getShowRowGroupCols();if(i)for(let r of i)t[r.getColId()]=s}treeClear(e){let{parent:s,oldRow:t}=e;if(s!==null&&t!==null&&(s.childrenChanged=!0,s.row!==null&&Ve(s.row)),e!==this.treeRoot){let i=e.row;for(;i!==null&&e.removeRow(i);)this.destroyRow(i,!i.data),i=e.row}for(let i of e.enumChildren())this.treeClear(i);e.destroy()}treeDestroy(e){let{row:s,duplicateRows:t}=e;if(s&&(e!==this.treeRoot&&!s.data?this.destroyRow(s,!0):Kt(s)),t)for(let i of t)e!==this.treeRoot&&!i.data?this.destroyRow(i,!0):Kt(i);for(let i of e.enumChildren())this.treeDestroy(i);e.destroy()}destroyRow(e,s){if(e.isSelected())s=!1;else if(!Ep(e)){Kt(e);return}if(!s){(this.rowsPendingDestruction??(this.rowsPendingDestruction=new Set)).add(e);return}Kt(e),e.clearRowTopAndRowIndex(),e.groupData=null}commitDestroyedRows(){let{rowsPendingDestruction:e}=this,s=null;if(e!==null){for(let t of e)this.destroyRow(t,!0),t.isSelected()&&(s??(s=[])).push(t);this.rowsPendingDestruction=null}s&&this.deselectNodes(s)}refreshModel(e,s){if(s&&this.treeCommitPending&&this.treeCommit(e.changedPath),!!e.afterColumnsChanged)if(this.treeData){let t=this.beans.showRowGroupCols?.getShowRowGroupCols()?.map(i=>i.getId()).join("-")??"";if(this.oldGroupDisplayColIds!==t){this.oldGroupDisplayColIds=t;let i=this.rootNode?.childrenAfterGroup;if(i)for(let r=0,a=i.length??0;r<a;++r){let n=i[r],o=n.treeNode;o&&this.setGroupData(n,o.key)}}}else this.oldGroupDisplayColIds=""}},Dp=e=>{if(typeof e!="string"||!e.length)return[];let s=e.split(".");return s.includes("__proto__")?[]:s},kn=e=>{let s=Dp(e),t=null,i=s.length-1;return i===0?t=r=>r?.[e]:i>0?t=r=>{let a=r;for(let n=0;n<=i&&a!==null&&a!==void 0;++n)if(a=a[s[n]],n<i&&typeof a!="object"&&a!==void 0)return null;return a}:t=()=>{},t.path=e,t},Lp=class extends _n{constructor(){super(...arguments),this.beanName="csrmChildrenTreeNodeSvc",this.childrenGetter=null}get treeData(){return this.gos.get("treeData")}extractRowData(){let e=this.treeRoot;return e&&Array.from(e.enumChildren(),s=>s.row.data)}destroy(){super.destroy(),this.childrenGetter=null}activate(e){let s=this.childrenGetter,t=this.gos.get("treeDataChildrenField");(!s||s.path!==t)&&(this.childrenGetter=kn(t)),super.activate(e)}updateRowData(e,s){return b(268),{changedRowNodes:s,rowNodeTransaction:{add:[],remove:[],update:[]},rowsInserted:!1}}loadNewRowData(e){let s=this.treeRoot,t=this.rootNode,i=this.childrenGetter,r=new Map,a=[];t.allLeafChildren=a,this.treeClear(s),this.treeSetRootNode(t);let n=(o,l)=>{let c=r.get(l);if(c!==void 0){xt(2,{nodeId:c.id});return}c=this.createRowNode(l,a.length),r.set(l,c),a.push(c),o=o.upsertKey(c.id),this.treeSetRow(o,c,!0);let d=i?.(l);if(d)for(let h=0,p=d.length;h<p;++h)n(o,d[h])};for(let o=0,l=e.length;o<l;++o)n(s,e[o]);this.treeCommitPending=!0}setImmutableRowData(e,s){this.dispatchRowDataUpdateStartedEvent(s);let t=this.gos,i=this.treeRoot,r=this.rootNode,a=this.childrenGetter,n=_r(t),o=!t.get("suppressMaintainUnsortedOrder"),l=new Map,c=new fa(!1,r);e.changedPath=c;let d=e.changedRowNodes,h=r.allLeafChildren,p=[],u=[],g=!1,f=!1,E=o?(I,P,k)=>{let M=P?.length,z=!0,K=-1;for(let A=0;A<M;++A){let ge=D(I,P[A],k);ge>=0&&(ge<K&&(z=!1),K=ge)}z||(g=!0,I.childrenChanged||(I.childrenChanged=!0,I.invalidate()))}:(I,P,k)=>{for(let M=0,z=P.length;M<z;++M)D(I,P[M],k)},D=(I,P,k)=>{let M=l.get(P);if(M!==void 0)return b(2,{nodeId:M.id}),-1;let z=n({data:P,level:k}),K=!1;M=this.getRowNode(z),M?M.data!==P&&(d.update(M),M.updateData(P),!M.selectable&&M.isSelected()&&u.push(M)):(M=this.createRowNode(P,-1),d.add(M),K=!0),l.set(P,M);let A,ge;o?(ge=I.appendKey(M.id),A=M.sourceRowIndex,M.sourceRowIndex=p.push(M)-1):(ge=I.upsertKey(M.id),A=-1),this.treeSetRow(ge,M,K)&&(f=!0);let Z=a?.(P);return Z&&E(ge,Z,k+1),A};if(E(i,s,0),h)for(let I=0,P=h.length;I<P;++I){let k=h[I],M=k.treeNode;if(M){let z=k.data;z&&!l.has(z)&&(d.remove(k),this.treeRemove(M,k))}}if(!o){let I=P=>{for(let k of P.enumChildren()){let M=k.row;M&&(M.sourceRowIndex=p.push(M)-1,I(k))}};I(i)}r.allLeafChildren=p,i.allLeafChildren=p,u.length&&this.deselectNodes(u),this.treeCommitPending=!0;let X=r.sibling;X&&(X.allLeafChildren=p),(f||g)&&(e.rowDataUpdated=!0,e.rowNodesOrderChanged||(e.rowNodesOrderChanged=g))}refreshModel(e,s){let t=this.rootNode;if(t&&e.changedProps?.has("treeData")&&!e.newData){this.treeSetRootNode(t);let i=this.treeRoot,r=t.allLeafChildren;if(r)for(let a=0,n=r.length;a<n;++a){let o=r[a];o.groupData=null,o.treeNode?.invalidate()}i.childrenChanged=!0,this.treeCommitPending=!0}super.refreshModel(e,s)}},_p=class extends _n{constructor(){super(...arguments),this.beanName="csrmPathTreeNodeSvc"}loadNewRowData(e){let s=this.rootNode,t=this.treeRoot;this.treeClear(t),this.treeSetRootNode(s),super.loadNewRowData(e);let i=s.allLeafChildren,r=this.gos.get("getDataPath");for(let a=0,n=i.length;a<n;++a)this.addOrUpdateRow(r,i[a],!0);this.treeCommitPending=!0}get treeData(){let e=this.gos;return e.get("treeData")&&!!e.get("getDataPath")}refreshModel(e,s){let t=e.changedRowNodes;t&&this.executeTransactions(t,e.rowNodesOrderChanged),super.refreshModel(e,s)}executeTransactions(e,s){let t=this.treeRoot;if(!t)return;this.treeSetRootNode(this.rootNode);for(let a of e.removals){let n=a.treeNode;n&&this.treeRemove(n,a)}let i=this.gos.get("getDataPath");for(let a of e.updates)this.addOrUpdateRow(i,a,!1);for(let a of e.adds)this.addOrUpdateRow(i,a,!0);let r=t.row?.allLeafChildren;if(s&&r)for(let a=0,n=r.length;a<n;++a){let o=r[a].treeNode;o&&o.sourceIdx!==a&&o.invalidateOrder()}this.treeCommitPending=!0}addOrUpdateRow(e,s,t){let i=this.treeRoot;if(!this.treeData){this.treeSetRow(i.upsertKey(s.id),s,t);return}let r=e?.(s.data),a=r?.length;if(!a)b(185,{data:s.data});else{let n=0,o=i;do o=o.upsertKey(r[n++]);while(n<a);this.treeSetRow(o,s,t)}}},Hs=2147483648,Pi=1073741824,_s=536870912,Us=536870911,kp=class extends x{constructor(){super(...arguments),this.parentIdGetter=null,this.oldGroupDisplayColIds=null}destroy(){super.destroy(),this.parentIdGetter=null,this.oldGroupDisplayColIds=null}execute(e){let s=e.rowNode,t=!e.changedRowNodes,i=s.childrenAfterGroup;(!i||i===s.allLeafChildren)&&(t=!0,s.childrenAfterGroup=i=[]);let r=!1;(e.afterColumnsChanged||this.oldGroupDisplayColIds===null)&&(r=this.updateGroupDisplayColsIds());let a=this.parentIdGetter,n=this.gos.get("treeDataParentIdField");(!a||a.path!==n)&&(a=kn(n));let o=!this.gos.get("getRowId");o||Hp(this.beans.rowModel,e,a,t),i.length=s.treeNodeFlags&Us,s.treeNodeFlags=0;let l=this.gos.get("groupDefaultExpanded"),c=this.gos.getCallback("isGroupOpenByDefault"),d=e.changedPath?.active?e.changedPath:void 0,h=0,p=(u,g)=>{++h;let f=u.treeNodeFlags,S=u.childrenAfterGroup??(u.childrenAfterGroup=Be),v=f&Us,E=(f&Pi)!==0;S.length!==v&&(S.length=v,E=!0);let D=E||(f&Hs)!==0,X=E;u.treeNodeFlags=f&_s,u.level=g++;let I=0;for(let K=0;K<v;++K){let A=S[K];p(A,g)&&(X=!0),I+=(A.allLeafChildren?.length??0)+1}let P=u.allLeafChildren;(P===S||P===void 0)&&(P=u.allLeafChildren=null),(X||(P?.length??0)!==I)&&(X=Bp(u,P,I));let k=u.id;(u.key!==k||!u.groupData||r)&&(D=!0,u.key=k,this.setGroupData(u,k));let M=u.group,z=v>0;return M!==z?(D=!0,yn(u,this.beans,z),!z&&!u.expanded&&(f=u.treeNodeFlags&=~_s)):u.hasChildren()!==z&&(D=!0,u.updateHasChildren()),z&&!(f&_s)&&(u.treeNodeFlags|=_s,u.expanded=Vp(c,l,u)),(E||X||t)&&Np(u,S),D&&d?.addParentNode(u),X};for(let u=0,g=i.length;u<g;++u)p(i[u],0);t&&Gp(s,i),h!==s.allLeafChildren.length&&!o&&Op(s,p)}updateGroupDisplayColsIds(){let e=this.beans.showRowGroupCols?.getShowRowGroupCols()?.map(s=>s.getId()).join("-")??"";return this.oldGroupDisplayColIds!==e?(this.oldGroupDisplayColIds=e,!0):!1}setGroupData(e,s){let t={};e.groupData=t;let i=this.beans.showRowGroupCols?.getShowRowGroupCols();if(i)for(let r of i)t[r.getColId()]=s}},Op=(e,s)=>{let t=new Set,i=a=>{t.add(a);for(let n of a.childrenAfterGroup)i(n)};i(e);let r=e.childrenAfterGroup;r.length=0;for(let a of e.allLeafChildren)if(t.has(a))a.parent===e&&r.push(a);else{let n=a.parent;b(270,{id:a.id,parentId:n.id}),n.childrenAfterGroup=n.childrenAfterGroup.filter(o=>o!==a),n.treeNodeFlags=n.treeNodeFlags-1|Pi|Hs,a.parent=e,s(a,0),i(a),r.push(a)}},Gp=(e,s)=>{e.childrenAfterFilter=s,e.childrenAfterAggFilter=s,e.childrenAfterSort=s;let t=e.sibling;t&&(t.childrenAfterGroup=e.childrenAfterGroup,t.childrenAfterAggFilter=e.childrenAfterAggFilter,t.childrenAfterSort=e.childrenAfterSort)},Np=(e,s)=>{e.allLeafChildren??(e.allLeafChildren=null),e.childrenAfterFilter??(e.childrenAfterFilter=s),e.childrenAfterAggFilter??(e.childrenAfterAggFilter=s),e.childrenAfterSort??(e.childrenAfterSort=s);let t=e.sibling;t&&(t.allLeafChildren=e.allLeafChildren,t.childrenAfterGroup=e.childrenAfterGroup,t.childrenAfterAggFilter=e.childrenAfterAggFilter,t.childrenAfterFilter=e.childrenAfterFilter,t.childrenAfterSort=e.childrenAfterSort)},Bp=(e,s,t)=>{if(t===0)return s?(e.allLeafChildren=null,!!s?.length):!1;let i=!1;s?s.length!==t&&(s.length=t,i=!0):(s=e.allLeafChildren=new Array(t),i=!0);let r=0,a=e.childrenAfterGroup;if(a)for(let n of a){i||(i=s[r]!==n),s[r++]=n;let o=n.allLeafChildren;if(o)for(let l of o)i||(i=s[r]!==l),s[r++]=l}return i},Vp=(e,s,t)=>e?e({rowNode:t,field:t.field,key:t.key,level:t.level,rowGroupColumn:t.rowGroupColumn})==!0:s===-1||t.level<s,Hp=(e,{rowNode:s,changedRowNodes:t},i,r)=>{let a=t?.updates,n=t?.adds,o=s.allLeafChildren;for(let l=0,c=o.length;l<c;++l){let d=o[l],h=a?.has(d)||n?.has(d),p=d.parent,u;if(h||r){let v=i(d.data);v==null?u=s:(u=e.getRowNode(v),u||(b(271,{id:d.id,parentId:v}),u=s))}else u=d.parent??s;let g=u.treeNodeFlags,f=g&Us;g=g&~Us|f+1;let S=u.childrenAfterGroup;(!S||S===Be)&&(u.childrenAfterGroup=S=[]),(S.length<=f||S[f]!==d)&&(S[f]=d,g|=Pi),(h||d.parent!==u)&&(d.parent=u,g|=Hs,p!==u&&p!==null&&(p.treeNodeFlags|=Hs)),u.treeNodeFlags=g}},Up={moduleName:"SharedTreeData",version:re,dependsOn:[Le,En,up,Rn]},TC={moduleName:"TreeData",version:re,beans:[_p,Lp],dynamicBeans:{treeParentIdStrategy:kp},rowModels:["clientSide"],dependsOn:[Up,ju,In]};var AC=Symbol("WrappedFunctionMarker");var zp={column:"bar",groupedColumn:"bar",stackedColumn:"bar",normalizedColumn:"bar",bar:"bar",groupedBar:"bar",stackedBar:"bar",normalizedBar:"bar",line:"line",stackedLine:"line",normalizedLine:"line",scatter:"scatter",bubble:"bubble",pie:"pie",donut:"donut",doughnut:"donut",area:"area",stackedArea:"area",normalizedArea:"area",histogram:"histogram",radarLine:"radar-line",radarArea:"radar-area",nightingale:"nightingale",radialColumn:"radial-column",radialBar:"radial-bar",sunburst:"sunburst",rangeBar:"range-bar",rangeArea:"range-area",boxPlot:"box-plot",treemap:"treemap",heatmap:"heatmap",waterfall:"waterfall",funnel:"funnel",coneFunnel:"cone-funnel",pyramid:"pyramid"},Kp=new Set(["columnLineCombo","areaColumnCombo","customCombo"]);function Wp(e){return Kp.has(e)}function jp(e){return e==="doughnut"?"donut":e}function $p(e){return zp[e]}var Yp=["number","category","grouped-category","log","time"];var FC=Yp.reduce((e,s)=>N(L({},e),{[s]:{title:{_enabledFromTheme:!0}}}),{});var js=e=>s=>s==null?!0:e(s);var qp=["doughnut"];function Xp(e){return!!$p(e)||Wp(e)}function Zp(e){return qp.includes(e)}var MC=js(e=>{if(Xp(e))return!0;if(Zp(e)){let s=jp(e);return Tr(`The chart type '${e}' has been deprecated. Please use '${s}' instead.`),s}return!1}),PC=js(e=>typeof e=="object"),IC=js(e=>typeof e=="object"),RC=js(e=>typeof e=="string"||typeof e=="function");function On(e){return e.map((s,t,i)=>s.map((r,a)=>i.slice(0,t+1).reduce((n,o)=>n+o[a],0)))}function Gn(e){let s=e.map((t,i)=>e.reduce((r,a)=>Math.max(r,a[i]),0));return e.map(t=>t.map((i,r)=>i/s[r]*19))}var Nn=[[1,3,5],[2,6,4],[5,3,1]];var Jp=On(Nn);var DC=Gn(Jp);var Qp=Nn;var eg=On(Qp);var LC=Gn(eg);var tg=["number","category","time","grouped-category"],sg=["angle-category","angle-number","radius-category","radius-number"],_C=[...tg,...sg];var ig=["content"],rg=["scroll"],ag=["padding"],Hn=["*"],Qt=e=>({searchTerm:e});function ng(e,s){if(e&1&&(W(0,"div",6),Zs(1,7),q()),e&2){let t=_();R(),O("ngTemplateOutlet",t.headerTemplate)("ngTemplateOutletContext",bt(2,Qt,t.filterValue))}}function og(e,s){if(e&1&&(W(0,"div",8),Zs(1,7),q()),e&2){let t=_();R(),O("ngTemplateOutlet",t.footerTemplate)("ngTemplateOutletContext",bt(2,Qt,t.filterValue))}}var lg=["searchInput"],cg=["clearButton"],dg=(e,s,t)=>({item:e,clear:s,label:t}),hg=(e,s)=>({items:e,clear:s}),ug=(e,s,t,i)=>({item:e,item$:s,index:t,searchTerm:i});function pg(e,s){if(e&1){let t=yt();W(0,"span",22),Pe("click",function(){ae(t);let r=_().$implicit,a=_(2);return ne(a.unselect(r))}),Fe(1,"\xD7"),q(),ze(2,"span",23)}if(e&2){let t=_().$implicit,i=_(2);R(2),O("ngItemLabel",t.label)("escape",i.escapeHTML)}}function gg(e,s){}function mg(e,s){if(e&1&&(W(0,"div",20),oe(1,pg,3,2,"ng-template",null,1,Ke)(3,gg,0,0,"ng-template",21),q()),e&2){let t=s.$implicit,i=Ie(2),r=_(2);ke("ng-value-disabled",t.disabled),R(3),O("ngTemplateOutlet",r.labelTemplate||i)("ngTemplateOutletContext",er(4,dg,t.value,r.clearItem,t.label))}}function fg(e,s){if(e&1&&(rt(0),oe(1,mg,4,8,"div",19),at()),e&2){let t=_();R(),O("ngForOf",t.selectedItems)("ngForTrackBy",t.trackByOption)}}function Cg(e,s){}function vg(e,s){if(e&1&&oe(0,Cg,0,0,"ng-template",21),e&2){let t=_();O("ngTemplateOutlet",t.multiLabelTemplate)("ngTemplateOutletContext",Qi(2,hg,t.selectedValues,t.clearItem))}}function yg(e,s){e&1&&ze(0,"div",25)}function Sg(e,s){}function bg(e,s){if(e&1&&(rt(0),oe(1,yg,1,0,"ng-template",null,2,Ke)(3,Sg,0,0,"ng-template",24),at()),e&2){let t=Ie(2),i=_();R(3),O("ngTemplateOutlet",i.loadingSpinnerTemplate||t)}}function wg(e,s){if(e&1&&(W(0,"span",26,3)(2,"span",27),Fe(3,"\xD7"),q()()),e&2){let t=_();Zi("title",t.clearAllText)}}function xg(e,s){if(e&1&&ze(0,"span",32),e&2){let t=_().$implicit,i=_(2);O("ngItemLabel",t.label)("escape",i.escapeHTML)}}function Tg(e,s){}function Ag(e,s){if(e&1){let t=yt();W(0,"div",31),Pe("click",function(){let r=ae(t).$implicit,a=_(2);return ne(a.toggleItem(r))})("mouseover",function(){let r=ae(t).$implicit,a=_(2);return ne(a.onItemHover(r))}),oe(1,xg,1,2,"ng-template",null,4,Ke)(3,Tg,0,0,"ng-template",21),q()}if(e&2){let t=s.$implicit,i=Ie(2),r=_(2);ke("ng-option-disabled",t.disabled)("ng-option-selected",t.selected)("ng-optgroup",t.children)("ng-option",!t.children)("ng-option-child",!!t.parent)("ng-option-marked",t===r.itemsList.markedItem),ls("role",t.children?"group":"option")("aria-selected",t.selected)("id",t==null?null:t.htmlId),R(3),O("ngTemplateOutlet",t.children?r.optgroupTemplate||i:r.optionTemplate||i)("ngTemplateOutletContext",tr(17,ug,t.value,t,t.index,r.searchTerm))}}function Fg(e,s){if(e&1&&(W(0,"span")(1,"span",34),Fe(2),q(),Fe(3),q()),e&2){let t=_(3);R(2),St(t.addTagText),R(),cs('"',t.searchTerm,'"')}}function Eg(e,s){}function Mg(e,s){if(e&1){let t=yt();W(0,"div",33),Pe("mouseover",function(){ae(t);let r=_(2);return ne(r.itemsList.unmarkItem())})("click",function(){ae(t);let r=_(2);return ne(r.selectTag())}),oe(1,Fg,4,2,"ng-template",null,5,Ke)(3,Eg,0,0,"ng-template",21),q()}if(e&2){let t=Ie(2),i=_(2);ke("ng-option-marked",!i.itemsList.markedItem),R(3),O("ngTemplateOutlet",i.tagTemplate||t)("ngTemplateOutletContext",bt(4,Qt,i.searchTerm))}}function Pg(e,s){if(e&1&&(W(0,"div",35),Fe(1),q()),e&2){let t=_(3);R(),St(t.notFoundText)}}function Ig(e,s){}function Rg(e,s){if(e&1&&(rt(0),oe(1,Pg,2,1,"ng-template",null,6,Ke)(3,Ig,0,0,"ng-template",21),at()),e&2){let t=Ie(2),i=_(2);R(3),O("ngTemplateOutlet",i.notFoundTemplate||t)("ngTemplateOutletContext",bt(2,Qt,i.searchTerm))}}function Dg(e,s){if(e&1&&(W(0,"div",35),Fe(1),q()),e&2){let t=_(3);R(),St(t.typeToSearchText)}}function Lg(e,s){}function _g(e,s){if(e&1&&(rt(0),oe(1,Dg,2,1,"ng-template",null,7,Ke)(3,Lg,0,0,"ng-template",24),at()),e&2){let t=Ie(2),i=_(2);R(3),O("ngTemplateOutlet",i.typeToSearchTemplate||t)}}function kg(e,s){if(e&1&&(W(0,"div",35),Fe(1),q()),e&2){let t=_(3);R(),St(t.loadingText)}}function Og(e,s){}function Gg(e,s){if(e&1&&(rt(0),oe(1,kg,2,1,"ng-template",null,8,Ke)(3,Og,0,0,"ng-template",21),at()),e&2){let t=Ie(2),i=_(2);R(3),O("ngTemplateOutlet",i.loadingTextTemplate||t)("ngTemplateOutletContext",bt(2,Qt,i.searchTerm))}}function Ng(e,s){if(e&1){let t=yt();W(0,"ng-dropdown-panel",28),Pe("update",function(r){ae(t);let a=_();return ne(a.viewPortItems=r)})("scroll",function(r){ae(t);let a=_();return ne(a.scroll.emit(r))})("scrollToEnd",function(r){ae(t);let a=_();return ne(a.scrollToEnd.emit(r))})("outsideClick",function(){ae(t);let r=_();return ne(r.close())}),rt(1),oe(2,Ag,4,22,"div",29)(3,Mg,4,6,"div",30),at(),oe(4,Rg,4,4,"ng-container",12)(5,_g,4,1,"ng-container",12)(6,Gg,4,4,"ng-container",12),q()}if(e&2){let t=_();ke("ng-select-multiple",t.multiple),O("virtualScroll",t.virtualScroll)("bufferAmount",t.bufferAmount)("appendTo",t.appendTo)("position",t.dropdownPosition)("headerTemplate",t.headerTemplate)("footerTemplate",t.footerTemplate)("filterValue",t.searchTerm)("items",t.itemsList.filteredItems)("markedItem",t.itemsList.markedItem)("ngClass",t.appendTo?t.classes:null)("id",t.dropdownId),R(2),O("ngForOf",t.viewPortItems)("ngForTrackBy",t.trackByOption),R(),O("ngIf",t.showAddTag),R(),O("ngIf",t.showNoItemsFound()),R(),O("ngIf",t.showTypeToSearch()),R(),O("ngIf",t.loading&&t.itemsList.filteredItems.length===0)}}var Un=/[&<>"']/g,Bg=RegExp(Un.source),Vg={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Hg(e){return e&&Bg.test(e)?e.replace(Un,s=>Vg[s]):e}function $(e){return e!=null}function Jt(e){return typeof e=="object"&&$(e)}function Ug(e){return e instanceof Promise}function Ys(e){return e instanceof Function}var zg=(()=>{class e{constructor(t){this.element=t,this.escape=!0}ngOnChanges(t){this.element.nativeElement.innerHTML=this.escape?Hg(this.ngItemLabel):this.ngItemLabel}static{this.\u0275fac=function(i){return new(i||e)(G(Ae))}}static{this.\u0275dir=he({type:e,selectors:[["","ngItemLabel",""]],inputs:{ngItemLabel:"ngItemLabel",escape:"escape"},features:[it]})}}return e})(),Kg=(()=>{class e{constructor(t){this.template=t}static{this.\u0275fac=function(i){return new(i||e)(G(H))}}static{this.\u0275dir=he({type:e,selectors:[["","ng-option-tmp",""]]})}}return e})(),Wg=(()=>{class e{constructor(t){this.template=t}static{this.\u0275fac=function(i){return new(i||e)(G(H))}}static{this.\u0275dir=he({type:e,selectors:[["","ng-optgroup-tmp",""]]})}}return e})(),jg=(()=>{class e{constructor(t){this.template=t}static{this.\u0275fac=function(i){return new(i||e)(G(H))}}static{this.\u0275dir=he({type:e,selectors:[["","ng-label-tmp",""]]})}}return e})(),$g=(()=>{class e{constructor(t){this.template=t}static{this.\u0275fac=function(i){return new(i||e)(G(H))}}static{this.\u0275dir=he({type:e,selectors:[["","ng-multi-label-tmp",""]]})}}return e})(),Yg=(()=>{class e{constructor(t){this.template=t}static{this.\u0275fac=function(i){return new(i||e)(G(H))}}static{this.\u0275dir=he({type:e,selectors:[["","ng-header-tmp",""]]})}}return e})(),qg=(()=>{class e{constructor(t){this.template=t}static{this.\u0275fac=function(i){return new(i||e)(G(H))}}static{this.\u0275dir=he({type:e,selectors:[["","ng-footer-tmp",""]]})}}return e})(),Xg=(()=>{class e{constructor(t){this.template=t}static{this.\u0275fac=function(i){return new(i||e)(G(H))}}static{this.\u0275dir=he({type:e,selectors:[["","ng-notfound-tmp",""]]})}}return e})(),Zg=(()=>{class e{constructor(t){this.template=t}static{this.\u0275fac=function(i){return new(i||e)(G(H))}}static{this.\u0275dir=he({type:e,selectors:[["","ng-typetosearch-tmp",""]]})}}return e})(),Jg=(()=>{class e{constructor(t){this.template=t}static{this.\u0275fac=function(i){return new(i||e)(G(H))}}static{this.\u0275dir=he({type:e,selectors:[["","ng-loadingtext-tmp",""]]})}}return e})(),Qg=(()=>{class e{constructor(t){this.template=t}static{this.\u0275fac=function(i){return new(i||e)(G(H))}}static{this.\u0275dir=he({type:e,selectors:[["","ng-tag-tmp",""]]})}}return e})(),em=(()=>{class e{constructor(t){this.template=t}static{this.\u0275fac=function(i){return new(i||e)(G(H))}}static{this.\u0275dir=he({type:e,selectors:[["","ng-loadingspinner-tmp",""]]})}}return e})();function zn(){return"axxxxxxxxxxx".replace(/[x]/g,()=>(Math.random()*16|0).toString(16))}var tm={"\u24B6":"A",\uFF21:"A",\u00C0:"A",\u00C1:"A",\u00C2:"A",\u1EA6:"A",\u1EA4:"A",\u1EAA:"A",\u1EA8:"A",\u00C3:"A",\u0100:"A",\u0102:"A",\u1EB0:"A",\u1EAE:"A",\u1EB4:"A",\u1EB2:"A",\u0226:"A",\u01E0:"A",\u00C4:"A",\u01DE:"A",\u1EA2:"A",\u00C5:"A",\u01FA:"A",\u01CD:"A",\u0200:"A",\u0202:"A",\u1EA0:"A",\u1EAC:"A",\u1EB6:"A",\u1E00:"A",\u0104:"A","\u023A":"A","\u2C6F":"A","\uA732":"AA",\u00C6:"AE",\u01FC:"AE",\u01E2:"AE","\uA734":"AO","\uA736":"AU","\uA738":"AV","\uA73A":"AV","\uA73C":"AY","\u24B7":"B",\uFF22:"B",\u1E02:"B",\u1E04:"B",\u1E06:"B","\u0243":"B",\u0182:"B",\u0181:"B","\u24B8":"C",\uFF23:"C",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u00C7:"C",\u1E08:"C",\u0187:"C","\u023B":"C","\uA73E":"C","\u24B9":"D",\uFF24:"D",\u1E0A:"D",\u010E:"D",\u1E0C:"D",\u1E10:"D",\u1E12:"D",\u1E0E:"D",\u0110:"D",\u018B:"D",\u018A:"D",\u0189:"D","\uA779":"D",\u01F1:"DZ",\u01C4:"DZ",\u01F2:"Dz",\u01C5:"Dz","\u24BA":"E",\uFF25:"E",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u1EC0:"E",\u1EBE:"E",\u1EC4:"E",\u1EC2:"E",\u1EBC:"E",\u0112:"E",\u1E14:"E",\u1E16:"E",\u0114:"E",\u0116:"E",\u00CB:"E",\u1EBA:"E",\u011A:"E",\u0204:"E",\u0206:"E",\u1EB8:"E",\u1EC6:"E",\u0228:"E",\u1E1C:"E",\u0118:"E",\u1E18:"E",\u1E1A:"E",\u0190:"E",\u018E:"E","\u24BB":"F",\uFF26:"F",\u1E1E:"F",\u0191:"F","\uA77B":"F","\u24BC":"G",\uFF27:"G",\u01F4:"G",\u011C:"G",\u1E20:"G",\u011E:"G",\u0120:"G",\u01E6:"G",\u0122:"G",\u01E4:"G",\u0193:"G","\uA7A0":"G","\uA77D":"G","\uA77E":"G","\u24BD":"H",\uFF28:"H",\u0124:"H",\u1E22:"H",\u1E26:"H",\u021E:"H",\u1E24:"H",\u1E28:"H",\u1E2A:"H",\u0126:"H","\u2C67":"H","\u2C75":"H","\uA78D":"H","\u24BE":"I",\uFF29:"I",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u0128:"I",\u012A:"I",\u012C:"I",\u0130:"I",\u00CF:"I",\u1E2E:"I",\u1EC8:"I",\u01CF:"I",\u0208:"I",\u020A:"I",\u1ECA:"I",\u012E:"I",\u1E2C:"I",\u0197:"I","\u24BF":"J",\uFF2A:"J",\u0134:"J","\u0248":"J","\u24C0":"K",\uFF2B:"K",\u1E30:"K",\u01E8:"K",\u1E32:"K",\u0136:"K",\u1E34:"K",\u0198:"K","\u2C69":"K","\uA740":"K","\uA742":"K","\uA744":"K","\uA7A2":"K","\u24C1":"L",\uFF2C:"L",\u013F:"L",\u0139:"L",\u013D:"L",\u1E36:"L",\u1E38:"L",\u013B:"L",\u1E3C:"L",\u1E3A:"L",\u0141:"L","\u023D":"L","\u2C62":"L","\u2C60":"L","\uA748":"L","\uA746":"L","\uA780":"L",\u01C7:"LJ",\u01C8:"Lj","\u24C2":"M",\uFF2D:"M",\u1E3E:"M",\u1E40:"M",\u1E42:"M","\u2C6E":"M",\u019C:"M","\u24C3":"N",\uFF2E:"N",\u01F8:"N",\u0143:"N",\u00D1:"N",\u1E44:"N",\u0147:"N",\u1E46:"N",\u0145:"N",\u1E4A:"N",\u1E48:"N","\u0220":"N",\u019D:"N","\uA790":"N","\uA7A4":"N",\u01CA:"NJ",\u01CB:"Nj","\u24C4":"O",\uFF2F:"O",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u1ED2:"O",\u1ED0:"O",\u1ED6:"O",\u1ED4:"O",\u00D5:"O",\u1E4C:"O",\u022C:"O",\u1E4E:"O",\u014C:"O",\u1E50:"O",\u1E52:"O",\u014E:"O",\u022E:"O",\u0230:"O",\u00D6:"O",\u022A:"O",\u1ECE:"O",\u0150:"O",\u01D1:"O",\u020C:"O",\u020E:"O",\u01A0:"O",\u1EDC:"O",\u1EDA:"O",\u1EE0:"O",\u1EDE:"O",\u1EE2:"O",\u1ECC:"O",\u1ED8:"O",\u01EA:"O",\u01EC:"O",\u00D8:"O",\u01FE:"O",\u0186:"O",\u019F:"O","\uA74A":"O","\uA74C":"O",\u01A2:"OI","\uA74E":"OO",\u0222:"OU","\u24C5":"P",\uFF30:"P",\u1E54:"P",\u1E56:"P",\u01A4:"P","\u2C63":"P","\uA750":"P","\uA752":"P","\uA754":"P","\u24C6":"Q",\uFF31:"Q","\uA756":"Q","\uA758":"Q","\u024A":"Q","\u24C7":"R",\uFF32:"R",\u0154:"R",\u1E58:"R",\u0158:"R",\u0210:"R",\u0212:"R",\u1E5A:"R",\u1E5C:"R",\u0156:"R",\u1E5E:"R","\u024C":"R","\u2C64":"R","\uA75A":"R","\uA7A6":"R","\uA782":"R","\u24C8":"S",\uFF33:"S","\u1E9E":"S",\u015A:"S",\u1E64:"S",\u015C:"S",\u1E60:"S",\u0160:"S",\u1E66:"S",\u1E62:"S",\u1E68:"S",\u0218:"S",\u015E:"S","\u2C7E":"S","\uA7A8":"S","\uA784":"S","\u24C9":"T",\uFF34:"T",\u1E6A:"T",\u0164:"T",\u1E6C:"T",\u021A:"T",\u0162:"T",\u1E70:"T",\u1E6E:"T",\u0166:"T",\u01AC:"T",\u01AE:"T","\u023E":"T","\uA786":"T","\uA728":"TZ","\u24CA":"U",\uFF35:"U",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u0168:"U",\u1E78:"U",\u016A:"U",\u1E7A:"U",\u016C:"U",\u00DC:"U",\u01DB:"U",\u01D7:"U",\u01D5:"U",\u01D9:"U",\u1EE6:"U",\u016E:"U",\u0170:"U",\u01D3:"U",\u0214:"U",\u0216:"U",\u01AF:"U",\u1EEA:"U",\u1EE8:"U",\u1EEE:"U",\u1EEC:"U",\u1EF0:"U",\u1EE4:"U",\u1E72:"U",\u0172:"U",\u1E76:"U",\u1E74:"U","\u0244":"U","\u24CB":"V",\uFF36:"V",\u1E7C:"V",\u1E7E:"V",\u01B2:"V","\uA75E":"V","\u0245":"V","\uA760":"VY","\u24CC":"W",\uFF37:"W",\u1E80:"W",\u1E82:"W",\u0174:"W",\u1E86:"W",\u1E84:"W",\u1E88:"W","\u2C72":"W","\u24CD":"X",\uFF38:"X",\u1E8A:"X",\u1E8C:"X","\u24CE":"Y",\uFF39:"Y",\u1EF2:"Y",\u00DD:"Y",\u0176:"Y",\u1EF8:"Y",\u0232:"Y",\u1E8E:"Y",\u0178:"Y",\u1EF6:"Y",\u1EF4:"Y",\u01B3:"Y","\u024E":"Y","\u1EFE":"Y","\u24CF":"Z",\uFF3A:"Z",\u0179:"Z",\u1E90:"Z",\u017B:"Z",\u017D:"Z",\u1E92:"Z",\u1E94:"Z",\u01B5:"Z",\u0224:"Z","\u2C7F":"Z","\u2C6B":"Z","\uA762":"Z","\u24D0":"a",\uFF41:"a",\u1E9A:"a",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u1EA7:"a",\u1EA5:"a",\u1EAB:"a",\u1EA9:"a",\u00E3:"a",\u0101:"a",\u0103:"a",\u1EB1:"a",\u1EAF:"a",\u1EB5:"a",\u1EB3:"a",\u0227:"a",\u01E1:"a",\u00E4:"a",\u01DF:"a",\u1EA3:"a",\u00E5:"a",\u01FB:"a",\u01CE:"a",\u0201:"a",\u0203:"a",\u1EA1:"a",\u1EAD:"a",\u1EB7:"a",\u1E01:"a",\u0105:"a","\u2C65":"a",\u0250:"a","\uA733":"aa",\u00E6:"ae",\u01FD:"ae",\u01E3:"ae","\uA735":"ao","\uA737":"au","\uA739":"av","\uA73B":"av","\uA73D":"ay","\u24D1":"b",\uFF42:"b",\u1E03:"b",\u1E05:"b",\u1E07:"b",\u0180:"b",\u0183:"b",\u0253:"b","\u24D2":"c",\uFF43:"c",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u00E7:"c",\u1E09:"c",\u0188:"c","\u023C":"c","\uA73F":"c","\u2184":"c","\u24D3":"d",\uFF44:"d",\u1E0B:"d",\u010F:"d",\u1E0D:"d",\u1E11:"d",\u1E13:"d",\u1E0F:"d",\u0111:"d",\u018C:"d",\u0256:"d",\u0257:"d","\uA77A":"d",\u01F3:"dz",\u01C6:"dz","\u24D4":"e",\uFF45:"e",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u1EC1:"e",\u1EBF:"e",\u1EC5:"e",\u1EC3:"e",\u1EBD:"e",\u0113:"e",\u1E15:"e",\u1E17:"e",\u0115:"e",\u0117:"e",\u00EB:"e",\u1EBB:"e",\u011B:"e",\u0205:"e",\u0207:"e",\u1EB9:"e",\u1EC7:"e",\u0229:"e",\u1E1D:"e",\u0119:"e",\u1E19:"e",\u1E1B:"e","\u0247":"e",\u025B:"e",\u01DD:"e","\u24D5":"f",\uFF46:"f",\u1E1F:"f",\u0192:"f","\uA77C":"f","\u24D6":"g",\uFF47:"g",\u01F5:"g",\u011D:"g",\u1E21:"g",\u011F:"g",\u0121:"g",\u01E7:"g",\u0123:"g",\u01E5:"g",\u0260:"g","\uA7A1":"g","\u1D79":"g","\uA77F":"g","\u24D7":"h",\uFF48:"h",\u0125:"h",\u1E23:"h",\u1E27:"h",\u021F:"h",\u1E25:"h",\u1E29:"h",\u1E2B:"h",\u1E96:"h",\u0127:"h","\u2C68":"h","\u2C76":"h",\u0265:"h",\u0195:"hv","\u24D8":"i",\uFF49:"i",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u0129:"i",\u012B:"i",\u012D:"i",\u00EF:"i",\u1E2F:"i",\u1EC9:"i",\u01D0:"i",\u0209:"i",\u020B:"i",\u1ECB:"i",\u012F:"i",\u1E2D:"i",\u0268:"i",\u0131:"i","\u24D9":"j",\uFF4A:"j",\u0135:"j",\u01F0:"j","\u0249":"j","\u24DA":"k",\uFF4B:"k",\u1E31:"k",\u01E9:"k",\u1E33:"k",\u0137:"k",\u1E35:"k",\u0199:"k","\u2C6A":"k","\uA741":"k","\uA743":"k","\uA745":"k","\uA7A3":"k","\u24DB":"l",\uFF4C:"l",\u0140:"l",\u013A:"l",\u013E:"l",\u1E37:"l",\u1E39:"l",\u013C:"l",\u1E3D:"l",\u1E3B:"l",\u017F:"l",\u0142:"l",\u019A:"l",\u026B:"l","\u2C61":"l","\uA749":"l","\uA781":"l","\uA747":"l",\u01C9:"lj","\u24DC":"m",\uFF4D:"m",\u1E3F:"m",\u1E41:"m",\u1E43:"m",\u0271:"m",\u026F:"m","\u24DD":"n",\uFF4E:"n",\u01F9:"n",\u0144:"n",\u00F1:"n",\u1E45:"n",\u0148:"n",\u1E47:"n",\u0146:"n",\u1E4B:"n",\u1E49:"n",\u019E:"n",\u0272:"n",\u0149:"n","\uA791":"n","\uA7A5":"n",\u01CC:"nj","\u24DE":"o",\uFF4F:"o",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u1ED3:"o",\u1ED1:"o",\u1ED7:"o",\u1ED5:"o",\u00F5:"o",\u1E4D:"o",\u022D:"o",\u1E4F:"o",\u014D:"o",\u1E51:"o",\u1E53:"o",\u014F:"o",\u022F:"o",\u0231:"o",\u00F6:"o",\u022B:"o",\u1ECF:"o",\u0151:"o",\u01D2:"o",\u020D:"o",\u020F:"o",\u01A1:"o",\u1EDD:"o",\u1EDB:"o",\u1EE1:"o",\u1EDF:"o",\u1EE3:"o",\u1ECD:"o",\u1ED9:"o",\u01EB:"o",\u01ED:"o",\u00F8:"o",\u01FF:"o",\u0254:"o","\uA74B":"o","\uA74D":"o",\u0275:"o",\u01A3:"oi",\u0223:"ou","\uA74F":"oo","\u24DF":"p",\uFF50:"p",\u1E55:"p",\u1E57:"p",\u01A5:"p","\u1D7D":"p","\uA751":"p","\uA753":"p","\uA755":"p","\u24E0":"q",\uFF51:"q","\u024B":"q","\uA757":"q","\uA759":"q","\u24E1":"r",\uFF52:"r",\u0155:"r",\u1E59:"r",\u0159:"r",\u0211:"r",\u0213:"r",\u1E5B:"r",\u1E5D:"r",\u0157:"r",\u1E5F:"r","\u024D":"r",\u027D:"r","\uA75B":"r","\uA7A7":"r","\uA783":"r","\u24E2":"s",\uFF53:"s",\u00DF:"s",\u015B:"s",\u1E65:"s",\u015D:"s",\u1E61:"s",\u0161:"s",\u1E67:"s",\u1E63:"s",\u1E69:"s",\u0219:"s",\u015F:"s","\u023F":"s","\uA7A9":"s","\uA785":"s",\u1E9B:"s","\u24E3":"t",\uFF54:"t",\u1E6B:"t",\u1E97:"t",\u0165:"t",\u1E6D:"t",\u021B:"t",\u0163:"t",\u1E71:"t",\u1E6F:"t",\u0167:"t",\u01AD:"t",\u0288:"t","\u2C66":"t","\uA787":"t","\uA729":"tz","\u24E4":"u",\uFF55:"u",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u0169:"u",\u1E79:"u",\u016B:"u",\u1E7B:"u",\u016D:"u",\u00FC:"u",\u01DC:"u",\u01D8:"u",\u01D6:"u",\u01DA:"u",\u1EE7:"u",\u016F:"u",\u0171:"u",\u01D4:"u",\u0215:"u",\u0217:"u",\u01B0:"u",\u1EEB:"u",\u1EE9:"u",\u1EEF:"u",\u1EED:"u",\u1EF1:"u",\u1EE5:"u",\u1E73:"u",\u0173:"u",\u1E77:"u",\u1E75:"u",\u0289:"u","\u24E5":"v",\uFF56:"v",\u1E7D:"v",\u1E7F:"v",\u028B:"v","\uA75F":"v",\u028C:"v","\uA761":"vy","\u24E6":"w",\uFF57:"w",\u1E81:"w",\u1E83:"w",\u0175:"w",\u1E87:"w",\u1E85:"w",\u1E98:"w",\u1E89:"w","\u2C73":"w","\u24E7":"x",\uFF58:"x",\u1E8B:"x",\u1E8D:"x","\u24E8":"y",\uFF59:"y",\u1EF3:"y",\u00FD:"y",\u0177:"y",\u1EF9:"y",\u0233:"y",\u1E8F:"y",\u00FF:"y",\u1EF7:"y",\u1E99:"y",\u1EF5:"y",\u01B4:"y","\u024F":"y","\u1EFF":"y","\u24E9":"z",\uFF5A:"z",\u017A:"z",\u1E91:"z",\u017C:"z",\u017E:"z",\u1E93:"z",\u1E95:"z",\u01B6:"z",\u0225:"z","\u0240":"z","\u2C6C":"z","\uA763":"z",\u0386:"\u0391",\u0388:"\u0395",\u0389:"\u0397",\u038A:"\u0399",\u03AA:"\u0399",\u038C:"\u039F",\u038E:"\u03A5",\u03AB:"\u03A5",\u038F:"\u03A9",\u03AC:"\u03B1",\u03AD:"\u03B5",\u03AE:"\u03B7",\u03AF:"\u03B9",\u03CA:"\u03B9",\u0390:"\u03B9",\u03CC:"\u03BF",\u03CD:"\u03C5",\u03CB:"\u03C5",\u03B0:"\u03C5",\u03C9:"\u03C9",\u03C2:"\u03C3"};function $s(e){let s=t=>tm[t]||t;return e.replace(/[^\u0000-\u007E]/g,s)}var Ii=class{constructor(s,t){this._ngSelect=s,this._selectionModel=t,this._items=[],this._filteredItems=[],this._markedIndex=-1}get items(){return this._items}get filteredItems(){return this._filteredItems}get markedIndex(){return this._markedIndex}get selectedItems(){return this._selectionModel.value}get markedItem(){return this._filteredItems[this._markedIndex]}get noItemsToSelect(){return this._ngSelect.hideSelected&&this._items.length===this.selectedItems.length}get maxItemsSelected(){return this._ngSelect.multiple&&this._ngSelect.maxSelectedItems<=this.selectedItems.length}get lastSelectedItem(){let s=this.selectedItems.length-1;for(;s>=0;s--){let t=this.selectedItems[s];if(!t.disabled)return t}return null}setItems(s){this._items=s.map((t,i)=>this.mapItem(t,i)),this._ngSelect.groupBy?(this._groups=this._groupBy(this._items,this._ngSelect.groupBy),this._items=this._flatten(this._groups)):(this._groups=new Map,this._groups.set(void 0,this._items)),this._filteredItems=[...this._items]}select(s){if(s.selected||this.maxItemsSelected)return;let t=this._ngSelect.multiple;t||this.clearSelected(),this._selectionModel.select(s,t,this._ngSelect.selectableGroupAsModel),this._ngSelect.hideSelected&&this._hideSelected(s)}unselect(s){s.selected&&(this._selectionModel.unselect(s,this._ngSelect.multiple),this._ngSelect.hideSelected&&$(s.index)&&this._ngSelect.multiple&&this._showSelected(s))}findItem(s){let t;return this._ngSelect.compareWith?t=i=>this._ngSelect.compareWith(i.value,s):this._ngSelect.bindValue?t=i=>!i.children&&this.resolveNested(i.value,this._ngSelect.bindValue)===s:t=i=>i.value===s||!i.children&&i.label&&i.label===this.resolveNested(s,this._ngSelect.bindLabel),this._items.find(i=>t(i))}addItem(s){let t=this.mapItem(s,this._items.length);return this._items.push(t),this._filteredItems.push(t),t}clearSelected(s=!1){this._selectionModel.clear(s),this._items.forEach(t=>{t.selected=s&&t.selected&&t.disabled,t.marked=!1}),this._ngSelect.hideSelected&&this.resetFilteredItems()}findByLabel(s){return s=$s(s).toLocaleLowerCase(),this.filteredItems.find(t=>$s(t.label).toLocaleLowerCase().substr(0,s.length)===s)}filter(s){if(!s){this.resetFilteredItems();return}this._filteredItems=[],s=this._ngSelect.searchFn?s:$s(s).toLocaleLowerCase();let t=this._ngSelect.searchFn||this._defaultSearchFn,i=this._ngSelect.hideSelected;for(let r of Array.from(this._groups.keys())){let a=[];for(let n of this._groups.get(r)){if(i&&(n.parent&&n.parent.selected||n.selected))continue;let o=this._ngSelect.searchFn?n.value:n;t(s,o)&&a.push(n)}if(a.length>0){let[n]=a.slice(-1);if(n.parent){let o=this._items.find(l=>l===n.parent);this._filteredItems.push(o)}this._filteredItems.push(...a)}}}resetFilteredItems(){this._filteredItems.length!==this._items.length&&(this._ngSelect.hideSelected&&this.selectedItems.length>0?this._filteredItems=this._items.filter(s=>!s.selected):this._filteredItems=this._items)}unmarkItem(){this._markedIndex=-1}markNextItem(){this._stepToItem(1)}markPreviousItem(){this._stepToItem(-1)}markItem(s){this._markedIndex=this._filteredItems.indexOf(s)}markSelectedOrDefault(s){if(this._filteredItems.length===0)return;let t=this._getLastMarkedIndex();t>-1?this._markedIndex=t:this._markedIndex=s?this.filteredItems.findIndex(i=>!i.disabled):-1}resolveNested(s,t){if(!Jt(s))return s;if(t.indexOf(".")===-1)return s[t];{let i=t.split("."),r=s;for(let a=0,n=i.length;a<n;++a){if(r==null)return null;r=r[i[a]]}return r}}mapItem(s,t){let i=$(s.$ngOptionLabel)?s.$ngOptionLabel:this.resolveNested(s,this._ngSelect.bindLabel),r=$(s.$ngOptionValue)?s.$ngOptionValue:s;return{index:t,label:$(i)?i.toString():"",value:r,disabled:s.disabled,htmlId:`${this._ngSelect.dropdownId}-${t}`}}mapSelectedItems(){let s=this._ngSelect.multiple;for(let t of this.selectedItems){let i=this._ngSelect.bindValue?this.resolveNested(t.value,this._ngSelect.bindValue):t.value,r=$(i)?this.findItem(i):null;this._selectionModel.unselect(t,s),this._selectionModel.select(r||t,s,this._ngSelect.selectableGroupAsModel)}this._ngSelect.hideSelected&&(this._filteredItems=this.filteredItems.filter(t=>this.selectedItems.indexOf(t)===-1))}_showSelected(s){if(this._filteredItems.push(s),s.parent){let t=s.parent;this._filteredItems.find(r=>r===t)||this._filteredItems.push(t)}else if(s.children)for(let t of s.children)t.selected=!1,this._filteredItems.push(t);this._filteredItems=[...this._filteredItems.sort((t,i)=>t.index-i.index)]}_hideSelected(s){this._filteredItems=this._filteredItems.filter(t=>t!==s),s.parent?s.parent.children.every(i=>i.selected)&&(this._filteredItems=this._filteredItems.filter(i=>i!==s.parent)):s.children&&(this._filteredItems=this.filteredItems.filter(t=>t.parent!==s))}_defaultSearchFn(s,t){return $s(t.label).toLocaleLowerCase().indexOf(s)>-1}_getNextItemIndex(s){return s>0?this._markedIndex>=this._filteredItems.length-1?0:this._markedIndex+1:this._markedIndex<=0?this._filteredItems.length-1:this._markedIndex-1}_stepToItem(s){this._filteredItems.length===0||this._filteredItems.every(t=>t.disabled)||(this._markedIndex=this._getNextItemIndex(s),this.markedItem.disabled&&this._stepToItem(s))}_getLastMarkedIndex(){if(this._ngSelect.hideSelected||this._markedIndex>-1&&this.markedItem===void 0)return-1;let s=this._filteredItems.indexOf(this.lastSelectedItem);return this.lastSelectedItem&&s<0?-1:Math.max(this.markedIndex,s)}_groupBy(s,t){let i=new Map;if(s.length===0)return i;if(Array.isArray(s[0].value[t])){for(let n of s){let o=(n.value[t]||[]).map((l,c)=>this.mapItem(l,c));i.set(n,o)}return i}let r=Ys(this._ngSelect.groupBy),a=n=>{let o=r?t(n.value):n.value[t];return $(o)?o:void 0};for(let n of s){let o=a(n),l=i.get(o);l?l.push(n):i.set(o,[n])}return i}_flatten(s){let t=Ys(this._ngSelect.groupBy),i=[];for(let r of Array.from(s.keys())){let a=i.length;if(r===void 0){let h=s.get(void 0)||[];i.push(...h.map(p=>(p.index=a++,p)));continue}let n=Jt(r),o={label:n?"":String(r),children:void 0,parent:null,index:a++,disabled:!this._ngSelect.selectableGroup,htmlId:zn()},l=t?this._ngSelect.bindLabel:this._ngSelect.groupBy,c=this._ngSelect.groupValue||(()=>n?r.value:{[l]:r}),d=s.get(r).map(h=>(h.parent=o,h.children=void 0,h.index=a++,h));o.children=d,o.value=c(r,d.map(h=>h.value)),i.push(o),i.push(...d)}return i}},_e=function(e){return e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Esc=27]="Esc",e[e.Space=32]="Space",e[e.ArrowUp=38]="ArrowUp",e[e.ArrowDown=40]="ArrowDown",e[e.Backspace=8]="Backspace",e}(_e||{}),Kn=(()=>{class e{constructor(){this._dimensions={itemHeight:0,panelHeight:0,itemsPerViewport:0}}get dimensions(){return this._dimensions}calculateItems(t,i,r){let a=this._dimensions,n=a.itemHeight*i,l=Math.max(0,t)/n*i,c=Math.min(i,Math.ceil(l)+(a.itemsPerViewport+1)),h=Math.max(0,c-a.itemsPerViewport),p=Math.min(h,Math.floor(l)),u=a.itemHeight*Math.ceil(p)-a.itemHeight*Math.min(p,r);return u=isNaN(u)?0:u,p=isNaN(p)?-1:p,c=isNaN(c)?-1:c,p-=r,p=Math.max(0,p),c+=r,c=Math.min(i,c),{topPadding:u,scrollHeight:n,start:p,end:c}}setDimensions(t,i){let r=Math.max(1,Math.floor(i/t));this._dimensions={itemHeight:t,panelHeight:i,itemsPerViewport:r}}getScrollTo(t,i,r){let{panelHeight:a}=this.dimensions,n=t+i,o=r,l=o+a;return a>=n&&r===t?null:n>l?o+n-l:t<=o?t:null}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Y({token:e,factory:e.\u0275fac})}}return e})(),Bn=["top","right","bottom","left"],sm=typeof requestAnimationFrame<"u"?Ni:Gi,Vn=(()=>{class e{constructor(t,i,r,a,n){this._renderer=t,this._zone=i,this._panelService=r,this._document=n,this.items=[],this.position="auto",this.virtualScroll=!1,this.filterValue=null,this.update=new J,this.scroll=new J,this.scrollToEnd=new J,this.outsideClick=new J,this._destroy$=new Nt,this._scrollToEndFired=!1,this._updateScrollHeight=!1,this._lastScrollPosition=0,this._dropdown=a.nativeElement}get currentPosition(){return this._currentPosition}get itemsLength(){return this._itemsLength}set itemsLength(t){t!==this._itemsLength&&(this._itemsLength=t,this._onItemsLengthChanged())}get _startOffset(){if(this.markedItem){let{itemHeight:t,panelHeight:i}=this._panelService.dimensions,r=this.markedItem.index*t;return i>r?0:r}return 0}ngOnInit(){this._select=this._dropdown.parentElement,this._virtualPadding=this.paddingElementRef.nativeElement,this._scrollablePanel=this.scrollElementRef.nativeElement,this._contentPanel=this.contentElementRef.nativeElement,this._handleScroll(),this._handleOutsideClick(),this._appendDropdown(),this._setupMousedownListener()}ngOnChanges(t){if(t.items){let i=t.items;this._onItemsChange(i.currentValue,i.firstChange)}}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete(),this._destroy$.unsubscribe(),this.appendTo&&this._renderer.removeChild(this._dropdown.parentNode,this._dropdown)}scrollTo(t,i=!1){if(!t)return;let r=this.items.indexOf(t);if(r<0||r>=this.itemsLength)return;let a;if(this.virtualScroll){let n=this._panelService.dimensions.itemHeight;a=this._panelService.getScrollTo(r*n,n,this._lastScrollPosition)}else{let n=this._dropdown.querySelector(`#${t.htmlId}`),o=i?n.offsetTop:this._lastScrollPosition;a=this._panelService.getScrollTo(n.offsetTop,n.clientHeight,o)}$(a)&&(this._scrollablePanel.scrollTop=a)}scrollToTag(){let t=this._scrollablePanel;t.scrollTop=t.scrollHeight-t.clientHeight}adjustPosition(){this._updateYPosition()}_handleDropdownPosition(){this._currentPosition=this._calculateCurrentPosition(this._dropdown),Bn.includes(this._currentPosition)?this._updateDropdownClass(this._currentPosition):this._updateDropdownClass("bottom"),this.appendTo&&this._updateYPosition(),this._dropdown.style.opacity="1"}_updateDropdownClass(t){Bn.forEach(r=>{let a=`ng-select-${r}`;this._renderer.removeClass(this._dropdown,a),this._renderer.removeClass(this._select,a)});let i=`ng-select-${t}`;this._renderer.addClass(this._dropdown,i),this._renderer.addClass(this._select,i)}_handleScroll(){this._zone.runOutsideAngular(()=>{tt(this.scrollElementRef.nativeElement,"scroll").pipe(st(this._destroy$),Ui(0,sm)).subscribe(t=>{let i=t.path||t.composedPath&&t.composedPath(),r=!i||i.length===0?t.target.scrollTop:i[0].scrollTop;this._onContentScrolled(r)})})}_handleOutsideClick(){this._document&&this._zone.runOutsideAngular(()=>{is(tt(this._document,"touchstart",{capture:!0}),tt(this._document,"mousedown",{capture:!0})).pipe(st(this._destroy$)).subscribe(t=>this._checkToClose(t))})}_checkToClose(t){if(this._select.contains(t.target)||this._dropdown.contains(t.target))return;let i=t.path||t.composedPath&&t.composedPath();t.target&&t.target.shadowRoot&&i&&i[0]&&this._select.contains(i[0])||this._zone.run(()=>this.outsideClick.emit())}_onItemsChange(t,i){this.items=t||[],this._scrollToEndFired=!1,this.itemsLength=t.length,this.virtualScroll?this._updateItemsRange(i):(this._setVirtualHeight(),this._updateItems(i))}_updateItems(t){this.update.emit(this.items),t!==!1&&this._zone.runOutsideAngular(()=>{Promise.resolve().then(()=>{let i=this._scrollablePanel.clientHeight;this._panelService.setDimensions(0,i),this._handleDropdownPosition(),this.scrollTo(this.markedItem,t)})})}_updateItemsRange(t){this._zone.runOutsideAngular(()=>{this._measureDimensions().then(()=>{t?(this._renderItemsRange(this._startOffset),this._handleDropdownPosition()):this._renderItemsRange()})})}_onContentScrolled(t){this.virtualScroll&&this._renderItemsRange(t),this._lastScrollPosition=t,this._fireScrollToEnd(t)}_updateVirtualHeight(t){this._updateScrollHeight&&(this._virtualPadding.style.height=`${t}px`,this._updateScrollHeight=!1)}_setVirtualHeight(){this._virtualPadding&&(this._virtualPadding.style.height="0px")}_onItemsLengthChanged(){this._updateScrollHeight=!0}_renderItemsRange(t=null){if(t&&this._lastScrollPosition===t)return;t=t||this._scrollablePanel.scrollTop;let i=this._panelService.calculateItems(t,this.itemsLength,this.bufferAmount);this._updateVirtualHeight(i.scrollHeight),this._contentPanel.style.transform=`translateY(${i.topPadding}px)`,this._zone.run(()=>{this.update.emit(this.items.slice(i.start,i.end)),this.scroll.emit({start:i.start,end:i.end})}),$(t)&&this._lastScrollPosition===0&&(this._scrollablePanel.scrollTop=t,this._lastScrollPosition=t)}_measureDimensions(){if(this._panelService.dimensions.itemHeight>0||this.itemsLength===0)return Promise.resolve(this._panelService.dimensions);let[t]=this.items;return this.update.emit([t]),Promise.resolve().then(()=>{let r=this._dropdown.querySelector(`#${t.htmlId}`).clientHeight;this._virtualPadding.style.height=`${r*this.itemsLength}px`;let a=this._scrollablePanel.clientHeight;return this._panelService.setDimensions(r,a),this._panelService.dimensions})}_fireScrollToEnd(t){if(this._scrollToEndFired||t===0)return;let i=this.virtualScroll?this._virtualPadding:this._contentPanel;t+this._dropdown.clientHeight>=i.clientHeight-1&&(this._zone.run(()=>this.scrollToEnd.emit()),this._scrollToEndFired=!0)}_calculateCurrentPosition(t){if(this.position!=="auto")return this.position;let i=this._select.getBoundingClientRect(),r=document.documentElement.scrollTop||document.body.scrollTop,a=i.top+window.pageYOffset,n=i.height,o=t.getBoundingClientRect().height;return a+n+o>r+document.documentElement.clientHeight?"top":"bottom"}_appendDropdown(){if(this.appendTo){if(this._parent=document.querySelector(this.appendTo),!this._parent)throw new Error(`appendTo selector ${this.appendTo} did not found any parent element`);this._updateXPosition(),this._parent.appendChild(this._dropdown)}}_updateXPosition(){let t=this._select.getBoundingClientRect(),i=this._parent.getBoundingClientRect(),r=t.left-i.left;this._dropdown.style.left=r+"px",this._dropdown.style.width=t.width+"px",this._dropdown.style.minWidth=t.width+"px"}_updateYPosition(){let t=this._select.getBoundingClientRect(),i=this._parent.getBoundingClientRect(),r=t.height;if(this._currentPosition==="top"){let a=i.bottom-t.bottom;this._dropdown.style.bottom=a+r+"px",this._dropdown.style.top="auto"}else if(this._currentPosition==="bottom"){let a=t.top-i.top;this._dropdown.style.top=a+r+"px",this._dropdown.style.bottom="auto"}}_setupMousedownListener(){this._zone.runOutsideAngular(()=>{tt(this._dropdown,"mousedown").pipe(st(this._destroy$)).subscribe(t=>{t.target.tagName!=="INPUT"&&t.preventDefault()})})}static{this.\u0275fac=function(i){return new(i||e)(G(Xi),G(os),G(Kn),G(Ae),G(ir,8))}}static{this.\u0275cmp=vt({type:e,selectors:[["ng-dropdown-panel"]],viewQuery:function(i,r){if(i&1&&(nt(ig,7,Ae),nt(rg,7,Ae),nt(ag,7,Ae)),i&2){let a;Q(a=ee())&&(r.contentElementRef=a.first),Q(a=ee())&&(r.scrollElementRef=a.first),Q(a=ee())&&(r.paddingElementRef=a.first)}},inputs:{items:"items",markedItem:"markedItem",position:"position",appendTo:"appendTo",bufferAmount:"bufferAmount",virtualScroll:"virtualScroll",headerTemplate:"headerTemplate",footerTemplate:"footerTemplate",filterValue:"filterValue"},outputs:{update:"update",scroll:"scroll",scrollToEnd:"scrollToEnd",outsideClick:"outsideClick"},features:[it],ngContentSelectors:Hn,decls:9,vars:6,consts:[["scroll",""],["padding",""],["content",""],["class","ng-dropdown-header",4,"ngIf"],["role","listbox",1,"ng-dropdown-panel-items","scroll-host"],["class","ng-dropdown-footer",4,"ngIf"],[1,"ng-dropdown-header"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ng-dropdown-footer"]],template:function(i,r){i&1&&(Js(),oe(0,ng,2,4,"div",3),W(1,"div",4,0),ze(3,"div",null,1),W(5,"div",null,2),Qs(7),q()(),oe(8,og,2,4,"div",5)),i&2&&(O("ngIf",r.headerTemplate),R(3),ke("total-padding",r.virtualScroll),R(2),ke("scrollable-content",r.virtualScroll&&r.items.length),R(3),O("ngIf",r.footerTemplate))},dependencies:[ei,ti],encapsulation:2,changeDetection:0})}}return e})(),im=(()=>{class e{get disabled(){return this._disabled}set disabled(t){this._disabled=this._isDisabled(t)}constructor(t){this.elementRef=t,this.stateChange$=new Nt,this._disabled=!1}get label(){return(this.elementRef.nativeElement.textContent||"").trim()}ngOnChanges(t){t.disabled&&this.stateChange$.next({value:this.value,disabled:this._disabled})}ngAfterViewChecked(){this.label!==this._previousLabel&&(this._previousLabel=this.label,this.stateChange$.next({value:this.value,disabled:this._disabled,label:this.elementRef.nativeElement.innerHTML}))}ngOnDestroy(){this.stateChange$.complete()}_isDisabled(t){return t!=null&&`${t}`!="false"}static{this.\u0275fac=function(i){return new(i||e)(G(Ae))}}static{this.\u0275cmp=vt({type:e,selectors:[["ng-option"]],inputs:{value:"value",disabled:"disabled"},features:[it],ngContentSelectors:Hn,decls:1,vars:0,template:function(i,r){i&1&&(Js(),Qs(0))},encapsulation:2,changeDetection:0})}}return e})(),rm=(()=>{class e{constructor(){this.notFoundText="No items found",this.typeToSearchText="Type to search",this.addTagText="Add item",this.loadingText="Loading...",this.clearAllText="Clear all",this.disableVirtualScroll=!0,this.openOnEnter=!0,this.appearance="underline"}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),am=(()=>{class e{warn(t){console.warn(t)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Wn=new $i("ng-select-selection-model"),Iy=(()=>{class e{get items(){return this._items}set items(t){t===null&&(t=[]),this._itemsAreUsed=!0,this._items=t}get compareWith(){return this._compareWith}set compareWith(t){if(t!=null&&!Ys(t))throw Error("`compareWith` must be a function.");this._compareWith=t}get clearSearchOnAdd(){return $(this._clearSearchOnAdd)?this._clearSearchOnAdd:$(this.config.clearSearchOnAdd)?this.config.clearSearchOnAdd:this.closeOnSelect}set clearSearchOnAdd(t){this._clearSearchOnAdd=t}get deselectOnClick(){return $(this._deselectOnClick)?this._deselectOnClick:$(this.config.deselectOnClick)?this.config.deselectOnClick:this.multiple}set deselectOnClick(t){this._deselectOnClick=t}get disabled(){return this.readonly||this._disabled}get filtered(){return!!this.searchTerm&&this.searchable||this._isComposing}get single(){return!this.multiple}get _editableSearchTerm(){return this.editableSearchTerm&&!this.multiple}constructor(t,i,r,a,n,o,l){this.classes=t,this.autoFocus=i,this.config=r,this._cd=o,this._console=l,this.markFirst=!0,this.dropdownPosition="auto",this.loading=!1,this.closeOnSelect=!0,this.hideSelected=!1,this.selectOnTab=!1,this.bufferAmount=4,this.selectableGroup=!1,this.selectableGroupAsModel=!0,this.searchFn=null,this.trackByFn=null,this.clearOnBackspace=!0,this.labelForId=null,this.inputAttrs={},this.readonly=!1,this.searchWhileComposing=!0,this.minTermLength=0,this.editableSearchTerm=!1,this.keyDownFn=c=>!0,this.multiple=!1,this.addTag=!1,this.searchable=!0,this.clearable=!0,this.isOpen=!1,this.blurEvent=new J,this.focusEvent=new J,this.changeEvent=new J,this.openEvent=new J,this.closeEvent=new J,this.searchEvent=new J,this.clearEvent=new J,this.addEvent=new J,this.removeEvent=new J,this.scroll=new J,this.scrollToEnd=new J,this.useDefaultClass=!0,this.viewPortItems=[],this.searchTerm=null,this.dropdownId=zn(),this.escapeHTML=!0,this._items=[],this._defaultLabel="label",this._pressedKeys=[],this._isComposing=!1,this._destroy$=new Nt,this._keyPress$=new Nt,this._onChange=c=>{},this._onTouched=()=>{},this.clearItem=c=>{let d=this.selectedItems.find(h=>h.value===c);this.unselect(d)},this.trackByOption=(c,d)=>this.trackByFn?this.trackByFn(d.value):d,this._mergeGlobalConfig(r),this.itemsList=new Ii(this,a()),this.element=n.nativeElement}get selectedItems(){return this.itemsList.selectedItems}get selectedValues(){return this.selectedItems.map(t=>t.value)}get hasValue(){return this.selectedItems.length>0}get currentPanelPosition(){if(this.dropdownPanel)return this.dropdownPanel.currentPosition}ngOnInit(){this._handleKeyPresses(),this._setInputAttributes()}ngOnChanges(t){t.multiple&&this.itemsList.clearSelected(),t.items&&this._setItems(t.items.currentValue||[]),t.isOpen&&(this._manualOpen=$(t.isOpen.currentValue))}ngAfterViewInit(){this._itemsAreUsed||(this.escapeHTML=!1,this._setItemsFromNgOptions()),$(this.autoFocus)&&this.focus()}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}handleKeyDown(t){if(_e[t.which]){if(this.keyDownFn(t)===!1)return;this.handleKeyCode(t)}else t.key&&t.key.length===1&&this._keyPress$.next(t.key.toLocaleLowerCase())}handleKeyCode(t){let i=t.target;this.clearButton&&this.clearButton.nativeElement===i?this.handleKeyCodeClear(t):this.handleKeyCodeInput(t)}handleKeyCodeInput(t){switch(t.which){case _e.ArrowDown:this._handleArrowDown(t);break;case _e.ArrowUp:this._handleArrowUp(t);break;case _e.Space:this._handleSpace(t);break;case _e.Enter:this._handleEnter(t);break;case _e.Tab:this._handleTab(t);break;case _e.Esc:this.close(),t.preventDefault();break;case _e.Backspace:this._handleBackspace();break}}handleKeyCodeClear(t){switch(t.which){case _e.Enter:this.handleClearClick(),t.preventDefault();break}}handleMousedown(t){let i=t.target;if(i.tagName!=="INPUT"&&t.preventDefault(),i.classList.contains("ng-clear-wrapper")){this.handleClearClick();return}if(i.classList.contains("ng-arrow-wrapper")){this.handleArrowClick();return}i.classList.contains("ng-value-icon")||(this.focused||this.focus(),this.searchable?this.open():this.toggle())}handleArrowClick(){this.isOpen?this.close():this.open()}handleClearClick(){this.hasValue&&(this.itemsList.clearSelected(!0),this._updateNgModel()),this._clearSearch(),this.focus(),this.clearEvent.emit(),this._onSelectionChanged()}clearModel(){this.clearable&&(this.itemsList.clearSelected(),this._updateNgModel())}writeValue(t){this.itemsList.clearSelected(),this._handleWriteValue(t),this._cd.markForCheck()}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this._disabled=t,this._cd.markForCheck()}toggle(){this.isOpen?this.close():this.open()}open(){this.disabled||this.isOpen||this._manualOpen||!this._isTypeahead&&!this.addTag&&this.itemsList.noItemsToSelect||(this.isOpen=!0,this.itemsList.markSelectedOrDefault(this.markFirst),this.openEvent.emit(),this.searchTerm||this.focus(),this.detectChanges())}close(){!this.isOpen||this._manualOpen||(this.isOpen=!1,this._isComposing=!1,this._editableSearchTerm?this.itemsList.resetFilteredItems():this._clearSearch(),this.itemsList.unmarkItem(),this._onTouched(),this.closeEvent.emit(),this._cd.markForCheck())}toggleItem(t){!t||t.disabled||this.disabled||(this.deselectOnClick&&t.selected?this.unselect(t):this.select(t),this._editableSearchTerm&&this._setSearchTermFromItems(),this._onSelectionChanged())}select(t){t.selected||(this.itemsList.select(t),this.clearSearchOnAdd&&!this._editableSearchTerm&&this._clearSearch(),this._updateNgModel(),this.multiple&&this.addEvent.emit(t.value)),(this.closeOnSelect||this.itemsList.noItemsToSelect)&&this.close()}focus(){this.searchInput.nativeElement.focus()}blur(){this.searchInput.nativeElement.blur()}unselect(t){t&&(this.itemsList.unselect(t),this.focus(),this._updateNgModel(),this.removeEvent.emit(t.value))}selectTag(){let t;Ys(this.addTag)?t=this.addTag(this.searchTerm):t=this._primitive?this.searchTerm:{[this.bindLabel]:this.searchTerm};let i=r=>this._isTypeahead||!this.isOpen?this.itemsList.mapItem(r,null):this.itemsList.addItem(r);Ug(t)?t.then(r=>this.select(i(r))).catch(()=>{}):t&&this.select(i(t))}showClear(){return this.clearable&&(this.hasValue||this.searchTerm)&&!this.disabled}focusOnClear(){this.blur(),this.clearButton&&this.clearButton.nativeElement.focus()}get showAddTag(){if(!this._validTerm)return!1;let t=this.searchTerm.toLowerCase().trim();return this.addTag&&!this.itemsList.filteredItems.some(i=>i.label.toLowerCase()===t)&&(!this.hideSelected&&this.isOpen||!this.selectedItems.some(i=>i.label.toLowerCase()===t))&&!this.loading}showNoItemsFound(){let t=this.itemsList.filteredItems.length===0;return(t&&!this._isTypeahead&&!this.loading||t&&this._isTypeahead&&this._validTerm&&!this.loading)&&!this.showAddTag}showTypeToSearch(){return this.itemsList.filteredItems.length===0&&this._isTypeahead&&!this._validTerm&&!this.loading}onCompositionStart(){this._isComposing=!0}onCompositionEnd(t){this._isComposing=!1,!this.searchWhileComposing&&this.filter(t)}filter(t){this._isComposing&&!this.searchWhileComposing||(this.searchTerm=t,this._isTypeahead&&(this._validTerm||this.minTermLength===0)&&this.typeahead.next(t),this._isTypeahead||(this.itemsList.filter(this.searchTerm),this.isOpen&&this.itemsList.markSelectedOrDefault(this.markFirst)),this.searchEvent.emit({term:t,items:this.itemsList.filteredItems.map(i=>i.value)}),this.open())}onInputFocus(t){this.focused||(this._editableSearchTerm&&this._setSearchTermFromItems(),this.element.classList.add("ng-select-focused"),this.focusEvent.emit(t),this.focused=!0)}onInputBlur(t){this.element.classList.remove("ng-select-focused"),this.blurEvent.emit(t),!this.isOpen&&!this.disabled&&this._onTouched(),this._editableSearchTerm&&this._setSearchTermFromItems(),this.focused=!1}onItemHover(t){t.disabled||this.itemsList.markItem(t)}detectChanges(){this._cd.destroyed||this._cd.detectChanges()}_setSearchTermFromItems(){let t=this.selectedItems&&this.selectedItems[0];this.searchTerm=t&&t.label||null}_setItems(t){let i=t[0];this.bindLabel=this.bindLabel||this._defaultLabel,this._primitive=$(i)?!Jt(i):this._primitive||this.bindLabel===this._defaultLabel,this.itemsList.setItems(t),t.length>0&&this.hasValue&&this.itemsList.mapSelectedItems(),this.isOpen&&$(this.searchTerm)&&!this._isTypeahead&&this.itemsList.filter(this.searchTerm),(this._isTypeahead||this.isOpen)&&this.itemsList.markSelectedOrDefault(this.markFirst)}_setItemsFromNgOptions(){let t=r=>{this.items=r.map(a=>({$ngOptionValue:a.value,$ngOptionLabel:a.elementRef.nativeElement.innerHTML,disabled:a.disabled})),this.itemsList.setItems(this.items),this.hasValue&&this.itemsList.mapSelectedItems(),this.detectChanges()},i=()=>{let r=is(this.ngOptions.changes,this._destroy$);is(...this.ngOptions.map(a=>a.stateChange$)).pipe(st(r)).subscribe(a=>{let n=this.itemsList.findItem(a.value);n.disabled=a.disabled,n.label=a.label||n.label,this._cd.detectChanges()})};this.ngOptions.changes.pipe(Ki(this.ngOptions),st(this._destroy$)).subscribe(r=>{this.bindLabel=this._defaultLabel,t(r),i()})}_isValidWriteValue(t){if(!$(t)||this.multiple&&t===""||Array.isArray(t)&&t.length===0)return!1;let i=r=>!$(this.compareWith)&&Jt(r)&&this.bindValue?(this._console.warn(`Setting object(${JSON.stringify(r)}) as your model with bindValue is not allowed unless [compareWith] is used.`),!1):!0;return this.multiple?Array.isArray(t)?t.every(r=>i(r)):(this._console.warn("Multiple select ngModel should be array."),!1):i(t)}_handleWriteValue(t){if(!this._isValidWriteValue(t))return;let i=r=>{let a=this.itemsList.findItem(r);if(a)this.itemsList.select(a);else{let n=Jt(r),o=!n&&!this.bindValue;n||o?this.itemsList.select(this.itemsList.mapItem(r,null)):this.bindValue&&(a={[this.bindLabel]:null,[this.bindValue]:r},this.itemsList.select(this.itemsList.mapItem(a,null)))}};this.multiple?t.forEach(r=>i(r)):i(t)}_handleKeyPresses(){this.searchable||this._keyPress$.pipe(st(this._destroy$),Vt(t=>this._pressedKeys.push(t)),zi(200),rs(()=>this._pressedKeys.length>0),Bt(()=>this._pressedKeys.join(""))).subscribe(t=>{let i=this.itemsList.findByLabel(t);i&&(this.isOpen?(this.itemsList.markItem(i),this._scrollToMarked(),this._cd.markForCheck()):this.select(i)),this._pressedKeys=[]})}_setInputAttributes(){let t=this.searchInput.nativeElement,i=L({type:"text",autocorrect:"off",autocapitalize:"off",autocomplete:this.labelForId?"off":this.dropdownId},this.inputAttrs);for(let r of Object.keys(i))t.setAttribute(r,i[r])}_updateNgModel(){let t=[];for(let r of this.selectedItems)if(this.bindValue){let a=null;if(r.children){let n=this.groupValue?this.bindValue:this.groupBy;a=r.value[n||this.groupBy]}else a=this.itemsList.resolveNested(r.value,this.bindValue);t.push(a)}else t.push(r.value);let i=this.selectedItems.map(r=>r.value);this.multiple?(this._onChange(t),this.changeEvent.emit(i)):(this._onChange($(t[0])?t[0]:null),this.changeEvent.emit(i[0])),this._cd.markForCheck()}_clearSearch(){this.searchTerm&&(this._changeSearch(null),this.itemsList.resetFilteredItems())}_changeSearch(t){this.searchTerm=t,this._isTypeahead&&this.typeahead.next(t)}_scrollToMarked(){!this.isOpen||!this.dropdownPanel||this.dropdownPanel.scrollTo(this.itemsList.markedItem)}_scrollToTag(){!this.isOpen||!this.dropdownPanel||this.dropdownPanel.scrollToTag()}_onSelectionChanged(){this.isOpen&&this.deselectOnClick&&this.appendTo&&(this._cd.detectChanges(),this.dropdownPanel.adjustPosition())}_handleTab(t){if(this.isOpen===!1){if(this.showClear())this.focusOnClear(),t.preventDefault();else if(!this.addTag)return}this.selectOnTab?this.itemsList.markedItem?(this.toggleItem(this.itemsList.markedItem),t.preventDefault()):this.showAddTag?(this.selectTag(),t.preventDefault()):this.close():this.close()}_handleEnter(t){if(this.isOpen||this._manualOpen)this.itemsList.markedItem?this.toggleItem(this.itemsList.markedItem):this.showAddTag&&this.selectTag();else if(this.openOnEnter)this.open();else return;t.preventDefault()}_handleSpace(t){this.isOpen||this._manualOpen||(this.open(),t.preventDefault())}_handleArrowDown(t){this._nextItemIsTag(1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markNextItem(),this._scrollToMarked()),this.open(),t.preventDefault()}_handleArrowUp(t){this.isOpen&&(this._nextItemIsTag(-1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markPreviousItem(),this._scrollToMarked()),t.preventDefault())}_nextItemIsTag(t){let i=this.itemsList.markedIndex+t;return this.addTag&&this.searchTerm&&this.itemsList.markedItem&&(i<0||i===this.itemsList.filteredItems.length)}_handleBackspace(){this.searchTerm||!this.clearable||!this.clearOnBackspace||!this.hasValue||(this.multiple?this.unselect(this.itemsList.lastSelectedItem):this.clearModel())}get _isTypeahead(){return this.typeahead&&this.typeahead.observers.length>0}get _validTerm(){let t=this.searchTerm&&this.searchTerm.trim();return t&&t.length>=this.minTermLength}_mergeGlobalConfig(t){this.placeholder=this.placeholder||t.placeholder,this.notFoundText=this.notFoundText||t.notFoundText,this.typeToSearchText=this.typeToSearchText||t.typeToSearchText,this.addTagText=this.addTagText||t.addTagText,this.loadingText=this.loadingText||t.loadingText,this.clearAllText=this.clearAllText||t.clearAllText,this.virtualScroll=$(this.virtualScroll)?this.virtualScroll:$(t.disableVirtualScroll)?!t.disableVirtualScroll:!1,this.openOnEnter=$(this.openOnEnter)?this.openOnEnter:t.openOnEnter,this.appendTo=this.appendTo||t.appendTo,this.bindValue=this.bindValue||t.bindValue,this.bindLabel=this.bindLabel||t.bindLabel,this.appearance=this.appearance||t.appearance}static{this.\u0275fac=function(i){return new(i||e)(Xs("class"),Xs("autofocus"),G(rm),G(Wn),G(Ae),G(sr),G(am))}}static{this.\u0275cmp=vt({type:e,selectors:[["ng-select"]],contentQueries:function(i,r,a){if(i&1&&(Ce(a,Kg,5,H),Ce(a,Wg,5,H),Ce(a,jg,5,H),Ce(a,$g,5,H),Ce(a,Yg,5,H),Ce(a,qg,5,H),Ce(a,Xg,5,H),Ce(a,Zg,5,H),Ce(a,Jg,5,H),Ce(a,Qg,5,H),Ce(a,em,5,H),Ce(a,im,5)),i&2){let n;Q(n=ee())&&(r.optionTemplate=n.first),Q(n=ee())&&(r.optgroupTemplate=n.first),Q(n=ee())&&(r.labelTemplate=n.first),Q(n=ee())&&(r.multiLabelTemplate=n.first),Q(n=ee())&&(r.headerTemplate=n.first),Q(n=ee())&&(r.footerTemplate=n.first),Q(n=ee())&&(r.notFoundTemplate=n.first),Q(n=ee())&&(r.typeToSearchTemplate=n.first),Q(n=ee())&&(r.loadingTextTemplate=n.first),Q(n=ee())&&(r.tagTemplate=n.first),Q(n=ee())&&(r.loadingSpinnerTemplate=n.first),Q(n=ee())&&(r.ngOptions=n)}},viewQuery:function(i,r){if(i&1&&(nt(Vn,5),nt(lg,7),nt(cg,5)),i&2){let a;Q(a=ee())&&(r.dropdownPanel=a.first),Q(a=ee())&&(r.searchInput=a.first),Q(a=ee())&&(r.clearButton=a.first)}},hostVars:20,hostBindings:function(i,r){i&1&&Pe("keydown",function(n){return r.handleKeyDown(n)}),i&2&&ke("ng-select-typeahead",r.typeahead)("ng-select-multiple",r.multiple)("ng-select-taggable",r.addTag)("ng-select-searchable",r.searchable)("ng-select-clearable",r.clearable)("ng-select-opened",r.isOpen)("ng-select",r.useDefaultClass)("ng-select-disabled",r.disabled)("ng-select-filtered",r.filtered)("ng-select-single",r.single)},inputs:{bindLabel:"bindLabel",bindValue:"bindValue",markFirst:"markFirst",placeholder:"placeholder",notFoundText:"notFoundText",typeToSearchText:"typeToSearchText",addTagText:"addTagText",loadingText:"loadingText",clearAllText:"clearAllText",appearance:"appearance",dropdownPosition:"dropdownPosition",appendTo:"appendTo",loading:"loading",closeOnSelect:"closeOnSelect",hideSelected:"hideSelected",selectOnTab:"selectOnTab",openOnEnter:"openOnEnter",maxSelectedItems:"maxSelectedItems",groupBy:"groupBy",groupValue:"groupValue",bufferAmount:"bufferAmount",virtualScroll:"virtualScroll",selectableGroup:"selectableGroup",selectableGroupAsModel:"selectableGroupAsModel",searchFn:"searchFn",trackByFn:"trackByFn",clearOnBackspace:"clearOnBackspace",labelForId:"labelForId",inputAttrs:"inputAttrs",tabIndex:"tabIndex",readonly:"readonly",searchWhileComposing:"searchWhileComposing",minTermLength:"minTermLength",editableSearchTerm:"editableSearchTerm",keyDownFn:"keyDownFn",typeahead:"typeahead",multiple:"multiple",addTag:"addTag",searchable:"searchable",clearable:"clearable",isOpen:"isOpen",items:"items",compareWith:"compareWith",clearSearchOnAdd:"clearSearchOnAdd",deselectOnClick:"deselectOnClick"},outputs:{blurEvent:"blur",focusEvent:"focus",changeEvent:"change",openEvent:"open",closeEvent:"close",searchEvent:"search",clearEvent:"clear",addEvent:"add",removeEvent:"remove",scroll:"scroll",scrollToEnd:"scrollToEnd"},features:[Ji([{provide:lr,useExisting:ji(()=>e),multi:!0},Kn]),it],decls:14,vars:19,consts:[["searchInput",""],["defaultLabelTemplate",""],["defaultLoadingSpinnerTemplate",""],["clearButton",""],["defaultOptionTemplate",""],["defaultTagTemplate",""],["defaultNotFoundTemplate",""],["defaultTypeToSearchTemplate",""],["defaultLoadingTextTemplate",""],[1,"ng-select-container",3,"mousedown"],[1,"ng-value-container"],[1,"ng-placeholder"],[4,"ngIf"],["role","combobox","aria-haspopup","listbox",1,"ng-input"],["aria-autocomplete","list",3,"input","compositionstart","compositionend","focus","blur","change","readOnly","disabled","value"],["class","ng-clear-wrapper","tabindex","0",3,"title",4,"ngIf"],[1,"ng-arrow-wrapper"],[1,"ng-arrow"],["class","ng-dropdown-panel","role","listbox","aria-label","Options list",3,"virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","ng-select-multiple","ngClass","id","update","scroll","scrollToEnd","outsideClick",4,"ngIf"],["class","ng-value",3,"ng-value-disabled",4,"ngFor","ngForOf","ngForTrackBy"],[1,"ng-value"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true",1,"ng-value-icon","left",3,"click"],[1,"ng-value-label",3,"ngItemLabel","escape"],[3,"ngTemplateOutlet"],[1,"ng-spinner-loader"],["tabindex","0",1,"ng-clear-wrapper",3,"title"],["aria-hidden","true",1,"ng-clear"],["role","listbox","aria-label","Options list",1,"ng-dropdown-panel",3,"update","scroll","scrollToEnd","outsideClick","virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","ngClass","id"],["class","ng-option",3,"ng-option-disabled","ng-option-selected","ng-optgroup","ng-option","ng-option-child","ng-option-marked","click","mouseover",4,"ngFor","ngForOf","ngForTrackBy"],["class","ng-option","role","option",3,"ng-option-marked","mouseover","click",4,"ngIf"],[1,"ng-option",3,"click","mouseover"],[1,"ng-option-label",3,"ngItemLabel","escape"],["role","option",1,"ng-option",3,"mouseover","click"],[1,"ng-tag-label"],[1,"ng-option","ng-option-disabled"]],template:function(i,r){if(i&1){let a=yt();W(0,"div",9),Pe("mousedown",function(o){return ae(a),ne(r.handleMousedown(o))}),W(1,"div",10)(2,"div",11),Fe(3),q(),oe(4,fg,2,2,"ng-container",12)(5,vg,1,5,null,12),W(6,"div",13)(7,"input",14,0),Pe("input",function(){ae(a);let o=Ie(8);return ne(r.filter(o.value))})("compositionstart",function(){return ae(a),ne(r.onCompositionStart())})("compositionend",function(){ae(a);let o=Ie(8);return ne(r.onCompositionEnd(o.value))})("focus",function(o){return ae(a),ne(r.onInputFocus(o))})("blur",function(o){return ae(a),ne(r.onInputBlur(o))})("change",function(o){return ae(a),ne(o.stopPropagation())}),q()()(),oe(9,bg,4,1,"ng-container",12)(10,wg,4,1,"span",15),W(11,"span",16),ze(12,"span",17),q()(),oe(13,Ng,7,19,"ng-dropdown-panel",18)}i&2&&(ke("ng-appearance-outline",r.appearance==="outline")("ng-has-value",r.hasValue),R(3),St(r.placeholder),R(),O("ngIf",(!r.multiLabelTemplate||!r.multiple)&&r.selectedItems.length>0),R(),O("ngIf",r.multiple&&r.multiLabelTemplate&&r.selectedValues.length>0),R(),ls("aria-expanded",r.isOpen)("aria-owns",r.isOpen?r.dropdownId:null),R(),O("readOnly",!r.searchable||r.itemsList.maxItemsSelected)("disabled",r.disabled)("value",r.searchTerm?r.searchTerm:""),ls("id",r.labelForId)("tabindex",r.tabIndex)("aria-activedescendant",r.isOpen?r.itemsList==null||r.itemsList.markedItem==null?null:r.itemsList.markedItem.htmlId:null)("aria-controls",r.isOpen?r.dropdownId:null),R(2),O("ngIf",r.loading),R(),O("ngIf",r.showClear()),R(3),O("ngIf",r.isOpen))},dependencies:[rr,ar,ei,ti,Vn,zg],styles:[`@charset "UTF-8";.ng-select{position:relative;display:block;box-sizing:border-box}.ng-select div,.ng-select input,.ng-select span{box-sizing:border-box}.ng-select [hidden]{display:none}.ng-select.ng-select-searchable .ng-select-container .ng-value-container .ng-input{opacity:1}.ng-select.ng-select-opened .ng-select-container{z-index:1001}.ng-select.ng-select-disabled .ng-select-container .ng-value-container .ng-placeholder,.ng-select.ng-select-disabled .ng-select-container .ng-value-container .ng-value{-webkit-user-select:none;user-select:none;cursor:default}.ng-select.ng-select-disabled .ng-arrow-wrapper{cursor:default}.ng-select.ng-select-filtered .ng-placeholder{display:none}.ng-select .ng-select-container{cursor:default;display:flex;outline:none;overflow:hidden;position:relative;width:100%}.ng-select .ng-select-container .ng-value-container{display:flex;flex:1}.ng-select .ng-select-container .ng-value-container .ng-input{opacity:0}.ng-select .ng-select-container .ng-value-container .ng-input>input{box-sizing:content-box;background:none transparent;border:0 none;box-shadow:none;outline:none;padding:0;cursor:default;width:100%}.ng-select .ng-select-container .ng-value-container .ng-input>input::-ms-clear{display:none}.ng-select .ng-select-container .ng-value-container .ng-input>input[readonly]{-webkit-user-select:none;user-select:none;width:0;padding:0}.ng-select.ng-select-single.ng-select-filtered .ng-select-container .ng-value-container .ng-value{visibility:hidden}.ng-select.ng-select-single .ng-select-container .ng-value-container,.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-input{position:absolute;left:0;width:100%}.ng-select.ng-select-multiple.ng-select-disabled>.ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container{flex-wrap:wrap}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{position:absolute}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value{white-space:nowrap}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value.ng-value-disabled .ng-value-icon{display:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value .ng-value-icon{cursor:pointer}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-input{flex:1;z-index:2}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{z-index:1}.ng-select .ng-clear-wrapper{cursor:pointer;position:relative;width:17px;-webkit-user-select:none;user-select:none}.ng-select .ng-clear-wrapper .ng-clear{display:inline-block;font-size:18px;line-height:1;pointer-events:none}.ng-select .ng-spinner-loader{border-radius:50%;width:17px;height:17px;margin-right:5px;font-size:10px;position:relative;text-indent:-9999em;border-top:2px solid rgba(66,66,66,.2);border-right:2px solid rgba(66,66,66,.2);border-bottom:2px solid rgba(66,66,66,.2);border-left:2px solid #424242;transform:translateZ(0);animation:load8 .8s infinite linear}.ng-select .ng-spinner-loader:after{border-radius:50%;width:17px;height:17px}@keyframes load8{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.ng-select .ng-arrow-wrapper{cursor:pointer;position:relative;text-align:center;-webkit-user-select:none;user-select:none}.ng-select .ng-arrow-wrapper .ng-arrow{pointer-events:none;display:inline-block;height:0;width:0;position:relative}.ng-dropdown-panel{box-sizing:border-box;position:absolute;opacity:0;width:100%;z-index:1050;-webkit-overflow-scrolling:touch}.ng-dropdown-panel .ng-dropdown-panel-items{display:block;height:auto;box-sizing:border-box;max-height:240px;overflow-y:auto}.ng-dropdown-panel .ng-dropdown-panel-items .ng-optgroup{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option{box-sizing:border-box;cursor:pointer;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option .ng-option-label:empty:before{content:"\\200b"}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option .highlighted{font-weight:700;text-decoration:underline}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option.disabled{cursor:default}.ng-dropdown-panel .scroll-host{overflow:hidden;overflow-y:auto;position:relative;display:block;-webkit-overflow-scrolling:touch}.ng-dropdown-panel .scrollable-content{top:0;left:0;width:100%;height:100%;position:absolute}.ng-dropdown-panel .total-padding{width:1px;opacity:0}
`],encapsulation:2,changeDetection:0})}}return e})();function nm(){return new Ri}var Ri=class{constructor(){this._selected=[]}get value(){return this._selected}select(s,t,i){if(s.selected=!0,(!s.children||!t&&i)&&this._selected.push(s),t)if(s.parent){let r=s.parent.children.length,a=s.parent.children.filter(n=>n.selected).length;s.parent.selected=r===a}else s.children&&(this._setChildrenSelectedState(s.children,!0),this._removeChildren(s),i&&this._activeChildren(s)?this._selected=[...this._selected.filter(r=>r.parent!==s),s]:this._selected=[...this._selected,...s.children.filter(r=>!r.disabled)])}unselect(s,t){if(this._selected=this._selected.filter(i=>i!==s),s.selected=!1,t)if(s.parent&&s.parent.selected){let i=s.parent.children;this._removeParent(s.parent),this._removeChildren(s.parent),this._selected.push(...i.filter(r=>r!==s&&!r.disabled)),s.parent.selected=!1}else s.children&&(this._setChildrenSelectedState(s.children,!1),this._removeChildren(s))}clear(s){this._selected=s?this._selected.filter(t=>t.disabled):[]}_setChildrenSelectedState(s,t){for(let i of s)i.disabled||(i.selected=t)}_removeChildren(s){this._selected=[...this._selected.filter(t=>t.parent!==s),...s.children.filter(t=>t.parent===s&&t.disabled&&t.selected)]}_removeParent(s){this._selected=this._selected.filter(t=>t!==s)}_activeChildren(s){return s.children.every(t=>!t.disabled||t.selected)}},Ry=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=ns({type:e})}static{this.\u0275inj=as({providers:[{provide:Wn,useValue:nm}],imports:[nr]})}}return e})();function om(e,s,t,i){let r=window&&!!window.document&&window.document.documentElement,a=r&&s?window:t;if(e&&(a=e&&r&&typeof e=="string"?lm(e,t.nativeElement,i):e,!a))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return a}function lm(e,s,t){return(t?window.document:s).querySelector(e)}function Di(e){return e&&!e.firstChange}function cm(){return typeof window<"u"}var dm={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},hm={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"},Li=class{constructor(s=!0){this.vertical=s,this.propsMap=s?dm:hm}clientHeightKey(){return this.propsMap.clientHeight}offsetHeightKey(){return this.propsMap.offsetHeight}scrollHeightKey(){return this.propsMap.scrollHeight}pageYOffsetKey(){return this.propsMap.pageYOffset}offsetTopKey(){return this.propsMap.offsetTop}scrollTopKey(){return this.propsMap.scrollTop}topKey(){return this.propsMap.top}};function um(e,s,t){return!!(e&&s||!t&&s)}function pm({windowElement:e,axis:s}){return gm({axis:s,isWindow:mm(e)},e)}function gm(e,s){let t=e.isWindow||s&&!s.nativeElement?s:s.nativeElement;return N(L({},e),{container:t})}function mm(e){return["Window","global"].some(t=>Object.prototype.toString.call(e).includes(t))}function Oi(e,s){return e?s.document.documentElement:null}function jn(e,s){let t=vm(s);return s.isWindow?fm(t,e,s):Cm(t,e,s)}function fm(e,s,t){let{axis:i,container:r,isWindow:a}=t,{offsetHeightKey:n,clientHeightKey:o}=$n(i),l=e+qn(Oi(a,r),i,a),c=Yn(s.nativeElement,a,n,o),d=ym(s.nativeElement,i,a)+c;return{height:e,scrolled:l,totalToScroll:d,isWindow:a}}function Cm(e,s,t){let{axis:i,container:r}=t,a=r[i.scrollTopKey()],n=r[i.scrollHeightKey()];return{height:e,scrolled:a,totalToScroll:n,isWindow:!1}}function $n(e){return{offsetHeightKey:e.offsetHeightKey(),clientHeightKey:e.clientHeightKey()}}function vm({container:e,isWindow:s,axis:t}){let{offsetHeightKey:i,clientHeightKey:r}=$n(t);return Yn(e,s,i,r)}function Yn(e,s,t,i){if(isNaN(e[t])){let r=Oi(s,e);return r?r[i]:0}else return e[t]}function ym(e,s,t){let i=s.topKey();if(e.getBoundingClientRect)return e.getBoundingClientRect()[i]+qn(e,s,t)}function qn(e,s,t){let i=s.pageYOffsetKey(),r=s.scrollTopKey(),a=s.offsetTopKey();return isNaN(window.pageYOffset)?Oi(t,e)[r]:e.ownerDocument?e.ownerDocument.defaultView[i]:e[a]}function Sm(e,s={down:0,up:0},t){let i,r;if(e.totalToScroll<=0)return!1;let a=e.isWindow?e.scrolled:e.height+e.scrolled;if(t)i=(e.totalToScroll-a)/e.totalToScroll,r=(s?.down?s.down:0)/10;else{let o=e.scrolled+(e.totalToScroll-a);i=e.scrolled/o,r=(s?.up?s.up:0)/10}return i<=r}function bm(e,s){return e<s.scrolled}function wm(e,s,t){let i=bm(e,s);return{fire:Sm(s,t,i),scrollDown:i}}var _i=class{constructor(s){this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},Object.assign(this,s)}updateScrollPosition(s){return this.lastScrollPosition=s}updateTotalToScroll(s){this.lastTotalToScroll!==s&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=s)}updateScroll(s,t){this.updateScrollPosition(s),this.updateTotalToScroll(t)}updateTriggeredFlag(s,t){t?this.triggered.down=s:this.triggered.up=s}isTriggeredScroll(s,t){return t?this.triggered.down===s:this.triggered.up===s}};function xm(e){let{scrollContainer:s,scrollWindow:t,element:i,fromRoot:r}=e,a=pm({axis:new Li(!e.horizontal),windowElement:om(s,t,i,r)}),n=new _i({totalToScroll:jn(i,a).totalToScroll}),o={container:a.container,throttle:e.throttle},l={up:e.upDistance,down:e.downDistance};return Tm(o).pipe(Hi(()=>Bi(jn(i,a))),Bt(c=>Am(n.lastScrollPosition,c,l)),Vt(({stats:c})=>n.updateScroll(c.scrolled,c.totalToScroll)),rs(({fire:c,scrollDown:d,stats:{totalToScroll:h}})=>um(e.alwaysCallback,c,n.isTriggeredScroll(h,d))),Vt(({scrollDown:c,stats:{totalToScroll:d}})=>{n.updateTriggeredFlag(d,c)}),Bt(Fm))}function Tm(e){let s=tt(e.container,"scroll");return e.throttle&&(s=s.pipe(Wi(e.throttle,void 0,{leading:!0,trailing:!0}))),s}function Am(e,s,t){let{scrollDown:i,fire:r}=wm(e,s,t);return{scrollDown:i,fire:r,stats:s}}var ki={DOWN:"[NGX_ISE] DOWN",UP:"[NGX_ISE] UP"};function Fm(e){let{scrollDown:s,stats:{scrolled:t}}=e;return{type:s?ki.DOWN:ki.UP,payload:{currentScrollPosition:t}}}var Hy=(()=>{class e{constructor(t,i){this.element=t,this.zone=i,this.scrolled=new J,this.scrolledUp=new J,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}ngAfterViewInit(){this.infiniteScrollDisabled||this.setup()}ngOnChanges({infiniteScrollContainer:t,infiniteScrollDisabled:i,infiniteScrollDistance:r}){let a=Di(t),n=Di(i),o=Di(r),l=!n&&!this.infiniteScrollDisabled||n&&!i.currentValue||o;(a||n||o)&&(this.destroyScroller(),l&&this.setup())}ngOnDestroy(){this.destroyScroller()}setup(){cm()&&this.zone.runOutsideAngular(()=>{this.disposeScroller=xm({fromRoot:this.fromRoot,alwaysCallback:this.alwaysCallback,disable:this.infiniteScrollDisabled,downDistance:this.infiniteScrollDistance,element:this.element,horizontal:this.horizontal,scrollContainer:this.infiniteScrollContainer,scrollWindow:this.scrollWindow,throttle:this.infiniteScrollThrottle,upDistance:this.infiniteScrollUpDistance}).subscribe(t=>this.handleOnScroll(t))})}handleOnScroll({type:t,payload:i}){let r=t===ki.DOWN?this.scrolled:this.scrolledUp;Em(r)&&this.zone.run(()=>r.emit(i))}destroyScroller(){this.disposeScroller&&this.disposeScroller.unsubscribe()}static{this.\u0275fac=function(i){return new(i||e)(G(Ae),G(os))}}static{this.\u0275dir=he({type:e,selectors:[["","infiniteScroll",""],["","infinite-scroll",""],["","data-infinite-scroll",""]],inputs:{infiniteScrollDistance:"infiniteScrollDistance",infiniteScrollUpDistance:"infiniteScrollUpDistance",infiniteScrollThrottle:"infiniteScrollThrottle",infiniteScrollDisabled:"infiniteScrollDisabled",infiniteScrollContainer:"infiniteScrollContainer",scrollWindow:"scrollWindow",immediateCheck:"immediateCheck",horizontal:"horizontal",alwaysCallback:"alwaysCallback",fromRoot:"fromRoot"},outputs:{scrolled:"scrolled",scrolledUp:"scrolledUp"},standalone:!0,features:[it]})}}return e})();function Em(e){return e.observed??e.observers.length>0}var Uy=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=ns({type:e})}static{this.\u0275inj=as({})}}return e})();var Wy=(()=>{class e{constructor(){this.itemCount=0}agInit(t){this.params=t,this.itemCount=Array.isArray(t.value)?t.value.length:0}refresh(){return!1}onClick(){this.params?.onAttachmentClick&&this.params.onAttachmentClick(this.params.data)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=vt({type:e,selectors:[["app-attachemnt-render"]],decls:6,vars:1,consts:[[1,"attachment-cell",2,"position","relative","display","inline-block"],[1,"attachment-icon",2,"margin-top","6px","margin-right","8px","width","28px","height","28px","background-color","#F5F5F5","border-radius","4px","display","flex","align-items","center","justify-content","center","position","relative","cursor","pointer",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24"],["fill","#5F6368","d","M16.5 6v11.5a4 4 0 0 1-4 4a4 4 0 0 1-4-4V5A2.5 2.5 0 0 1 11 2.5A2.5 2.5 0 0 1 13.5 5v10.5a1 1 0 0 1-1 1a1 1 0 0 1-1-1V6H10v9.5a2.5 2.5 0 0 0 2.5 2.5a2.5 2.5 0 0 0 2.5-2.5V5a4 4 0 0 0-4-4a4 4 0 0 0-4 4v12.5a5.5 5.5 0 0 0 5.5 5.5a5.5 5.5 0 0 0 5.5-5.5V6z"],[2,"position","absolute","top","-5px","right","-5px","background-color","#5D87FF","color","white","border-radius","50%","width","16px","height","16px","display","flex","align-items","center","justify-content","center","font-size","10px","font-weight","bold"]],template:function(i,r){i&1&&(W(0,"div",0)(1,"div",1),Pe("click",function(){return r.onClick()}),Yi(),W(2,"svg",2),ze(3,"path",3),q(),qi(),W(4,"span",4),Fe(5),q()()()),i&2&&(R(5),cs(" ",r.itemCount," "))}})}}return e})();function $y(e){return new Date(e).toISOString()}function Yy(e){return new Date(e).toISOString().split("T")[0]}function qy(e){return new Date(e).toISOString().split("T")[0]}function Xy(){return e=>new Date(e.value)<=new Date?null:{dateInFuture:!0}}var Zy=[{month:1,name:"January",days:31},{month:2,name:"February",days:28},{month:3,name:"March",days:31},{month:4,name:"April",days:30},{month:5,name:"May",days:31},{month:6,name:"June",days:30},{month:7,name:"July",days:31},{month:8,name:"August",days:31},{month:9,name:"September",days:30},{month:10,name:"October",days:31},{month:11,name:"November",days:30},{month:12,name:"December",days:31}];function Jy(e,s){return t=>{let i=t.get(e),r=t.get(s);if(!i||!r)return null;let a=new Date(i.value);return new Date(r.value)>a?null:{dateOrderInvalid:!0}}}function Qy(e,s={isFuture:!1}){let t=new Date,i=new Date(t),r=new Date(t);return s.isFuture?(r.setMonth(r.getMonth()+Number(e)),r.getDate()<t.getDate()&&r.setDate(0)):(i.setMonth(i.getMonth()-Number(e)),i.getDate()<t.getDate()&&i.setDate(0)),{startDate:Xn(i),endDate:Xn(r)}}function Xn(e){return e.toISOString().split("T")[0]}function eS(e){let s=new Date(e),t={month:"short",day:"numeric"};return new Intl.DateTimeFormat("en-US",t).format(s)}function tS(){return e=>{if(!e.value)return null;let s=new Date(e.value),t=new Date,i=new Date;i.setFullYear(t.getFullYear()-10);let r=new Date;return r.setFullYear(t.getFullYear()+1),s<i||s>r?{dateOutOfRange:"Date must be within the last 10 years and next year."}:null}}var nS=(()=>{class e{constructor(t,i){this.http=t,this.errorHandler=i,this._apiUrl=ie.apiUrl,this._baseApiUrl=ie.baseApiUrl,this._getVesselByOwnerUrl="api/Vessel/GetVesselsBy/",this._getVesselUrl="api/Vessel/GetAllVessels",this._createVesselUrl="api/Vessel/Create",this._getYachtByIdUrl="api/Vessel/GetVessel",this._updateYachtUrl="api/Vessel/Update",this._deleteYachtUrl="api/Vessel/Delete",this._getTotalBalanceById="api/VesselOverview/Totalbalance",this._getVesselCalculations="GetvesselCalculations",this._statusList="api/Status/GetVesselStatus"}getYachts(t){let i=t?{params:new Oe().set("VesselName",t)}:{};return this.http.get(this._apiUrl+this._getVesselUrl,i).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getYachtsByOwner(t,i){let r=i?{params:new Oe().set("VesselName",i)}:{};return this.http.get(this._apiUrl+this._getVesselByOwnerUrl+t,r).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}createYacht(t,i,r){let a=new FormData,n=(l,c)=>{a.append(l,c??"")},o={VesselName:t.vesselName,VesselTypeId:t.vesselTypeId,ActivityTypeId:t.activityTypeId,VesselYear:t.vesselYear,TimeZone:t.timeZone,CountryId:t.countryId,Location:t.location,Length:t.length,MaxCrew:t.maxCrew,OfficialNumber:t.officialNumber,NumberOfCabins:t.numberOfCabins,NumberOfSeats:t.numberOfSeats,MMSI:t.mmsi,IMONumber:t.imoNumber,TenderAndSeaToys:t.tenderAndSeaToys,IsAvailable:t.isAvailable?"true":"false",UserId:t.userId,OrganizationId:t.organizationId,StatusId:t.status};for(let l in o)n(l,o[l]?.toString());return a.append("YatchPhoto",r??""),a.append("YatchLogo",i??""),this.http.post(this._apiUrl+this._createVesselUrl,a).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getYachtById(t){return this.http.get(this._apiUrl+this._getYachtByIdUrl+"/"+t).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}updateYacht(t,i,r,a){let n=new FormData,o=(c,d)=>{n.append(c,d??"")},l={VesselName:i.vesselName,VesselTypeId:i.vesselTypeId,ActivityTypeId:i.activityTypeId,VesselYear:i.vesselYear,TimeZone:i.timeZone,CountryId:i.countryId,Location:i.location,Length:i.length,MaxCrew:i.maxCrew,OfficialNumber:i.officialNumber,NumberOfCabins:i.numberOfCabins,NumberOfSeats:i.numberOfSeats,MMSI:i.mmsi,IMONumber:i.imoNumber,TenderAndSeaToys:i.tenderAndSeaToys,IsAvailable:i.isAvailable?"true":"false",UserId:i.userId,OrganizationId:i.organizationId,StatusId:i.status};for(let c in l)o(c,l[c]?.toString());return n.append("YatchPhoto",r??""),n.append("YatchLogo",a??""),this.http.put(`${this._apiUrl}${this._updateYachtUrl}/${t}`,n).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}deleteYacht(t){return this.http.delete(`${this._apiUrl}${this._deleteYachtUrl}/${t}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getDropDownData(t){return this.http.get(this._apiUrl+t).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getStatusList(){return this.http.get(this._apiUrl+this._statusList).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getDropDownDataFromBaseApi(t){return this.http.get(this._baseApiUrl+t).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getTotalBalanceByOwnerId(t){return this.http.get(this._apiUrl+this._getTotalBalanceById+"/"+t).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getImageUrl(t){if(!t)return;let i=t.trim().replace(/^\/+/,"");return`${this._apiUrl}${i}`}getTileData(t){return this.http.get(this._apiUrl+t).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getVesselCalculations(t,i,r){return this.http.get(this._apiUrl+this._getVesselCalculations+`/${t}?fromDate=${i}&toDate=${r}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}static{this.\u0275fac=function(i){return new(i||e)(V(me),V(Se))}}static{this.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function lS(e,s=100){let t=document.createElement("div");t.style.color=e,document.body.appendChild(t);let i=getComputedStyle(t).color;document.body.removeChild(t);let r=i.match(/\d+/g);if(!r||r.length<3)return e;let[a,n,o]=r.map(Number);return a=Math.min(255,a+s),n=Math.min(255,n+s),o=Math.min(255,o+s),`rgb(${a}, ${n}, ${o})`}var uS=(()=>{class e{constructor(t,i){this.http=t,this.errorHandler=i,this._apiUrl=ie.apiUrl,this._bookingStatus="api/Status/get-booking-status",this._paymentStatus="api/Status/payement-status",this._cardStatusUrl="api/Status/GetCardStatus",this._cashboxStatusUrl="api/Status/GetCashBoxStatus",this._expenseHeaderStatus="api/Status/GetExpenseHeaderStatus",this._payableHeaderStatus="api/Status/GetPayableHeaderStatus",this._applicantStatus="api/Status/Applicants-status",this._topUpRequestStatus="api/Status/TopUp-status",this._crewPoolStatus="api/Status/CrewPool-status",this._jobStatusUrl="api/Status/GetJobStatus",this._applicantEditStatus="api/Status/GetOwnerApplicantStatus"}getAllBookingStatus(){return this.http.get(`${this._apiUrl}${this._bookingStatus}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getAllPaymentStatus(){return this.http.get(`${this._apiUrl}${this._paymentStatus}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getAllCardStatus(){return this.http.get(`${this._apiUrl}${this._cardStatusUrl}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getAllCrewPoolStatus(){return this.http.get(`${this._apiUrl}${this._crewPoolStatus}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getAllCashboxStatus(){return this.http.get(`${this._apiUrl}${this._cashboxStatusUrl}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getAllExpHeaderStatus(){return this.http.get(`${this._apiUrl}${this._expenseHeaderStatus}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getAllPayableHeaderStatus(){return this.http.get(`${this._apiUrl}${this._payableHeaderStatus}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getAllApplicantHeaderStatus(){return this.http.get(`${this._apiUrl}${this._applicantStatus}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getAllApplicantHeaderEditStatus(){return this.http.get(`${this._apiUrl}${this._applicantEditStatus}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getAllTopUpRequestStatus(){return this.http.get(`${this._apiUrl}${this._topUpRequestStatus}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getAllJobStatus(){return this.http.get(`${this._apiUrl}${this._jobStatusUrl}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}static{this.\u0275fac=function(i){return new(i||e)(V(me),V(Se))}}static{this.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var gS=(()=>{class e{mapItemsToStatus(t,i){let r=i||[];return t=t||[],t.map((a,n)=>{if(n===0)return N(L({},a),{count:r.length,data:r});let o=r.filter(l=>l.statusId===a.id);return N(L({},a),{count:o.length,data:o})})}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var yS=(()=>{class e{constructor(t,i){this.http=t,this.errorHandler=i,this._apiUrl=ie.apiUrl,this._baseApiUrl=ie.baseApiUrl,this._getCountryUrl="api/Country/get-all",this._getCurrencyUrl="api/Currency/get-all",this._getAllLanguagesUrl="api/Language/get-all"}getAllCoutry(){return this.http.get(this._baseApiUrl+this._getCountryUrl).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getAllCurrency(){return this.http.get(this._baseApiUrl+this._getCurrencyUrl).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}fetchAllLanguages(){return this.http.get(this._baseApiUrl+this._getAllLanguagesUrl).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}static{this.\u0275fac=function(i){return new(i||e)(V(me),V(Se))}}static{this.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var TS=(()=>{class e{constructor(t,i){this.http=t,this.errorHandler=i,this._apiUrl=ie.apiUrl,this._createCashBoxUrl="api/CashBox/CreateCashBox",this._getAllJobsUrl="api/Job/GetAllJobs",this._getAllJobByVesselUrl="api/Job/GetAllJobsByVesselId",this._createJobUrl="api/Job/Create",this._getAllJobGroups="api/JobGroup/GetAllJobGroups",this._getAllJobTypes="api/JobType/GetAllJobTypes",this._getJobDetails="api/Job/GetJob",this._deleteJob="api/job/Delete",this._updateJob="api/Job/Update"}getAllJobs(t){let i=new Oe;return t&&Object.keys(t).forEach(r=>{t[r]!==null&&t[r]!==void 0&&(i=i.set(r,t[r]))}),this.http.get(this._apiUrl+this._getAllJobsUrl,{params:i})}createCashBox(t){return this.http.post(this._apiUrl+this._createCashBoxUrl,t).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}createJob(t){return this.http.post(this._apiUrl+this._createJobUrl,t).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}updateJob(t,i){return this.http.put(this._apiUrl+this._updateJob+"/"+i,t).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getJobGroups(){return this.http.get(`${this._apiUrl}${this._getAllJobGroups}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getJobTypes(){return this.http.get(`${this._apiUrl}${this._getAllJobTypes}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getJobDetailsById(t){return this.http.get(`${this._apiUrl}${this._getJobDetails}/${t}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}deleteJob(t){return this.http.delete(`${this._apiUrl}${this._deleteJob}/${t}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getJobsByVessel({id:t,JobTitle:i,Location:r,City:a,StatusId:n,PageNumber:o}){return this.http.get(`${this._apiUrl}${this._getAllJobByVesselUrl}/${t}?JobTitle=${i}&Location=${r||""}&City=${a}&StatusIds=${n}&PageNumber=${o}&PageSize=10`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}static{this.\u0275fac=function(i){return new(i||e)(V(me),V(Se))}}static{this.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var IS=(()=>{class e{constructor(t,i,r){this.http=t,this.errorHandler=i,this._storage=r,this._apiUrl=ie.apiUrl,this._baseApiUrl=ie.baseApiUrl,this._getAllApplicantsUrl="api/Applicant/GetAll",this._getAplicantByIdUrl="api/Applicant/GetByUserId",this._assignCrewPoolUrl="api/CrewAssignment/AssignCrew",this._updateApplicant="api/Applicant/UpdateApplicants",this._createApplicant="api/Applicant/CreateApplicants",this._getApplicantByuserId="api/Applicant/GetJobsAppliedByUserId",this._getFilteredByuserId="api/Applicant/GetFilteredByUserId",this._applicantListByOwner="api/Applicant/by-owner",this._getApplicantByVesselUrl="api/Applicant/GetByVesselId",this.getAllPositionsUrl="api/GroupAndPosition/Positions",this._getVactionPlan="api/VacationPlan/GetByApplicantAndJob",this._saveVactionPlan="api/VacationPlan/VactionPlan",this._deleteVactionPlan="api/VacationPlan/DeleteByApplicantJobAndId"}getAllApplicants(t){let r={params:new Oe().append("OwnerId",this._storage.getUserId()).append("VesselId",t)};return this.http.get(this._apiUrl+this._getApplicantByVesselUrl,r).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getAllPositions(){return this.http.get(this._baseApiUrl+this.getAllPositionsUrl).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getAplicantById(t){return this.http.get(this._apiUrl+this._getAplicantByIdUrl+"/"+t).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}assignToCrewPool(t){return this.http.post(this._apiUrl+this._assignCrewPoolUrl,t).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}updateApplicant(t){return this.http.put(this._apiUrl+this._updateApplicant,t).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}createApplicant(t){return this.http.post(this._apiUrl+this._createApplicant,t).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getApplicantByOwner(t){return this.http.get(`${this._apiUrl}${this._applicantListByOwner}?ownerId=${t}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getApplicantByUserId(t){return this.http.get(`${this._apiUrl}${this._getApplicantByuserId}/${t}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getFilteredByUserId({id:t,JobTitle:i,VesselId:r}){let a=new Oe;return i&&(a=a.set("JobTitle",i)),this.http.get(`${this._apiUrl}${this._getFilteredByuserId}/${t}`,{params:a}).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getApplicantFilter(t){let i=new Oe;return t&&Object.keys(t).forEach(r=>{t[r]!==null&&t[r]!==void 0&&(i=i.set(r,t[r]))}),this.http.get(this._apiUrl+this._getApplicantByVesselUrl,{params:i})}getVacationPlan(t,i){return this.http.get(`${this._apiUrl}${this._getVactionPlan}?applicantId=${t}&jobId=${i}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}saveVactionPlan(t){return this.http.post(this._apiUrl+this._saveVactionPlan,t).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}deleteVacationPlan(t,i,r){return this.http.delete(`${this._apiUrl}${this._deleteVactionPlan}?id=${t}&applicantId=${i}&jobId=${r}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}static{this.\u0275fac=function(i){return new(i||e)(V(me),V(Se),V(cr))}}static{this.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var _S=(()=>{class e{constructor(t,i){this.http=t,this.errorHandler=i,this._apiUrl=ie.apiUrl,this._baseApiUrl=ie.baseApiUrl,this._userDetailsUrl="api/User/user-details",this._documentsNCertificatesUrl="api/DocumentsAndCertificates/get-all",this._educationNCoursesUrl="api/EducationHeader/GetAllEducationHeaders",this._crewExperienceUrl="api/CrewExperience/get-all",this._updateCrewProfile="api/Crew/update-profile",this._certificatesNDocsUrl="api/DocumentsAndCertificates",this._getDocumentsNCertificates="api/DocumentsAndCertificates/GetDocumentsByUserId",this._deleteDocsNCertificateUrl="api/DocumentsAndCertificates/DeleteDocumentById",this._updateDocsNCertificatesUrl="api/DocumentsAndCertificates",this._getCrewContractsUrl="api/Contract/GetUserContracts/",this.uploadCrewExperienceUrl="api/CrewExperience",this._deleteCrewExperienceUrl="api/CrewExperience/delete",this._updateCrewExperienceUrl="api/CrewExperience/update",this._crewExperienceOverviewUrl="api/CrewExperience/GetExperienceOverview",this._jobAppliedByUser="api/Applicant/GetJobsAppliedByUserId",this._activeOffers="api/Applicant/GetFilteredByUserId",this._pendingApplication="/api/Applicant/GetPendingByUserId",this._currentPosition="api/CrewPool/GetCurrentAssignment",this._getDocument="api/DocumentsAndCertificates/GetDocumentsByUserId",this._getApplicantStatus="api/Status/Applicants-status",this._getProfileCompletionStat="api/Profile/GetProfileCompletionStat"}fetchUserDetails(t){return this.http.get(this._baseApiUrl+this._userDetailsUrl+"/"+t).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}fetchDocsNCertificates(t){return this.http.get(this._apiUrl+this._documentsNCertificatesUrl+"/"+t).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}fetchEducationNCourses(t){return this.http.get(this._apiUrl+this._educationNCoursesUrl+"/"+t).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}fetchCrewExperience(t){return this.http.get(this._apiUrl+this._crewExperienceUrl+"/"+t).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}modifyCrewProfile(t){return this.http.put(`${this._baseApiUrl}${this._updateCrewProfile}`,t,{headers:{}}).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}uploadCertificatesNDocs(t){return this.http.post(this._apiUrl+this._certificatesNDocsUrl,t).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}fetchCertificatesNDocs(t){return this.http.get(this._apiUrl+this._getDocumentsNCertificates+`/${t}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}fetchCrewContracts(t){return this.http.get(this._apiUrl+this._getCrewContractsUrl+`${t}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}uploadCrewExperienceDocs(t,i){return this.http.post(this._apiUrl+this.uploadCrewExperienceUrl+`/${t}`,i).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}deleteDocsNCertificates(t){return this.http.delete(this._apiUrl+this._deleteDocsNCertificateUrl+`/${t}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}deleteCrewExperience(t){return this.http.delete(this._apiUrl+this._deleteCrewExperienceUrl+`/${t}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}updateDocsNCertificates(t){return this.http.put(this._apiUrl+this._updateDocsNCertificatesUrl,t).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}updateCrewExperience(t,i){return this.http.put(this._apiUrl+this._updateCrewExperienceUrl+`/${t}`,i).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}fetchCrewExperienceOverview(t){return this.http.get(this._apiUrl+this._crewExperienceOverviewUrl+`/${t}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}GetJobAppliedByUser(t,i,r){return this.http.get(this._apiUrl+this._jobAppliedByUser+`/${t}?statusId=${i}&jobTitle=${r}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}GetActiveOffers(t){return this.http.get(this._apiUrl+this._activeOffers+`/${t}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}GetPendingApplication(t){return this.http.get(this._apiUrl+this._pendingApplication+`/${t}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}GetCurrentPosition(t){return this.http.get(this._apiUrl+this._currentPosition+`/${t}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}GetDocument(t){return this.http.get(`${this._apiUrl}${this._getDocument}/${t}?hasExpiration=true`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}GetApplicantStatus(){return this.http.get(this._apiUrl+this._getApplicantStatus).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getProfileCompletion(t){return this.http.get(this._apiUrl+this._getProfileCompletionStat+"/"+t).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}static{this.\u0275fac=function(i){return new(i||e)(V(me),V(Se))}}static{this.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Zn=(()=>{class e{constructor(t){this._snackbar=t}handleError(t){console.error("Full error response:",t);let i="";if(t.error instanceof ErrorEvent)i=`Client-side error: ${t.error.message}`;else switch(t.status){case 409:i=Mm(t);break;case 400:i=Pm(t.error)||"Invalid request.";break;case 404:i=Im(t)||`Not Found: ${t.error?.message||"Resource not found"}`;break;default:i=t.error?.message||"Unknown error";break}return console.error("Processed error message:",i),Vi(()=>new Error(i))}showSnackbar(t){this._snackbar.error(t)}static{this.\u0275fac=function(i){return new(i||e)(V(or))}}static{this.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Mm(e){return`Conflict: ${e.error?.message||e.error?.errormessage||"Unknown conflict error"}`}function Pm(e){let s=[];if(Array.isArray(e?.errors))return e.errors.join(" | ");if(typeof e=="object"&&e!==null)for(let t in e){if(!Object.prototype.hasOwnProperty.call(e,t))continue;let i=e[t];Array.isArray(i)?s.push(`${t}: ${i.join(", ")}`):typeof i=="string"&&s.push(`${t}: ${i}`)}return s.join(" | ")}function Im(e){let s=e.error,t=[];if(typeof s=="object"&&s!==null)for(let i in s){if(!Object.prototype.hasOwnProperty.call(s,i))continue;let r=s[i];Array.isArray(r)&&t.push(`${i}: ${r.join(", ")}`)}return t.join(" | ")}var VS=(()=>{class e{constructor(t,i){this.http=t,this.errorHandler=i,this._apiUrl=ie.apiUrl,this._getAllEducationHeaderUrl="api/EducationHeader/GetAllEducationHeaders",this._createEducationHeaderUrl="api/EducationHeader/CreateEducationHeader",this._deleteEducationHeaderUrl="api/EducationHeader/DeleteEducationHeader",this._updateEducationHeaderUrl="api/EducationHeader/UpdateEducationHeader",this._getEducationDetailsByUserId="api/EducationHeader/GetEducationDetailsByUserId"}getAllEducationHeader(){return this.http.get(`${this._apiUrl}${this._getAllEducationHeaderUrl}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}getEducationDetailsByUserId(t){return this.http.get(`${this._apiUrl}${this._getEducationDetailsByUserId}/${t}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}createEducation(t){return this.http.post(`${this._apiUrl}${this._createEducationHeaderUrl}`,t).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}deleteEducation(t){return this.http.delete(`${this._apiUrl}${this._deleteEducationHeaderUrl}/${t}`).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}updateEducation(t,i){return this.http.put(`${this._apiUrl}${this._updateEducationHeaderUrl}`,i).pipe(C(this.errorHandler.handleError.bind(this.errorHandler)))}static{this.\u0275fac=function(i){return new(i||e)(V(me),V(Zn))}}static{this.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();export{$y as a,Yy as b,qy as c,Xy as d,Zy as e,Jy as f,Qy as g,eS as h,tS as i,nS as j,Rf as k,Hf as l,Uf as m,Wf as n,vC as o,TC as p,lS as q,Kg as r,Iy as s,Ry as t,uS as u,gS as v,yS as w,Hy as x,Uy as y,TS as z,IS as A,_S as B,Wy as C,Zn as D,VS as E};
