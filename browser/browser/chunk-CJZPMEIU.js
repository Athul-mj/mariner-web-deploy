import{a as ti,b as Pa}from"./chunk-MX64MWKJ.js";import{a as Xt}from"./chunk-VYLNYDR5.js";import{A as Ot,B as wa,C as Ia,D as dn,E as hn,F as gn,G as Aa,H as mn,I as Ba,a as ya,b as xa,c as Tt,e as ee,g as wt,h as It,la as Oa,m as At,p as Pt,s as Bt,t as _a,u as Ea,v as Sa,w as ba,x as Ta,y as pn}from"./chunk-PWFIESBA.js";import{c as Wt}from"./chunk-YSHTC3YG.js";import{k as Ca,m as Zt,n as bt,p as ei}from"./chunk-AYWO7N2Q.js";import{$a as sn,$b as ua,$c as un,Aa as Me,Ab as P,Ba as ur,Cb as fr,Gb as Jn,Ha as Ht,Kb as x,Lb as E,Mb as U,Nb as ot,Ob as st,Qb as jt,Tb as ge,Vb as W,_b as ca,_c as br,ac as fa,ad as St,bd as ma,cc as I,cd as va,d as X,da as sa,dc as cn,e as t0,ec as pr,fa as an,fb as B,fc as pa,g as nn,gb as pe,kc as da,kd as fn,lc as ha,nc as ga,oa as qt,pa as ft,qa as on,sb as ln,xa as la,ya as pt,yb as Y,za as dt}from"./chunk-442KA2ER.js";var re=X((op,Ma)=>{"use strict";Ma.exports={options:{usePureJavaScript:!1}}});var Ra=X((sp,Na)=>{"use strict";var ri={};Na.exports=ri;var La={};ri.encode=function(e,t,n){if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');if(n!==void 0&&typeof n!="number")throw new TypeError('"maxline" must be a number.');var r="";if(!(e instanceof Uint8Array))r=r0(e,t);else{var i=0,a=t.length,o=t.charAt(0),s=[0];for(i=0;i<e.length;++i){for(var c=0,l=e[i];c<s.length;++c)l+=s[c]<<8,s[c]=l%a,l=l/a|0;for(;l>0;)s.push(l%a),l=l/a|0}for(i=0;e[i]===0&&i<e.length-1;++i)r+=o;for(i=s.length-1;i>=0;--i)r+=t[s[i]]}if(n){var u=new RegExp(".{1,"+n+"}","g");r=r.match(u).join(`\r
`)}return r};ri.decode=function(e,t){if(typeof e!="string")throw new TypeError('"input" must be a string.');if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');var n=La[t];if(!n){n=La[t]=[];for(var r=0;r<t.length;++r)n[t.charCodeAt(r)]=r}e=e.replace(/\s/g,"");for(var i=t.length,a=t.charAt(0),o=[0],r=0;r<e.length;r++){var s=n[e.charCodeAt(r)];if(s===void 0)return;for(var c=0,l=s;c<o.length;++c)l+=o[c]*i,o[c]=l&255,l>>=8;for(;l>0;)o.push(l&255),l>>=8}for(var u=0;e[u]===a&&u<e.length-1;++u)o.push(0);return typeof Buffer<"u"?Buffer.from(o.reverse()):new Uint8Array(o.reverse())};function r0(e,t){var n=0,r=t.length,i=t.charAt(0),a=[0];for(n=0;n<e.length();++n){for(var o=0,s=e.at(n);o<a.length;++o)s+=a[o]<<8,a[o]=s%r,s=s/r|0;for(;s>0;)a.push(s%r),s=s/r|0}var c="";for(n=0;e.at(n)===0&&n<e.length()-1;++n)c+=i;for(n=a.length-1;n>=0;--n)c+=t[a[n]];return c}});var ue=X((lp,Ua)=>{"use strict";var ka=re(),Da=Ra(),_=Ua.exports=ka.util=ka.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){_.nextTick=process.nextTick,typeof setImmediate=="function"?_.setImmediate=setImmediate:_.setImmediate=_.nextTick;return}if(typeof setImmediate=="function"){_.setImmediate=function(){return setImmediate.apply(void 0,arguments)},_.nextTick=function(s){return setImmediate(s)};return}if(_.setImmediate=function(s){setTimeout(s,0)},typeof window<"u"&&typeof window.postMessage=="function"){let s=function(c){if(c.source===window&&c.data===e){c.stopPropagation();var l=t.slice();t.length=0,l.forEach(function(u){u()})}};var o=s,e="forge.setImmediate",t=[];_.setImmediate=function(c){t.push(c),t.length===1&&window.postMessage(e,"*")},window.addEventListener("message",s,!0)}if(typeof MutationObserver<"u"){var n=Date.now(),r=!0,i=document.createElement("div"),t=[];new MutationObserver(function(){var c=t.slice();t.length=0,c.forEach(function(l){l()})}).observe(i,{attributes:!0});var a=_.setImmediate;_.setImmediate=function(c){Date.now()-n>15?(n=Date.now(),a(c)):(t.push(c),t.length===1&&i.setAttribute("a",r=!r))}}_.nextTick=_.setImmediate})();_.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;_.globalScope=function(){return _.isNodejs?global:typeof self>"u"?window:self}();_.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};_.isArrayBuffer=function(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer};_.isArrayBufferView=function(e){return e&&_.isArrayBuffer(e.buffer)&&e.byteLength!==void 0};function Kr(e){if(!(e===8||e===16||e===24||e===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}_.ByteBuffer=ni;function ni(e){if(this.data="",this.read=0,typeof e=="string")this.data=e;else if(_.isArrayBuffer(e)||_.isArrayBufferView(e))if(typeof Buffer<"u"&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch{for(var n=0;n<t.length;++n)this.putByte(t[n])}}else(e instanceof ni||typeof e=="object"&&typeof e.data=="string"&&typeof e.read=="number")&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}_.ByteStringBuffer=ni;var n0=4096;_.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>n0&&(this.data.substr(0,1),this._constructedStringLength=0)};_.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};_.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};_.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))};_.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var n=this.data;t>0;)t&1&&(n+=e),t>>>=1,t>0&&(e+=e);return this.data=n,this._optimizeConstructedString(t),this};_.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this};_.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(_.encodeUtf8(e))};_.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};_.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};_.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};_.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255))};_.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))};_.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))};_.ByteStringBuffer.prototype.putInt=function(e,t){Kr(t);var n="";do t-=8,n+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(n)};_.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)};_.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())};_.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};_.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e};_.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e};_.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e};_.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e};_.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e};_.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e};_.ByteStringBuffer.prototype.getInt=function(e){Kr(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t};_.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t};_.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};_.ByteStringBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};_.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)};_.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this};_.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};_.ByteStringBuffer.prototype.copy=function(){var e=_.createBuffer(this.data);return e.read=this.read,e};_.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};_.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};_.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this};_.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var n=this.data.charCodeAt(t);n<16&&(e+="0"),e+=n.toString(16)}return e};_.ByteStringBuffer.prototype.toString=function(){return _.decodeUtf8(this.bytes())};function i0(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var n=_.isArrayBuffer(e),r=_.isArrayBufferView(e);if(n||r){n?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),this.write="writeOffset"in t?t.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!=null&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)}_.DataBuffer=i0;_.DataBuffer.prototype.length=function(){return this.write-this.read};_.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};_.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var n=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),r=new Uint8Array(this.length()+t);return r.set(n),this.data=new DataView(r.buffer),this};_.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this};_.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var n=0;n<t;++n)this.data.setUint8(e);return this};_.DataBuffer.prototype.putBytes=function(e,t){if(_.isArrayBufferView(e)){var n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),r=n.byteLength-n.byteOffset;this.accommodate(r);var i=new Uint8Array(this.data.buffer,this.write);return i.set(n),this.write+=r,this}if(_.isArrayBuffer(e)){var n=new Uint8Array(e);this.accommodate(n.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(n,this.write),this.write+=n.byteLength,this}if(e instanceof _.DataBuffer||typeof e=="object"&&typeof e.read=="number"&&typeof e.write=="number"&&_.isArrayBufferView(e.data)){var n=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(n.byteLength);var i=new Uint8Array(e.data.byteLength,this.write);return i.set(n),this.write+=n.byteLength,this}if(e instanceof _.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary",typeof e=="string"){var a;if(t==="hex")return this.accommodate(Math.ceil(e.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=_.binary.hex.decode(e,a,this.write),this;if(t==="base64")return this.accommodate(Math.ceil(e.length/4)*3),a=new Uint8Array(this.data.buffer,this.write),this.write+=_.binary.base64.decode(e,a,this.write),this;if(t==="utf8"&&(e=_.encodeUtf8(e),t="binary"),t==="binary"||t==="raw")return this.accommodate(e.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=_.binary.raw.decode(a),this;if(t==="utf16")return this.accommodate(e.length*2),a=new Uint16Array(this.data.buffer,this.write),this.write+=_.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)};_.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this};_.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")};_.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this};_.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this};_.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this};_.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this};_.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this};_.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this};_.DataBuffer.prototype.putInt=function(e,t){Kr(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this};_.DataBuffer.prototype.putSignedInt=function(e,t){return Kr(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)};_.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};_.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e};_.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e};_.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e};_.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e};_.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e};_.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e};_.DataBuffer.prototype.getInt=function(e){Kr(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t};_.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t};_.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};_.DataBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};_.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)};_.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this};_.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};_.DataBuffer.prototype.copy=function(){return new _.DataBuffer(this)};_.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this};_.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};_.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this};_.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var n=this.data.getUint8(t);n<16&&(e+="0"),e+=n.toString(16)}return e};_.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8",e==="binary"||e==="raw")return _.binary.raw.encode(t);if(e==="hex")return _.binary.hex.encode(t);if(e==="base64")return _.binary.base64.encode(t);if(e==="utf8")return _.text.utf8.decode(t);if(e==="utf16")return _.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)};_.createBuffer=function(e,t){return t=t||"raw",e!==void 0&&t==="utf8"&&(e=_.encodeUtf8(e)),new _.ByteBuffer(e)};_.fillString=function(e,t){for(var n="";t>0;)t&1&&(n+=e),t>>>=1,t>0&&(e+=e);return n};_.xorBytes=function(e,t,n){for(var r="",i="",a="",o=0,s=0;n>0;--n,++o)i=e.charCodeAt(o)^t.charCodeAt(o),s>=10&&(r+=a,a="",s=0),a+=String.fromCharCode(i),++s;return r+=a,r};_.hexToBytes=function(e){var t="",n=0;for(e.length&!0&&(n=1,t+=String.fromCharCode(parseInt(e[0],16)));n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t};_.bytesToHex=function(e){return _.createBuffer(e).toHex()};_.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255)};var $t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Jt=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],Va="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";_.encode64=function(e,t){for(var n="",r="",i,a,o,s=0;s<e.length;)i=e.charCodeAt(s++),a=e.charCodeAt(s++),o=e.charCodeAt(s++),n+=$t.charAt(i>>2),n+=$t.charAt((i&3)<<4|a>>4),isNaN(a)?n+="==":(n+=$t.charAt((a&15)<<2|o>>6),n+=isNaN(o)?"=":$t.charAt(o&63)),t&&n.length>t&&(r+=n.substr(0,t)+`\r
`,n=n.substr(t));return r+=n,r};_.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t="",n,r,i,a,o=0;o<e.length;)n=Jt[e.charCodeAt(o++)-43],r=Jt[e.charCodeAt(o++)-43],i=Jt[e.charCodeAt(o++)-43],a=Jt[e.charCodeAt(o++)-43],t+=String.fromCharCode(n<<2|r>>4),i!==64&&(t+=String.fromCharCode((r&15)<<4|i>>2),a!==64&&(t+=String.fromCharCode((i&3)<<6|a)));return t};_.encodeUtf8=function(e){return unescape(encodeURIComponent(e))};_.decodeUtf8=function(e){return decodeURIComponent(escape(e))};_.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:Da.encode,decode:Da.decode}};_.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)};_.binary.raw.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(e.length)),n=n||0;for(var i=n,a=0;a<e.length;++a)r[i++]=e.charCodeAt(a);return t?i-n:r};_.binary.hex.encode=_.bytesToHex;_.binary.hex.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(Math.ceil(e.length/2))),n=n||0;var i=0,a=n;for(e.length&1&&(i=1,r[a++]=parseInt(e[0],16));i<e.length;i+=2)r[a++]=parseInt(e.substr(i,2),16);return t?a-n:r};_.binary.base64.encode=function(e,t){for(var n="",r="",i,a,o,s=0;s<e.byteLength;)i=e[s++],a=e[s++],o=e[s++],n+=$t.charAt(i>>2),n+=$t.charAt((i&3)<<4|a>>4),isNaN(a)?n+="==":(n+=$t.charAt((a&15)<<2|o>>6),n+=isNaN(o)?"=":$t.charAt(o&63)),t&&n.length>t&&(r+=n.substr(0,t)+`\r
`,n=n.substr(t));return r+=n,r};_.binary.base64.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(Math.ceil(e.length/4)*3)),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),n=n||0;for(var i,a,o,s,c=0,l=n;c<e.length;)i=Jt[e.charCodeAt(c++)-43],a=Jt[e.charCodeAt(c++)-43],o=Jt[e.charCodeAt(c++)-43],s=Jt[e.charCodeAt(c++)-43],r[l++]=i<<2|a>>4,o!==64&&(r[l++]=(a&15)<<4|o>>2,s!==64&&(r[l++]=(o&3)<<6|s));return t?l-n:r.subarray(0,l)};_.binary.base58.encode=function(e,t){return _.binary.baseN.encode(e,Va,t)};_.binary.base58.decode=function(e,t){return _.binary.baseN.decode(e,Va,t)};_.text={utf8:{},utf16:{}};_.text.utf8.encode=function(e,t,n){e=_.encodeUtf8(e);var r=t;r||(r=new Uint8Array(e.length)),n=n||0;for(var i=n,a=0;a<e.length;++a)r[i++]=e.charCodeAt(a);return t?i-n:r};_.text.utf8.decode=function(e){return _.decodeUtf8(String.fromCharCode.apply(null,e))};_.text.utf16.encode=function(e,t,n){var r=t;r||(r=new Uint8Array(e.length*2));var i=new Uint16Array(r.buffer);n=n||0;for(var a=n,o=n,s=0;s<e.length;++s)i[o++]=e.charCodeAt(s),a+=2;return t?a-n:r};_.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))};_.deflate=function(e,t,n){if(t=_.decode64(e.deflate(_.encode64(t)).rval),n){var r=2,i=t.charCodeAt(1);i&32&&(r=6),t=t.substring(r,t.length-4)}return t};_.inflate=function(e,t,n){var r=e.inflate(_.encode64(t)).rval;return r===null?null:_.decode64(r)};var ii=function(e,t,n){if(!e)throw new Error("WebStorage not available.");var r;if(n===null?r=e.removeItem(t):(n=_.encode64(JSON.stringify(n)),r=e.setItem(t,n)),typeof r<"u"&&r.rval!==!0){var i=new Error(r.error.message);throw i.id=r.error.id,i.name=r.error.name,i}},ai=function(e,t){if(!e)throw new Error("WebStorage not available.");var n=e.getItem(t);if(e.init)if(n.rval===null){if(n.error){var r=new Error(n.error.message);throw r.id=n.error.id,r.name=n.error.name,r}n=null}else n=n.rval;return n!==null&&(n=JSON.parse(_.decode64(n))),n},a0=function(e,t,n,r){var i=ai(e,t);i===null&&(i={}),i[n]=r,ii(e,t,i)},o0=function(e,t,n){var r=ai(e,t);return r!==null&&(r=n in r?r[n]:null),r},s0=function(e,t,n){var r=ai(e,t);if(r!==null&&n in r){delete r[n];var i=!0;for(var a in r){i=!1;break}i&&(r=null),ii(e,t,r)}},l0=function(e,t){ii(e,t,null)},vn=function(e,t,n){var r=null;typeof n>"u"&&(n=["web","flash"]);var i,a=!1,o=null;for(var s in n){i=n[s];try{if(i==="flash"||i==="both"){if(t[0]===null)throw new Error("Flash local storage not available.");r=e.apply(this,t),a=i==="flash"}(i==="web"||i==="both")&&(t[0]=localStorage,r=e.apply(this,t),a=!0)}catch(c){o=c}if(a)break}if(!a)throw o;return r};_.setItem=function(e,t,n,r,i){vn(a0,arguments,i)};_.getItem=function(e,t,n,r){return vn(o0,arguments,r)};_.removeItem=function(e,t,n,r){vn(s0,arguments,r)};_.clearItems=function(e,t,n){vn(l0,arguments,n)};_.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0};_.format=function(e){for(var t=/%./g,n,r,i=0,a=[],o=0;n=t.exec(e);){r=e.substring(o,t.lastIndex-2),r.length>0&&a.push(r),o=t.lastIndex;var s=n[0][1];switch(s){case"s":case"o":i<arguments.length?a.push(arguments[i+++1]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+s+"?>")}}return a.push(e.substring(o)),a.join("")};_.formatNumber=function(e,t,n,r){var i=e,a=isNaN(t=Math.abs(t))?2:t,o=n===void 0?",":n,s=r===void 0?".":r,c=i<0?"-":"",l=parseInt(i=Math.abs(+i||0).toFixed(a),10)+"",u=l.length>3?l.length%3:0;return c+(u?l.substr(0,u)+s:"")+l.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+s)+(a?o+Math.abs(i-l).toFixed(a).slice(2):"")};_.formatSize=function(e){return e>=1073741824?e=_.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?e=_.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?e=_.formatNumber(e/1024,0)+" KiB":e=_.formatNumber(e,0)+" bytes",e};_.bytesFromIP=function(e){return e.indexOf(".")!==-1?_.bytesFromIPv4(e):e.indexOf(":")!==-1?_.bytesFromIPv6(e):null};_.bytesFromIPv4=function(e){if(e=e.split("."),e.length!==4)return null;for(var t=_.createBuffer(),n=0;n<e.length;++n){var r=parseInt(e[n],10);if(isNaN(r))return null;t.putByte(r)}return t.getBytes()};_.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(o){return o.length===0&&++t,!0});for(var n=(8-e.length+t)*2,r=_.createBuffer(),i=0;i<8;++i){if(!e[i]||e[i].length===0){r.fillWithByte(0,n),n=0;continue}var a=_.hexToBytes(e[i]);a.length<2&&r.putByte(0),r.putBytes(a)}return r.getBytes()};_.bytesToIP=function(e){return e.length===4?_.bytesToIPv4(e):e.length===16?_.bytesToIPv6(e):null};_.bytesToIPv4=function(e){if(e.length!==4)return null;for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t.join(".")};_.bytesToIPv6=function(e){if(e.length!==16)return null;for(var t=[],n=[],r=0,i=0;i<e.length;i+=2){for(var a=_.bytesToHex(e[i]+e[i+1]);a[0]==="0"&&a!=="0";)a=a.substr(1);if(a==="0"){var o=n[n.length-1],s=t.length;!o||s!==o.end+1?n.push({start:s,end:s}):(o.end=s,o.end-o.start>n[r].end-n[r].start&&(r=n.length-1))}t.push(a)}if(n.length>0){var c=n[r];c.end-c.start>0&&(t.splice(c.start,c.end-c.start+1,""),c.start===0&&t.unshift(""),c.end===7&&t.push(""))}return t.join(":")};_.estimateCores=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},"cores"in _&&!e.update)return t(null,_.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return _.cores=navigator.hardwareConcurrency,t(null,_.cores);if(typeof Worker>"u")return _.cores=1,t(null,_.cores);if(typeof Blob>"u")return _.cores=2,t(null,_.cores);var n=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(o){for(var s=Date.now(),c=s+4;Date.now()<c;);self.postMessage({st:s,et:c})})}.toString(),")()"],{type:"application/javascript"}));r([],5,16);function r(o,s,c){if(s===0){var l=Math.floor(o.reduce(function(u,f){return u+f},0)/o.length);return _.cores=Math.max(1,l),URL.revokeObjectURL(n),t(null,_.cores)}i(c,function(u,f){o.push(a(c,f)),r(o,s-1,c)})}function i(o,s){for(var c=[],l=[],u=0;u<o;++u){var f=new Worker(n);f.addEventListener("message",function(g){if(l.push(g.data),l.length===o){for(var C=0;C<o;++C)c[C].terminate();s(null,l)}}),c.push(f)}for(var u=0;u<o;++u)c[u].postMessage(u)}function a(o,s){for(var c=[],l=0;l<o;++l)for(var u=s[l],f=c[l]=[],g=0;g<o;++g)if(l!==g){var C=s[g];(u.st>C.st&&u.st<C.et||C.st>u.st&&C.st<u.et)&&f.push(g)}return c.reduce(function(m,S){return Math.max(m,S.length)},0)}}});var Cn=X((cp,Fa)=>{"use strict";var Le=re();ue();Fa.exports=Le.cipher=Le.cipher||{};Le.cipher.algorithms=Le.cipher.algorithms||{};Le.cipher.createCipher=function(e,t){var n=e;if(typeof n=="string"&&(n=Le.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+e);return new Le.cipher.BlockCipher({algorithm:n,key:t,decrypt:!1})};Le.cipher.createDecipher=function(e,t){var n=e;if(typeof n=="string"&&(n=Le.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+e);return new Le.cipher.BlockCipher({algorithm:n,key:t,decrypt:!0})};Le.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),Le.cipher.algorithms[e]=t};Le.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in Le.cipher.algorithms?Le.cipher.algorithms[e]:null};var oi=Le.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};oi.prototype.start=function(e){e=e||{};var t={};for(var n in e)t[n]=e[n];t.decrypt=this._decrypt,this._finish=!1,this._input=Le.util.createBuffer(),this.output=e.output||Le.util.createBuffer(),this.mode.start(t)};oi.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};oi.prototype.finish=function(e){e&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(n){return e(this.blockSize,n,!1)},this.mode.unpad=function(n){return e(this.blockSize,n,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t))}});var li=X((up,Ka)=>{"use strict";var Ne=re();ue();Ne.cipher=Ne.cipher||{};var ie=Ka.exports=Ne.cipher.modes=Ne.cipher.modes||{};ie.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};ie.ecb.prototype.start=function(e){};ie.ecb.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._outBlock[r])};ie.ecb.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._outBlock[r])};ie.ecb.prototype.pad=function(e,t){var n=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(n,n),!0};ie.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var n=e.length(),r=e.at(n-1);return r>this.blockSize<<2?!1:(e.truncate(r),!0)};ie.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};ie.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in e)this._iv=yn(e.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};ie.cbc.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=this._prev[r]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._outBlock[r]);this._prev=this._outBlock};ie.cbc.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._prev[r]^this._outBlock[r]);this._prev=this._inBlock.slice(0)};ie.cbc.prototype.pad=function(e,t){var n=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(n,n),!0};ie.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var n=e.length(),r=e.at(n-1);return r>this.blockSize<<2?!1:(e.truncate(r),!0)};ie.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Ne.util.createBuffer(),this._partialBytes=0};ie.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=yn(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ie.cfb.prototype.encrypt=function(e,t,n){var r=e.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);return}var a=(this.blockSize-r)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!n)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0};ie.cfb.prototype.decrypt=function(e,t,n){var r=e.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);return}var a=(this.blockSize-r)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!n)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0};ie.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Ne.util.createBuffer(),this._partialBytes=0};ie.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=yn(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ie.ofb.prototype.encrypt=function(e,t,n){var r=e.length();if(e.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var a=(this.blockSize-r)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!n)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0};ie.ofb.prototype.decrypt=ie.ofb.prototype.encrypt;ie.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Ne.util.createBuffer(),this._partialBytes=0};ie.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=yn(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ie.ctr.prototype.encrypt=function(e,t,n){var r=e.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var a=(this.blockSize-r)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!n)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}xn(this._inBlock)};ie.ctr.prototype.decrypt=ie.ctr.prototype.encrypt;ie.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Ne.util.createBuffer(),this._partialBytes=0,this._R=3774873600};ie.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t=Ne.util.createBuffer(e.iv);this._cipherLength=0;var n;if("additionalData"in e?n=Ne.util.createBuffer(e.additionalData):n=Ne.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null,e.decrypt&&(this._tag=Ne.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var r=t.length();if(r===12)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else{for(this._j0=[0,0,0,0];t.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(si(r*8)))}this._inBlock=this._j0.slice(0),xn(this._inBlock),this._partialBytes=0,n=Ne.util.createBuffer(n),this._aDataLength=si(n.length()*8);var i=n.length()%this.blockSize;for(i&&n.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];n.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[n.getInt32(),n.getInt32(),n.getInt32(),n.getInt32()])};ie.gcm.prototype.encrypt=function(e,t,n){var r=e.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var a=(this.blockSize-r)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a<=0||n){if(n){var o=r%this.blockSize;this._cipherLength+=o,this._partialOutput.truncate(this.blockSize-o)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!n)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),xn(this._inBlock)};ie.gcm.prototype.decrypt=function(e,t,n){var r=e.length();if(r<this.blockSize&&!(n&&r>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),xn(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);r<this.blockSize?this._cipherLength+=r%this.blockSize:this._cipherLength+=this.blockSize};ie.gcm.prototype.afterFinish=function(e,t){var n=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=Ne.util.createBuffer();var r=this._aDataLength.concat(si(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,r);var i=[];this.cipher.encrypt(this._j0,i);for(var a=0;a<this._ints;++a)this.tag.putInt32(this._s[a]^i[a]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(n=!1),n};ie.gcm.prototype.multiply=function(e,t){for(var n=[0,0,0,0],r=t.slice(0),i=0;i<128;++i){var a=e[i/32|0]&1<<31-i%32;a&&(n[0]^=r[0],n[1]^=r[1],n[2]^=r[2],n[3]^=r[3]),this.pow(r,r)}return n};ie.gcm.prototype.pow=function(e,t){for(var n=e[3]&1,r=3;r>0;--r)t[r]=e[r]>>>1|(e[r-1]&1)<<31;t[0]=e[0]>>>1,n&&(t[0]^=this._R)};ie.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],n=0;n<32;++n){var r=n/8|0,i=e[r]>>>(7-n%8)*4&15,a=this._m[n][i];t[0]^=a[0],t[1]^=a[1],t[2]^=a[2],t[3]^=a[3]}return t};ie.gcm.prototype.ghash=function(e,t,n){return t[0]^=n[0],t[1]^=n[1],t[2]^=n[2],t[3]^=n[3],this.tableMultiply(t)};ie.gcm.prototype.generateHashTable=function(e,t){for(var n=8/t,r=4*n,i=16*n,a=new Array(i),o=0;o<i;++o){var s=[0,0,0,0],c=o/r|0,l=(r-1-o%r)*t;s[c]=1<<t-1<<l,a[o]=this.generateSubHashTable(this.multiply(s,e),t)}return a};ie.gcm.prototype.generateSubHashTable=function(e,t){var n=1<<t,r=n>>>1,i=new Array(n);i[r]=e.slice(0);for(var a=r>>>1;a>0;)this.pow(i[2*a],i[a]=[]),a>>=1;for(a=2;a<r;){for(var o=1;o<a;++o){var s=i[a],c=i[o];i[a+o]=[s[0]^c[0],s[1]^c[1],s[2]^c[2],s[3]^c[3]]}a*=2}for(i[0]=[0,0,0,0],a=r+1;a<n;++a){var l=i[a^r];i[a]=[e[0]^l[0],e[1]^l[1],e[2]^l[2],e[3]^l[3]]}return i};function yn(e,t){if(typeof e=="string"&&(e=Ne.util.createBuffer(e)),Ne.util.isArray(e)&&e.length>4){var n=e;e=Ne.util.createBuffer();for(var r=0;r<n.length;++r)e.putByte(n[r])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!Ne.util.isArray(e)){for(var i=[],a=t/4,r=0;r<a;++r)i.push(e.getInt32());e=i}return e}function xn(e){e[e.length-1]=e[e.length-1]+1&4294967295}function si(e){return[e/4294967296|0,e&4294967295]}});var er=X((fp,Ga)=>{"use strict";var xe=re();Cn();li();ue();Ga.exports=xe.aes=xe.aes||{};xe.aes.startEncrypting=function(e,t,n,r){var i=_n({key:e,output:n,decrypt:!1,mode:r});return i.start(t),i};xe.aes.createEncryptionCipher=function(e,t){return _n({key:e,output:null,decrypt:!1,mode:t})};xe.aes.startDecrypting=function(e,t,n,r){var i=_n({key:e,output:n,decrypt:!0,mode:r});return i.start(t),i};xe.aes.createDecryptionCipher=function(e,t){return _n({key:e,output:null,decrypt:!0,mode:t})};xe.aes.Algorithm=function(e,t){fi||Ha();var n=this;n.name=e,n.mode=new t({blockSize:16,cipher:{encrypt:function(r,i){return ui(n._w,r,i,!1)},decrypt:function(r,i){return ui(n._w,r,i,!0)}}}),n._init=!1};xe.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t=e.key,n;if(typeof t=="string"&&(t.length===16||t.length===24||t.length===32))t=xe.util.createBuffer(t);else if(xe.util.isArray(t)&&(t.length===16||t.length===24||t.length===32)){n=t,t=xe.util.createBuffer();for(var r=0;r<n.length;++r)t.putByte(n[r])}if(!xe.util.isArray(t)){n=t,t=[];var i=n.length();if(i===16||i===24||i===32){i=i>>>2;for(var r=0;r<i;++r)t.push(n.getInt32())}}if(!xe.util.isArray(t)||!(t.length===4||t.length===6||t.length===8))throw new Error("Invalid key parameter.");var a=this.mode.name,o=["CFB","OFB","CTR","GCM"].indexOf(a)!==-1;this._w=za(t,e.decrypt&&!o),this._init=!0}};xe.aes._expandKey=function(e,t){return fi||Ha(),za(e,t)};xe.aes._updateBlock=ui;wr("AES-ECB",xe.cipher.modes.ecb);wr("AES-CBC",xe.cipher.modes.cbc);wr("AES-CFB",xe.cipher.modes.cfb);wr("AES-OFB",xe.cipher.modes.ofb);wr("AES-CTR",xe.cipher.modes.ctr);wr("AES-GCM",xe.cipher.modes.gcm);function wr(e,t){var n=function(){return new xe.aes.Algorithm(e,t)};xe.cipher.registerAlgorithm(e,n)}var fi=!1,Tr=4,et,ci,qa,dr,xt;function Ha(){fi=!0,qa=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;et=new Array(256),ci=new Array(256),dr=new Array(4),xt=new Array(4);for(var t=0;t<4;++t)dr[t]=new Array(256),xt[t]=new Array(256);for(var n=0,r=0,i,a,o,s,c,l,u,t=0;t<256;++t){s=r^r<<1^r<<2^r<<3^r<<4,s=s>>8^s&255^99,et[n]=s,ci[s]=n,c=e[s],i=e[n],a=e[i],o=e[a],l=c<<24^s<<16^s<<8^(s^c),u=(i^a^o)<<24^(n^o)<<16^(n^a^o)<<8^(n^i^o);for(var f=0;f<4;++f)dr[f][n]=l,xt[f][s]=u,l=l<<24|l>>>8,u=u<<24|u>>>8;n===0?n=r=1:(n=i^e[e[e[i^o]]],r^=e[e[r]])}}function za(e,t){for(var n=e.slice(0),r,i=1,a=n.length,o=a+6+1,s=Tr*o,c=a;c<s;++c)r=n[c-1],c%a===0?(r=et[r>>>16&255]<<24^et[r>>>8&255]<<16^et[r&255]<<8^et[r>>>24]^qa[i]<<24,i++):a>6&&c%a===4&&(r=et[r>>>24]<<24^et[r>>>16&255]<<16^et[r>>>8&255]<<8^et[r&255]),n[c]=n[c-a]^r;if(t){var l,u=xt[0],f=xt[1],g=xt[2],C=xt[3],m=n.slice(0);s=n.length;for(var c=0,S=s-Tr;c<s;c+=Tr,S-=Tr)if(c===0||c===s-Tr)m[c]=n[S],m[c+1]=n[S+3],m[c+2]=n[S+2],m[c+3]=n[S+1];else for(var b=0;b<Tr;++b)l=n[S+b],m[c+(3&-b)]=u[et[l>>>24]]^f[et[l>>>16&255]]^g[et[l>>>8&255]]^C[et[l&255]];n=m}return n}function ui(e,t,n,r){var i=e.length/4-1,a,o,s,c,l;r?(a=xt[0],o=xt[1],s=xt[2],c=xt[3],l=ci):(a=dr[0],o=dr[1],s=dr[2],c=dr[3],l=et);var u,f,g,C,m,S,b;u=t[0]^e[0],f=t[r?3:1]^e[1],g=t[2]^e[2],C=t[r?1:3]^e[3];for(var w=3,O=1;O<i;++O)m=a[u>>>24]^o[f>>>16&255]^s[g>>>8&255]^c[C&255]^e[++w],S=a[f>>>24]^o[g>>>16&255]^s[C>>>8&255]^c[u&255]^e[++w],b=a[g>>>24]^o[C>>>16&255]^s[u>>>8&255]^c[f&255]^e[++w],C=a[C>>>24]^o[u>>>16&255]^s[f>>>8&255]^c[g&255]^e[++w],u=m,f=S,g=b;n[0]=l[u>>>24]<<24^l[f>>>16&255]<<16^l[g>>>8&255]<<8^l[C&255]^e[++w],n[r?3:1]=l[f>>>24]<<24^l[g>>>16&255]<<16^l[C>>>8&255]<<8^l[u&255]^e[++w],n[2]=l[g>>>24]<<24^l[C>>>16&255]<<16^l[u>>>8&255]<<8^l[f&255]^e[++w],n[r?1:3]=l[C>>>24]<<24^l[u>>>16&255]<<16^l[f>>>8&255]<<8^l[g&255]^e[++w]}function _n(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),n="AES-"+t,r;e.decrypt?r=xe.cipher.createDecipher(n,e.key):r=xe.cipher.createCipher(n,e.key);var i=r.start;return r.start=function(a,o){var s=null;o instanceof xe.util.ByteBuffer&&(s=o,o={}),o=o||{},o.output=s,o.iv=a,i.call(r,o)},r}});var tr=X((pp,Ya)=>{"use strict";var qr=re();qr.pki=qr.pki||{};var pi=Ya.exports=qr.pki.oids=qr.oids=qr.oids||{};function R(e,t){pi[e]=t,pi[t]=e}function de(e,t){pi[e]=t}R("1.2.840.113549.1.1.1","rsaEncryption");R("1.2.840.113549.1.1.4","md5WithRSAEncryption");R("1.2.840.113549.1.1.5","sha1WithRSAEncryption");R("1.2.840.113549.1.1.7","RSAES-OAEP");R("1.2.840.113549.1.1.8","mgf1");R("1.2.840.113549.1.1.9","pSpecified");R("1.2.840.113549.1.1.10","RSASSA-PSS");R("1.2.840.113549.1.1.11","sha256WithRSAEncryption");R("1.2.840.113549.1.1.12","sha384WithRSAEncryption");R("1.2.840.113549.1.1.13","sha512WithRSAEncryption");R("1.3.101.112","EdDSA25519");R("1.2.840.10040.4.3","dsa-with-sha1");R("1.3.14.3.2.7","desCBC");R("1.3.14.3.2.26","sha1");R("1.3.14.3.2.29","sha1WithRSASignature");R("2.16.840.1.101.3.4.2.1","sha256");R("2.16.840.1.101.3.4.2.2","sha384");R("2.16.840.1.101.3.4.2.3","sha512");R("2.16.840.1.101.3.4.2.4","sha224");R("2.16.840.1.101.3.4.2.5","sha512-224");R("2.16.840.1.101.3.4.2.6","sha512-256");R("1.2.840.113549.2.2","md2");R("1.2.840.113549.2.5","md5");R("1.2.840.113549.1.7.1","data");R("1.2.840.113549.1.7.2","signedData");R("1.2.840.113549.1.7.3","envelopedData");R("1.2.840.113549.1.7.4","signedAndEnvelopedData");R("1.2.840.113549.1.7.5","digestedData");R("1.2.840.113549.1.7.6","encryptedData");R("1.2.840.113549.1.9.1","emailAddress");R("1.2.840.113549.1.9.2","unstructuredName");R("1.2.840.113549.1.9.3","contentType");R("1.2.840.113549.1.9.4","messageDigest");R("1.2.840.113549.1.9.5","signingTime");R("1.2.840.113549.1.9.6","counterSignature");R("1.2.840.113549.1.9.7","challengePassword");R("1.2.840.113549.1.9.8","unstructuredAddress");R("1.2.840.113549.1.9.14","extensionRequest");R("1.2.840.113549.1.9.20","friendlyName");R("1.2.840.113549.1.9.21","localKeyId");R("1.2.840.113549.1.9.22.1","x509Certificate");R("1.2.840.113549.1.12.10.1.1","keyBag");R("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");R("1.2.840.113549.1.12.10.1.3","certBag");R("1.2.840.113549.1.12.10.1.4","crlBag");R("1.2.840.113549.1.12.10.1.5","secretBag");R("1.2.840.113549.1.12.10.1.6","safeContentsBag");R("1.2.840.113549.1.5.13","pkcs5PBES2");R("1.2.840.113549.1.5.12","pkcs5PBKDF2");R("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");R("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");R("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");R("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");R("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");R("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");R("1.2.840.113549.2.7","hmacWithSHA1");R("1.2.840.113549.2.8","hmacWithSHA224");R("1.2.840.113549.2.9","hmacWithSHA256");R("1.2.840.113549.2.10","hmacWithSHA384");R("1.2.840.113549.2.11","hmacWithSHA512");R("1.2.840.113549.3.7","des-EDE3-CBC");R("2.16.840.1.101.3.4.1.2","aes128-CBC");R("2.16.840.1.101.3.4.1.22","aes192-CBC");R("2.16.840.1.101.3.4.1.42","aes256-CBC");R("2.5.4.3","commonName");R("2.5.4.4","surname");R("2.5.4.5","serialNumber");R("2.5.4.6","countryName");R("2.5.4.7","localityName");R("2.5.4.8","stateOrProvinceName");R("2.5.4.9","streetAddress");R("2.5.4.10","organizationName");R("2.5.4.11","organizationalUnitName");R("2.5.4.12","title");R("2.5.4.13","description");R("2.5.4.15","businessCategory");R("2.5.4.17","postalCode");R("2.5.4.42","givenName");R("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");R("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");R("2.16.840.1.113730.1.1","nsCertType");R("2.16.840.1.113730.1.13","nsComment");de("2.5.29.1","authorityKeyIdentifier");de("2.5.29.2","keyAttributes");de("2.5.29.3","certificatePolicies");de("2.5.29.4","keyUsageRestriction");de("2.5.29.5","policyMapping");de("2.5.29.6","subtreesConstraint");de("2.5.29.7","subjectAltName");de("2.5.29.8","issuerAltName");de("2.5.29.9","subjectDirectoryAttributes");de("2.5.29.10","basicConstraints");de("2.5.29.11","nameConstraints");de("2.5.29.12","policyConstraints");de("2.5.29.13","basicConstraints");R("2.5.29.14","subjectKeyIdentifier");R("2.5.29.15","keyUsage");de("2.5.29.16","privateKeyUsagePeriod");R("2.5.29.17","subjectAltName");R("2.5.29.18","issuerAltName");R("2.5.29.19","basicConstraints");de("2.5.29.20","cRLNumber");de("2.5.29.21","cRLReason");de("2.5.29.22","expirationDate");de("2.5.29.23","instructionCode");de("2.5.29.24","invalidityDate");de("2.5.29.25","cRLDistributionPoints");de("2.5.29.26","issuingDistributionPoint");de("2.5.29.27","deltaCRLIndicator");de("2.5.29.28","issuingDistributionPoint");de("2.5.29.29","certificateIssuer");de("2.5.29.30","nameConstraints");R("2.5.29.31","cRLDistributionPoints");R("2.5.29.32","certificatePolicies");de("2.5.29.33","policyMappings");de("2.5.29.34","policyConstraints");R("2.5.29.35","authorityKeyIdentifier");de("2.5.29.36","policyConstraints");R("2.5.29.37","extKeyUsage");de("2.5.29.46","freshestCRL");de("2.5.29.54","inhibitAnyPolicy");R("1.3.6.1.4.1.11129.2.4.2","timestampList");R("1.3.6.1.5.5.7.1.1","authorityInfoAccess");R("1.3.6.1.5.5.7.3.1","serverAuth");R("1.3.6.1.5.5.7.3.2","clientAuth");R("1.3.6.1.5.5.7.3.3","codeSigning");R("1.3.6.1.5.5.7.3.4","emailProtection");R("1.3.6.1.5.5.7.3.8","timeStamping")});var _t=X((dp,ja)=>{"use strict";var Se=re();ue();tr();var K=ja.exports=Se.asn1=Se.asn1||{};K.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};K.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};K.create=function(e,t,n,r,i){if(Se.util.isArray(r)){for(var a=[],o=0;o<r.length;++o)r[o]!==void 0&&a.push(r[o]);r=a}var s={tagClass:e,type:t,constructed:n,composed:n||Se.util.isArray(r),value:r};return i&&"bitStringContents"in i&&(s.bitStringContents=i.bitStringContents,s.original=K.copy(s)),s};K.copy=function(e,t){var n;if(Se.util.isArray(e)){n=[];for(var r=0;r<e.length;++r)n.push(K.copy(e[r],t));return n}return typeof e=="string"?e:(n={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:K.copy(e.value,t)},t&&!t.excludeBitStringContents&&(n.bitStringContents=e.bitStringContents),n)};K.equals=function(e,t,n){if(Se.util.isArray(e)){if(!Se.util.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(!K.equals(e[r],t[r]))return!1;return!0}if(typeof e!=typeof t)return!1;if(typeof e=="string")return e===t;var i=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&K.equals(e.value,t.value);return n&&n.includeBitStringContents&&(i=i&&e.bitStringContents===t.bitStringContents),i};K.getBerValueLength=function(e){var t=e.getByte();if(t!==128){var n,r=t&128;return r?n=e.getInt((t&127)<<3):n=t,n}};function Hr(e,t,n){if(n>t){var r=new Error("Too few bytes to parse DER.");throw r.available=e.length(),r.remaining=t,r.requested=n,r}}var c0=function(e,t){var n=e.getByte();if(t--,n!==128){var r,i=n&128;if(!i)r=n;else{var a=n&127;Hr(e,t,a),r=e.getInt(a<<3)}if(r<0)throw new Error("Negative length: "+r);return r}};K.fromDer=function(e,t){t===void 0&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof t=="boolean"&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),typeof e=="string"&&(e=Se.util.createBuffer(e));var n=e.length(),r=En(e,e.length(),0,t);if(t.parseAllBytes&&e.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=n,i.remaining=e.length(),i}return r};function En(e,t,n,r){var i;Hr(e,t,2);var a=e.getByte();t--;var o=a&192,s=a&31;i=e.length();var c=c0(e,t);if(t-=i-e.length(),c!==void 0&&c>t){if(r.strict){var l=new Error("Too few bytes to read ASN.1 value.");throw l.available=e.length(),l.remaining=t,l.requested=c,l}c=t}var u,f,g=(a&32)===32;if(g)if(u=[],c===void 0)for(;;){if(Hr(e,t,2),e.bytes(2)==="\0\0"){e.getBytes(2),t-=2;break}i=e.length(),u.push(En(e,t,n+1,r)),t-=i-e.length()}else for(;c>0;)i=e.length(),u.push(En(e,c,n+1,r)),t-=i-e.length(),c-=i-e.length();if(u===void 0&&o===K.Class.UNIVERSAL&&s===K.Type.BITSTRING&&(f=e.bytes(c)),u===void 0&&r.decodeBitStrings&&o===K.Class.UNIVERSAL&&s===K.Type.BITSTRING&&c>1){var C=e.read,m=t,S=0;if(s===K.Type.BITSTRING&&(Hr(e,t,1),S=e.getByte(),t--),S===0)try{i=e.length();var b={strict:!0,decodeBitStrings:!0},w=En(e,t,n+1,b),O=i-e.length();t-=O,s==K.Type.BITSTRING&&O++;var M=w.tagClass;O===c&&(M===K.Class.UNIVERSAL||M===K.Class.CONTEXT_SPECIFIC)&&(u=[w])}catch{}u===void 0&&(e.read=C,t=m)}if(u===void 0){if(c===void 0){if(r.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=t}if(s===K.Type.BMPSTRING)for(u="";c>0;c-=2)Hr(e,t,2),u+=String.fromCharCode(e.getInt16()),t-=2;else u=e.getBytes(c),t-=c}var H=f===void 0?null:{bitStringContents:f};return K.create(o,s,g,u,H)}K.toDer=function(e){var t=Se.util.createBuffer(),n=e.tagClass|e.type,r=Se.util.createBuffer(),i=!1;if("bitStringContents"in e&&(i=!0,e.original&&(i=K.equals(e,e.original))),i)r.putBytes(e.bitStringContents);else if(e.composed){e.constructed?n|=32:r.putByte(0);for(var a=0;a<e.value.length;++a)e.value[a]!==void 0&&r.putBuffer(K.toDer(e.value[a]))}else if(e.type===K.Type.BMPSTRING)for(var a=0;a<e.value.length;++a)r.putInt16(e.value.charCodeAt(a));else e.type===K.Type.INTEGER&&e.value.length>1&&(e.value.charCodeAt(0)===0&&!(e.value.charCodeAt(1)&128)||e.value.charCodeAt(0)===255&&(e.value.charCodeAt(1)&128)===128)?r.putBytes(e.value.substr(1)):r.putBytes(e.value);if(t.putByte(n),r.length()<=127)t.putByte(r.length()&127);else{var o=r.length(),s="";do s+=String.fromCharCode(o&255),o=o>>>8;while(o>0);t.putByte(s.length|128);for(var a=s.length-1;a>=0;--a)t.putByte(s.charCodeAt(a))}return t.putBuffer(r),t};K.oidToDer=function(e){var t=e.split("."),n=Se.util.createBuffer();n.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var r,i,a,o,s=2;s<t.length;++s){r=!0,i=[],a=parseInt(t[s],10);do o=a&127,a=a>>>7,r||(o|=128),i.push(o),r=!1;while(a>0);for(var c=i.length-1;c>=0;--c)n.putByte(i[c])}return n};K.derToOid=function(e){var t;typeof e=="string"&&(e=Se.util.createBuffer(e));var n=e.getByte();t=Math.floor(n/40)+"."+n%40;for(var r=0;e.length()>0;)n=e.getByte(),r=r<<7,n&128?r+=n&127:(t+="."+(r+n),r=0);return t};K.utcTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,2),10);n=n>=50?1900+n:2e3+n;var r=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),a=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),s=0;if(e.length>11){var c=e.charAt(10),l=10;c!=="+"&&c!=="-"&&(s=parseInt(e.substr(10,2),10),l+=2)}if(t.setUTCFullYear(n,r,i),t.setUTCHours(a,o,s,0),l&&(c=e.charAt(l),c==="+"||c==="-")){var u=parseInt(e.substr(l+1,2),10),f=parseInt(e.substr(l+4,2),10),g=u*60+f;g*=6e4,c==="+"?t.setTime(+t-g):t.setTime(+t+g)}return t};K.generalizedTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,4),10),r=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),a=parseInt(e.substr(8,2),10),o=parseInt(e.substr(10,2),10),s=parseInt(e.substr(12,2),10),c=0,l=0,u=!1;e.charAt(e.length-1)==="Z"&&(u=!0);var f=e.length-5,g=e.charAt(f);if(g==="+"||g==="-"){var C=parseInt(e.substr(f+1,2),10),m=parseInt(e.substr(f+4,2),10);l=C*60+m,l*=6e4,g==="+"&&(l*=-1),u=!0}return e.charAt(14)==="."&&(c=parseFloat(e.substr(14),10)*1e3),u?(t.setUTCFullYear(n,r,i),t.setUTCHours(a,o,s,c),t.setTime(+t+l)):(t.setFullYear(n,r,i),t.setHours(a,o,s,c)),t};K.dateToUtcTime=function(e){if(typeof e=="string")return e;var t="",n=[];n.push((""+e.getUTCFullYear()).substr(2)),n.push(""+(e.getUTCMonth()+1)),n.push(""+e.getUTCDate()),n.push(""+e.getUTCHours()),n.push(""+e.getUTCMinutes()),n.push(""+e.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(t+="0"),t+=n[r];return t+="Z",t};K.dateToGeneralizedTime=function(e){if(typeof e=="string")return e;var t="",n=[];n.push(""+e.getUTCFullYear()),n.push(""+(e.getUTCMonth()+1)),n.push(""+e.getUTCDate()),n.push(""+e.getUTCHours()),n.push(""+e.getUTCMinutes()),n.push(""+e.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(t+="0"),t+=n[r];return t+="Z",t};K.integerToDer=function(e){var t=Se.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var n=new Error("Integer too large; max is 32-bits.");throw n.integer=e,n};K.derToInteger=function(e){typeof e=="string"&&(e=Se.util.createBuffer(e));var t=e.length()*8;if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)};K.validate=function(e,t,n,r){var i=!1;if((e.tagClass===t.tagClass||typeof t.tagClass>"u")&&(e.type===t.type||typeof t.type>"u"))if(e.constructed===t.constructed||typeof t.constructed>"u"){if(i=!0,t.value&&Se.util.isArray(t.value))for(var a=0,o=0;i&&o<t.value.length;++o)i=t.value[o].optional||!1,e.value[a]&&(i=K.validate(e.value[a],t.value[o],n,r),i?++a:t.value[o].optional&&(i=!0)),!i&&r&&r.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(i&&n&&(t.capture&&(n[t.capture]=e.value),t.captureAsn1&&(n[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(n[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)){var s;if(e.bitStringContents.length<2)n[t.captureBitStringValue]="";else{var c=e.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");n[t.captureBitStringValue]=e.bitStringContents.slice(1)}}}else r&&r.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');else r&&(e.tagClass!==t.tagClass&&r.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&r.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));return i};var Qa=/[^\\u0000-\\u00ff]/;K.prettyPrint=function(e,t,n){var r="";t=t||0,n=n||2,t>0&&(r+=`
`);for(var i="",a=0;a<t*n;++a)i+=" ";switch(r+=i+"Tag: ",e.tagClass){case K.Class.UNIVERSAL:r+="Universal:";break;case K.Class.APPLICATION:r+="Application:";break;case K.Class.CONTEXT_SPECIFIC:r+="Context-Specific:";break;case K.Class.PRIVATE:r+="Private:";break}if(e.tagClass===K.Class.UNIVERSAL)switch(r+=e.type,e.type){case K.Type.NONE:r+=" (None)";break;case K.Type.BOOLEAN:r+=" (Boolean)";break;case K.Type.INTEGER:r+=" (Integer)";break;case K.Type.BITSTRING:r+=" (Bit string)";break;case K.Type.OCTETSTRING:r+=" (Octet string)";break;case K.Type.NULL:r+=" (Null)";break;case K.Type.OID:r+=" (Object Identifier)";break;case K.Type.ODESC:r+=" (Object Descriptor)";break;case K.Type.EXTERNAL:r+=" (External or Instance of)";break;case K.Type.REAL:r+=" (Real)";break;case K.Type.ENUMERATED:r+=" (Enumerated)";break;case K.Type.EMBEDDED:r+=" (Embedded PDV)";break;case K.Type.UTF8:r+=" (UTF8)";break;case K.Type.ROID:r+=" (Relative Object Identifier)";break;case K.Type.SEQUENCE:r+=" (Sequence)";break;case K.Type.SET:r+=" (Set)";break;case K.Type.PRINTABLESTRING:r+=" (Printable String)";break;case K.Type.IA5String:r+=" (IA5String (ASCII))";break;case K.Type.UTCTIME:r+=" (UTC time)";break;case K.Type.GENERALIZEDTIME:r+=" (Generalized time)";break;case K.Type.BMPSTRING:r+=" (BMP String)";break}else r+=e.type;if(r+=`
`,r+=i+"Constructed: "+e.constructed+`
`,e.composed){for(var o=0,s="",a=0;a<e.value.length;++a)e.value[a]!==void 0&&(o+=1,s+=K.prettyPrint(e.value[a],t+1,n),a+1<e.value.length&&(s+=","));r+=i+"Sub values: "+o+s}else{if(r+=i+"Value: ",e.type===K.Type.OID){var c=K.derToOid(e.value);r+=c,Se.pki&&Se.pki.oids&&c in Se.pki.oids&&(r+=" ("+Se.pki.oids[c]+") ")}if(e.type===K.Type.INTEGER)try{r+=K.derToInteger(e.value)}catch{r+="0x"+Se.util.bytesToHex(e.value)}else if(e.type===K.Type.BITSTRING){if(e.value.length>1?r+="0x"+Se.util.bytesToHex(e.value.slice(1)):r+="(none)",e.value.length>0){var l=e.value.charCodeAt(0);l==1?r+=" (1 unused bit shown)":l>1&&(r+=" ("+l+" unused bits shown)")}}else if(e.type===K.Type.OCTETSTRING)Qa.test(e.value)||(r+="("+e.value+") "),r+="0x"+Se.util.bytesToHex(e.value);else if(e.type===K.Type.UTF8)try{r+=Se.util.decodeUtf8(e.value)}catch(u){if(u.message==="URI malformed")r+="0x"+Se.util.bytesToHex(e.value)+" (malformed UTF8)";else throw u}else e.type===K.Type.PRINTABLESTRING||e.type===K.Type.IA5String?r+=e.value:Qa.test(e.value)?r+="0x"+Se.util.bytesToHex(e.value):e.value.length===0?r+="[null]":r+=e.value}return r}});var Mt=X((hp,Za)=>{"use strict";var Sn=re();Za.exports=Sn.md=Sn.md||{};Sn.md.algorithms=Sn.md.algorithms||{}});var Ir=X((gp,Wa)=>{"use strict";var zt=re();Mt();ue();var u0=Wa.exports=zt.hmac=zt.hmac||{};u0.create=function(){var e=null,t=null,n=null,r=null,i={};return i.start=function(a,o){if(a!==null)if(typeof a=="string")if(a=a.toLowerCase(),a in zt.md.algorithms)t=zt.md.algorithms[a].create();else throw new Error('Unknown hash algorithm "'+a+'"');else t=a;if(o===null)o=e;else{if(typeof o=="string")o=zt.util.createBuffer(o);else if(zt.util.isArray(o)){var s=o;o=zt.util.createBuffer();for(var c=0;c<s.length;++c)o.putByte(s[c])}var l=o.length();l>t.blockLength&&(t.start(),t.update(o.bytes()),o=t.digest()),n=zt.util.createBuffer(),r=zt.util.createBuffer(),l=o.length();for(var c=0;c<l;++c){var s=o.at(c);n.putByte(54^s),r.putByte(92^s)}if(l<t.blockLength)for(var s=t.blockLength-l,c=0;c<s;++c)n.putByte(54),r.putByte(92);e=o,n=n.bytes(),r=r.bytes()}t.start(),t.update(n)},i.update=function(a){t.update(a)},i.getMac=function(){var a=t.digest().bytes();return t.start(),t.update(r),t.update(a),t.digest()},i.digest=i.getMac,i}});var Tn=X((mp,eo)=>{"use strict";var Lt=re();Mt();ue();var $a=eo.exports=Lt.md5=Lt.md5||{};Lt.md.md5=Lt.md.algorithms.md5=$a;$a.create=function(){Ja||f0();var e=null,t=Lt.util.createBuffer(),n=new Array(16),r={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return r.start=function(){r.messageLength=0,r.fullMessageLength=r.messageLength64=[];for(var i=r.messageLengthSize/4,a=0;a<i;++a)r.fullMessageLength.push(0);return t=Lt.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},r},r.start(),r.update=function(i,a){a==="utf8"&&(i=Lt.util.encodeUtf8(i));var o=i.length;r.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var s=r.fullMessageLength.length-1;s>=0;--s)r.fullMessageLength[s]+=o[1],o[1]=o[0]+(r.fullMessageLength[s]/4294967296>>>0),r.fullMessageLength[s]=r.fullMessageLength[s]>>>0,o[0]=o[1]/4294967296>>>0;return t.putBytes(i),Xa(e,n,t),(t.read>2048||t.length()===0)&&t.compact(),r},r.digest=function(){var i=Lt.util.createBuffer();i.putBytes(t.bytes());var a=r.fullMessageLength[r.fullMessageLength.length-1]+r.messageLengthSize,o=a&r.blockLength-1;i.putBytes(di.substr(0,r.blockLength-o));for(var s,c=0,l=r.fullMessageLength.length-1;l>=0;--l)s=r.fullMessageLength[l]*8+c,c=s/4294967296>>>0,i.putInt32Le(s>>>0);var u={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};Xa(u,n,i);var f=Lt.util.createBuffer();return f.putInt32Le(u.h0),f.putInt32Le(u.h1),f.putInt32Le(u.h2),f.putInt32Le(u.h3),f},r};var di=null,bn=null,zr=null,Ar=null,Ja=!1;function f0(){di="\x80",di+=Lt.util.fillString("\0",64),bn=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],zr=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],Ar=new Array(64);for(var e=0;e<64;++e)Ar[e]=Math.floor(Math.abs(Math.sin(e+1))*4294967296);Ja=!0}function Xa(e,t,n){for(var r,i,a,o,s,c,l,u,f=n.length();f>=64;){for(i=e.h0,a=e.h1,o=e.h2,s=e.h3,u=0;u<16;++u)t[u]=n.getInt32Le(),c=s^a&(o^s),r=i+c+Ar[u]+t[u],l=zr[u],i=s,s=o,o=a,a+=r<<l|r>>>32-l;for(;u<32;++u)c=o^s&(a^o),r=i+c+Ar[u]+t[bn[u]],l=zr[u],i=s,s=o,o=a,a+=r<<l|r>>>32-l;for(;u<48;++u)c=a^o^s,r=i+c+Ar[u]+t[bn[u]],l=zr[u],i=s,s=o,o=a,a+=r<<l|r>>>32-l;for(;u<64;++u)c=o^(a|~s),r=i+c+Ar[u]+t[bn[u]],l=zr[u],i=s,s=o,o=a,a+=r<<l|r>>>32-l;e.h0=e.h0+i|0,e.h1=e.h1+a|0,e.h2=e.h2+o|0,e.h3=e.h3+s|0,f-=64}}});var hr=X((vp,ro)=>{"use strict";var In=re();ue();var to=ro.exports=In.pem=In.pem||{};to.encode=function(e,t){t=t||{};var n="-----BEGIN "+e.type+`-----\r
`,r;if(e.procType&&(r={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},n+=wn(r)),e.contentDomain&&(r={name:"Content-Domain",values:[e.contentDomain]},n+=wn(r)),e.dekInfo&&(r={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&r.values.push(e.dekInfo.parameters),n+=wn(r)),e.headers)for(var i=0;i<e.headers.length;++i)n+=wn(e.headers[i]);return e.procType&&(n+=`\r
`),n+=In.util.encode64(e.body,t.maxline||64)+`\r
`,n+="-----END "+e.type+`-----\r
`,n};to.decode=function(e){for(var t=[],n=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,r=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,a;a=n.exec(e),!!a;){var o=a[1];o==="NEW CERTIFICATE REQUEST"&&(o="CERTIFICATE REQUEST");var s={type:o,procType:null,contentDomain:null,dekInfo:null,headers:[],body:In.util.decode64(a[3])};if(t.push(s),!!a[2]){for(var c=a[2].split(i),l=0;a&&l<c.length;){for(var u=c[l].replace(/\s+$/,""),f=l+1;f<c.length;++f){var g=c[f];if(!/\s/.test(g[0]))break;u+=g,l=f}if(a=u.match(r),a){for(var C={name:a[1],values:[]},m=a[2].split(","),S=0;S<m.length;++S)C.values.push(p0(m[S]));if(s.procType)if(!s.contentDomain&&C.name==="Content-Domain")s.contentDomain=m[0]||"";else if(!s.dekInfo&&C.name==="DEK-Info"){if(C.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');s.dekInfo={algorithm:m[0],parameters:m[1]||null}}else s.headers.push(C);else{if(C.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(C.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');s.procType={version:m[0],type:m[1]}}}++l}if(s.procType==="ENCRYPTED"&&!s.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(t.length===0)throw new Error("Invalid PEM formatted message.");return t};function wn(e){for(var t=e.name+": ",n=[],r=function(c,l){return" "+l},i=0;i<e.values.length;++i)n.push(e.values[i].replace(/^(\S+\r\n)/,r));t+=n.join(",")+`\r
`;for(var a=0,o=-1,i=0;i<t.length;++i,++a)if(a>65&&o!==-1){var s=t[o];s===","?(++o,t=t.substr(0,o)+`\r
 `+t.substr(o)):t=t.substr(0,o)+`\r
`+s+t.substr(o+1),a=i-o-1,o=-1,++i}else(t[i]===" "||t[i]==="	"||t[i]===",")&&(o=i);return t}function p0(e){return e.replace(/^\s+/,"")}});var Gr=X((Cp,io)=>{"use strict";var Te=re();Cn();li();ue();io.exports=Te.des=Te.des||{};Te.des.startEncrypting=function(e,t,n,r){var i=An({key:e,output:n,decrypt:!1,mode:r||(t===null?"ECB":"CBC")});return i.start(t),i};Te.des.createEncryptionCipher=function(e,t){return An({key:e,output:null,decrypt:!1,mode:t})};Te.des.startDecrypting=function(e,t,n,r){var i=An({key:e,output:n,decrypt:!0,mode:r||(t===null?"ECB":"CBC")});return i.start(t),i};Te.des.createDecryptionCipher=function(e,t){return An({key:e,output:null,decrypt:!0,mode:t})};Te.des.Algorithm=function(e,t){var n=this;n.name=e,n.mode=new t({blockSize:8,cipher:{encrypt:function(r,i){return no(n._keys,r,i,!1)},decrypt:function(r,i){return no(n._keys,r,i,!0)}}}),n._init=!1};Te.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=Te.util.createBuffer(e.key);if(this.name.indexOf("3DES")===0&&t.length()!==24)throw new Error("Invalid Triple-DES key size: "+t.length()*8);this._keys=_0(t),this._init=!0}};Nt("DES-ECB",Te.cipher.modes.ecb);Nt("DES-CBC",Te.cipher.modes.cbc);Nt("DES-CFB",Te.cipher.modes.cfb);Nt("DES-OFB",Te.cipher.modes.ofb);Nt("DES-CTR",Te.cipher.modes.ctr);Nt("3DES-ECB",Te.cipher.modes.ecb);Nt("3DES-CBC",Te.cipher.modes.cbc);Nt("3DES-CFB",Te.cipher.modes.cfb);Nt("3DES-OFB",Te.cipher.modes.ofb);Nt("3DES-CTR",Te.cipher.modes.ctr);function Nt(e,t){var n=function(){return new Te.des.Algorithm(e,t)};Te.cipher.registerAlgorithm(e,n)}var d0=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],h0=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],g0=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],m0=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],v0=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],C0=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],y0=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],x0=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function _0(e){for(var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],r=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],a=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],o=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],s=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],l=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],u=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],f=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],g=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],C=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],m=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],S=e.length()>8?3:1,b=[],w=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],O=0,M,H=0;H<S;H++){var V=e.getInt32(),k=e.getInt32();M=(V>>>4^k)&252645135,k^=M,V^=M<<4,M=(k>>>-16^V)&65535,V^=M,k^=M<<-16,M=(V>>>2^k)&858993459,k^=M,V^=M<<2,M=(k>>>-16^V)&65535,V^=M,k^=M<<-16,M=(V>>>1^k)&1431655765,k^=M,V^=M<<1,M=(k>>>8^V)&16711935,V^=M,k^=M<<8,M=(V>>>1^k)&1431655765,k^=M,V^=M<<1,M=V<<8|k>>>20&240,V=k<<24|k<<8&16711680|k>>>8&65280|k>>>24&240,k=M;for(var J=0;J<w.length;++J){w[J]?(V=V<<2|V>>>26,k=k<<2|k>>>26):(V=V<<1|V>>>27,k=k<<1|k>>>27),V&=-15,k&=-15;var ne=t[V>>>28]|n[V>>>24&15]|r[V>>>20&15]|i[V>>>16&15]|a[V>>>12&15]|o[V>>>8&15]|s[V>>>4&15],he=c[k>>>28]|l[k>>>24&15]|u[k>>>20&15]|f[k>>>16&15]|g[k>>>12&15]|C[k>>>8&15]|m[k>>>4&15];M=(he>>>16^ne)&65535,b[O++]=ne^M,b[O++]=he^M<<16}}return b}function no(e,t,n,r){var i=e.length===32?3:9,a;i===3?a=r?[30,-2,-2]:[0,32,2]:a=r?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var o,s=t[0],c=t[1];o=(s>>>4^c)&252645135,c^=o,s^=o<<4,o=(s>>>16^c)&65535,c^=o,s^=o<<16,o=(c>>>2^s)&858993459,s^=o,c^=o<<2,o=(c>>>8^s)&16711935,s^=o,c^=o<<8,o=(s>>>1^c)&1431655765,c^=o,s^=o<<1,s=s<<1|s>>>31,c=c<<1|c>>>31;for(var l=0;l<i;l+=3){for(var u=a[l+1],f=a[l+2],g=a[l];g!=u;g+=f){var C=c^e[g],m=(c>>>4|c<<28)^e[g+1];o=s,s=c,c=o^(h0[C>>>24&63]|m0[C>>>16&63]|C0[C>>>8&63]|x0[C&63]|d0[m>>>24&63]|g0[m>>>16&63]|v0[m>>>8&63]|y0[m&63])}o=s,s=c,c=o}s=s>>>1|s<<31,c=c>>>1|c<<31,o=(s>>>1^c)&1431655765,c^=o,s^=o<<1,o=(c>>>8^s)&16711935,s^=o,c^=o<<8,o=(c>>>2^s)&858993459,s^=o,c^=o<<2,o=(s>>>16^c)&65535,c^=o,s^=o<<16,o=(s>>>4^c)&252645135,c^=o,s^=o<<4,n[0]=s,n[1]=c}function An(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),n="DES-"+t,r;e.decrypt?r=Te.cipher.createDecipher(n,e.key):r=Te.cipher.createCipher(n,e.key);var i=r.start;return r.start=function(a,o){var s=null;o instanceof Te.util.ByteBuffer&&(s=o,o={}),o=o||{},o.output=s,o.iv=a,i.call(r,o)},r}});var Pn=X(()=>{"use strict"});var Bn=X((_p,ao)=>{"use strict";var tt=re();Ir();Mt();ue();var E0=tt.pkcs5=tt.pkcs5||{},Gt;tt.util.isNodejs&&!tt.options.usePureJavaScript&&(Gt=Pn());ao.exports=tt.pbkdf2=E0.pbkdf2=function(e,t,n,r,i,a){if(typeof i=="function"&&(a=i,i=null),tt.util.isNodejs&&!tt.options.usePureJavaScript&&Gt.pbkdf2&&(i===null||typeof i!="object")&&(Gt.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),a?Gt.pbkdf2Sync.length===4?Gt.pbkdf2(e,t,n,r,function(M,H){if(M)return a(M);a(null,H.toString("binary"))}):Gt.pbkdf2(e,t,n,r,i,function(M,H){if(M)return a(M);a(null,H.toString("binary"))}):Gt.pbkdf2Sync.length===4?Gt.pbkdf2Sync(e,t,n,r).toString("binary"):Gt.pbkdf2Sync(e,t,n,r,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in tt.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=tt.md[i].create()}var o=i.digestLength;if(r>4294967295*o){var s=new Error("Derived key is too long.");if(a)return a(s);throw s}var c=Math.ceil(r/o),l=r-(c-1)*o,u=tt.hmac.create();u.start(i,e);var f="",g,C,m;if(!a){for(var S=1;S<=c;++S){u.start(null,null),u.update(t),u.update(tt.util.int32ToBytes(S)),g=m=u.digest().getBytes();for(var b=2;b<=n;++b)u.start(null,null),u.update(m),C=u.digest().getBytes(),g=tt.util.xorBytes(g,C,o),m=C;f+=S<c?g:g.substr(0,l)}return f}var S=1,b;function w(){if(S>c)return a(null,f);u.start(null,null),u.update(t),u.update(tt.util.int32ToBytes(S)),g=m=u.digest().getBytes(),b=2,O()}function O(){if(b<=n)return u.start(null,null),u.update(m),C=u.digest().getBytes(),g=tt.util.xorBytes(g,C,o),m=C,++b,tt.util.setImmediate(O);f+=S<c?g:g.substr(0,l),++S,w()}w()}});var gi=X((Ep,uo)=>{"use strict";var Rt=re();Mt();ue();var so=uo.exports=Rt.sha256=Rt.sha256||{};Rt.md.sha256=Rt.md.algorithms.sha256=so;so.create=function(){lo||S0();var e=null,t=Rt.util.createBuffer(),n=new Array(64),r={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return r.start=function(){r.messageLength=0,r.fullMessageLength=r.messageLength64=[];for(var i=r.messageLengthSize/4,a=0;a<i;++a)r.fullMessageLength.push(0);return t=Rt.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},r},r.start(),r.update=function(i,a){a==="utf8"&&(i=Rt.util.encodeUtf8(i));var o=i.length;r.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var s=r.fullMessageLength.length-1;s>=0;--s)r.fullMessageLength[s]+=o[1],o[1]=o[0]+(r.fullMessageLength[s]/4294967296>>>0),r.fullMessageLength[s]=r.fullMessageLength[s]>>>0,o[0]=o[1]/4294967296>>>0;return t.putBytes(i),oo(e,n,t),(t.read>2048||t.length()===0)&&t.compact(),r},r.digest=function(){var i=Rt.util.createBuffer();i.putBytes(t.bytes());var a=r.fullMessageLength[r.fullMessageLength.length-1]+r.messageLengthSize,o=a&r.blockLength-1;i.putBytes(hi.substr(0,r.blockLength-o));for(var s,c,l=r.fullMessageLength[0]*8,u=0;u<r.fullMessageLength.length-1;++u)s=r.fullMessageLength[u+1]*8,c=s/4294967296>>>0,l+=c,i.putInt32(l>>>0),l=s>>>0;i.putInt32(l);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};oo(f,n,i);var g=Rt.util.createBuffer();return g.putInt32(f.h0),g.putInt32(f.h1),g.putInt32(f.h2),g.putInt32(f.h3),g.putInt32(f.h4),g.putInt32(f.h5),g.putInt32(f.h6),g.putInt32(f.h7),g},r};var hi=null,lo=!1,co=null;function S0(){hi="\x80",hi+=Rt.util.fillString("\0",64),co=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],lo=!0}function oo(e,t,n){for(var r,i,a,o,s,c,l,u,f,g,C,m,S,b,w,O=n.length();O>=64;){for(l=0;l<16;++l)t[l]=n.getInt32();for(;l<64;++l)r=t[l-2],r=(r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,i=t[l-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[l]=r+t[l-7]+i+t[l-16]|0;for(u=e.h0,f=e.h1,g=e.h2,C=e.h3,m=e.h4,S=e.h5,b=e.h6,w=e.h7,l=0;l<64;++l)o=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7),s=b^m&(S^b),a=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),c=u&f|g&(u^f),r=w+o+s+co[l]+t[l],i=a+c,w=b,b=S,S=m,m=C+r>>>0,C=g,g=f,f=u,u=r+i>>>0;e.h0=e.h0+u|0,e.h1=e.h1+f|0,e.h2=e.h2+g|0,e.h3=e.h3+C|0,e.h4=e.h4+m|0,e.h5=e.h5+S|0,e.h6=e.h6+b|0,e.h7=e.h7+w|0,O-=64}}});var mi=X((Sp,fo)=>{"use strict";var kt=re();ue();var On=null;kt.util.isNodejs&&!kt.options.usePureJavaScript&&!process.versions["node-webkit"]&&(On=Pn());var b0=fo.exports=kt.prng=kt.prng||{};b0.create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},n=e.md,r=new Array(32),i=0;i<32;++i)r[i]=n.create();t.pools=r,t.pool=0,t.generate=function(l,u){if(!u)return t.generateSync(l);var f=t.plugin.cipher,g=t.plugin.increment,C=t.plugin.formatKey,m=t.plugin.formatSeed,S=kt.util.createBuffer();t.key=null,b();function b(w){if(w)return u(w);if(S.length()>=l)return u(null,S.getBytes(l));if(t.generated>1048575&&(t.key=null),t.key===null)return kt.util.nextTick(function(){a(b)});var O=f(t.key,t.seed);t.generated+=O.length,S.putBytes(O),t.key=C(f(t.key,g(t.seed))),t.seed=m(f(t.key,t.seed)),kt.util.setImmediate(b)}},t.generateSync=function(l){var u=t.plugin.cipher,f=t.plugin.increment,g=t.plugin.formatKey,C=t.plugin.formatSeed;t.key=null;for(var m=kt.util.createBuffer();m.length()<l;){t.generated>1048575&&(t.key=null),t.key===null&&o();var S=u(t.key,t.seed);t.generated+=S.length,m.putBytes(S),t.key=g(u(t.key,f(t.seed))),t.seed=C(u(t.key,t.seed))}return m.getBytes(l)};function a(l){if(t.pools[0].messageLength>=32)return s(),l();var u=32-t.pools[0].messageLength<<5;t.seedFile(u,function(f,g){if(f)return l(f);t.collect(g),s(),l()})}function o(){if(t.pools[0].messageLength>=32)return s();var l=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(l)),s()}function s(){t.reseeds=t.reseeds===4294967295?0:t.reseeds+1;var l=t.plugin.md.create();l.update(t.keyBytes);for(var u=1,f=0;f<32;++f)t.reseeds%u===0&&(l.update(t.pools[f].digest().getBytes()),t.pools[f].start()),u=u<<1;t.keyBytes=l.digest().getBytes(),l.start(),l.update(t.keyBytes);var g=l.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(g),t.generated=0}function c(l){var u=null,f=kt.util.globalScope,g=f.crypto||f.msCrypto;g&&g.getRandomValues&&(u=function(V){return g.getRandomValues(V)});var C=kt.util.createBuffer();if(u)for(;C.length()<l;){var m=Math.max(1,Math.min(l-C.length(),65536)/4),S=new Uint32Array(Math.floor(m));try{u(S);for(var b=0;b<S.length;++b)C.putInt32(S[b])}catch(V){if(!(typeof QuotaExceededError<"u"&&V instanceof QuotaExceededError))throw V}}if(C.length()<l)for(var w,O,M,H=Math.floor(Math.random()*65536);C.length()<l;){O=16807*(H&65535),w=16807*(H>>16),O+=(w&32767)<<16,O+=w>>15,O=(O&2147483647)+(O>>31),H=O&4294967295;for(var b=0;b<3;++b)M=H>>>(b<<3),M^=Math.floor(Math.random()*256),C.putByte(M&255)}return C.getBytes(l)}return On?(t.seedFile=function(l,u){On.randomBytes(l,function(f,g){if(f)return u(f);u(null,g.toString())})},t.seedFileSync=function(l){return On.randomBytes(l).toString()}):(t.seedFile=function(l,u){try{u(null,c(l))}catch(f){u(f)}},t.seedFileSync=c),t.collect=function(l){for(var u=l.length,f=0;f<u;++f)t.pools[t.pool].update(l.substr(f,1)),t.pool=t.pool===31?0:t.pool+1},t.collectInt=function(l,u){for(var f="",g=0;g<u;g+=8)f+=String.fromCharCode(l>>g&255);t.collect(f)},t.registerWorker=function(l){if(l===self)t.seedFile=function(f,g){function C(m){var S=m.data;S.forge&&S.forge.prng&&(self.removeEventListener("message",C),g(S.forge.prng.err,S.forge.prng.bytes))}self.addEventListener("message",C),self.postMessage({forge:{prng:{needed:f}}})};else{var u=function(f){var g=f.data;g.forge&&g.forge.prng&&t.seedFile(g.forge.prng.needed,function(C,m){l.postMessage({forge:{prng:{err:C,bytes:m}}})})};l.addEventListener("message",u)}},t}});var ht=X((bp,vi)=>{"use strict";var Re=re();er();gi();mi();ue();(function(){if(Re.random&&Re.random.getBytes){vi.exports=Re.random;return}(function(e){var t={},n=new Array(4),r=Re.util.createBuffer();t.formatKey=function(f){var g=Re.util.createBuffer(f);return f=new Array(4),f[0]=g.getInt32(),f[1]=g.getInt32(),f[2]=g.getInt32(),f[3]=g.getInt32(),Re.aes._expandKey(f,!1)},t.formatSeed=function(f){var g=Re.util.createBuffer(f);return f=new Array(4),f[0]=g.getInt32(),f[1]=g.getInt32(),f[2]=g.getInt32(),f[3]=g.getInt32(),f},t.cipher=function(f,g){return Re.aes._updateBlock(f,g,n,!1),r.putInt32(n[0]),r.putInt32(n[1]),r.putInt32(n[2]),r.putInt32(n[3]),r.getBytes()},t.increment=function(f){return++f[3],f},t.md=Re.md.sha256;function i(){var f=Re.prng.create(t);return f.getBytes=function(g,C){return f.generate(g,C)},f.getBytesSync=function(g){return f.generate(g)},f}var a=i(),o=null,s=Re.util.globalScope,c=s.crypto||s.msCrypto;if(c&&c.getRandomValues&&(o=function(f){return c.getRandomValues(f)}),Re.options.usePureJavaScript||!Re.util.isNodejs&&!o){if(typeof window>"u"||window.document,a.collectInt(+new Date,32),typeof navigator<"u"){var l="";for(var u in navigator)try{typeof navigator[u]=="string"&&(l+=navigator[u])}catch{}a.collect(l),l=null}e&&(e().mousemove(function(f){a.collectInt(f.clientX,16),a.collectInt(f.clientY,16)}),e().keypress(function(f){a.collectInt(f.charCode,8)}))}if(!Re.random)Re.random=a;else for(var u in a)Re.random[u]=a[u];Re.random.createInstance=i,vi.exports=Re.random})(typeof jQuery<"u"?jQuery:null)})()});var yi=X((Tp,go)=>{"use strict";var it=re();ue();var Ci=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],po=[1,2,3,5],T0=function(e,t){return e<<t&65535|(e&65535)>>16-t},w0=function(e,t){return(e&65535)>>t|e<<16-t&65535};go.exports=it.rc2=it.rc2||{};it.rc2.expandKey=function(e,t){typeof e=="string"&&(e=it.util.createBuffer(e)),t=t||128;var n=e,r=e.length(),i=t,a=Math.ceil(i/8),o=255>>(i&7),s;for(s=r;s<128;s++)n.putByte(Ci[n.at(s-1)+n.at(s-r)&255]);for(n.setAt(128-a,Ci[n.at(128-a)&o]),s=127-a;s>=0;s--)n.setAt(s,Ci[n.at(s+1)^n.at(s+a)]);return n};var ho=function(e,t,n){var r=!1,i=null,a=null,o=null,s,c,l,u,f=[];for(e=it.rc2.expandKey(e,t),l=0;l<64;l++)f.push(e.getInt16Le());n?(s=function(m){for(l=0;l<4;l++)m[l]+=f[u]+(m[(l+3)%4]&m[(l+2)%4])+(~m[(l+3)%4]&m[(l+1)%4]),m[l]=T0(m[l],po[l]),u++},c=function(m){for(l=0;l<4;l++)m[l]+=f[m[(l+3)%4]&63]}):(s=function(m){for(l=3;l>=0;l--)m[l]=w0(m[l],po[l]),m[l]-=f[u]+(m[(l+3)%4]&m[(l+2)%4])+(~m[(l+3)%4]&m[(l+1)%4]),u--},c=function(m){for(l=3;l>=0;l--)m[l]-=f[m[(l+3)%4]&63]});var g=function(m){var S=[];for(l=0;l<4;l++){var b=i.getInt16Le();o!==null&&(n?b^=o.getInt16Le():o.putInt16Le(b)),S.push(b&65535)}u=n?0:63;for(var w=0;w<m.length;w++)for(var O=0;O<m[w][0];O++)m[w][1](S);for(l=0;l<4;l++)o!==null&&(n?o.putInt16Le(S[l]):S[l]^=o.getInt16Le()),a.putInt16Le(S[l])},C=null;return C={start:function(m,S){m&&typeof m=="string"&&(m=it.util.createBuffer(m)),r=!1,i=it.util.createBuffer(),a=S||new it.util.createBuffer,o=m,C.output=a},update:function(m){for(r||i.putBuffer(m);i.length()>=8;)g([[5,s],[1,c],[6,s],[1,c],[5,s]])},finish:function(m){var S=!0;if(n)if(m)S=m(8,i,!n);else{var b=i.length()===8?8:8-i.length();i.fillWithByte(b,b)}if(S&&(r=!0,C.update()),!n&&(S=i.length()===0,S))if(m)S=m(8,a,!n);else{var w=a.length(),O=a.at(w-1);O>w?S=!1:a.truncate(O)}return S}},C};it.rc2.startEncrypting=function(e,t,n){var r=it.rc2.createEncryptionCipher(e,128);return r.start(t,n),r};it.rc2.createEncryptionCipher=function(e,t){return ho(e,t,!0)};it.rc2.startDecrypting=function(e,t,n){var r=it.rc2.createDecryptionCipher(e,128);return r.start(t,n),r};it.rc2.createDecryptionCipher=function(e,t){return ho(e,t,!1)}});var Qr=X((wp,So)=>{"use strict";var xi=re();So.exports=xi.jsbn=xi.jsbn||{};var Yt,I0=0xdeadbeefcafe,mo=(I0&16777215)==15715070;function L(e,t,n){this.data=[],e!=null&&(typeof e=="number"?this.fromNumber(e,t,n):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}xi.jsbn.BigInteger=L;function fe(){return new L(null)}function A0(e,t,n,r,i,a){for(;--a>=0;){var o=t*this.data[e++]+n.data[r]+i;i=Math.floor(o/67108864),n.data[r++]=o&67108863}return i}function P0(e,t,n,r,i,a){for(var o=t&32767,s=t>>15;--a>=0;){var c=this.data[e]&32767,l=this.data[e++]>>15,u=s*c+l*o;c=o*c+((u&32767)<<15)+n.data[r]+(i&1073741823),i=(c>>>30)+(u>>>15)+s*l+(i>>>30),n.data[r++]=c&1073741823}return i}function vo(e,t,n,r,i,a){for(var o=t&16383,s=t>>14;--a>=0;){var c=this.data[e]&16383,l=this.data[e++]>>14,u=s*c+l*o;c=o*c+((u&16383)<<14)+n.data[r]+i,i=(c>>28)+(u>>14)+s*l,n.data[r++]=c&268435455}return i}typeof navigator>"u"?(L.prototype.am=vo,Yt=28):mo&&navigator.appName=="Microsoft Internet Explorer"?(L.prototype.am=P0,Yt=30):mo&&navigator.appName!="Netscape"?(L.prototype.am=A0,Yt=26):(L.prototype.am=vo,Yt=28);L.prototype.DB=Yt;L.prototype.DM=(1<<Yt)-1;L.prototype.DV=1<<Yt;var _i=52;L.prototype.FV=Math.pow(2,_i);L.prototype.F1=_i-Yt;L.prototype.F2=2*Yt-_i;var B0="0123456789abcdefghijklmnopqrstuvwxyz",Mn=new Array,Pr,gt;Pr=48;for(gt=0;gt<=9;++gt)Mn[Pr++]=gt;Pr=97;for(gt=10;gt<36;++gt)Mn[Pr++]=gt;Pr=65;for(gt=10;gt<36;++gt)Mn[Pr++]=gt;function Co(e){return B0.charAt(e)}function yo(e,t){var n=Mn[e.charCodeAt(t)];return n??-1}function O0(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function M0(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function rr(e){var t=fe();return t.fromInt(e),t}function L0(e,t){var n;if(t==16)n=4;else if(t==8)n=3;else if(t==256)n=8;else if(t==2)n=1;else if(t==32)n=5;else if(t==4)n=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var r=e.length,i=!1,a=0;--r>=0;){var o=n==8?e[r]&255:yo(e,r);if(o<0){e.charAt(r)=="-"&&(i=!0);continue}i=!1,a==0?this.data[this.t++]=o:a+n>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-a)-1)<<a,this.data[this.t++]=o>>this.DB-a):this.data[this.t-1]|=o<<a,a+=n,a>=this.DB&&(a-=this.DB)}n==8&&e[0]&128&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&L.ZERO.subTo(this,this)}function N0(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function R0(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var n=(1<<t)-1,r,i=!1,a="",o=this.t,s=this.DB-o*this.DB%t;if(o-- >0)for(s<this.DB&&(r=this.data[o]>>s)>0&&(i=!0,a=Co(r));o>=0;)s<t?(r=(this.data[o]&(1<<s)-1)<<t-s,r|=this.data[--o]>>(s+=this.DB-t)):(r=this.data[o]>>(s-=t)&n,s<=0&&(s+=this.DB,--o)),r>0&&(i=!0),i&&(a+=Co(r));return i?a:"0"}function k0(){var e=fe();return L.ZERO.subTo(this,e),e}function D0(){return this.s<0?this.negate():this}function V0(e){var t=this.s-e.s;if(t!=0)return t;var n=this.t;if(t=n-e.t,t!=0)return this.s<0?-t:t;for(;--n>=0;)if((t=this.data[n]-e.data[n])!=0)return t;return 0}function Ln(e){var t=1,n;return(n=e>>>16)!=0&&(e=n,t+=16),(n=e>>8)!=0&&(e=n,t+=8),(n=e>>4)!=0&&(e=n,t+=4),(n=e>>2)!=0&&(e=n,t+=2),(n=e>>1)!=0&&(e=n,t+=1),t}function U0(){return this.t<=0?0:this.DB*(this.t-1)+Ln(this.data[this.t-1]^this.s&this.DM)}function F0(e,t){var n;for(n=this.t-1;n>=0;--n)t.data[n+e]=this.data[n];for(n=e-1;n>=0;--n)t.data[n]=0;t.t=this.t+e,t.s=this.s}function K0(e,t){for(var n=e;n<this.t;++n)t.data[n-e]=this.data[n];t.t=Math.max(this.t-e,0),t.s=this.s}function q0(e,t){var n=e%this.DB,r=this.DB-n,i=(1<<r)-1,a=Math.floor(e/this.DB),o=this.s<<n&this.DM,s;for(s=this.t-1;s>=0;--s)t.data[s+a+1]=this.data[s]>>r|o,o=(this.data[s]&i)<<n;for(s=a-1;s>=0;--s)t.data[s]=0;t.data[a]=o,t.t=this.t+a+1,t.s=this.s,t.clamp()}function H0(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}var r=e%this.DB,i=this.DB-r,a=(1<<r)-1;t.data[0]=this.data[n]>>r;for(var o=n+1;o<this.t;++o)t.data[o-n-1]|=(this.data[o]&a)<<i,t.data[o-n]=this.data[o]>>r;r>0&&(t.data[this.t-n-1]|=(this.s&a)<<i),t.t=this.t-n,t.clamp()}function z0(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this.data[n]-e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t.data[n++]=this.DV+r:r>0&&(t.data[n++]=r),t.t=n,t.clamp()}function G0(e,t){var n=this.abs(),r=e.abs(),i=n.t;for(t.t=i+r.t;--i>=0;)t.data[i]=0;for(i=0;i<r.t;++i)t.data[i+n.t]=n.am(0,r.data[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&L.ZERO.subTo(t,t)}function Y0(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e.data[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t.data[n],e,2*n,0,1);(e.data[n+t.t]+=t.am(n+1,2*t.data[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e.data[n+t.t]-=t.DV,e.data[n+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(n,t.data[n],e,2*n,0,1)),e.s=0,e.clamp()}function Q0(e,t,n){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t){t?.fromInt(0),n!=null&&this.copyTo(n);return}n==null&&(n=fe());var a=fe(),o=this.s,s=e.s,c=this.DB-Ln(r.data[r.t-1]);c>0?(r.lShiftTo(c,a),i.lShiftTo(c,n)):(r.copyTo(a),i.copyTo(n));var l=a.t,u=a.data[l-1];if(u!=0){var f=u*(1<<this.F1)+(l>1?a.data[l-2]>>this.F2:0),g=this.FV/f,C=(1<<this.F1)/f,m=1<<this.F2,S=n.t,b=S-l,w=t??fe();for(a.dlShiftTo(b,w),n.compareTo(w)>=0&&(n.data[n.t++]=1,n.subTo(w,n)),L.ONE.dlShiftTo(l,w),w.subTo(a,a);a.t<l;)a.data[a.t++]=0;for(;--b>=0;){var O=n.data[--S]==u?this.DM:Math.floor(n.data[S]*g+(n.data[S-1]+m)*C);if((n.data[S]+=a.am(0,O,n,b,0,l))<O)for(a.dlShiftTo(b,w),n.subTo(w,n);n.data[S]<--O;)n.subTo(w,n)}t!=null&&(n.drShiftTo(l,t),o!=s&&L.ZERO.subTo(t,t)),n.t=l,n.clamp(),c>0&&n.rShiftTo(c,n),o<0&&L.ZERO.subTo(n,n)}}}function j0(e){var t=fe();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(L.ZERO)>0&&e.subTo(t,t),t}function gr(e){this.m=e}function Z0(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function W0(e){return e}function X0(e){e.divRemTo(this.m,null,e)}function $0(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function J0(e,t){e.squareTo(t),this.reduce(t)}gr.prototype.convert=Z0;gr.prototype.revert=W0;gr.prototype.reduce=X0;gr.prototype.mulTo=$0;gr.prototype.sqrTo=J0;function el(){if(this.t<1)return 0;var e=this.data[0];if(!(e&1))return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function mr(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function tl(e){var t=fe();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(L.ZERO)>0&&this.m.subTo(t,t),t}function rl(e){var t=fe();return e.copyTo(t),this.reduce(t),t}function nl(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=e.data[t]&32767,r=n*this.mpl+((n*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e.data[n]+=this.m.am(0,r,e,t,0,this.m.t);e.data[n]>=e.DV;)e.data[n]-=e.DV,e.data[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function il(e,t){e.squareTo(t),this.reduce(t)}function al(e,t,n){e.multiplyTo(t,n),this.reduce(n)}mr.prototype.convert=tl;mr.prototype.revert=rl;mr.prototype.reduce=nl;mr.prototype.mulTo=al;mr.prototype.sqrTo=il;function ol(){return(this.t>0?this.data[0]&1:this.s)==0}function sl(e,t){if(e>4294967295||e<1)return L.ONE;var n=fe(),r=fe(),i=t.convert(this),a=Ln(e)-1;for(i.copyTo(n);--a>=0;)if(t.sqrTo(n,r),(e&1<<a)>0)t.mulTo(r,i,n);else{var o=n;n=r,r=o}return t.revert(n)}function ll(e,t){var n;return e<256||t.isEven()?n=new gr(t):n=new mr(t),this.exp(e,n)}L.prototype.copyTo=O0;L.prototype.fromInt=M0;L.prototype.fromString=L0;L.prototype.clamp=N0;L.prototype.dlShiftTo=F0;L.prototype.drShiftTo=K0;L.prototype.lShiftTo=q0;L.prototype.rShiftTo=H0;L.prototype.subTo=z0;L.prototype.multiplyTo=G0;L.prototype.squareTo=Y0;L.prototype.divRemTo=Q0;L.prototype.invDigit=el;L.prototype.isEven=ol;L.prototype.exp=sl;L.prototype.toString=R0;L.prototype.negate=k0;L.prototype.abs=D0;L.prototype.compareTo=V0;L.prototype.bitLength=U0;L.prototype.mod=j0;L.prototype.modPowInt=ll;L.ZERO=rr(0);L.ONE=rr(1);function cl(){var e=fe();return this.copyTo(e),e}function ul(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function fl(){return this.t==0?this.s:this.data[0]<<24>>24}function pl(){return this.t==0?this.s:this.data[0]<<16>>16}function dl(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function hl(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function gl(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),r=rr(n),i=fe(),a=fe(),o="";for(this.divRemTo(r,i,a);i.signum()>0;)o=(n+a.intValue()).toString(e).substr(1)+o,i.divRemTo(r,i,a);return a.intValue().toString(e)+o}function ml(e,t){this.fromInt(0),t==null&&(t=10);for(var n=this.chunkSize(t),r=Math.pow(t,n),i=!1,a=0,o=0,s=0;s<e.length;++s){var c=yo(e,s);if(c<0){e.charAt(s)=="-"&&this.signum()==0&&(i=!0);continue}o=t*o+c,++a>=n&&(this.dMultiply(r),this.dAddOffset(o,0),a=0,o=0)}a>0&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(o,0)),i&&L.ZERO.subTo(this,this)}function vl(e,t,n){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(L.ONE.shiftLeft(e-1),Ei,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(L.ONE.shiftLeft(e-1),this);else{var r=new Array,i=e&7;r.length=(e>>3)+1,t.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}}function Cl(){var e=this.t,t=new Array;t[0]=this.s;var n=this.DB-e*this.DB%8,r,i=0;if(e-- >0)for(n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=this.data[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),r&128&&(r|=-256),i==0&&(this.s&128)!=(r&128)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t}function yl(e){return this.compareTo(e)==0}function xl(e){return this.compareTo(e)<0?this:e}function _l(e){return this.compareTo(e)>0?this:e}function El(e,t,n){var r,i,a=Math.min(e.t,this.t);for(r=0;r<a;++r)n.data[r]=t(this.data[r],e.data[r]);if(e.t<this.t){for(i=e.s&this.DM,r=a;r<this.t;++r)n.data[r]=t(this.data[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=a;r<e.t;++r)n.data[r]=t(i,e.data[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()}function Sl(e,t){return e&t}function bl(e){var t=fe();return this.bitwiseTo(e,Sl,t),t}function Ei(e,t){return e|t}function Tl(e){var t=fe();return this.bitwiseTo(e,Ei,t),t}function xo(e,t){return e^t}function wl(e){var t=fe();return this.bitwiseTo(e,xo,t),t}function _o(e,t){return e&~t}function Il(e){var t=fe();return this.bitwiseTo(e,_o,t),t}function Al(){for(var e=fe(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function Pl(e){var t=fe();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function Bl(e){var t=fe();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function Ol(e){if(e==0)return-1;var t=0;return e&65535||(e>>=16,t+=16),e&255||(e>>=8,t+=8),e&15||(e>>=4,t+=4),e&3||(e>>=2,t+=2),e&1||++t,t}function Ml(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+Ol(this.data[e]);return this.s<0?this.t*this.DB:-1}function Ll(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function Nl(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=Ll(this.data[n]^t);return e}function Rl(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this.data[t]&1<<e%this.DB)!=0}function kl(e,t){var n=L.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n}function Dl(e){return this.changeBit(e,Ei)}function Vl(e){return this.changeBit(e,_o)}function Ul(e){return this.changeBit(e,xo)}function Fl(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this.data[n]+e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t.data[n++]=r:r<-1&&(t.data[n++]=this.DV+r),t.t=n,t.clamp()}function Kl(e){var t=fe();return this.addTo(e,t),t}function ql(e){var t=fe();return this.subTo(e,t),t}function Hl(e){var t=fe();return this.multiplyTo(e,t),t}function zl(e){var t=fe();return this.divRemTo(e,t,null),t}function Gl(e){var t=fe();return this.divRemTo(e,null,t),t}function Yl(e){var t=fe(),n=fe();return this.divRemTo(e,t,n),new Array(t,n)}function Ql(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function jl(e,t){if(e!=0){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function Yr(){}function Eo(e){return e}function Zl(e,t,n){e.multiplyTo(t,n)}function Wl(e,t){e.squareTo(t)}Yr.prototype.convert=Eo;Yr.prototype.revert=Eo;Yr.prototype.mulTo=Zl;Yr.prototype.sqrTo=Wl;function Xl(e){return this.exp(e,new Yr)}function $l(e,t,n){var r=Math.min(this.t+e.t,t);for(n.s=0,n.t=r;r>0;)n.data[--r]=0;var i;for(i=n.t-this.t;r<i;++r)n.data[r+this.t]=this.am(0,e.data[r],n,r,0,this.t);for(i=Math.min(e.t,t);r<i;++r)this.am(0,e.data[r],n,r,0,t-r);n.clamp()}function Jl(e,t,n){--t;var r=n.t=this.t+e.t-t;for(n.s=0;--r>=0;)n.data[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n.data[this.t+r-t]=this.am(t-r,e.data[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)}function Br(e){this.r2=fe(),this.q3=fe(),L.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function ec(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=fe();return e.copyTo(t),this.reduce(t),t}function tc(e){return e}function rc(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function nc(e,t){e.squareTo(t),this.reduce(t)}function ic(e,t,n){e.multiplyTo(t,n),this.reduce(n)}Br.prototype.convert=ec;Br.prototype.revert=tc;Br.prototype.reduce=rc;Br.prototype.mulTo=ic;Br.prototype.sqrTo=nc;function ac(e,t){var n=e.bitLength(),r,i=rr(1),a;if(n<=0)return i;n<18?r=1:n<48?r=3:n<144?r=4:n<768?r=5:r=6,n<8?a=new gr(t):t.isEven()?a=new Br(t):a=new mr(t);var o=new Array,s=3,c=r-1,l=(1<<r)-1;if(o[1]=a.convert(this),r>1){var u=fe();for(a.sqrTo(o[1],u);s<=l;)o[s]=fe(),a.mulTo(u,o[s-2],o[s]),s+=2}var f=e.t-1,g,C=!0,m=fe(),S;for(n=Ln(e.data[f])-1;f>=0;){for(n>=c?g=e.data[f]>>n-c&l:(g=(e.data[f]&(1<<n+1)-1)<<c-n,f>0&&(g|=e.data[f-1]>>this.DB+n-c)),s=r;!(g&1);)g>>=1,--s;if((n-=s)<0&&(n+=this.DB,--f),C)o[g].copyTo(i),C=!1;else{for(;s>1;)a.sqrTo(i,m),a.sqrTo(m,i),s-=2;s>0?a.sqrTo(i,m):(S=i,i=m,m=S),a.mulTo(m,o[g],i)}for(;f>=0&&!(e.data[f]&1<<n);)a.sqrTo(i,m),S=i,i=m,m=S,--n<0&&(n=this.DB-1,--f)}return a.revert(i)}function oc(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var r=t;t=n,n=r}var i=t.getLowestSetBit(),a=n.getLowestSetBit();if(a<0)return t;for(i<a&&(a=i),a>0&&(t.rShiftTo(a,t),n.rShiftTo(a,n));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return a>0&&n.lShiftTo(a,n),n}function sc(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(t==0)n=this.data[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this.data[r])%e;return n}function lc(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return L.ZERO;for(var n=e.clone(),r=this.clone(),i=rr(1),a=rr(0),o=rr(0),s=rr(1);n.signum()!=0;){for(;n.isEven();)n.rShiftTo(1,n),t?((!i.isEven()||!a.isEven())&&(i.addTo(this,i),a.subTo(e,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;r.isEven();)r.rShiftTo(1,r),t?((!o.isEven()||!s.isEven())&&(o.addTo(this,o),s.subTo(e,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);n.compareTo(r)>=0?(n.subTo(r,n),t&&i.subTo(o,i),a.subTo(s,a)):(r.subTo(n,r),t&&o.subTo(i,o),s.subTo(a,s))}if(r.compareTo(L.ONE)!=0)return L.ZERO;if(s.compareTo(e)>=0)return s.subtract(e);if(s.signum()<0)s.addTo(e,s);else return s;return s.signum()<0?s.add(e):s}var Et=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],cc=(1<<26)/Et[Et.length-1];function uc(e){var t,n=this.abs();if(n.t==1&&n.data[0]<=Et[Et.length-1]){for(t=0;t<Et.length;++t)if(n.data[0]==Et[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<Et.length;){for(var r=Et[t],i=t+1;i<Et.length&&r<cc;)r*=Et[i++];for(r=n.modInt(r);t<i;)if(r%Et[t++]==0)return!1}return n.millerRabin(e)}function fc(e){var t=this.subtract(L.ONE),n=t.getLowestSetBit();if(n<=0)return!1;for(var r=t.shiftRight(n),i=pc(),a,o=0;o<e;++o){do a=new L(this.bitLength(),i);while(a.compareTo(L.ONE)<=0||a.compareTo(t)>=0);var s=a.modPow(r,this);if(s.compareTo(L.ONE)!=0&&s.compareTo(t)!=0){for(var c=1;c++<n&&s.compareTo(t)!=0;)if(s=s.modPowInt(2,this),s.compareTo(L.ONE)==0)return!1;if(s.compareTo(t)!=0)return!1}}return!0}function pc(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(Math.random()*256)}}}L.prototype.chunkSize=dl;L.prototype.toRadix=gl;L.prototype.fromRadix=ml;L.prototype.fromNumber=vl;L.prototype.bitwiseTo=El;L.prototype.changeBit=kl;L.prototype.addTo=Fl;L.prototype.dMultiply=Ql;L.prototype.dAddOffset=jl;L.prototype.multiplyLowerTo=$l;L.prototype.multiplyUpperTo=Jl;L.prototype.modInt=sc;L.prototype.millerRabin=fc;L.prototype.clone=cl;L.prototype.intValue=ul;L.prototype.byteValue=fl;L.prototype.shortValue=pl;L.prototype.signum=hl;L.prototype.toByteArray=Cl;L.prototype.equals=yl;L.prototype.min=xl;L.prototype.max=_l;L.prototype.and=bl;L.prototype.or=Tl;L.prototype.xor=wl;L.prototype.andNot=Il;L.prototype.not=Al;L.prototype.shiftLeft=Pl;L.prototype.shiftRight=Bl;L.prototype.getLowestSetBit=Ml;L.prototype.bitCount=Nl;L.prototype.testBit=Rl;L.prototype.setBit=Dl;L.prototype.clearBit=Vl;L.prototype.flipBit=Ul;L.prototype.add=Kl;L.prototype.subtract=ql;L.prototype.multiply=Hl;L.prototype.divide=zl;L.prototype.remainder=Gl;L.prototype.divideAndRemainder=Yl;L.prototype.modPow=ac;L.prototype.modInverse=lc;L.prototype.pow=Xl;L.prototype.gcd=oc;L.prototype.isProbablePrime=uc});var Or=X((Ip,Io)=>{"use strict";var Dt=re();Mt();ue();var To=Io.exports=Dt.sha1=Dt.sha1||{};Dt.md.sha1=Dt.md.algorithms.sha1=To;To.create=function(){wo||dc();var e=null,t=Dt.util.createBuffer(),n=new Array(80),r={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return r.start=function(){r.messageLength=0,r.fullMessageLength=r.messageLength64=[];for(var i=r.messageLengthSize/4,a=0;a<i;++a)r.fullMessageLength.push(0);return t=Dt.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},r},r.start(),r.update=function(i,a){a==="utf8"&&(i=Dt.util.encodeUtf8(i));var o=i.length;r.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var s=r.fullMessageLength.length-1;s>=0;--s)r.fullMessageLength[s]+=o[1],o[1]=o[0]+(r.fullMessageLength[s]/4294967296>>>0),r.fullMessageLength[s]=r.fullMessageLength[s]>>>0,o[0]=o[1]/4294967296>>>0;return t.putBytes(i),bo(e,n,t),(t.read>2048||t.length()===0)&&t.compact(),r},r.digest=function(){var i=Dt.util.createBuffer();i.putBytes(t.bytes());var a=r.fullMessageLength[r.fullMessageLength.length-1]+r.messageLengthSize,o=a&r.blockLength-1;i.putBytes(Si.substr(0,r.blockLength-o));for(var s,c,l=r.fullMessageLength[0]*8,u=0;u<r.fullMessageLength.length-1;++u)s=r.fullMessageLength[u+1]*8,c=s/4294967296>>>0,l+=c,i.putInt32(l>>>0),l=s>>>0;i.putInt32(l);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};bo(f,n,i);var g=Dt.util.createBuffer();return g.putInt32(f.h0),g.putInt32(f.h1),g.putInt32(f.h2),g.putInt32(f.h3),g.putInt32(f.h4),g},r};var Si=null,wo=!1;function dc(){Si="\x80",Si+=Dt.util.fillString("\0",64),wo=!0}function bo(e,t,n){for(var r,i,a,o,s,c,l,u,f=n.length();f>=64;){for(i=e.h0,a=e.h1,o=e.h2,s=e.h3,c=e.h4,u=0;u<16;++u)r=n.getInt32(),t[u]=r,l=s^a&(o^s),r=(i<<5|i>>>27)+l+c+1518500249+r,c=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=r;for(;u<20;++u)r=t[u-3]^t[u-8]^t[u-14]^t[u-16],r=r<<1|r>>>31,t[u]=r,l=s^a&(o^s),r=(i<<5|i>>>27)+l+c+1518500249+r,c=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=r;for(;u<32;++u)r=t[u-3]^t[u-8]^t[u-14]^t[u-16],r=r<<1|r>>>31,t[u]=r,l=a^o^s,r=(i<<5|i>>>27)+l+c+1859775393+r,c=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=r;for(;u<40;++u)r=t[u-6]^t[u-16]^t[u-28]^t[u-32],r=r<<2|r>>>30,t[u]=r,l=a^o^s,r=(i<<5|i>>>27)+l+c+1859775393+r,c=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=r;for(;u<60;++u)r=t[u-6]^t[u-16]^t[u-28]^t[u-32],r=r<<2|r>>>30,t[u]=r,l=a&o|s&(a^o),r=(i<<5|i>>>27)+l+c+2400959708+r,c=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=r;for(;u<80;++u)r=t[u-6]^t[u-16]^t[u-28]^t[u-32],r=r<<2|r>>>30,t[u]=r,l=a^o^s,r=(i<<5|i>>>27)+l+c+3395469782+r,c=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=r;e.h0=e.h0+i|0,e.h1=e.h1+a|0,e.h2=e.h2+o|0,e.h3=e.h3+s|0,e.h4=e.h4+c|0,f-=64}}});var bi=X((Ap,Po)=>{"use strict";var Vt=re();ue();ht();Or();var Ao=Po.exports=Vt.pkcs1=Vt.pkcs1||{};Ao.encode_rsa_oaep=function(e,t,n){var r,i,a,o;typeof n=="string"?(r=n,i=arguments[3]||void 0,a=arguments[4]||void 0):n&&(r=n.label||void 0,i=n.seed||void 0,a=n.md||void 0,n.mgf1&&n.mgf1.md&&(o=n.mgf1.md)),a?a.start():a=Vt.md.sha1.create(),o||(o=a);var s=Math.ceil(e.n.bitLength()/8),c=s-2*a.digestLength-2;if(t.length>c){var l=new Error("RSAES-OAEP input message length is too long.");throw l.length=t.length,l.maxLength=c,l}r||(r=""),a.update(r,"raw");for(var u=a.digest(),f="",g=c-t.length,C=0;C<g;C++)f+="\0";var m=u.getBytes()+f+""+t;if(!i)i=Vt.random.getBytes(a.digestLength);else if(i.length!==a.digestLength){var l=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw l.seedLength=i.length,l.digestLength=a.digestLength,l}var S=Nn(i,s-a.digestLength-1,o),b=Vt.util.xorBytes(m,S,m.length),w=Nn(b,a.digestLength,o),O=Vt.util.xorBytes(i,w,i.length);return"\0"+O+b};Ao.decode_rsa_oaep=function(e,t,n){var r,i,a;typeof n=="string"?(r=n,i=arguments[3]||void 0):n&&(r=n.label||void 0,i=n.md||void 0,n.mgf1&&n.mgf1.md&&(a=n.mgf1.md));var o=Math.ceil(e.n.bitLength()/8);if(t.length!==o){var b=new Error("RSAES-OAEP encoded message length is invalid.");throw b.length=t.length,b.expectedLength=o,b}if(i===void 0?i=Vt.md.sha1.create():i.start(),a||(a=i),o<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");r||(r=""),i.update(r,"raw");for(var s=i.digest().getBytes(),c=t.charAt(0),l=t.substring(1,i.digestLength+1),u=t.substring(1+i.digestLength),f=Nn(u,i.digestLength,a),g=Vt.util.xorBytes(l,f,l.length),C=Nn(g,o-i.digestLength-1,a),m=Vt.util.xorBytes(u,C,u.length),S=m.substring(0,i.digestLength),b=c!=="\0",w=0;w<i.digestLength;++w)b|=s.charAt(w)!==S.charAt(w);for(var O=1,M=i.digestLength,H=i.digestLength;H<m.length;H++){var V=m.charCodeAt(H),k=V&1^1,J=O?65534:0;b|=V&J,O=O&k,M+=O}if(b||m.charCodeAt(M)!==1)throw new Error("Invalid RSAES-OAEP padding.");return m.substring(M+1)};function Nn(e,t,n){n||(n=Vt.md.sha1.create());for(var r="",i=Math.ceil(t/n.digestLength),a=0;a<i;++a){var o=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255);n.start(),n.update(e+o),r+=n.digest().getBytes()}return r.substring(0,t)}});var wi=X((Pp,Ti)=>{"use strict";var nr=re();ue();Qr();ht();(function(){if(nr.prime){Ti.exports=nr.prime;return}var e=Ti.exports=nr.prime=nr.prime||{},t=nr.jsbn.BigInteger,n=[6,4,2,4,2,4,6,2],r=new t(null);r.fromInt(30);var i=function(f,g){return f|g};e.generateProbablePrime=function(f,g,C){typeof g=="function"&&(C=g,g={}),g=g||{};var m=g.algorithm||"PRIMEINC";typeof m=="string"&&(m={name:m}),m.options=m.options||{};var S=g.prng||nr.random,b={nextBytes:function(w){for(var O=S.getBytesSync(w.length),M=0;M<w.length;++M)w[M]=O.charCodeAt(M)}};if(m.name==="PRIMEINC")return a(f,b,m.options,C);throw new Error("Invalid prime generation algorithm: "+m.name)};function a(f,g,C,m){return"workers"in C?c(f,g,C,m):o(f,g,C,m)}function o(f,g,C,m){var S=l(f,g),b=0,w=u(S.bitLength());"millerRabinTests"in C&&(w=C.millerRabinTests);var O=10;"maxBlockTime"in C&&(O=C.maxBlockTime),s(S,f,g,b,w,O,m)}function s(f,g,C,m,S,b,w){var O=+new Date;do{if(f.bitLength()>g&&(f=l(g,C)),f.isProbablePrime(S))return w(null,f);f.dAddOffset(n[m++%8],0)}while(b<0||+new Date-O<b);nr.util.setImmediate(function(){s(f,g,C,m,S,b,w)})}function c(f,g,C,m){if(typeof Worker>"u")return o(f,g,C,m);var S=l(f,g),b=C.workers,w=C.workLoad||100,O=w*30/8,M=C.workerScript||"forge/prime.worker.js";if(b===-1)return nr.util.estimateCores(function(V,k){V&&(k=2),b=k-1,H()});H();function H(){b=Math.max(1,b);for(var V=[],k=0;k<b;++k)V[k]=new Worker(M);for(var J=b,k=0;k<b;++k)V[k].addEventListener("message",he);var ne=!1;function he(me){if(!ne){--J;var ye=me.data;if(ye.found){for(var Ee=0;Ee<V.length;++Ee)V[Ee].terminate();return ne=!0,m(null,new t(ye.prime,16))}S.bitLength()>f&&(S=l(f,g));var Je=S.toString(16);me.target.postMessage({hex:Je,workLoad:w}),S.dAddOffset(O,0)}}}}function l(f,g){var C=new t(f,g),m=f-1;return C.testBit(m)||C.bitwiseTo(t.ONE.shiftLeft(m),i,C),C.dAddOffset(31-C.mod(r).byteValue(),0),C}function u(f){return f<=100?27:f<=150?18:f<=200?15:f<=250?12:f<=300?9:f<=350?8:f<=400?7:f<=500?6:f<=600?5:f<=800?4:f<=1250?3:2}})()});var jr=X((Bp,ko)=>{"use strict";var Q=re();_t();Qr();tr();bi();wi();ht();ue();typeof le>"u"&&(le=Q.jsbn.BigInteger);var le,Ii=Q.util.isNodejs?Pn():null,T=Q.asn1,mt=Q.util;Q.pki=Q.pki||{};ko.exports=Q.pki.rsa=Q.rsa=Q.rsa||{};var $=Q.pki,hc=[6,4,2,4,2,4,6,2],gc={name:"PrivateKeyInfo",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:T.Class.UNIVERSAL,type:T.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},mc={name:"RSAPrivateKey",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},vc={name:"RSAPublicKey",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},Cc=Q.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:T.Class.UNIVERSAL,type:T.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},yc={name:"DigestInfo",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:T.Class.UNIVERSAL,type:T.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:T.Class.UNIVERSAL,type:T.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:T.Class.UNIVERSAL,type:T.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},xc=function(e){var t;if(e.algorithm in $.oids)t=$.oids[e.algorithm];else{var n=new Error("Unknown message digest algorithm.");throw n.algorithm=e.algorithm,n}var r=T.oidToDer(t).getBytes(),i=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[]),a=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[]);a.value.push(T.create(T.Class.UNIVERSAL,T.Type.OID,!1,r)),a.value.push(T.create(T.Class.UNIVERSAL,T.Type.NULL,!1,""));var o=T.create(T.Class.UNIVERSAL,T.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(a),i.value.push(o),T.toDer(i).getBytes()},No=function(e,t,n){if(n)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(le.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(le.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var r;do r=new le(Q.util.bytesToHex(Q.random.getBytes(t.n.bitLength()/8)),16);while(r.compareTo(t.n)>=0||!r.gcd(t.n).equals(le.ONE));e=e.multiply(r.modPow(t.e,t.n)).mod(t.n);for(var i=e.mod(t.p).modPow(t.dP,t.p),a=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(a)<0;)i=i.add(t.p);var o=i.subtract(a).multiply(t.qInv).mod(t.p).multiply(t.q).add(a);return o=o.multiply(r.modInverse(t.n)).mod(t.n),o};$.rsa.encrypt=function(e,t,n){var r=n,i,a=Math.ceil(t.n.bitLength()/8);n!==!1&&n!==!0?(r=n===2,i=Ro(e,t,n)):(i=Q.util.createBuffer(),i.putBytes(e));for(var o=new le(i.toHex(),16),s=No(o,t,r),c=s.toString(16),l=Q.util.createBuffer(),u=a-Math.ceil(c.length/2);u>0;)l.putByte(0),--u;return l.putBytes(Q.util.hexToBytes(c)),l.getBytes()};$.rsa.decrypt=function(e,t,n,r){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var a=new Error("Encrypted message length is invalid.");throw a.length=e.length,a.expected=i,a}var o=new le(Q.util.createBuffer(e).toHex(),16);if(o.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var s=No(o,t,n),c=s.toString(16),l=Q.util.createBuffer(),u=i-Math.ceil(c.length/2);u>0;)l.putByte(0),--u;return l.putBytes(Q.util.hexToBytes(c)),r!==!1?Rn(l.getBytes(),t,n):l.getBytes()};$.rsa.createKeyPairGenerationState=function(e,t,n){typeof e=="string"&&(e=parseInt(e,10)),e=e||2048,n=n||{};var r=n.prng||Q.random,i={nextBytes:function(s){for(var c=r.getBytesSync(s.length),l=0;l<s.length;++l)s[l]=c.charCodeAt(l)}},a=n.algorithm||"PRIMEINC",o;if(a==="PRIMEINC")o={algorithm:a,state:0,bits:e,rng:i,eInt:t||65537,e:new le(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},o.e.fromInt(o.eInt);else throw new Error("Invalid key generation algorithm: "+a);return o};$.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var n=new le(null);n.fromInt(30);for(var r=0,i=function(f,g){return f|g},a=+new Date,o,s=0;e.keys===null&&(t<=0||s<t);){if(e.state===0){var c=e.p===null?e.pBits:e.qBits,l=c-1;e.pqState===0?(e.num=new le(c,e.rng),e.num.testBit(l)||e.num.bitwiseTo(le.ONE.shiftLeft(l),i,e.num),e.num.dAddOffset(31-e.num.mod(n).byteValue(),0),r=0,++e.pqState):e.pqState===1?e.num.bitLength()>c?e.pqState=0:e.num.isProbablePrime(Ec(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(hc[r++%8],0):e.pqState===2?e.pqState=e.num.subtract(le.ONE).gcd(e.e).compareTo(le.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null)}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(le.ONE),e.q1=e.q.subtract(le.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(le.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var u=e.e.modInverse(e.phi);e.keys={privateKey:$.rsa.setPrivateKey(e.n,e.e,u,e.p,e.q,u.mod(e.p1),u.mod(e.q1),e.q.modInverse(e.p)),publicKey:$.rsa.setPublicKey(e.n,e.e)}}o=+new Date,s+=o-a,a=o}return e.keys!==null};$.rsa.generateKeyPair=function(e,t,n,r){if(arguments.length===1?typeof e=="object"?(n=e,e=void 0):typeof e=="function"&&(r=e,e=void 0):arguments.length===2?typeof e=="number"?typeof t=="function"?(r=t,t=void 0):typeof t!="number"&&(n=t,t=void 0):(n=e,r=t,e=void 0,t=void 0):arguments.length===3&&(typeof t=="number"?typeof n=="function"&&(r=n,n=void 0):(r=n,n=t,t=void 0)),n=n||{},e===void 0&&(e=n.bits||2048),t===void 0&&(t=n.e||65537),!Q.options.usePureJavaScript&&!n.prng&&e>=256&&e<=16384&&(t===65537||t===3)){if(r){if(Bo("generateKeyPair"))return Ii.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(s,c,l){if(s)return r(s);r(null,{privateKey:$.privateKeyFromPem(l),publicKey:$.publicKeyFromPem(c)})});if(Oo("generateKey")&&Oo("exportKey"))return mt.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:Lo(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(s){return mt.globalScope.crypto.subtle.exportKey("pkcs8",s.privateKey)}).then(void 0,function(s){r(s)}).then(function(s){if(s){var c=$.privateKeyFromAsn1(T.fromDer(Q.util.createBuffer(s)));r(null,{privateKey:c,publicKey:$.setRsaPublicKey(c.n,c.e)})}});if(Mo("generateKey")&&Mo("exportKey")){var i=mt.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:Lo(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(s){var c=s.target.result,l=mt.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);l.oncomplete=function(u){var f=u.target.result,g=$.privateKeyFromAsn1(T.fromDer(Q.util.createBuffer(f)));r(null,{privateKey:g,publicKey:$.setRsaPublicKey(g.n,g.e)})},l.onerror=function(u){r(u)}},i.onerror=function(s){r(s)};return}}else if(Bo("generateKeyPairSync")){var a=Ii.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:$.privateKeyFromPem(a.privateKey),publicKey:$.publicKeyFromPem(a.publicKey)}}}var o=$.rsa.createKeyPairGenerationState(e,t,n);if(!r)return $.rsa.stepKeyPairGenerationState(o,0),o.keys;_c(o,n,r)};$.setRsaPublicKey=$.rsa.setPublicKey=function(e,t){var n={n:e,e:t};return n.encrypt=function(r,i,a){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(s,c,l){return Ro(s,c,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(s,c){return Q.pkcs1.encode_rsa_oaep(c,s,a)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(s){return s}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var o=i.encode(r,n,!0);return $.rsa.encrypt(o,n,!0)},n.verify=function(r,i,a,o){typeof a=="string"?a=a.toUpperCase():a===void 0&&(a="RSASSA-PKCS1-V1_5"),o===void 0&&(o={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in o||(o._parseAllDigestBytes=!0),a==="RSASSA-PKCS1-V1_5"?a={verify:function(c,l){l=Rn(l,n,!0);var u=T.fromDer(l,{parseAllBytes:o._parseAllDigestBytes}),f={},g=[];if(!T.validate(u,yc,f,g)){var C=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw C.errors=g,C}var m=T.derToOid(f.algorithmIdentifier);if(!(m===Q.oids.md2||m===Q.oids.md5||m===Q.oids.sha1||m===Q.oids.sha224||m===Q.oids.sha256||m===Q.oids.sha384||m===Q.oids.sha512||m===Q.oids["sha512-224"]||m===Q.oids["sha512-256"])){var C=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw C.oid=m,C}if((m===Q.oids.md2||m===Q.oids.md5)&&!("parameters"in f))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return c===f.digest}}:(a==="NONE"||a==="NULL"||a===null)&&(a={verify:function(c,l){return l=Rn(l,n,!0),c===l}});var s=$.rsa.decrypt(i,n,!0,!1);return a.verify(r,s,n.n.bitLength())},n};$.setRsaPrivateKey=$.rsa.setPrivateKey=function(e,t,n,r,i,a,o,s){var c={n:e,e:t,d:n,p:r,q:i,dP:a,dQ:o,qInv:s};return c.decrypt=function(l,u,f){typeof u=="string"?u=u.toUpperCase():u===void 0&&(u="RSAES-PKCS1-V1_5");var g=$.rsa.decrypt(l,c,!1,!1);if(u==="RSAES-PKCS1-V1_5")u={decode:Rn};else if(u==="RSA-OAEP"||u==="RSAES-OAEP")u={decode:function(C,m){return Q.pkcs1.decode_rsa_oaep(m,C,f)}};else if(["RAW","NONE","NULL",null].indexOf(u)!==-1)u={decode:function(C){return C}};else throw new Error('Unsupported encryption scheme: "'+u+'".');return u.decode(g,c,!1)},c.sign=function(l,u){var f=!1;typeof u=="string"&&(u=u.toUpperCase()),u===void 0||u==="RSASSA-PKCS1-V1_5"?(u={encode:xc},f=1):(u==="NONE"||u==="NULL"||u===null)&&(u={encode:function(){return l}},f=1);var g=u.encode(l,c.n.bitLength());return $.rsa.encrypt(g,c,f)},c};$.wrapRsaPrivateKey=function(e){return T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,T.integerToDer(0).getBytes()),T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer($.oids.rsaEncryption).getBytes()),T.create(T.Class.UNIVERSAL,T.Type.NULL,!1,"")]),T.create(T.Class.UNIVERSAL,T.Type.OCTETSTRING,!1,T.toDer(e).getBytes())])};$.privateKeyFromAsn1=function(e){var t={},n=[];if(T.validate(e,gc,t,n)&&(e=T.fromDer(Q.util.createBuffer(t.privateKey))),t={},n=[],!T.validate(e,mc,t,n)){var r=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw r.errors=n,r}var i,a,o,s,c,l,u,f;return i=Q.util.createBuffer(t.privateKeyModulus).toHex(),a=Q.util.createBuffer(t.privateKeyPublicExponent).toHex(),o=Q.util.createBuffer(t.privateKeyPrivateExponent).toHex(),s=Q.util.createBuffer(t.privateKeyPrime1).toHex(),c=Q.util.createBuffer(t.privateKeyPrime2).toHex(),l=Q.util.createBuffer(t.privateKeyExponent1).toHex(),u=Q.util.createBuffer(t.privateKeyExponent2).toHex(),f=Q.util.createBuffer(t.privateKeyCoefficient).toHex(),$.setRsaPrivateKey(new le(i,16),new le(a,16),new le(o,16),new le(s,16),new le(c,16),new le(l,16),new le(u,16),new le(f,16))};$.privateKeyToAsn1=$.privateKeyToRSAPrivateKey=function(e){return T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,T.integerToDer(0).getBytes()),T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,Ut(e.n)),T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,Ut(e.e)),T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,Ut(e.d)),T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,Ut(e.p)),T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,Ut(e.q)),T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,Ut(e.dP)),T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,Ut(e.dQ)),T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,Ut(e.qInv))])};$.publicKeyFromAsn1=function(e){var t={},n=[];if(T.validate(e,Cc,t,n)){var r=T.derToOid(t.publicKeyOid);if(r!==$.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=r,i}e=t.rsaPublicKey}if(n=[],!T.validate(e,vc,t,n)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=n,i}var a=Q.util.createBuffer(t.publicKeyModulus).toHex(),o=Q.util.createBuffer(t.publicKeyExponent).toHex();return $.setRsaPublicKey(new le(a,16),new le(o,16))};$.publicKeyToAsn1=$.publicKeyToSubjectPublicKeyInfo=function(e){return T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer($.oids.rsaEncryption).getBytes()),T.create(T.Class.UNIVERSAL,T.Type.NULL,!1,"")]),T.create(T.Class.UNIVERSAL,T.Type.BITSTRING,!1,[$.publicKeyToRSAPublicKey(e)])])};$.publicKeyToRSAPublicKey=function(e){return T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,Ut(e.n)),T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,Ut(e.e))])};function Ro(e,t,n){var r=Q.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=e.length,a.max=i-11,a}r.putByte(0),r.putByte(n);var o=i-3-e.length,s;if(n===0||n===1){s=n===0?0:255;for(var c=0;c<o;++c)r.putByte(s)}else for(;o>0;){for(var l=0,u=Q.random.getBytes(o),c=0;c<o;++c)s=u.charCodeAt(c),s===0?++l:r.putByte(s);o=l}return r.putByte(0),r.putBytes(e),r}function Rn(e,t,n,r){var i=Math.ceil(t.n.bitLength()/8),a=Q.util.createBuffer(e),o=a.getByte(),s=a.getByte();if(o!==0||n&&s!==0&&s!==1||!n&&s!=2||n&&s===0&&typeof r>"u")throw new Error("Encryption block is invalid.");var c=0;if(s===0){c=i-3-r;for(var l=0;l<c;++l)if(a.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(s===1)for(c=0;a.length()>1;){if(a.getByte()!==255){--a.read;break}++c}else if(s===2)for(c=0;a.length()>1;){if(a.getByte()===0){--a.read;break}++c}var u=a.getByte();if(u!==0||c!==i-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function _c(e,t,n){typeof t=="function"&&(n=t,t={}),t=t||{};var r={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(r.prng=t.prng),i();function i(){a(e.pBits,function(s,c){if(s)return n(s);if(e.p=c,e.q!==null)return o(s,e.q);a(e.qBits,o)})}function a(s,c){Q.prime.generateProbablePrime(s,r,c)}function o(s,c){if(s)return n(s);if(e.q=c,e.p.compareTo(e.q)<0){var l=e.p;e.p=e.q,e.q=l}if(e.p.subtract(le.ONE).gcd(e.e).compareTo(le.ONE)!==0){e.p=null,i();return}if(e.q.subtract(le.ONE).gcd(e.e).compareTo(le.ONE)!==0){e.q=null,a(e.qBits,o);return}if(e.p1=e.p.subtract(le.ONE),e.q1=e.q.subtract(le.ONE),e.phi=e.p1.multiply(e.q1),e.phi.gcd(e.e).compareTo(le.ONE)!==0){e.p=e.q=null,i();return}if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits){e.q=null,a(e.qBits,o);return}var u=e.e.modInverse(e.phi);e.keys={privateKey:$.rsa.setPrivateKey(e.n,e.e,u,e.p,e.q,u.mod(e.p1),u.mod(e.q1),e.q.modInverse(e.p)),publicKey:$.rsa.setPublicKey(e.n,e.e)},n(null,e.keys)}}function Ut(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var n=Q.util.hexToBytes(t);return n.length>1&&(n.charCodeAt(0)===0&&!(n.charCodeAt(1)&128)||n.charCodeAt(0)===255&&(n.charCodeAt(1)&128)===128)?n.substr(1):n}function Ec(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function Bo(e){return Q.util.isNodejs&&typeof Ii[e]=="function"}function Oo(e){return typeof mt.globalScope<"u"&&typeof mt.globalScope.crypto=="object"&&typeof mt.globalScope.crypto.subtle=="object"&&typeof mt.globalScope.crypto.subtle[e]=="function"}function Mo(e){return typeof mt.globalScope<"u"&&typeof mt.globalScope.msCrypto=="object"&&typeof mt.globalScope.msCrypto.subtle=="object"&&typeof mt.globalScope.msCrypto.subtle[e]=="function"}function Lo(e){for(var t=Q.util.hexToBytes(e.toString(16)),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}});var Ai=X((Op,Ko)=>{"use strict";var z=re();er();_t();Gr();Mt();tr();Bn();hr();ht();yi();jr();ue();typeof Do>"u"&&(Do=z.jsbn.BigInteger);var Do,A=z.asn1,te=z.pki=z.pki||{};Ko.exports=te.pbe=z.pbe=z.pbe||{};var vr=te.oids,Sc={name:"EncryptedPrivateKeyInfo",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:A.Class.UNIVERSAL,type:A.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:A.Class.UNIVERSAL,type:A.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},bc={name:"PBES2Algorithms",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:A.Class.UNIVERSAL,type:A.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:A.Class.UNIVERSAL,type:A.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:A.Class.UNIVERSAL,type:A.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:A.Class.UNIVERSAL,type:A.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:A.Class.UNIVERSAL,type:A.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},Tc={name:"pkcs-12PbeParams",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:A.Class.UNIVERSAL,type:A.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"iterations"}]};te.encryptPrivateKeyInfo=function(e,t,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||"aes128",n.prfAlgorithm=n.prfAlgorithm||"sha1";var r=z.random.getBytesSync(n.saltSize),i=n.count,a=A.integerToDer(i),o,s,c;if(n.algorithm.indexOf("aes")===0||n.algorithm==="des"){var l,u,f;switch(n.algorithm){case"aes128":o=16,l=16,u=vr["aes128-CBC"],f=z.aes.createEncryptionCipher;break;case"aes192":o=24,l=16,u=vr["aes192-CBC"],f=z.aes.createEncryptionCipher;break;case"aes256":o=32,l=16,u=vr["aes256-CBC"],f=z.aes.createEncryptionCipher;break;case"des":o=8,l=8,u=vr.desCBC,f=z.des.createEncryptionCipher;break;default:var g=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw g.algorithm=n.algorithm,g}var C="hmacWith"+n.prfAlgorithm.toUpperCase(),m=Fo(C),S=z.pkcs5.pbkdf2(t,r,i,o,m),b=z.random.getBytesSync(l),w=f(S);w.start(b),w.update(A.toDer(e)),w.finish(),c=w.output.getBytes();var O=wc(r,a,o,C);s=A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(vr.pkcs5PBES2).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(vr.pkcs5PBKDF2).getBytes()),O]),A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(u).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.OCTETSTRING,!1,b)])])])}else if(n.algorithm==="3des"){o=24;var M=new z.util.ByteBuffer(r),S=te.pbe.generatePkcs12Key(t,M,1,i,o),b=te.pbe.generatePkcs12Key(t,M,2,i,o),w=z.des.createEncryptionCipher(S);w.start(b),w.update(A.toDer(e)),w.finish(),c=w.output.getBytes(),s=A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(vr["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OCTETSTRING,!1,r),A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,a.getBytes())])])}else{var g=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw g.algorithm=n.algorithm,g}var H=A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[s,A.create(A.Class.UNIVERSAL,A.Type.OCTETSTRING,!1,c)]);return H};te.decryptPrivateKeyInfo=function(e,t){var n=null,r={},i=[];if(!A.validate(e,Sc,r,i)){var a=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var o=A.derToOid(r.encryptionOid),s=te.pbe.getCipher(o,r.encryptionParams,t),c=z.util.createBuffer(r.encryptedData);return s.update(c),s.finish()&&(n=A.fromDer(s.output)),n};te.encryptedPrivateKeyToPem=function(e,t){var n={type:"ENCRYPTED PRIVATE KEY",body:A.toDer(e).getBytes()};return z.pem.encode(n,{maxline:t})};te.encryptedPrivateKeyFromPem=function(e){var t=z.pem.decode(e)[0];if(t.type!=="ENCRYPTED PRIVATE KEY"){var n=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw n.headerType=t.type,n}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return A.fromDer(t.body)};te.encryptRsaPrivateKey=function(e,t,n){if(n=n||{},!n.legacy){var r=te.wrapRsaPrivateKey(te.privateKeyToAsn1(e));return r=te.encryptPrivateKeyInfo(r,t,n),te.encryptedPrivateKeyToPem(r)}var i,a,o,s;switch(n.algorithm){case"aes128":i="AES-128-CBC",o=16,a=z.random.getBytesSync(16),s=z.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",o=24,a=z.random.getBytesSync(16),s=z.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",o=32,a=z.random.getBytesSync(16),s=z.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",o=24,a=z.random.getBytesSync(8),s=z.des.createEncryptionCipher;break;case"des":i="DES-CBC",o=8,a=z.random.getBytesSync(8),s=z.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+n.algorithm+'".');throw c.algorithm=n.algorithm,c}var l=z.pbe.opensslDeriveBytes(t,a.substr(0,8),o),u=s(l);u.start(a),u.update(A.toDer(te.privateKeyToAsn1(e))),u.finish();var f={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:z.util.bytesToHex(a).toUpperCase()},body:u.output.getBytes()};return z.pem.encode(f)};te.decryptRsaPrivateKey=function(e,t){var n=null,r=z.pem.decode(e)[0];if(r.type!=="ENCRYPTED PRIVATE KEY"&&r.type!=="PRIVATE KEY"&&r.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(r.procType&&r.procType.type==="ENCRYPTED"){var a,o;switch(r.dekInfo.algorithm){case"DES-CBC":a=8,o=z.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,o=z.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,o=z.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,o=z.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,o=z.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,o=function(f){return z.rc2.createDecryptionCipher(f,40)};break;case"RC2-64-CBC":a=8,o=function(f){return z.rc2.createDecryptionCipher(f,64)};break;case"RC2-128-CBC":a=16,o=function(f){return z.rc2.createDecryptionCipher(f,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+r.dekInfo.algorithm+'".');throw i.algorithm=r.dekInfo.algorithm,i}var s=z.util.hexToBytes(r.dekInfo.parameters),c=z.pbe.opensslDeriveBytes(t,s.substr(0,8),a),l=o(c);if(l.start(s),l.update(z.util.createBuffer(r.body)),l.finish())n=l.output.getBytes();else return n}else n=r.body;return r.type==="ENCRYPTED PRIVATE KEY"?n=te.decryptPrivateKeyInfo(A.fromDer(n),t):n=A.fromDer(n),n!==null&&(n=te.privateKeyFromAsn1(n)),n};te.pbe.generatePkcs12Key=function(e,t,n,r,i,a){var o,s;if(typeof a>"u"||a===null){if(!("sha1"in z.md))throw new Error('"sha1" hash algorithm unavailable.');a=z.md.sha1.create()}var c=a.digestLength,l=a.blockLength,u=new z.util.ByteBuffer,f=new z.util.ByteBuffer;if(e!=null){for(s=0;s<e.length;s++)f.putInt16(e.charCodeAt(s));f.putInt16(0)}var g=f.length(),C=t.length(),m=new z.util.ByteBuffer;m.fillWithByte(n,l);var S=l*Math.ceil(C/l),b=new z.util.ByteBuffer;for(s=0;s<S;s++)b.putByte(t.at(s%C));var w=l*Math.ceil(g/l),O=new z.util.ByteBuffer;for(s=0;s<w;s++)O.putByte(f.at(s%g));var M=b;M.putBuffer(O);for(var H=Math.ceil(i/c),V=1;V<=H;V++){var k=new z.util.ByteBuffer;k.putBytes(m.bytes()),k.putBytes(M.bytes());for(var J=0;J<r;J++)a.start(),a.update(k.getBytes()),k=a.digest();var ne=new z.util.ByteBuffer;for(s=0;s<l;s++)ne.putByte(k.at(s%c));var he=Math.ceil(C/l)+Math.ceil(g/l),me=new z.util.ByteBuffer;for(o=0;o<he;o++){var ye=new z.util.ByteBuffer(M.getBytes(l)),Ee=511;for(s=ne.length()-1;s>=0;s--)Ee=Ee>>8,Ee+=ne.at(s)+ye.at(s),ye.setAt(s,Ee&255);me.putBuffer(ye)}M=me,u.putBuffer(k)}return u.truncate(u.length()-i),u};te.pbe.getCipher=function(e,t,n){switch(e){case te.oids.pkcs5PBES2:return te.pbe.getCipherForPBES2(e,t,n);case te.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case te.oids["pbewithSHAAnd40BitRC2-CBC"]:return te.pbe.getCipherForPKCS12PBE(e,t,n);default:var r=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw r.oid=e,r.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],r}};te.pbe.getCipherForPBES2=function(e,t,n){var r={},i=[];if(!A.validate(t,bc,r,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}if(e=A.derToOid(r.kdfOid),e!==te.oids.pkcs5PBKDF2){var a=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw a.oid=e,a.supportedOids=["pkcs5PBKDF2"],a}if(e=A.derToOid(r.encOid),e!==te.oids["aes128-CBC"]&&e!==te.oids["aes192-CBC"]&&e!==te.oids["aes256-CBC"]&&e!==te.oids["des-EDE3-CBC"]&&e!==te.oids.desCBC){var a=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw a.oid=e,a.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],a}var o=r.kdfSalt,s=z.util.createBuffer(r.kdfIterationCount);s=s.getInt(s.length()<<3);var c,l;switch(te.oids[e]){case"aes128-CBC":c=16,l=z.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,l=z.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,l=z.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,l=z.des.createDecryptionCipher;break;case"desCBC":c=8,l=z.des.createDecryptionCipher;break}var u=Uo(r.prfOid),f=z.pkcs5.pbkdf2(n,o,s,c,u),g=r.encIv,C=l(f);return C.start(g),C};te.pbe.getCipherForPKCS12PBE=function(e,t,n){var r={},i=[];if(!A.validate(t,Tc,r,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var o=z.util.createBuffer(r.salt),s=z.util.createBuffer(r.iterations);s=s.getInt(s.length()<<3);var c,l,u;switch(e){case te.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,l=8,u=z.des.startDecrypting;break;case te.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,l=8,u=function(S,b){var w=z.rc2.createDecryptionCipher(S,40);return w.start(b,null),w};break;default:var a=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw a.oid=e,a}var f=Uo(r.prfOid),g=te.pbe.generatePkcs12Key(n,o,1,s,c,f);f.start();var C=te.pbe.generatePkcs12Key(n,o,2,s,l,f);return u(g,C)};te.pbe.opensslDeriveBytes=function(e,t,n,r){if(typeof r>"u"||r===null){if(!("md5"in z.md))throw new Error('"md5" hash algorithm unavailable.');r=z.md.md5.create()}t===null&&(t="");for(var i=[Vo(r,e+t)],a=16,o=1;a<n;++o,a+=16)i.push(Vo(r,i[o-1]+e+t));return i.join("").substr(0,n)};function Vo(e,t){return e.start().update(t).digest().getBytes()}function Uo(e){var t;if(!e)t="hmacWithSHA1";else if(t=te.oids[A.derToOid(e)],!t){var n=new Error("Unsupported PRF OID.");throw n.oid=e,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}return Fo(t)}function Fo(e){var t=z.md;switch(e){case"hmacWithSHA224":t=z.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var n=new Error("Unsupported PRF algorithm.");throw n.algorithm=e,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}function wc(e,t,n,r){var i=A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OCTETSTRING,!1,e),A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,t.getBytes())]);return r!=="hmacWithSHA1"&&i.value.push(A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,z.util.hexToBytes(n.toString(16))),A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(te.oids[r]).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.NULL,!1,"")])),i}});var Pi=X((Mp,zo)=>{"use strict";var Mr=re();_t();ue();var q=Mr.asn1,Lr=zo.exports=Mr.pkcs7asn1=Mr.pkcs7asn1||{};Mr.pkcs7=Mr.pkcs7||{};Mr.pkcs7.asn1=Lr;var qo={name:"ContentInfo",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:q.Class.UNIVERSAL,type:q.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:q.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};Lr.contentInfoValidator=qo;var Ho={name:"EncryptedContentInfo",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:q.Class.UNIVERSAL,type:q.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:q.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:q.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};Lr.envelopedDataValidator={name:"EnvelopedData",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:q.Class.UNIVERSAL,type:q.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(Ho)};Lr.encryptedDataValidator={name:"EncryptedData",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"version"}].concat(Ho)};var Ic={name:"SignerInfo",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:q.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:q.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:q.Class.UNIVERSAL,type:q.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:q.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};Lr.signedDataValidator={name:"SignedData",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:q.Class.UNIVERSAL,type:q.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},qo,{name:"SignedData.Certificates",tagClass:q.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:q.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:q.Class.UNIVERSAL,type:q.Type.SET,capture:"signerInfos",optional:!0,value:[Ic]}]};Lr.recipientInfoValidator={name:"RecipientInfo",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:q.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:q.Class.UNIVERSAL,type:q.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var Bi=X((Lp,Go)=>{"use strict";var Cr=re();ue();Cr.mgf=Cr.mgf||{};var Ac=Go.exports=Cr.mgf.mgf1=Cr.mgf1=Cr.mgf1||{};Ac.create=function(e){var t={generate:function(n,r){for(var i=new Cr.util.ByteBuffer,a=Math.ceil(r/e.digestLength),o=0;o<a;o++){var s=new Cr.util.ByteBuffer;s.putInt32(o),e.start(),e.update(n+s.getBytes()),i.putBuffer(e.digest())}return i.truncate(i.length()-r),i.getBytes()}};return t}});var Qo=X((Np,Yo)=>{"use strict";var kn=re();Bi();Yo.exports=kn.mgf=kn.mgf||{};kn.mgf.mgf1=kn.mgf1});var Dn=X((Rp,jo)=>{"use strict";var yr=re();ht();ue();var Pc=jo.exports=yr.pss=yr.pss||{};Pc.create=function(e){arguments.length===3&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t=e.md,n=e.mgf,r=t.digestLength,i=e.salt||null;typeof i=="string"&&(i=yr.util.createBuffer(i));var a;if("saltLength"in e)a=e.saltLength;else if(i!==null)a=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==a)throw new Error("Given salt length does not match length of given salt.");var o=e.prng||yr.random,s={};return s.encode=function(c,l){var u,f=l-1,g=Math.ceil(f/8),C=c.digest().getBytes();if(g<r+a+2)throw new Error("Message is too long to encrypt.");var m;i===null?m=o.getBytesSync(a):m=i.bytes();var S=new yr.util.ByteBuffer;S.fillWithByte(0,8),S.putBytes(C),S.putBytes(m),t.start(),t.update(S.getBytes());var b=t.digest().getBytes(),w=new yr.util.ByteBuffer;w.fillWithByte(0,g-a-r-2),w.putByte(1),w.putBytes(m);var O=w.getBytes(),M=g-r-1,H=n.generate(b,M),V="";for(u=0;u<M;u++)V+=String.fromCharCode(O.charCodeAt(u)^H.charCodeAt(u));var k=65280>>8*g-f&255;return V=String.fromCharCode(V.charCodeAt(0)&~k)+V.substr(1),V+b+"\xBC"},s.verify=function(c,l,u){var f,g=u-1,C=Math.ceil(g/8);if(l=l.substr(-C),C<r+a+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(l.charCodeAt(C-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var m=C-r-1,S=l.substr(0,m),b=l.substr(m,r),w=65280>>8*C-g&255;if(S.charCodeAt(0)&w)throw new Error("Bits beyond keysize not zero as expected.");var O=n.generate(b,m),M="";for(f=0;f<m;f++)M+=String.fromCharCode(S.charCodeAt(f)^O.charCodeAt(f));M=String.fromCharCode(M.charCodeAt(0)&~w)+M.substr(1);var H=C-r-a-2;for(f=0;f<H;f++)if(M.charCodeAt(f)!==0)throw new Error("Leftmost octets not zero as expected");if(M.charCodeAt(H)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var V=M.substr(-a),k=new yr.util.ByteBuffer;k.fillWithByte(0,8),k.putBytes(c),k.putBytes(V),t.start(),t.update(k.getBytes());var J=t.digest().getBytes();return b===J},s}});var Fn=X((kp,Jo)=>{"use strict";var j=re();er();_t();Gr();Mt();Qo();tr();hr();Dn();jr();ue();var p=j.asn1,D=Jo.exports=j.pki=j.pki||{},ce=D.oids,we={};we.CN=ce.commonName;we.commonName="CN";we.C=ce.countryName;we.countryName="C";we.L=ce.localityName;we.localityName="L";we.ST=ce.stateOrProvinceName;we.stateOrProvinceName="ST";we.O=ce.organizationName;we.organizationName="O";we.OU=ce.organizationalUnitName;we.organizationalUnitName="OU";we.E=ce.emailAddress;we.emailAddress="E";var Wo=j.pki.rsa.publicKeyValidator,Bc={name:"Certificate",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:p.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:p.Class.UNIVERSAL,type:p.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:p.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:p.Class.UNIVERSAL,type:p.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:p.Class.UNIVERSAL,type:p.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:p.Class.UNIVERSAL,type:p.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:p.Class.UNIVERSAL,type:p.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},Wo,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:p.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:p.Class.UNIVERSAL,type:p.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:p.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:p.Class.UNIVERSAL,type:p.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:p.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:p.Class.UNIVERSAL,type:p.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:p.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:p.Class.UNIVERSAL,type:p.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},Oc={name:"rsapss",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:p.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:p.Class.UNIVERSAL,type:p.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:p.Class.UNIVERSAL,type:p.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:p.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:p.Class.UNIVERSAL,type:p.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:p.Class.UNIVERSAL,type:p.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:p.Class.UNIVERSAL,type:p.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:p.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:p.Class.UNIVERSAL,type:p.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:p.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:p.Class.UNIVERSAL,type:p.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},Mc={name:"CertificationRequestInfo",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},Wo,{name:"CertificationRequestInfo.attributes",tagClass:p.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:p.Class.UNIVERSAL,type:p.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:p.Class.UNIVERSAL,type:p.Type.SET,constructed:!0}]}]}]},Lc={name:"CertificationRequest",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[Mc,{name:"CertificationRequest.signatureAlgorithm",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:p.Class.UNIVERSAL,type:p.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:p.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:p.Class.UNIVERSAL,type:p.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};D.RDNAttributesAsArray=function(e,t){for(var n=[],r,i,a,o=0;o<e.value.length;++o){r=e.value[o];for(var s=0;s<r.value.length;++s)a={},i=r.value[s],a.type=p.derToOid(i.value[0].value),a.value=i.value[1].value,a.valueTagClass=i.value[1].type,a.type in ce&&(a.name=ce[a.type],a.name in we&&(a.shortName=we[a.name])),t&&(t.update(a.type),t.update(a.value)),n.push(a)}return n};D.CRIAttributesAsArray=function(e){for(var t=[],n=0;n<e.length;++n)for(var r=e[n],i=p.derToOid(r.value[0].value),a=r.value[1].value,o=0;o<a.length;++o){var s={};if(s.type=i,s.value=a[o].value,s.valueTagClass=a[o].type,s.type in ce&&(s.name=ce[s.type],s.name in we&&(s.shortName=we[s.name])),s.type===ce.extensionRequest){s.extensions=[];for(var c=0;c<s.value.length;++c)s.extensions.push(D.certificateExtensionFromAsn1(s.value[c]))}t.push(s)}return t};function ir(e,t){typeof t=="string"&&(t={shortName:t});for(var n=null,r,i=0;n===null&&i<e.attributes.length;++i)r=e.attributes[i],(t.type&&t.type===r.type||t.name&&t.name===r.name||t.shortName&&t.shortName===r.shortName)&&(n=r);return n}var Vn=function(e,t,n){var r={};if(e!==ce["RSASSA-PSS"])return r;n&&(r={hash:{algorithmOid:ce.sha1},mgf:{algorithmOid:ce.mgf1,hash:{algorithmOid:ce.sha1}},saltLength:20});var i={},a=[];if(!p.validate(t,Oc,i,a)){var o=new Error("Cannot read RSASSA-PSS parameter block.");throw o.errors=a,o}return i.hashOid!==void 0&&(r.hash=r.hash||{},r.hash.algorithmOid=p.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(r.mgf=r.mgf||{},r.mgf.algorithmOid=p.derToOid(i.maskGenOid),r.mgf.hash=r.mgf.hash||{},r.mgf.hash.algorithmOid=p.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(r.saltLength=i.saltLength.charCodeAt(0)),r},Un=function(e){switch(ce[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return j.md.sha1.create();case"md5WithRSAEncryption":return j.md.md5.create();case"sha256WithRSAEncryption":return j.md.sha256.create();case"sha384WithRSAEncryption":return j.md.sha384.create();case"sha512WithRSAEncryption":return j.md.sha512.create();case"RSASSA-PSS":return j.md.sha256.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},Xo=function(e){var t=e.certificate,n;switch(t.signatureOid){case ce.sha1WithRSAEncryption:case ce.sha1WithRSASignature:break;case ce["RSASSA-PSS"]:var r,i;if(r=ce[t.signatureParameters.mgf.hash.algorithmOid],r===void 0||j.md[r]===void 0){var a=new Error("Unsupported MGF hash function.");throw a.oid=t.signatureParameters.mgf.hash.algorithmOid,a.name=r,a}if(i=ce[t.signatureParameters.mgf.algorithmOid],i===void 0||j.mgf[i]===void 0){var a=new Error("Unsupported MGF function.");throw a.oid=t.signatureParameters.mgf.algorithmOid,a.name=i,a}if(i=j.mgf[i].create(j.md[r].create()),r=ce[t.signatureParameters.hash.algorithmOid],r===void 0||j.md[r]===void 0){var a=new Error("Unsupported RSASSA-PSS hash function.");throw a.oid=t.signatureParameters.hash.algorithmOid,a.name=r,a}n=j.pss.create(j.md[r].create(),i,t.signatureParameters.saltLength);break}return t.publicKey.verify(e.md.digest().getBytes(),e.signature,n)};D.certificateFromPem=function(e,t,n){var r=j.pem.decode(e)[0];if(r.type!=="CERTIFICATE"&&r.type!=="X509 CERTIFICATE"&&r.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=r.type,i}if(r.procType&&r.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var a=p.fromDer(r.body,n);return D.certificateFromAsn1(a,t)};D.certificateToPem=function(e,t){var n={type:"CERTIFICATE",body:p.toDer(D.certificateToAsn1(e)).getBytes()};return j.pem.encode(n,{maxline:t})};D.publicKeyFromPem=function(e){var t=j.pem.decode(e)[0];if(t.type!=="PUBLIC KEY"&&t.type!=="RSA PUBLIC KEY"){var n=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw n.headerType=t.type,n}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var r=p.fromDer(t.body);return D.publicKeyFromAsn1(r)};D.publicKeyToPem=function(e,t){var n={type:"PUBLIC KEY",body:p.toDer(D.publicKeyToAsn1(e)).getBytes()};return j.pem.encode(n,{maxline:t})};D.publicKeyToRSAPublicKeyPem=function(e,t){var n={type:"RSA PUBLIC KEY",body:p.toDer(D.publicKeyToRSAPublicKey(e)).getBytes()};return j.pem.encode(n,{maxline:t})};D.getPublicKeyFingerprint=function(e,t){t=t||{};var n=t.md||j.md.sha1.create(),r=t.type||"RSAPublicKey",i;switch(r){case"RSAPublicKey":i=p.toDer(D.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":i=p.toDer(D.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}n.start(),n.update(i);var a=n.digest();if(t.encoding==="hex"){var o=a.toHex();return t.delimiter?o.match(/.{2}/g).join(t.delimiter):o}else{if(t.encoding==="binary")return a.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return a};D.certificationRequestFromPem=function(e,t,n){var r=j.pem.decode(e)[0];if(r.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=r.type,i}if(r.procType&&r.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var a=p.fromDer(r.body,n);return D.certificationRequestFromAsn1(a,t)};D.certificationRequestToPem=function(e,t){var n={type:"CERTIFICATE REQUEST",body:p.toDer(D.certificationRequestToAsn1(e)).getBytes()};return j.pem.encode(n,{maxline:t})};D.createCertificate=function(){var e={};return e.version=2,e.serialNumber="00",e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return ir(e.issuer,t)},e.issuer.addField=function(t){vt([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return ir(e.subject,t)},e.subject.addField=function(t){vt([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,n){vt(t),e.subject.attributes=t,delete e.subject.uniqueId,n&&(e.subject.uniqueId=n),e.subject.hash=null},e.setIssuer=function(t,n){vt(t),e.issuer.attributes=t,delete e.issuer.uniqueId,n&&(e.issuer.uniqueId=n),e.issuer.hash=null},e.setExtensions=function(t){for(var n=0;n<t.length;++n)$o(t[n],{cert:e});e.extensions=t},e.getExtension=function(t){typeof t=="string"&&(t={name:t});for(var n=null,r,i=0;n===null&&i<e.extensions.length;++i)r=e.extensions[i],(t.id&&r.id===t.id||t.name&&r.name===t.name)&&(n=r);return n},e.sign=function(t,n){e.md=n||j.md.sha1.create();var r=ce[e.md.algorithm+"WithRSAEncryption"];if(!r){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=r,e.tbsCertificate=D.getTBSCertificate(e);var a=p.toDer(e.tbsCertificate);e.md.update(a.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var n=!1;if(!e.issued(t)){var r=t.issuer,i=e.subject,a=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw a.expectedIssuer=i.attributes,a.actualIssuer=r.attributes,a}var o=t.md;if(o===null){o=Un({signatureOid:t.signatureOid,type:"certificate"});var s=t.tbsCertificate||D.getTBSCertificate(t),c=p.toDer(s);o.update(c.getBytes())}return o!==null&&(n=Xo({certificate:e,md:o,signature:t.signature})),n},e.isIssuer=function(t){var n=!1,r=e.issuer,i=t.subject;if(r.hash&&i.hash)n=r.hash===i.hash;else if(r.attributes.length===i.attributes.length){n=!0;for(var a,o,s=0;n&&s<r.attributes.length;++s)a=r.attributes[s],o=i.attributes[s],(a.type!==o.type||a.value!==o.value)&&(n=!1)}return n},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return D.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=ce.subjectKeyIdentifier,n=0;n<e.extensions.length;++n){var r=e.extensions[n];if(r.id===t){var i=e.generateSubjectKeyIdentifier().getBytes();return j.util.hexToBytes(r.subjectKeyIdentifier)===i}}return!1},e};D.certificateFromAsn1=function(e,t){var n={},r=[];if(!p.validate(e,Bc,n,r)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=r,i}var a=p.derToOid(n.publicKeyOid);if(a!==D.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var o=D.createCertificate();o.version=n.certVersion?n.certVersion.charCodeAt(0):0;var s=j.util.createBuffer(n.certSerialNumber);o.serialNumber=s.toHex(),o.signatureOid=j.asn1.derToOid(n.certSignatureOid),o.signatureParameters=Vn(o.signatureOid,n.certSignatureParams,!0),o.siginfo.algorithmOid=j.asn1.derToOid(n.certinfoSignatureOid),o.siginfo.parameters=Vn(o.siginfo.algorithmOid,n.certinfoSignatureParams,!1),o.signature=n.certSignature;var c=[];if(n.certValidity1UTCTime!==void 0&&c.push(p.utcTimeToDate(n.certValidity1UTCTime)),n.certValidity2GeneralizedTime!==void 0&&c.push(p.generalizedTimeToDate(n.certValidity2GeneralizedTime)),n.certValidity3UTCTime!==void 0&&c.push(p.utcTimeToDate(n.certValidity3UTCTime)),n.certValidity4GeneralizedTime!==void 0&&c.push(p.generalizedTimeToDate(n.certValidity4GeneralizedTime)),c.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(c.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(o.validity.notBefore=c[0],o.validity.notAfter=c[1],o.tbsCertificate=n.tbsCertificate,t){o.md=Un({signatureOid:o.signatureOid,type:"certificate"});var l=p.toDer(o.tbsCertificate);o.md.update(l.getBytes())}var u=j.md.sha1.create(),f=p.toDer(n.certIssuer);u.update(f.getBytes()),o.issuer.getField=function(m){return ir(o.issuer,m)},o.issuer.addField=function(m){vt([m]),o.issuer.attributes.push(m)},o.issuer.attributes=D.RDNAttributesAsArray(n.certIssuer),n.certIssuerUniqueId&&(o.issuer.uniqueId=n.certIssuerUniqueId),o.issuer.hash=u.digest().toHex();var g=j.md.sha1.create(),C=p.toDer(n.certSubject);return g.update(C.getBytes()),o.subject.getField=function(m){return ir(o.subject,m)},o.subject.addField=function(m){vt([m]),o.subject.attributes.push(m)},o.subject.attributes=D.RDNAttributesAsArray(n.certSubject),n.certSubjectUniqueId&&(o.subject.uniqueId=n.certSubjectUniqueId),o.subject.hash=g.digest().toHex(),n.certExtensions?o.extensions=D.certificateExtensionsFromAsn1(n.certExtensions):o.extensions=[],o.publicKey=D.publicKeyFromAsn1(n.subjectPublicKeyInfo),o};D.certificateExtensionsFromAsn1=function(e){for(var t=[],n=0;n<e.value.length;++n)for(var r=e.value[n],i=0;i<r.value.length;++i)t.push(D.certificateExtensionFromAsn1(r.value[i]));return t};D.certificateExtensionFromAsn1=function(e){var t={};if(t.id=p.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===p.Type.BOOLEAN?(t.critical=e.value[1].value.charCodeAt(0)!==0,t.value=e.value[2].value):t.value=e.value[1].value,t.id in ce){if(t.name=ce[t.id],t.name==="keyUsage"){var n=p.fromDer(t.value),r=0,i=0;n.value.length>1&&(r=n.value.charCodeAt(1),i=n.value.length>2?n.value.charCodeAt(2):0),t.digitalSignature=(r&128)===128,t.nonRepudiation=(r&64)===64,t.keyEncipherment=(r&32)===32,t.dataEncipherment=(r&16)===16,t.keyAgreement=(r&8)===8,t.keyCertSign=(r&4)===4,t.cRLSign=(r&2)===2,t.encipherOnly=(r&1)===1,t.decipherOnly=(i&128)===128}else if(t.name==="basicConstraints"){var n=p.fromDer(t.value);n.value.length>0&&n.value[0].type===p.Type.BOOLEAN?t.cA=n.value[0].value.charCodeAt(0)!==0:t.cA=!1;var a=null;n.value.length>0&&n.value[0].type===p.Type.INTEGER?a=n.value[0].value:n.value.length>1&&(a=n.value[1].value),a!==null&&(t.pathLenConstraint=p.derToInteger(a))}else if(t.name==="extKeyUsage")for(var n=p.fromDer(t.value),o=0;o<n.value.length;++o){var s=p.derToOid(n.value[o].value);s in ce?t[ce[s]]=!0:t[s]=!0}else if(t.name==="nsCertType"){var n=p.fromDer(t.value),r=0;n.value.length>1&&(r=n.value.charCodeAt(1)),t.client=(r&128)===128,t.server=(r&64)===64,t.email=(r&32)===32,t.objsign=(r&16)===16,t.reserved=(r&8)===8,t.sslCA=(r&4)===4,t.emailCA=(r&2)===2,t.objCA=(r&1)===1}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.altNames=[];for(var c,n=p.fromDer(t.value),l=0;l<n.value.length;++l){c=n.value[l];var u={type:c.type,value:c.value};switch(t.altNames.push(u),c.type){case 1:case 2:case 6:break;case 7:u.ip=j.util.bytesToIP(c.value);break;case 8:u.oid=p.derToOid(c.value);break;default:}}}else if(t.name==="subjectKeyIdentifier"){var n=p.fromDer(t.value);t.subjectKeyIdentifier=j.util.bytesToHex(n.value)}}return t};D.certificationRequestFromAsn1=function(e,t){var n={},r=[];if(!p.validate(e,Lc,n,r)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=r,i}var a=p.derToOid(n.publicKeyOid);if(a!==D.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var o=D.createCertificationRequest();if(o.version=n.csrVersion?n.csrVersion.charCodeAt(0):0,o.signatureOid=j.asn1.derToOid(n.csrSignatureOid),o.signatureParameters=Vn(o.signatureOid,n.csrSignatureParams,!0),o.siginfo.algorithmOid=j.asn1.derToOid(n.csrSignatureOid),o.siginfo.parameters=Vn(o.siginfo.algorithmOid,n.csrSignatureParams,!1),o.signature=n.csrSignature,o.certificationRequestInfo=n.certificationRequestInfo,t){o.md=Un({signatureOid:o.signatureOid,type:"certification request"});var s=p.toDer(o.certificationRequestInfo);o.md.update(s.getBytes())}var c=j.md.sha1.create();return o.subject.getField=function(l){return ir(o.subject,l)},o.subject.addField=function(l){vt([l]),o.subject.attributes.push(l)},o.subject.attributes=D.RDNAttributesAsArray(n.certificationRequestInfoSubject,c),o.subject.hash=c.digest().toHex(),o.publicKey=D.publicKeyFromAsn1(n.subjectPublicKeyInfo),o.getAttribute=function(l){return ir(o,l)},o.addAttribute=function(l){vt([l]),o.attributes.push(l)},o.attributes=D.CRIAttributesAsArray(n.certificationRequestInfoAttributes||[]),o};D.createCertificationRequest=function(){var e={};return e.version=0,e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return ir(e.subject,t)},e.subject.addField=function(t){vt([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return ir(e,t)},e.addAttribute=function(t){vt([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){vt(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){vt(t),e.attributes=t},e.sign=function(t,n){e.md=n||j.md.sha1.create();var r=ce[e.md.algorithm+"WithRSAEncryption"];if(!r){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=r,e.certificationRequestInfo=D.getCertificationRequestInfo(e);var a=p.toDer(e.certificationRequestInfo);e.md.update(a.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,n=e.md;if(n===null){n=Un({signatureOid:e.signatureOid,type:"certification request"});var r=e.certificationRequestInfo||D.getCertificationRequestInfo(e),i=p.toDer(r);n.update(i.getBytes())}return n!==null&&(t=Xo({certificate:e,md:n,signature:e.signature})),t},e};function Nr(e){for(var t=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]),n,r,i=e.attributes,a=0;a<i.length;++a){n=i[a];var o=n.value,s=p.Type.PRINTABLESTRING;"valueTagClass"in n&&(s=n.valueTagClass,s===p.Type.UTF8&&(o=j.util.encodeUtf8(o))),r=p.create(p.Class.UNIVERSAL,p.Type.SET,!0,[p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(n.type).getBytes()),p.create(p.Class.UNIVERSAL,s,!1,o)])]),t.value.push(r)}return t}function vt(e){for(var t,n=0;n<e.length;++n){if(t=e[n],typeof t.name>"u"&&(t.type&&t.type in D.oids?t.name=D.oids[t.type]:t.shortName&&t.shortName in we&&(t.name=D.oids[we[t.shortName]])),typeof t.type>"u")if(t.name&&t.name in D.oids)t.type=D.oids[t.name];else{var r=new Error("Attribute type not specified.");throw r.attribute=t,r}if(typeof t.shortName>"u"&&t.name&&t.name in we&&(t.shortName=we[t.name]),t.type===ce.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=p.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var i=0;i<t.extensions.length;++i)t.value.push(D.certificateExtensionToAsn1($o(t.extensions[i])))}if(typeof t.value>"u"){var r=new Error("Attribute value not specified.");throw r.attribute=t,r}}}function $o(e,t){if(t=t||{},typeof e.name>"u"&&e.id&&e.id in D.oids&&(e.name=D.oids[e.id]),typeof e.id>"u")if(e.name&&e.name in D.oids)e.id=D.oids[e.name];else{var n=new Error("Extension ID not specified.");throw n.extension=e,n}if(typeof e.value<"u")return e;if(e.name==="keyUsage"){var r=0,i=0,a=0;e.digitalSignature&&(i|=128,r=7),e.nonRepudiation&&(i|=64,r=6),e.keyEncipherment&&(i|=32,r=5),e.dataEncipherment&&(i|=16,r=4),e.keyAgreement&&(i|=8,r=3),e.keyCertSign&&(i|=4,r=2),e.cRLSign&&(i|=2,r=1),e.encipherOnly&&(i|=1,r=0),e.decipherOnly&&(a|=128,r=7);var o=String.fromCharCode(r);a!==0?o+=String.fromCharCode(i)+String.fromCharCode(a):i!==0&&(o+=String.fromCharCode(i)),e.value=p.create(p.Class.UNIVERSAL,p.Type.BITSTRING,!1,o)}else if(e.name==="basicConstraints")e.value=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(p.create(p.Class.UNIVERSAL,p.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in e&&e.value.value.push(p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,p.integerToDer(e.pathLenConstraint).getBytes()));else if(e.name==="extKeyUsage"){e.value=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]);var s=e.value.value;for(var c in e)e[c]===!0&&(c in ce?s.push(p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(ce[c]).getBytes())):c.indexOf(".")!==-1&&s.push(p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(c).getBytes())))}else if(e.name==="nsCertType"){var r=0,i=0;e.client&&(i|=128,r=7),e.server&&(i|=64,r=6),e.email&&(i|=32,r=5),e.objsign&&(i|=16,r=4),e.reserved&&(i|=8,r=3),e.sslCA&&(i|=4,r=2),e.emailCA&&(i|=2,r=1),e.objCA&&(i|=1,r=0);var o=String.fromCharCode(r);i!==0&&(o+=String.fromCharCode(i)),e.value=p.create(p.Class.UNIVERSAL,p.Type.BITSTRING,!1,o)}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.value=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]);for(var l,u=0;u<e.altNames.length;++u){l=e.altNames[u];var o=l.value;if(l.type===7&&l.ip){if(o=j.util.bytesFromIP(l.ip),o===null){var n=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw n.extension=e,n}}else l.type===8&&(l.oid?o=p.oidToDer(p.oidToDer(l.oid)):o=p.oidToDer(o));e.value.value.push(p.create(p.Class.CONTEXT_SPECIFIC,l.type,!1,o))}}else if(e.name==="nsComment"&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=p.create(p.Class.UNIVERSAL,p.Type.IA5STRING,!1,e.comment)}else if(e.name==="subjectKeyIdentifier"&&t.cert){var f=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=f.toHex(),e.value=p.create(p.Class.UNIVERSAL,p.Type.OCTETSTRING,!1,f.getBytes())}else if(e.name==="authorityKeyIdentifier"&&t.cert){e.value=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]);var s=e.value.value;if(e.keyIdentifier){var g=e.keyIdentifier===!0?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;s.push(p.create(p.Class.CONTEXT_SPECIFIC,0,!1,g))}if(e.authorityCertIssuer){var C=[p.create(p.Class.CONTEXT_SPECIFIC,4,!0,[Nr(e.authorityCertIssuer===!0?t.cert.issuer:e.authorityCertIssuer)])];s.push(p.create(p.Class.CONTEXT_SPECIFIC,1,!0,C))}if(e.serialNumber){var m=j.util.hexToBytes(e.serialNumber===!0?t.cert.serialNumber:e.serialNumber);s.push(p.create(p.Class.CONTEXT_SPECIFIC,2,!1,m))}}else if(e.name==="cRLDistributionPoints"){e.value=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]);for(var s=e.value.value,S=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]),b=p.create(p.Class.CONTEXT_SPECIFIC,0,!0,[]),l,u=0;u<e.altNames.length;++u){l=e.altNames[u];var o=l.value;if(l.type===7&&l.ip){if(o=j.util.bytesFromIP(l.ip),o===null){var n=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw n.extension=e,n}}else l.type===8&&(l.oid?o=p.oidToDer(p.oidToDer(l.oid)):o=p.oidToDer(o));b.value.push(p.create(p.Class.CONTEXT_SPECIFIC,l.type,!1,o))}S.value.push(p.create(p.Class.CONTEXT_SPECIFIC,0,!0,[b])),s.push(S)}if(typeof e.value>"u"){var n=new Error("Extension value not specified.");throw n.extension=e,n}return e}function Oi(e,t){switch(e){case ce["RSASSA-PSS"]:var n=[];return t.hash.algorithmOid!==void 0&&n.push(p.create(p.Class.CONTEXT_SPECIFIC,0,!0,[p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(t.hash.algorithmOid).getBytes()),p.create(p.Class.UNIVERSAL,p.Type.NULL,!1,"")])])),t.mgf.algorithmOid!==void 0&&n.push(p.create(p.Class.CONTEXT_SPECIFIC,1,!0,[p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(t.mgf.algorithmOid).getBytes()),p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(t.mgf.hash.algorithmOid).getBytes()),p.create(p.Class.UNIVERSAL,p.Type.NULL,!1,"")])])])),t.saltLength!==void 0&&n.push(p.create(p.Class.CONTEXT_SPECIFIC,2,!0,[p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,p.integerToDer(t.saltLength).getBytes())])),p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,n);default:return p.create(p.Class.UNIVERSAL,p.Type.NULL,!1,"")}}function Nc(e){var t=p.create(p.Class.CONTEXT_SPECIFIC,0,!0,[]);if(e.attributes.length===0)return t;for(var n=e.attributes,r=0;r<n.length;++r){var i=n[r],a=i.value,o=p.Type.UTF8;"valueTagClass"in i&&(o=i.valueTagClass),o===p.Type.UTF8&&(a=j.util.encodeUtf8(a));var s=!1;"valueConstructed"in i&&(s=i.valueConstructed);var c=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(i.type).getBytes()),p.create(p.Class.UNIVERSAL,p.Type.SET,!0,[p.create(p.Class.UNIVERSAL,o,s,a)])]);t.value.push(c)}return t}var Rc=new Date("1950-01-01T00:00:00Z"),kc=new Date("2050-01-01T00:00:00Z");function Zo(e){return e>=Rc&&e<kc?p.create(p.Class.UNIVERSAL,p.Type.UTCTIME,!1,p.dateToUtcTime(e)):p.create(p.Class.UNIVERSAL,p.Type.GENERALIZEDTIME,!1,p.dateToGeneralizedTime(e))}D.getTBSCertificate=function(e){var t=Zo(e.validity.notBefore),n=Zo(e.validity.notAfter),r=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.CONTEXT_SPECIFIC,0,!0,[p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,p.integerToDer(e.version).getBytes())]),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,j.util.hexToBytes(e.serialNumber)),p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(e.siginfo.algorithmOid).getBytes()),Oi(e.siginfo.algorithmOid,e.siginfo.parameters)]),Nr(e.issuer),p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[t,n]),Nr(e.subject),D.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&r.value.push(p.create(p.Class.CONTEXT_SPECIFIC,1,!0,[p.create(p.Class.UNIVERSAL,p.Type.BITSTRING,!1,"\0"+e.issuer.uniqueId)])),e.subject.uniqueId&&r.value.push(p.create(p.Class.CONTEXT_SPECIFIC,2,!0,[p.create(p.Class.UNIVERSAL,p.Type.BITSTRING,!1,"\0"+e.subject.uniqueId)])),e.extensions.length>0&&r.value.push(D.certificateExtensionsToAsn1(e.extensions)),r};D.getCertificationRequestInfo=function(e){var t=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,p.integerToDer(e.version).getBytes()),Nr(e.subject),D.publicKeyToAsn1(e.publicKey),Nc(e)]);return t};D.distinguishedNameToAsn1=function(e){return Nr(e)};D.certificateToAsn1=function(e){var t=e.tbsCertificate||D.getTBSCertificate(e);return p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[t,p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(e.signatureOid).getBytes()),Oi(e.signatureOid,e.signatureParameters)]),p.create(p.Class.UNIVERSAL,p.Type.BITSTRING,!1,"\0"+e.signature)])};D.certificateExtensionsToAsn1=function(e){var t=p.create(p.Class.CONTEXT_SPECIFIC,3,!0,[]),n=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]);t.value.push(n);for(var r=0;r<e.length;++r)n.value.push(D.certificateExtensionToAsn1(e[r]));return t};D.certificateExtensionToAsn1=function(e){var t=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]);t.value.push(p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(e.id).getBytes())),e.critical&&t.value.push(p.create(p.Class.UNIVERSAL,p.Type.BOOLEAN,!1,"\xFF"));var n=e.value;return typeof e.value!="string"&&(n=p.toDer(n).getBytes()),t.value.push(p.create(p.Class.UNIVERSAL,p.Type.OCTETSTRING,!1,n)),t};D.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||D.getCertificationRequestInfo(e);return p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[t,p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(e.signatureOid).getBytes()),Oi(e.signatureOid,e.signatureParameters)]),p.create(p.Class.UNIVERSAL,p.Type.BITSTRING,!1,"\0"+e.signature)])};D.createCaStore=function(e){var t={certs:{}};t.getIssuer=function(o){var s=n(o.issuer);return s},t.addCertificate=function(o){if(typeof o=="string"&&(o=j.pki.certificateFromPem(o)),r(o.subject),!t.hasCertificate(o))if(o.subject.hash in t.certs){var s=t.certs[o.subject.hash];j.util.isArray(s)||(s=[s]),s.push(o),t.certs[o.subject.hash]=s}else t.certs[o.subject.hash]=o},t.hasCertificate=function(o){typeof o=="string"&&(o=j.pki.certificateFromPem(o));var s=n(o.subject);if(!s)return!1;j.util.isArray(s)||(s=[s]);for(var c=p.toDer(D.certificateToAsn1(o)).getBytes(),l=0;l<s.length;++l){var u=p.toDer(D.certificateToAsn1(s[l])).getBytes();if(c===u)return!0}return!1},t.listAllCertificates=function(){var o=[];for(var s in t.certs)if(t.certs.hasOwnProperty(s)){var c=t.certs[s];if(!j.util.isArray(c))o.push(c);else for(var l=0;l<c.length;++l)o.push(c[l])}return o},t.removeCertificate=function(o){var s;if(typeof o=="string"&&(o=j.pki.certificateFromPem(o)),r(o.subject),!t.hasCertificate(o))return null;var c=n(o.subject);if(!j.util.isArray(c))return s=t.certs[o.subject.hash],delete t.certs[o.subject.hash],s;for(var l=p.toDer(D.certificateToAsn1(o)).getBytes(),u=0;u<c.length;++u){var f=p.toDer(D.certificateToAsn1(c[u])).getBytes();l===f&&(s=c[u],c.splice(u,1))}return c.length===0&&delete t.certs[o.subject.hash],s};function n(o){return r(o),t.certs[o.hash]||null}function r(o){if(!o.hash){var s=j.md.sha1.create();o.attributes=D.RDNAttributesAsArray(Nr(o),s),o.hash=s.digest().toHex()}}if(e)for(var i=0;i<e.length;++i){var a=e[i];t.addCertificate(a)}return t};D.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};D.verifyCertificateChain=function(e,t,n){typeof n=="function"&&(n={verify:n}),n=n||{},t=t.slice(0);var r=t.slice(0),i=n.validityCheckDate;typeof i>"u"&&(i=new Date);var a=!0,o=null,s=0;do{var c=t.shift(),l=null,u=!1;if(i&&(i<c.validity.notBefore||i>c.validity.notAfter)&&(o={message:"Certificate is not valid yet or has expired.",error:D.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:i}),o===null){if(l=t[0]||e.getIssuer(c),l===null&&c.isIssuer(c)&&(u=!0,l=c),l){var f=l;j.util.isArray(f)||(f=[f]);for(var g=!1;!g&&f.length>0;){l=f.shift();try{g=l.verify(c)}catch{}}g||(o={message:"Certificate signature is invalid.",error:D.certificateError.bad_certificate})}o===null&&(!l||u)&&!e.hasCertificate(c)&&(o={message:"Certificate is not trusted.",error:D.certificateError.unknown_ca})}if(o===null&&l&&!c.isIssuer(l)&&(o={message:"Certificate issuer is invalid.",error:D.certificateError.bad_certificate}),o===null)for(var C={keyUsage:!0,basicConstraints:!0},m=0;o===null&&m<c.extensions.length;++m){var S=c.extensions[m];S.critical&&!(S.name in C)&&(o={message:"Certificate has an unsupported critical extension.",error:D.certificateError.unsupported_certificate})}if(o===null&&(!a||t.length===0&&(!l||u))){var b=c.getExtension("basicConstraints"),w=c.getExtension("keyUsage");if(w!==null&&(!w.keyCertSign||b===null)&&(o={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:D.certificateError.bad_certificate}),o===null&&b!==null&&!b.cA&&(o={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:D.certificateError.bad_certificate}),o===null&&w!==null&&"pathLenConstraint"in b){var O=s-1;O>b.pathLenConstraint&&(o={message:"Certificate basicConstraints pathLenConstraint violated.",error:D.certificateError.bad_certificate})}}var M=o===null?!0:o.error,H=n.verify?n.verify(M,s,r):M;if(H===!0)o=null;else throw M===!0&&(o={message:"The application rejected the certificate.",error:D.certificateError.bad_certificate}),(H||H===0)&&(typeof H=="object"&&!j.util.isArray(H)?(H.message&&(o.message=H.message),H.error&&(o.error=H.error)):typeof H=="string"&&(o.error=H)),o;a=!1,++s}while(t.length>0);return!0}});var Li=X((Dp,ts)=>{"use strict";var _e=re();_t();Ir();tr();Pi();Ai();ht();jr();Or();ue();Fn();var v=_e.asn1,ae=_e.pki,Wr=ts.exports=_e.pkcs12=_e.pkcs12||{},es={name:"ContentInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:v.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},Dc={name:"PFX",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"version"},es,{name:"PFX.macData",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:v.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:v.Class.UNIVERSAL,type:v.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:v.Class.UNIVERSAL,type:v.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},Vc={name:"SafeBag",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:v.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:v.Class.UNIVERSAL,type:v.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},Uc={name:"Attribute",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:v.Class.UNIVERSAL,type:v.Type.SET,constructed:!0,capture:"values"}]},Fc={name:"CertBag",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:v.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:v.Class.UNIVERSAL,type:v.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function Zr(e,t,n,r){for(var i=[],a=0;a<e.length;a++)for(var o=0;o<e[a].safeBags.length;o++){var s=e[a].safeBags[o];if(!(r!==void 0&&s.type!==r)){if(t===null){i.push(s);continue}s.attributes[t]!==void 0&&s.attributes[t].indexOf(n)>=0&&i.push(s)}}return i}Wr.pkcs12FromAsn1=function(e,t,n){typeof t=="string"?(n=t,t=!0):t===void 0&&(t=!0);var r={},i=[];if(!v.validate(e,Dc,r,i)){var a=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw a.errors=a,a}var o={version:r.version.charCodeAt(0),safeContents:[],getBags:function(b){var w={},O;return"localKeyId"in b?O=b.localKeyId:"localKeyIdHex"in b&&(O=_e.util.hexToBytes(b.localKeyIdHex)),O===void 0&&!("friendlyName"in b)&&"bagType"in b&&(w[b.bagType]=Zr(o.safeContents,null,null,b.bagType)),O!==void 0&&(w.localKeyId=Zr(o.safeContents,"localKeyId",O,b.bagType)),"friendlyName"in b&&(w.friendlyName=Zr(o.safeContents,"friendlyName",b.friendlyName,b.bagType)),w},getBagsByFriendlyName:function(b,w){return Zr(o.safeContents,"friendlyName",b,w)},getBagsByLocalKeyId:function(b,w){return Zr(o.safeContents,"localKeyId",b,w)}};if(r.version.charCodeAt(0)!==3){var a=new Error("PKCS#12 PFX of version other than 3 not supported.");throw a.version=r.version.charCodeAt(0),a}if(v.derToOid(r.contentType)!==ae.oids.data){var a=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw a.oid=v.derToOid(r.contentType),a}var s=r.content.value[0];if(s.tagClass!==v.Class.UNIVERSAL||s.type!==v.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(s=Mi(s),r.mac){var c=null,l=0,u=v.derToOid(r.macAlgorithm);switch(u){case ae.oids.sha1:c=_e.md.sha1.create(),l=20;break;case ae.oids.sha256:c=_e.md.sha256.create(),l=32;break;case ae.oids.sha384:c=_e.md.sha384.create(),l=48;break;case ae.oids.sha512:c=_e.md.sha512.create(),l=64;break;case ae.oids.md5:c=_e.md.md5.create(),l=16;break}if(c===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+u);var f=new _e.util.ByteBuffer(r.macSalt),g="macIterations"in r?parseInt(_e.util.bytesToHex(r.macIterations),16):1,C=Wr.generateKey(n,f,3,g,l,c),m=_e.hmac.create();m.start(c,C),m.update(s.value);var S=m.getMac();if(S.getBytes()!==r.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return Kc(o,s.value,t,n),o};function Mi(e){if(e.composed||e.constructed){for(var t=_e.util.createBuffer(),n=0;n<e.value.length;++n)t.putBytes(e.value[n].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function Kc(e,t,n,r){if(t=v.fromDer(t,n),t.tagClass!==v.Class.UNIVERSAL||t.type!==v.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<t.value.length;i++){var a=t.value[i],o={},s=[];if(!v.validate(a,es,o,s)){var c=new Error("Cannot read ContentInfo.");throw c.errors=s,c}var l={encrypted:!1},u=null,f=o.content.value[0];switch(v.derToOid(o.contentType)){case ae.oids.data:if(f.tagClass!==v.Class.UNIVERSAL||f.type!==v.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");u=Mi(f).value;break;case ae.oids.encryptedData:u=qc(f,r),l.encrypted=!0;break;default:var c=new Error("Unsupported PKCS#12 contentType.");throw c.contentType=v.derToOid(o.contentType),c}l.safeBags=Hc(u,n,r),e.safeContents.push(l)}}function qc(e,t){var n={},r=[];if(!v.validate(e,_e.pkcs7.asn1.encryptedDataValidator,n,r)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=r,i}var a=v.derToOid(n.contentType);if(a!==ae.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=a,i}a=v.derToOid(n.encAlgorithm);var o=ae.pbe.getCipher(a,n.encParameter,t),s=Mi(n.encryptedContentAsn1),c=_e.util.createBuffer(s.value);if(o.update(c),!o.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return o.output.getBytes()}function Hc(e,t,n){if(!t&&e.length===0)return[];if(e=v.fromDer(e,t),e.tagClass!==v.Class.UNIVERSAL||e.type!==v.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var r=[],i=0;i<e.value.length;i++){var a=e.value[i],o={},s=[];if(!v.validate(a,Vc,o,s)){var c=new Error("Cannot read SafeBag.");throw c.errors=s,c}var l={type:v.derToOid(o.bagId),attributes:zc(o.bagAttributes)};r.push(l);var u,f,g=o.bagValue.value[0];switch(l.type){case ae.oids.pkcs8ShroudedKeyBag:if(g=ae.decryptPrivateKeyInfo(g,n),g===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case ae.oids.keyBag:try{l.key=ae.privateKeyFromAsn1(g)}catch{l.key=null,l.asn1=g}continue;case ae.oids.certBag:u=Fc,f=function(){if(v.derToOid(o.certId)!==ae.oids.x509Certificate){var m=new Error("Unsupported certificate type, only X.509 supported.");throw m.oid=v.derToOid(o.certId),m}var S=v.fromDer(o.cert,t);try{l.cert=ae.certificateFromAsn1(S,!0)}catch{l.cert=null,l.asn1=S}};break;default:var c=new Error("Unsupported PKCS#12 SafeBag type.");throw c.oid=l.type,c}if(u!==void 0&&!v.validate(g,u,o,s)){var c=new Error("Cannot read PKCS#12 "+u.name);throw c.errors=s,c}f()}return r}function zc(e){var t={};if(e!==void 0)for(var n=0;n<e.length;++n){var r={},i=[];if(!v.validate(e[n],Uc,r,i)){var a=new Error("Cannot read PKCS#12 BagAttribute.");throw a.errors=i,a}var o=v.derToOid(r.oid);if(ae.oids[o]!==void 0){t[ae.oids[o]]=[];for(var s=0;s<r.values.length;++s)t[ae.oids[o]].push(r.values[s].value)}}return t}Wr.toPkcs12Asn1=function(e,t,n,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||r.encAlgorithm||"aes128","useMac"in r||(r.useMac=!0),"localKeyId"in r||(r.localKeyId=null),"generateLocalKeyId"in r||(r.generateLocalKeyId=!0);var i=r.localKeyId,a;if(i!==null)i=_e.util.hexToBytes(i);else if(r.generateLocalKeyId)if(t){var o=_e.util.isArray(t)?t[0]:t;typeof o=="string"&&(o=ae.certificateFromPem(o));var s=_e.md.sha1.create();s.update(v.toDer(ae.certificateToAsn1(o)).getBytes()),i=s.digest().getBytes()}else i=_e.random.getBytes(20);var c=[];i!==null&&c.push(v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(ae.oids.localKeyId).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.SET,!0,[v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,i)])])),"friendlyName"in r&&c.push(v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(ae.oids.friendlyName).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.SET,!0,[v.create(v.Class.UNIVERSAL,v.Type.BMPSTRING,!1,r.friendlyName)])])),c.length>0&&(a=v.create(v.Class.UNIVERSAL,v.Type.SET,!0,c));var l=[],u=[];t!==null&&(_e.util.isArray(t)?u=t:u=[t]);for(var f=[],g=0;g<u.length;++g){t=u[g],typeof t=="string"&&(t=ae.certificateFromPem(t));var C=g===0?a:void 0,m=ae.certificateToAsn1(t),S=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(ae.oids.certBag).getBytes()),v.create(v.Class.CONTEXT_SPECIFIC,0,!0,[v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(ae.oids.x509Certificate).getBytes()),v.create(v.Class.CONTEXT_SPECIFIC,0,!0,[v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,v.toDer(m).getBytes())])])]),C]);f.push(S)}if(f.length>0){var b=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,f),w=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(ae.oids.data).getBytes()),v.create(v.Class.CONTEXT_SPECIFIC,0,!0,[v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,v.toDer(b).getBytes())])]);l.push(w)}var O=null;if(e!==null){var M=ae.wrapRsaPrivateKey(ae.privateKeyToAsn1(e));n===null?O=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(ae.oids.keyBag).getBytes()),v.create(v.Class.CONTEXT_SPECIFIC,0,!0,[M]),a]):O=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(ae.oids.pkcs8ShroudedKeyBag).getBytes()),v.create(v.Class.CONTEXT_SPECIFIC,0,!0,[ae.encryptPrivateKeyInfo(M,n,r)]),a]);var H=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[O]),V=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(ae.oids.data).getBytes()),v.create(v.Class.CONTEXT_SPECIFIC,0,!0,[v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,v.toDer(H).getBytes())])]);l.push(V)}var k=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,l),J;if(r.useMac){var s=_e.md.sha1.create(),ne=new _e.util.ByteBuffer(_e.random.getBytes(r.saltSize)),he=r.count,e=Wr.generateKey(n,ne,3,he,20),me=_e.hmac.create();me.start(s,e),me.update(v.toDer(k).getBytes());var ye=me.getMac();J=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(ae.oids.sha1).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,"")]),v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,ye.getBytes())]),v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,ne.getBytes()),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,v.integerToDer(he).getBytes())])}return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,v.integerToDer(3).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(ae.oids.data).getBytes()),v.create(v.Class.CONTEXT_SPECIFIC,0,!0,[v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,v.toDer(k).getBytes())])]),J])};Wr.generateKey=_e.pbe.generatePkcs12Key});var Ri=X((Vp,rs)=>{"use strict";var ar=re();_t();tr();Ai();hr();Bn();Li();Dn();jr();ue();Fn();var Ni=ar.asn1,Rr=rs.exports=ar.pki=ar.pki||{};Rr.pemToDer=function(e){var t=ar.pem.decode(e)[0];if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return ar.util.createBuffer(t.body)};Rr.privateKeyFromPem=function(e){var t=ar.pem.decode(e)[0];if(t.type!=="PRIVATE KEY"&&t.type!=="RSA PRIVATE KEY"){var n=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw n.headerType=t.type,n}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var r=Ni.fromDer(t.body);return Rr.privateKeyFromAsn1(r)};Rr.privateKeyToPem=function(e,t){var n={type:"RSA PRIVATE KEY",body:Ni.toDer(Rr.privateKeyToAsn1(e)).getBytes()};return ar.pem.encode(n,{maxline:t})};Rr.privateKeyInfoToPem=function(e,t){var n={type:"PRIVATE KEY",body:Ni.toDer(e).getBytes()};return ar.pem.encode(n,{maxline:t})}});var Ki=X((Up,us)=>{"use strict";var N=re();_t();Ir();Tn();hr();Ri();ht();Or();ue();var zn=function(e,t,n,r){var i=N.util.createBuffer(),a=e.length>>1,o=a+(e.length&1),s=e.substr(0,o),c=e.substr(a,o),l=N.util.createBuffer(),u=N.hmac.create();n=t+n;var f=Math.ceil(r/16),g=Math.ceil(r/20);u.start("MD5",s);var C=N.util.createBuffer();l.putBytes(n);for(var m=0;m<f;++m)u.start(null,null),u.update(l.getBytes()),l.putBuffer(u.digest()),u.start(null,null),u.update(l.bytes()+n),C.putBuffer(u.digest());u.start("SHA1",c);var S=N.util.createBuffer();l.clear(),l.putBytes(n);for(var m=0;m<g;++m)u.start(null,null),u.update(l.getBytes()),l.putBuffer(u.digest()),u.start(null,null),u.update(l.bytes()+n),S.putBuffer(u.digest());return i.putBytes(N.util.xorBytes(C.getBytes(),S.getBytes(),r)),i},Gc=function(e,t,n){var r=N.hmac.create();r.start("SHA1",e);var i=N.util.createBuffer();return i.putInt32(t[0]),i.putInt32(t[1]),i.putByte(n.type),i.putByte(n.version.major),i.putByte(n.version.minor),i.putInt16(n.length),i.putBytes(n.fragment.bytes()),r.update(i.getBytes()),r.digest().getBytes()},Yc=function(e,t,n){var r=!1;try{var i=e.deflate(t.fragment.getBytes());t.fragment=N.util.createBuffer(i),t.length=i.length,r=!0}catch{}return r},Qc=function(e,t,n){var r=!1;try{var i=e.inflate(t.fragment.getBytes());t.fragment=N.util.createBuffer(i),t.length=i.length,r=!0}catch{}return r},lt=function(e,t){var n=0;switch(t){case 1:n=e.getByte();break;case 2:n=e.getInt16();break;case 3:n=e.getInt24();break;case 4:n=e.getInt32();break}return N.util.createBuffer(e.getBytes(n))},Ct=function(e,t,n){e.putInt(n.length(),t<<3),e.putBuffer(n)},h={};h.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};h.SupportedVersions=[h.Versions.TLS_1_1,h.Versions.TLS_1_0];h.Version=h.SupportedVersions[0];h.MaxFragment=15360;h.ConnectionEnd={server:0,client:1};h.PRFAlgorithm={tls_prf_sha256:0};h.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};h.CipherType={stream:0,block:1,aead:2};h.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};h.CompressionMethod={none:0,deflate:1};h.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};h.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};h.Alert={};h.Alert.Level={warning:1,fatal:2};h.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};h.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};h.CipherSuites={};h.getCipherSuite=function(e){var t=null;for(var n in h.CipherSuites){var r=h.CipherSuites[n];if(r.id[0]===e.charCodeAt(0)&&r.id[1]===e.charCodeAt(1)){t=r;break}}return t};h.handleUnexpected=function(e,t){var n=!e.open&&e.entity===h.ConnectionEnd.client;n||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:h.Alert.Level.fatal,description:h.Alert.Description.unexpected_message}})};h.handleHelloRequest=function(e,t,n){!e.handshaking&&e.handshakes>0&&(h.queue(e,h.createAlert(e,{level:h.Alert.Level.warning,description:h.Alert.Description.no_renegotiation})),h.flush(e)),e.process()};h.parseHelloMessage=function(e,t,n){var r=null,i=e.entity===h.ConnectionEnd.client;if(n<38)e.error(e,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:h.Alert.Level.fatal,description:h.Alert.Description.illegal_parameter}});else{var a=t.fragment,o=a.length();if(r={version:{major:a.getByte(),minor:a.getByte()},random:N.util.createBuffer(a.getBytes(32)),session_id:lt(a,1),extensions:[]},i?(r.cipher_suite=a.getBytes(2),r.compression_method=a.getByte()):(r.cipher_suites=lt(a,2),r.compression_methods=lt(a,1)),o=n-(o-a.length()),o>0){for(var s=lt(a,2);s.length()>0;)r.extensions.push({type:[s.getByte(),s.getByte()],data:lt(s,2)});if(!i)for(var c=0;c<r.extensions.length;++c){var l=r.extensions[c];if(l.type[0]===0&&l.type[1]===0)for(var u=lt(l.data,2);u.length()>0;){var f=u.getByte();if(f!==0)break;e.session.extensions.server_name.serverNameList.push(lt(u,2).getBytes())}}}if(e.session.version&&(r.version.major!==e.session.version.major||r.version.minor!==e.session.version.minor))return e.error(e,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:h.Alert.Level.fatal,description:h.Alert.Description.protocol_version}});if(i)e.session.cipherSuite=h.getCipherSuite(r.cipher_suite);else for(var g=N.util.createBuffer(r.cipher_suites.bytes());g.length()>0&&(e.session.cipherSuite=h.getCipherSuite(g.getBytes(2)),e.session.cipherSuite===null););if(e.session.cipherSuite===null)return e.error(e,{message:"No cipher suites in common.",send:!0,alert:{level:h.Alert.Level.fatal,description:h.Alert.Description.handshake_failure},cipherSuite:N.util.bytesToHex(r.cipher_suite)});i?e.session.compressionMethod=r.compression_method:e.session.compressionMethod=h.CompressionMethod.none}return r};h.createSecurityParameters=function(e,t){var n=e.entity===h.ConnectionEnd.client,r=t.random.bytes(),i=n?e.session.sp.client_random:r,a=n?r:h.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:h.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:a}};h.handleServerHello=function(e,t,n){var r=h.parseHelloMessage(e,t,n);if(!e.fail){if(r.version.minor<=e.version.minor)e.version.minor=r.version.minor;else return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:h.Alert.Level.fatal,description:h.Alert.Description.protocol_version}});e.session.version=e.version;var i=r.session_id.bytes();i.length>0&&i===e.session.id?(e.expect=as,e.session.resuming=!0,e.session.sp.server_random=r.random.bytes()):(e.expect=Zc,e.session.resuming=!1,h.createSecurityParameters(e,r)),e.session.id=i,e.process()}};h.handleClientHello=function(e,t,n){var r=h.parseHelloMessage(e,t,n);if(!e.fail){var i=r.session_id.bytes(),a=null;if(e.sessionCache&&(a=e.sessionCache.getSession(i),a===null?i="":(a.version.major!==r.version.major||a.version.minor>r.version.minor)&&(a=null,i="")),i.length===0&&(i=N.random.getBytes(32)),e.session.id=i,e.session.clientHelloVersion=r.version,e.session.sp={},a)e.version=e.session.version=a.version,e.session.sp=a.sp;else{for(var o,s=1;s<h.SupportedVersions.length&&(o=h.SupportedVersions[s],!(o.minor<=r.version.minor));++s);e.version={major:o.major,minor:o.minor},e.session.version=e.version}a!==null?(e.expect=Ui,e.session.resuming=!0,e.session.sp.client_random=r.random.bytes()):(e.expect=e.verifyClient!==!1?ru:Vi,e.session.resuming=!1,h.createSecurityParameters(e,r)),e.open=!0,h.queue(e,h.createRecord(e,{type:h.ContentType.handshake,data:h.createServerHello(e)})),e.session.resuming?(h.queue(e,h.createRecord(e,{type:h.ContentType.change_cipher_spec,data:h.createChangeCipherSpec()})),e.state.pending=h.createConnectionState(e),e.state.current.write=e.state.pending.write,h.queue(e,h.createRecord(e,{type:h.ContentType.handshake,data:h.createFinished(e)}))):(h.queue(e,h.createRecord(e,{type:h.ContentType.handshake,data:h.createCertificate(e)})),e.fail||(h.queue(e,h.createRecord(e,{type:h.ContentType.handshake,data:h.createServerKeyExchange(e)})),e.verifyClient!==!1&&h.queue(e,h.createRecord(e,{type:h.ContentType.handshake,data:h.createCertificateRequest(e)})),h.queue(e,h.createRecord(e,{type:h.ContentType.handshake,data:h.createServerHelloDone(e)})))),h.flush(e),e.process()}};h.handleCertificate=function(e,t,n){if(n<3)return e.error(e,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:h.Alert.Level.fatal,description:h.Alert.Description.illegal_parameter}});var r=t.fragment,i={certificate_list:lt(r,3)},a,o,s=[];try{for(;i.certificate_list.length()>0;)a=lt(i.certificate_list,3),o=N.asn1.fromDer(a),a=N.pki.certificateFromAsn1(o,!0),s.push(a)}catch(l){return e.error(e,{message:"Could not parse certificate list.",cause:l,send:!0,alert:{level:h.Alert.Level.fatal,description:h.Alert.Description.bad_certificate}})}var c=e.entity===h.ConnectionEnd.client;(c||e.verifyClient===!0)&&s.length===0?e.error(e,{message:c?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:h.Alert.Level.fatal,description:h.Alert.Description.illegal_parameter}}):s.length===0?e.expect=c?ns:Vi:(c?e.session.serverCertificate=s[0]:e.session.clientCertificate=s[0],h.verifyCertificateChain(e,s)&&(e.expect=c?ns:Vi)),e.process()};h.handleServerKeyExchange=function(e,t,n){if(n>0)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:h.Alert.Level.fatal,description:h.Alert.Description.unsupported_certificate}});e.expect=Wc,e.process()};h.handleClientKeyExchange=function(e,t,n){if(n<48)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:h.Alert.Level.fatal,description:h.Alert.Description.unsupported_certificate}});var r=t.fragment,i={enc_pre_master_secret:lt(r,2).getBytes()},a=null;if(e.getPrivateKey)try{a=e.getPrivateKey(e,e.session.serverCertificate),a=N.pki.privateKeyFromPem(a)}catch(c){e.error(e,{message:"Could not get private key.",cause:c,send:!0,alert:{level:h.Alert.Level.fatal,description:h.Alert.Description.internal_error}})}if(a===null)return e.error(e,{message:"No private key set.",send:!0,alert:{level:h.Alert.Level.fatal,description:h.Alert.Description.internal_error}});try{var o=e.session.sp;o.pre_master_secret=a.decrypt(i.enc_pre_master_secret);var s=e.session.clientHelloVersion;if(s.major!==o.pre_master_secret.charCodeAt(0)||s.minor!==o.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{o.pre_master_secret=N.random.getBytes(48)}e.expect=Ui,e.session.clientCertificate!==null&&(e.expect=nu),e.process()};h.handleCertificateRequest=function(e,t,n){if(n<3)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:h.Alert.Level.fatal,description:h.Alert.Description.illegal_parameter}});var r=t.fragment,i={certificate_types:lt(r,1),certificate_authorities:lt(r,2)};e.session.certificateRequest=i,e.expect=Xc,e.process()};h.handleCertificateVerify=function(e,t,n){if(n<2)return e.error(e,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:h.Alert.Level.fatal,description:h.Alert.Description.illegal_parameter}});var r=t.fragment;r.read-=4;var i=r.bytes();r.read+=4;var a={signature:lt(r,2).getBytes()},o=N.util.createBuffer();o.putBuffer(e.session.md5.digest()),o.putBuffer(e.session.sha1.digest()),o=o.getBytes();try{var s=e.session.clientCertificate;if(!s.publicKey.verify(o,a.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");e.session.md5.update(i),e.session.sha1.update(i)}catch{return e.error(e,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:h.Alert.Level.fatal,description:h.Alert.Description.handshake_failure}})}e.expect=Ui,e.process()};h.handleServerHelloDone=function(e,t,n){if(n>0)return e.error(e,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:h.Alert.Level.fatal,description:h.Alert.Description.record_overflow}});if(e.serverCertificate===null){var r={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:h.Alert.Level.fatal,description:h.Alert.Description.insufficient_security}},i=0,a=e.verify(e,r.alert.description,i,[]);if(a!==!0)return(a||a===0)&&(typeof a=="object"&&!N.util.isArray(a)?(a.message&&(r.message=a.message),a.alert&&(r.alert.description=a.alert)):typeof a=="number"&&(r.alert.description=a)),e.error(e,r)}e.session.certificateRequest!==null&&(t=h.createRecord(e,{type:h.ContentType.handshake,data:h.createCertificate(e)}),h.queue(e,t)),t=h.createRecord(e,{type:h.ContentType.handshake,data:h.createClientKeyExchange(e)}),h.queue(e,t),e.expect=eu;var o=function(s,c){s.session.certificateRequest!==null&&s.session.clientCertificate!==null&&h.queue(s,h.createRecord(s,{type:h.ContentType.handshake,data:h.createCertificateVerify(s,c)})),h.queue(s,h.createRecord(s,{type:h.ContentType.change_cipher_spec,data:h.createChangeCipherSpec()})),s.state.pending=h.createConnectionState(s),s.state.current.write=s.state.pending.write,h.queue(s,h.createRecord(s,{type:h.ContentType.handshake,data:h.createFinished(s)})),s.expect=as,h.flush(s),s.process()};if(e.session.certificateRequest===null||e.session.clientCertificate===null)return o(e,null);h.getClientSignature(e,o)};h.handleChangeCipherSpec=function(e,t){if(t.fragment.getByte()!==1)return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:h.Alert.Level.fatal,description:h.Alert.Description.illegal_parameter}});var n=e.entity===h.ConnectionEnd.client;(e.session.resuming&&n||!e.session.resuming&&!n)&&(e.state.pending=h.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&n||e.session.resuming&&!n)&&(e.state.pending=null),e.expect=n?$c:iu,e.process()};h.handleFinished=function(e,t,n){var r=t.fragment;r.read-=4;var i=r.bytes();r.read+=4;var a=t.fragment.getBytes();r=N.util.createBuffer(),r.putBuffer(e.session.md5.digest()),r.putBuffer(e.session.sha1.digest());var o=e.entity===h.ConnectionEnd.client,s=o?"server finished":"client finished",c=e.session.sp,l=12,u=zn;if(r=u(c.master_secret,s,r.getBytes(),l),r.getBytes()!==a)return e.error(e,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:h.Alert.Level.fatal,description:h.Alert.Description.decrypt_error}});e.session.md5.update(i),e.session.sha1.update(i),(e.session.resuming&&o||!e.session.resuming&&!o)&&(h.queue(e,h.createRecord(e,{type:h.ContentType.change_cipher_spec,data:h.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,h.queue(e,h.createRecord(e,{type:h.ContentType.handshake,data:h.createFinished(e)}))),e.expect=o?Jc:au,e.handshaking=!1,++e.handshakes,e.peerCertificate=o?e.session.serverCertificate:e.session.clientCertificate,h.flush(e),e.isConnected=!0,e.connected(e),e.process()};h.handleAlert=function(e,t){var n=t.fragment,r={level:n.getByte(),description:n.getByte()},i;switch(r.description){case h.Alert.Description.close_notify:i="Connection closed.";break;case h.Alert.Description.unexpected_message:i="Unexpected message.";break;case h.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case h.Alert.Description.decryption_failed:i="Decryption failed.";break;case h.Alert.Description.record_overflow:i="Record overflow.";break;case h.Alert.Description.decompression_failure:i="Decompression failed.";break;case h.Alert.Description.handshake_failure:i="Handshake failure.";break;case h.Alert.Description.bad_certificate:i="Bad certificate.";break;case h.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case h.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case h.Alert.Description.certificate_expired:i="Certificate expired.";break;case h.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case h.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case h.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case h.Alert.Description.access_denied:i="Access denied.";break;case h.Alert.Description.decode_error:i="Decode error.";break;case h.Alert.Description.decrypt_error:i="Decrypt error.";break;case h.Alert.Description.export_restriction:i="Export restriction.";break;case h.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case h.Alert.Description.insufficient_security:i="Insufficient security.";break;case h.Alert.Description.internal_error:i="Internal error.";break;case h.Alert.Description.user_canceled:i="User canceled.";break;case h.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(r.description===h.Alert.Description.close_notify)return e.close();e.error(e,{message:i,send:!1,origin:e.entity===h.ConnectionEnd.client?"server":"client",alert:r}),e.process()};h.handleHandshake=function(e,t){var n=t.fragment,r=n.getByte(),i=n.getInt24();if(i>n.length())return e.fragmented=t,t.fragment=N.util.createBuffer(),n.read-=4,e.process();e.fragmented=null,n.read-=4;var a=n.bytes(i+4);n.read+=4,r in Hn[e.entity][e.expect]?(e.entity===h.ConnectionEnd.server&&!e.open&&!e.fail&&(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:N.md.md5.create(),sha1:N.md.sha1.create()}),r!==h.HandshakeType.hello_request&&r!==h.HandshakeType.certificate_verify&&r!==h.HandshakeType.finished&&(e.session.md5.update(a),e.session.sha1.update(a)),Hn[e.entity][e.expect][r](e,t,i)):h.handleUnexpected(e,t)};h.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()};h.handleHeartbeat=function(e,t){var n=t.fragment,r=n.getByte(),i=n.getInt16(),a=n.getBytes(i);if(r===h.HeartbeatMessageType.heartbeat_request){if(e.handshaking||i>a.length)return e.process();h.queue(e,h.createRecord(e,{type:h.ContentType.heartbeat,data:h.createHeartbeat(h.HeartbeatMessageType.heartbeat_response,a)})),h.flush(e)}else if(r===h.HeartbeatMessageType.heartbeat_response){if(a!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,N.util.createBuffer(a))}e.process()};var jc=0,Zc=1,ns=2,Wc=3,Xc=4,as=5,$c=6,Jc=7,eu=8,tu=0,ru=1,Vi=2,nu=3,Ui=4,iu=5,au=6,d=h.handleUnexpected,os=h.handleChangeCipherSpec,De=h.handleAlert,rt=h.handleHandshake,ss=h.handleApplicationData,Ve=h.handleHeartbeat,Fi=[];Fi[h.ConnectionEnd.client]=[[d,De,rt,d,Ve],[d,De,rt,d,Ve],[d,De,rt,d,Ve],[d,De,rt,d,Ve],[d,De,rt,d,Ve],[os,De,d,d,Ve],[d,De,rt,d,Ve],[d,De,rt,ss,Ve],[d,De,rt,d,Ve]];Fi[h.ConnectionEnd.server]=[[d,De,rt,d,Ve],[d,De,rt,d,Ve],[d,De,rt,d,Ve],[d,De,rt,d,Ve],[os,De,d,d,Ve],[d,De,rt,d,Ve],[d,De,rt,ss,Ve],[d,De,rt,d,Ve]];var or=h.handleHelloRequest,ou=h.handleServerHello,ls=h.handleCertificate,is=h.handleServerKeyExchange,ki=h.handleCertificateRequest,Kn=h.handleServerHelloDone,cs=h.handleFinished,Hn=[];Hn[h.ConnectionEnd.client]=[[d,d,ou,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d],[or,d,d,d,d,d,d,d,d,d,d,ls,is,ki,Kn,d,d,d,d,d,d],[or,d,d,d,d,d,d,d,d,d,d,d,is,ki,Kn,d,d,d,d,d,d],[or,d,d,d,d,d,d,d,d,d,d,d,d,ki,Kn,d,d,d,d,d,d],[or,d,d,d,d,d,d,d,d,d,d,d,d,d,Kn,d,d,d,d,d,d],[or,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d],[or,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,cs],[or,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d],[or,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d]];var su=h.handleClientHello,lu=h.handleClientKeyExchange,cu=h.handleCertificateVerify;Hn[h.ConnectionEnd.server]=[[d,su,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d,d,d,ls,d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,lu,d,d,d,d],[d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,cu,d,d,d,d,d],[d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,cs],[d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d]];h.generateKeys=function(e,t){var n=zn,r=t.client_random+t.server_random;e.session.resuming||(t.master_secret=n(t.pre_master_secret,"master secret",r,48).bytes(),t.pre_master_secret=null),r=t.server_random+t.client_random;var i=2*t.mac_key_length+2*t.enc_key_length,a=e.version.major===h.Versions.TLS_1_0.major&&e.version.minor===h.Versions.TLS_1_0.minor;a&&(i+=2*t.fixed_iv_length);var o=n(t.master_secret,"key expansion",r,i),s={client_write_MAC_key:o.getBytes(t.mac_key_length),server_write_MAC_key:o.getBytes(t.mac_key_length),client_write_key:o.getBytes(t.enc_key_length),server_write_key:o.getBytes(t.enc_key_length)};return a&&(s.client_write_IV=o.getBytes(t.fixed_iv_length),s.server_write_IV=o.getBytes(t.fixed_iv_length)),s};h.createConnectionState=function(e){var t=e.entity===h.ConnectionEnd.client,n=function(){var a={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(o){return!0},compressionState:null,compressFunction:function(o){return!0},updateSequenceNumber:function(){a.sequenceNumber[1]===4294967295?(a.sequenceNumber[1]=0,++a.sequenceNumber[0]):++a.sequenceNumber[1]}};return a},r={read:n(),write:n()};if(r.read.update=function(a,o){return r.read.cipherFunction(o,r.read)?r.read.compressFunction(a,o,r.read)||a.error(a,{message:"Could not decompress record.",send:!0,alert:{level:h.Alert.Level.fatal,description:h.Alert.Description.decompression_failure}}):a.error(a,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:h.Alert.Level.fatal,description:h.Alert.Description.bad_record_mac}}),!a.fail},r.write.update=function(a,o){return r.write.compressFunction(a,o,r.write)?r.write.cipherFunction(o,r.write)||a.error(a,{message:"Could not encrypt record.",send:!1,alert:{level:h.Alert.Level.fatal,description:h.Alert.Description.internal_error}}):a.error(a,{message:"Could not compress record.",send:!1,alert:{level:h.Alert.Level.fatal,description:h.Alert.Description.internal_error}}),!a.fail},e.session){var i=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(i),i.keys=h.generateKeys(e,i),r.read.macKey=t?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,r.write.macKey=t?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(r,e,i),i.compression_algorithm){case h.CompressionMethod.none:break;case h.CompressionMethod.deflate:r.read.compressFunction=Qc,r.write.compressFunction=Yc;break;default:throw new Error("Unsupported compression algorithm.")}}return r};h.createRandom=function(){var e=new Date,t=+e+e.getTimezoneOffset()*6e4,n=N.util.createBuffer();return n.putInt32(t),n.putBytes(N.random.getBytes(28)),n};h.createRecord=function(e,t){if(!t.data)return null;var n={type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data};return n};h.createAlert=function(e,t){var n=N.util.createBuffer();return n.putByte(t.level),n.putByte(t.description),h.createRecord(e,{type:h.ContentType.alert,data:n})};h.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=N.util.createBuffer(),n=0;n<e.cipherSuites.length;++n){var r=e.cipherSuites[n];t.putByte(r.id[0]),t.putByte(r.id[1])}var i=t.length(),a=N.util.createBuffer();a.putByte(h.CompressionMethod.none);var o=a.length(),s=N.util.createBuffer();if(e.virtualHost){var c=N.util.createBuffer();c.putByte(0),c.putByte(0);var l=N.util.createBuffer();l.putByte(0),Ct(l,2,N.util.createBuffer(e.virtualHost));var u=N.util.createBuffer();Ct(u,2,l),Ct(c,2,u),s.putBuffer(c)}var f=s.length();f>0&&(f+=2);var g=e.session.id,C=g.length+1+2+4+28+2+i+1+o+f,m=N.util.createBuffer();return m.putByte(h.HandshakeType.client_hello),m.putInt24(C),m.putByte(e.version.major),m.putByte(e.version.minor),m.putBytes(e.session.sp.client_random),Ct(m,1,N.util.createBuffer(g)),Ct(m,2,t),Ct(m,1,a),f>0&&Ct(m,2,s),m};h.createServerHello=function(e){var t=e.session.id,n=t.length+1+2+4+28+2+1,r=N.util.createBuffer();return r.putByte(h.HandshakeType.server_hello),r.putInt24(n),r.putByte(e.version.major),r.putByte(e.version.minor),r.putBytes(e.session.sp.server_random),Ct(r,1,N.util.createBuffer(t)),r.putByte(e.session.cipherSuite.id[0]),r.putByte(e.session.cipherSuite.id[1]),r.putByte(e.session.compressionMethod),r};h.createCertificate=function(e){var t=e.entity===h.ConnectionEnd.client,n=null;if(e.getCertificate){var r;t?r=e.session.certificateRequest:r=e.session.extensions.server_name.serverNameList,n=e.getCertificate(e,r)}var i=N.util.createBuffer();if(n!==null)try{N.util.isArray(n)||(n=[n]);for(var a=null,o=0;o<n.length;++o){var s=N.pem.decode(n[o])[0];if(s.type!=="CERTIFICATE"&&s.type!=="X509 CERTIFICATE"&&s.type!=="TRUSTED CERTIFICATE"){var c=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw c.headerType=s.type,c}if(s.procType&&s.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var l=N.util.createBuffer(s.body);a===null&&(a=N.asn1.fromDer(l.bytes(),!1));var u=N.util.createBuffer();Ct(u,3,l),i.putBuffer(u)}n=N.pki.certificateFromAsn1(a),t?e.session.clientCertificate=n:e.session.serverCertificate=n}catch(C){return e.error(e,{message:"Could not send certificate list.",cause:C,send:!0,alert:{level:h.Alert.Level.fatal,description:h.Alert.Description.bad_certificate}})}var f=3+i.length(),g=N.util.createBuffer();return g.putByte(h.HandshakeType.certificate),g.putInt24(f),Ct(g,3,i),g};h.createClientKeyExchange=function(e){var t=N.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes(N.random.getBytes(46));var n=e.session.sp;n.pre_master_secret=t.getBytes();var r=e.session.serverCertificate.publicKey;t=r.encrypt(n.pre_master_secret);var i=t.length+2,a=N.util.createBuffer();return a.putByte(h.HandshakeType.client_key_exchange),a.putInt24(i),a.putInt16(t.length),a.putBytes(t),a};h.createServerKeyExchange=function(e){var t=0,n=N.util.createBuffer();return t>0&&(n.putByte(h.HandshakeType.server_key_exchange),n.putInt24(t)),n};h.getClientSignature=function(e,t){var n=N.util.createBuffer();n.putBuffer(e.session.md5.digest()),n.putBuffer(e.session.sha1.digest()),n=n.getBytes(),e.getSignature=e.getSignature||function(r,i,a){var o=null;if(r.getPrivateKey)try{o=r.getPrivateKey(r,r.session.clientCertificate),o=N.pki.privateKeyFromPem(o)}catch(s){r.error(r,{message:"Could not get private key.",cause:s,send:!0,alert:{level:h.Alert.Level.fatal,description:h.Alert.Description.internal_error}})}o===null?r.error(r,{message:"No private key set.",send:!0,alert:{level:h.Alert.Level.fatal,description:h.Alert.Description.internal_error}}):i=o.sign(i,null),a(r,i)},e.getSignature(e,n,t)};h.createCertificateVerify=function(e,t){var n=t.length+2,r=N.util.createBuffer();return r.putByte(h.HandshakeType.certificate_verify),r.putInt24(n),r.putInt16(t.length),r.putBytes(t),r};h.createCertificateRequest=function(e){var t=N.util.createBuffer();t.putByte(1);var n=N.util.createBuffer();for(var r in e.caStore.certs){var i=e.caStore.certs[r],a=N.pki.distinguishedNameToAsn1(i.subject),o=N.asn1.toDer(a);n.putInt16(o.length()),n.putBuffer(o)}var s=1+t.length()+2+n.length(),c=N.util.createBuffer();return c.putByte(h.HandshakeType.certificate_request),c.putInt24(s),Ct(c,1,t),Ct(c,2,n),c};h.createServerHelloDone=function(e){var t=N.util.createBuffer();return t.putByte(h.HandshakeType.server_hello_done),t.putInt24(0),t};h.createChangeCipherSpec=function(){var e=N.util.createBuffer();return e.putByte(1),e};h.createFinished=function(e){var t=N.util.createBuffer();t.putBuffer(e.session.md5.digest()),t.putBuffer(e.session.sha1.digest());var n=e.entity===h.ConnectionEnd.client,r=e.session.sp,i=12,a=zn,o=n?"client finished":"server finished";t=a(r.master_secret,o,t.getBytes(),i);var s=N.util.createBuffer();return s.putByte(h.HandshakeType.finished),s.putInt24(t.length()),s.putBuffer(t),s};h.createHeartbeat=function(e,t,n){typeof n>"u"&&(n=t.length);var r=N.util.createBuffer();r.putByte(e),r.putInt16(n),r.putBytes(t);var i=r.length(),a=Math.max(16,i-n-3);return r.putBytes(N.random.getBytes(a)),r};h.queue=function(e,t){if(t&&!(t.fragment.length()===0&&(t.type===h.ContentType.handshake||t.type===h.ContentType.alert||t.type===h.ContentType.change_cipher_spec))){if(t.type===h.ContentType.handshake){var n=t.fragment.bytes();e.session.md5.update(n),e.session.sha1.update(n),n=null}var r;if(t.fragment.length()<=h.MaxFragment)r=[t];else{r=[];for(var i=t.fragment.bytes();i.length>h.MaxFragment;)r.push(h.createRecord(e,{type:t.type,data:N.util.createBuffer(i.slice(0,h.MaxFragment))})),i=i.slice(h.MaxFragment);i.length>0&&r.push(h.createRecord(e,{type:t.type,data:N.util.createBuffer(i)}))}for(var a=0;a<r.length&&!e.fail;++a){var o=r[a],s=e.state.current.write;s.update(e,o)&&e.records.push(o)}}};h.flush=function(e){for(var t=0;t<e.records.length;++t){var n=e.records[t];e.tlsData.putByte(n.type),e.tlsData.putByte(n.version.major),e.tlsData.putByte(n.version.minor),e.tlsData.putInt16(n.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var Di=function(e){switch(e){case!0:return!0;case N.pki.certificateError.bad_certificate:return h.Alert.Description.bad_certificate;case N.pki.certificateError.unsupported_certificate:return h.Alert.Description.unsupported_certificate;case N.pki.certificateError.certificate_revoked:return h.Alert.Description.certificate_revoked;case N.pki.certificateError.certificate_expired:return h.Alert.Description.certificate_expired;case N.pki.certificateError.certificate_unknown:return h.Alert.Description.certificate_unknown;case N.pki.certificateError.unknown_ca:return h.Alert.Description.unknown_ca;default:return h.Alert.Description.bad_certificate}},uu=function(e){switch(e){case!0:return!0;case h.Alert.Description.bad_certificate:return N.pki.certificateError.bad_certificate;case h.Alert.Description.unsupported_certificate:return N.pki.certificateError.unsupported_certificate;case h.Alert.Description.certificate_revoked:return N.pki.certificateError.certificate_revoked;case h.Alert.Description.certificate_expired:return N.pki.certificateError.certificate_expired;case h.Alert.Description.certificate_unknown:return N.pki.certificateError.certificate_unknown;case h.Alert.Description.unknown_ca:return N.pki.certificateError.unknown_ca;default:return N.pki.certificateError.bad_certificate}};h.verifyCertificateChain=function(e,t){try{var n={};for(var r in e.verifyOptions)n[r]=e.verifyOptions[r];n.verify=function(a,o,s){var c=Di(a),l=e.verify(e,a,o,s);if(l!==!0){if(typeof l=="object"&&!N.util.isArray(l)){var u=new Error("The application rejected the certificate.");throw u.send=!0,u.alert={level:h.Alert.Level.fatal,description:h.Alert.Description.bad_certificate},l.message&&(u.message=l.message),l.alert&&(u.alert.description=l.alert),u}l!==a&&(l=uu(l))}return l},N.pki.verifyCertificateChain(e.caStore,t,n)}catch(a){var i=a;(typeof i!="object"||N.util.isArray(i))&&(i={send:!0,alert:{level:h.Alert.Level.fatal,description:Di(a)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:h.Alert.Level.fatal,description:Di(i.error)}),e.error(e,i)}return!e.fail};h.createSessionCache=function(e,t){var n=null;if(e&&e.getSession&&e.setSession&&e.order)n=e;else{n={},n.cache=e||{},n.capacity=Math.max(t||100,1),n.order=[];for(var r in e)n.order.length<=t?n.order.push(r):delete e[r];n.getSession=function(i){var a=null,o=null;if(i?o=N.util.bytesToHex(i):n.order.length>0&&(o=n.order[0]),o!==null&&o in n.cache){a=n.cache[o],delete n.cache[o];for(var s in n.order)if(n.order[s]===o){n.order.splice(s,1);break}}return a},n.setSession=function(i,a){if(n.order.length===n.capacity){var o=n.order.shift();delete n.cache[o]}var o=N.util.bytesToHex(i);n.order.push(o),n.cache[o]=a}}return n};h.createConnection=function(e){var t=null;e.caStore?N.util.isArray(e.caStore)?t=N.pki.createCaStore(e.caStore):t=e.caStore:t=N.pki.createCaStore();var n=e.cipherSuites||null;if(n===null){n=[];for(var r in h.CipherSuites)n.push(h.CipherSuites[r])}var i=e.server?h.ConnectionEnd.server:h.ConnectionEnd.client,a=e.sessionCache?h.createSessionCache(e.sessionCache):null,o={version:{major:h.Version.major,minor:h.Version.minor},entity:i,sessionId:e.sessionId,caStore:t,sessionCache:a,cipherSuites:n,connected:e.connected,virtualHost:e.virtualHost||null,verifyClient:e.verifyClient||!1,verify:e.verify||function(u,f,g,C){return f},verifyOptions:e.verifyOptions||{},getCertificate:e.getCertificate||null,getPrivateKey:e.getPrivateKey||null,getSignature:e.getSignature||null,input:N.util.createBuffer(),tlsData:N.util.createBuffer(),data:N.util.createBuffer(),tlsDataReady:e.tlsDataReady,dataReady:e.dataReady,heartbeatReceived:e.heartbeatReceived,closed:e.closed,error:function(u,f){f.origin=f.origin||(u.entity===h.ConnectionEnd.client?"client":"server"),f.send&&(h.queue(u,h.createAlert(u,f.alert)),h.flush(u));var g=f.fatal!==!1;g&&(u.fail=!0),e.error(u,f),g&&u.close(!1)},deflate:e.deflate||null,inflate:e.inflate||null};o.reset=function(u){o.version={major:h.Version.major,minor:h.Version.minor},o.record=null,o.session=null,o.peerCertificate=null,o.state={pending:null,current:null},o.expect=o.entity===h.ConnectionEnd.client?jc:tu,o.fragmented=null,o.records=[],o.open=!1,o.handshakes=0,o.handshaking=!1,o.isConnected=!1,o.fail=!(u||typeof u>"u"),o.input.clear(),o.tlsData.clear(),o.data.clear(),o.state.current=h.createConnectionState(o)},o.reset();var s=function(u,f){var g=f.type-h.ContentType.change_cipher_spec,C=Fi[u.entity][u.expect];g in C?C[g](u,f):h.handleUnexpected(u,f)},c=function(u){var f=0,g=u.input,C=g.length();if(C<5)f=5-C;else{u.record={type:g.getByte(),version:{major:g.getByte(),minor:g.getByte()},length:g.getInt16(),fragment:N.util.createBuffer(),ready:!1};var m=u.record.version.major===u.version.major;m&&u.session&&u.session.version&&(m=u.record.version.minor===u.version.minor),m||u.error(u,{message:"Incompatible TLS version.",send:!0,alert:{level:h.Alert.Level.fatal,description:h.Alert.Description.protocol_version}})}return f},l=function(u){var f=0,g=u.input,C=g.length();if(C<u.record.length)f=u.record.length-C;else{u.record.fragment.putBytes(g.getBytes(u.record.length)),g.compact();var m=u.state.current.read;m.update(u,u.record)&&(u.fragmented!==null&&(u.fragmented.type===u.record.type?(u.fragmented.fragment.putBuffer(u.record.fragment),u.record=u.fragmented):u.error(u,{message:"Invalid fragmented record.",send:!0,alert:{level:h.Alert.Level.fatal,description:h.Alert.Description.unexpected_message}})),u.record.ready=!0)}return f};return o.handshake=function(u){if(o.entity!==h.ConnectionEnd.client)o.error(o,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(o.handshaking)o.error(o,{message:"Handshake already in progress.",fatal:!1});else{o.fail&&!o.open&&o.handshakes===0&&(o.fail=!1),o.handshaking=!0,u=u||"";var f=null;u.length>0&&(o.sessionCache&&(f=o.sessionCache.getSession(u)),f===null&&(u="")),u.length===0&&o.sessionCache&&(f=o.sessionCache.getSession(),f!==null&&(u=f.id)),o.session={id:u,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:N.md.md5.create(),sha1:N.md.sha1.create()},f&&(o.version=f.version,o.session.sp=f.sp),o.session.sp.client_random=h.createRandom().getBytes(),o.open=!0,h.queue(o,h.createRecord(o,{type:h.ContentType.handshake,data:h.createClientHello(o)})),h.flush(o)}},o.process=function(u){var f=0;return u&&o.input.putBytes(u),o.fail||(o.record!==null&&o.record.ready&&o.record.fragment.isEmpty()&&(o.record=null),o.record===null&&(f=c(o)),!o.fail&&o.record!==null&&!o.record.ready&&(f=l(o)),!o.fail&&o.record!==null&&o.record.ready&&s(o,o.record)),f},o.prepare=function(u){return h.queue(o,h.createRecord(o,{type:h.ContentType.application_data,data:N.util.createBuffer(u)})),h.flush(o)},o.prepareHeartbeatRequest=function(u,f){return u instanceof N.util.ByteBuffer&&(u=u.bytes()),typeof f>"u"&&(f=u.length),o.expectedHeartbeatPayload=u,h.queue(o,h.createRecord(o,{type:h.ContentType.heartbeat,data:h.createHeartbeat(h.HeartbeatMessageType.heartbeat_request,u,f)})),h.flush(o)},o.close=function(u){if(!o.fail&&o.sessionCache&&o.session){var f={id:o.session.id,version:o.session.version,sp:o.session.sp};f.sp.keys=null,o.sessionCache.setSession(f.id,f)}o.open&&(o.open=!1,o.input.clear(),(o.isConnected||o.handshaking)&&(o.isConnected=o.handshaking=!1,h.queue(o,h.createAlert(o,{level:h.Alert.Level.warning,description:h.Alert.Description.close_notify})),h.flush(o)),o.closed(o)),o.reset(u)},o};us.exports=N.tls=N.tls||{};for(qn in h)typeof h[qn]!="function"&&(N.tls[qn]=h[qn]);var qn;N.tls.prf_tls1=zn;N.tls.hmac_sha1=Gc;N.tls.createSessionCache=h.createSessionCache;N.tls.createConnection=h.createConnection});var ds=X((Fp,ps)=>{"use strict";var sr=re();er();Ki();var yt=ps.exports=sr.tls;yt.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=yt.BulkCipherAlgorithm.aes,e.cipher_type=yt.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=yt.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:fs};yt.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=yt.BulkCipherAlgorithm.aes,e.cipher_type=yt.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=yt.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:fs};function fs(e,t,n){var r=t.entity===sr.tls.ConnectionEnd.client;e.read.cipherState={init:!1,cipher:sr.cipher.createDecipher("AES-CBC",r?n.keys.server_write_key:n.keys.client_write_key),iv:r?n.keys.server_write_IV:n.keys.client_write_IV},e.write.cipherState={init:!1,cipher:sr.cipher.createCipher("AES-CBC",r?n.keys.client_write_key:n.keys.server_write_key),iv:r?n.keys.client_write_IV:n.keys.server_write_IV},e.read.cipherFunction=hu,e.write.cipherFunction=fu,e.read.macLength=e.write.macLength=n.mac_length,e.read.macFunction=e.write.macFunction=yt.hmac_sha1}function fu(e,t){var n=!1,r=t.macFunction(t.macKey,t.sequenceNumber,e);e.fragment.putBytes(r),t.updateSequenceNumber();var i;e.version.minor===yt.Versions.TLS_1_0.minor?i=t.cipherState.init?null:t.cipherState.iv:i=sr.random.getBytesSync(16),t.cipherState.init=!0;var a=t.cipherState.cipher;return a.start({iv:i}),e.version.minor>=yt.Versions.TLS_1_1.minor&&a.output.putBytes(i),a.update(e.fragment),a.finish(pu)&&(e.fragment=a.output,e.length=e.fragment.length(),n=!0),n}function pu(e,t,n){if(!n){var r=e-t.length()%e;t.fillWithByte(r-1,r)}return!0}function du(e,t,n){var r=!0;if(n){for(var i=t.length(),a=t.last(),o=i-1-a;o<i-1;++o)r=r&&t.at(o)==a;r&&t.truncate(a+1)}return r}function hu(e,t){var n=!1,r;e.version.minor===yt.Versions.TLS_1_0.minor?r=t.cipherState.init?null:t.cipherState.iv:r=e.fragment.getBytes(16),t.cipherState.init=!0;var i=t.cipherState.cipher;i.start({iv:r}),i.update(e.fragment),n=i.finish(du);var a=t.macLength,o=sr.random.getBytesSync(a),s=i.output.length();s>=a?(e.fragment=i.output.getBytes(s-a),o=i.output.getBytes(a)):e.fragment=i.output.getBytes(),e.fragment=sr.util.createBuffer(e.fragment),e.length=e.fragment.length();var c=t.macFunction(t.macKey,t.sequenceNumber,e);return t.updateSequenceNumber(),n=gu(t.macKey,o,c)&&n,n}function gu(e,t,n){var r=sr.hmac.create();return r.start("SHA1",e),r.update(t),t=r.digest().getBytes(),r.start(null,null),r.update(n),n=r.digest().getBytes(),t===n}});var zi=X((Kp,vs)=>{"use strict";var be=re();Mt();ue();var Xr=vs.exports=be.sha512=be.sha512||{};be.md.sha512=be.md.algorithms.sha512=Xr;var gs=be.sha384=be.sha512.sha384=be.sha512.sha384||{};gs.create=function(){return Xr.create("SHA-384")};be.md.sha384=be.md.algorithms.sha384=gs;be.sha512.sha256=be.sha512.sha256||{create:function(){return Xr.create("SHA-512/256")}};be.md["sha512/256"]=be.md.algorithms["sha512/256"]=be.sha512.sha256;be.sha512.sha224=be.sha512.sha224||{create:function(){return Xr.create("SHA-512/224")}};be.md["sha512/224"]=be.md.algorithms["sha512/224"]=be.sha512.sha224;Xr.create=function(e){if(ms||mu(),typeof e>"u"&&(e="SHA-512"),!(e in xr))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=xr[e],n=null,r=be.util.createBuffer(),i=new Array(80),a=0;a<80;++a)i[a]=new Array(2);var o=64;switch(e){case"SHA-384":o=48;break;case"SHA-512/256":o=32;break;case"SHA-512/224":o=28;break}var s={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:o,messageLength:0,fullMessageLength:null,messageLengthSize:16};return s.start=function(){s.messageLength=0,s.fullMessageLength=s.messageLength128=[];for(var c=s.messageLengthSize/4,l=0;l<c;++l)s.fullMessageLength.push(0);r=be.util.createBuffer(),n=new Array(t.length);for(var l=0;l<t.length;++l)n[l]=t[l].slice(0);return s},s.start(),s.update=function(c,l){l==="utf8"&&(c=be.util.encodeUtf8(c));var u=c.length;s.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var f=s.fullMessageLength.length-1;f>=0;--f)s.fullMessageLength[f]+=u[1],u[1]=u[0]+(s.fullMessageLength[f]/4294967296>>>0),s.fullMessageLength[f]=s.fullMessageLength[f]>>>0,u[0]=u[1]/4294967296>>>0;return r.putBytes(c),hs(n,i,r),(r.read>2048||r.length()===0)&&r.compact(),s},s.digest=function(){var c=be.util.createBuffer();c.putBytes(r.bytes());var l=s.fullMessageLength[s.fullMessageLength.length-1]+s.messageLengthSize,u=l&s.blockLength-1;c.putBytes(qi.substr(0,s.blockLength-u));for(var f,g,C=s.fullMessageLength[0]*8,m=0;m<s.fullMessageLength.length-1;++m)f=s.fullMessageLength[m+1]*8,g=f/4294967296>>>0,C+=g,c.putInt32(C>>>0),C=f>>>0;c.putInt32(C);for(var S=new Array(n.length),m=0;m<n.length;++m)S[m]=n[m].slice(0);hs(S,i,c);var b=be.util.createBuffer(),w;e==="SHA-512"?w=S.length:e==="SHA-384"?w=S.length-2:w=S.length-4;for(var m=0;m<w;++m)b.putInt32(S[m][0]),(m!==w-1||e!=="SHA-512/224")&&b.putInt32(S[m][1]);return b},s};var qi=null,ms=!1,Hi=null,xr=null;function mu(){qi="\x80",qi+=be.util.fillString("\0",128),Hi=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],xr={},xr["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],xr["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],xr["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],xr["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],ms=!0}function hs(e,t,n){for(var r,i,a,o,s,c,l,u,f,g,C,m,S,b,w,O,M,H,V,k,J,ne,he,me,ye,Ee,Je,ut,ve,Ie,G,cr,Sr,Ae,Pe,Oe=n.length();Oe>=128;){for(ve=0;ve<16;++ve)t[ve][0]=n.getInt32()>>>0,t[ve][1]=n.getInt32()>>>0;for(;ve<80;++ve)cr=t[ve-2],Ie=cr[0],G=cr[1],r=((Ie>>>19|G<<13)^(G>>>29|Ie<<3)^Ie>>>6)>>>0,i=((Ie<<13|G>>>19)^(G<<3|Ie>>>29)^(Ie<<26|G>>>6))>>>0,Ae=t[ve-15],Ie=Ae[0],G=Ae[1],a=((Ie>>>1|G<<31)^(Ie>>>8|G<<24)^Ie>>>7)>>>0,o=((Ie<<31|G>>>1)^(Ie<<24|G>>>8)^(Ie<<25|G>>>7))>>>0,Sr=t[ve-7],Pe=t[ve-16],G=i+Sr[1]+o+Pe[1],t[ve][0]=r+Sr[0]+a+Pe[0]+(G/4294967296>>>0)>>>0,t[ve][1]=G>>>0;for(S=e[0][0],b=e[0][1],w=e[1][0],O=e[1][1],M=e[2][0],H=e[2][1],V=e[3][0],k=e[3][1],J=e[4][0],ne=e[4][1],he=e[5][0],me=e[5][1],ye=e[6][0],Ee=e[6][1],Je=e[7][0],ut=e[7][1],ve=0;ve<80;++ve)l=((J>>>14|ne<<18)^(J>>>18|ne<<14)^(ne>>>9|J<<23))>>>0,u=((J<<18|ne>>>14)^(J<<14|ne>>>18)^(ne<<23|J>>>9))>>>0,f=(ye^J&(he^ye))>>>0,g=(Ee^ne&(me^Ee))>>>0,s=((S>>>28|b<<4)^(b>>>2|S<<30)^(b>>>7|S<<25))>>>0,c=((S<<4|b>>>28)^(b<<30|S>>>2)^(b<<25|S>>>7))>>>0,C=(S&w|M&(S^w))>>>0,m=(b&O|H&(b^O))>>>0,G=ut+u+g+Hi[ve][1]+t[ve][1],r=Je+l+f+Hi[ve][0]+t[ve][0]+(G/4294967296>>>0)>>>0,i=G>>>0,G=c+m,a=s+C+(G/4294967296>>>0)>>>0,o=G>>>0,Je=ye,ut=Ee,ye=he,Ee=me,he=J,me=ne,G=k+i,J=V+r+(G/4294967296>>>0)>>>0,ne=G>>>0,V=M,k=H,M=w,H=O,w=S,O=b,G=i+o,S=r+a+(G/4294967296>>>0)>>>0,b=G>>>0;G=e[0][1]+b,e[0][0]=e[0][0]+S+(G/4294967296>>>0)>>>0,e[0][1]=G>>>0,G=e[1][1]+O,e[1][0]=e[1][0]+w+(G/4294967296>>>0)>>>0,e[1][1]=G>>>0,G=e[2][1]+H,e[2][0]=e[2][0]+M+(G/4294967296>>>0)>>>0,e[2][1]=G>>>0,G=e[3][1]+k,e[3][0]=e[3][0]+V+(G/4294967296>>>0)>>>0,e[3][1]=G>>>0,G=e[4][1]+ne,e[4][0]=e[4][0]+J+(G/4294967296>>>0)>>>0,e[4][1]=G>>>0,G=e[5][1]+me,e[5][0]=e[5][0]+he+(G/4294967296>>>0)>>>0,e[5][1]=G>>>0,G=e[6][1]+Ee,e[6][0]=e[6][0]+ye+(G/4294967296>>>0)>>>0,e[6][1]=G>>>0,G=e[7][1]+ut,e[7][0]=e[7][0]+Je+(G/4294967296>>>0)>>>0,e[7][1]=G>>>0,Oe-=128}}});var Cs=X(Gi=>{"use strict";var vu=re();_t();var ke=vu.asn1;Gi.privateKeyValidator={name:"PrivateKeyInfo",tagClass:ke.Class.UNIVERSAL,type:ke.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:ke.Class.UNIVERSAL,type:ke.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:ke.Class.UNIVERSAL,type:ke.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ke.Class.UNIVERSAL,type:ke.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:ke.Class.UNIVERSAL,type:ke.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};Gi.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:ke.Class.UNIVERSAL,type:ke.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:ke.Class.UNIVERSAL,type:ke.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ke.Class.UNIVERSAL,type:ke.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:ke.Class.UNIVERSAL,type:ke.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var Os=X((Hp,Bs)=>{"use strict";var Ue=re();Qr();ht();zi();ue();var bs=Cs(),Cu=bs.publicKeyValidator,yu=bs.privateKeyValidator;typeof ys>"u"&&(ys=Ue.jsbn.BigInteger);var ys,ji=Ue.util.ByteBuffer,at=typeof Buffer>"u"?Uint8Array:Buffer;Ue.pki=Ue.pki||{};Bs.exports=Ue.pki.ed25519=Ue.ed25519=Ue.ed25519||{};var oe=Ue.ed25519;oe.constants={};oe.constants.PUBLIC_KEY_BYTE_LENGTH=32;oe.constants.PRIVATE_KEY_BYTE_LENGTH=64;oe.constants.SEED_BYTE_LENGTH=32;oe.constants.SIGN_BYTE_LENGTH=64;oe.constants.HASH_BYTE_LENGTH=64;oe.generateKeyPair=function(e){e=e||{};var t=e.seed;if(t===void 0)t=Ue.random.getBytesSync(oe.constants.SEED_BYTE_LENGTH);else if(typeof t=="string"){if(t.length!==oe.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+oe.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');t=Qt({message:t,encoding:"binary"});for(var n=new at(oe.constants.PUBLIC_KEY_BYTE_LENGTH),r=new at(oe.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)r[i]=t[i];return Su(n,r),{publicKey:n,privateKey:r}};oe.privateKeyFromAsn1=function(e){var t={},n=[],r=Ue.asn1.validate(e,yu,t,n);if(!r){var i=new Error("Invalid Key.");throw i.errors=n,i}var a=Ue.asn1.derToOid(t.privateKeyOid),o=Ue.oids.EdDSA25519;if(a!==o)throw new Error('Invalid OID "'+a+'"; OID must be "'+o+'".');var s=t.privateKey,c=Qt({message:Ue.asn1.fromDer(s).value,encoding:"binary"});return{privateKeyBytes:c}};oe.publicKeyFromAsn1=function(e){var t={},n=[],r=Ue.asn1.validate(e,Cu,t,n);if(!r){var i=new Error("Invalid Key.");throw i.errors=n,i}var a=Ue.asn1.derToOid(t.publicKeyOid),o=Ue.oids.EdDSA25519;if(a!==o)throw new Error('Invalid OID "'+a+'"; OID must be "'+o+'".');var s=t.ed25519PublicKey;if(s.length!==oe.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return Qt({message:s,encoding:"binary"})};oe.publicKeyFromPrivateKey=function(e){e=e||{};var t=Qt({message:e.privateKey,encoding:"binary"});if(t.length!==oe.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+oe.constants.PRIVATE_KEY_BYTE_LENGTH);for(var n=new at(oe.constants.PUBLIC_KEY_BYTE_LENGTH),r=0;r<n.length;++r)n[r]=t[32+r];return n};oe.sign=function(e){e=e||{};var t=Qt(e),n=Qt({message:e.privateKey,encoding:"binary"});if(n.length===oe.constants.SEED_BYTE_LENGTH){var r=oe.generateKeyPair({seed:n});n=r.privateKey}else if(n.length!==oe.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+oe.constants.SEED_BYTE_LENGTH+" or "+oe.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new at(oe.constants.SIGN_BYTE_LENGTH+t.length);bu(i,t,t.length,n);for(var a=new at(oe.constants.SIGN_BYTE_LENGTH),o=0;o<a.length;++o)a[o]=i[o];return a};oe.verify=function(e){e=e||{};var t=Qt(e);if(e.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var n=Qt({message:e.signature,encoding:"binary"});if(n.length!==oe.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+oe.constants.SIGN_BYTE_LENGTH);var r=Qt({message:e.publicKey,encoding:"binary"});if(r.length!==oe.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+oe.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new at(oe.constants.SIGN_BYTE_LENGTH+t.length),a=new at(oe.constants.SIGN_BYTE_LENGTH+t.length),o;for(o=0;o<oe.constants.SIGN_BYTE_LENGTH;++o)i[o]=n[o];for(o=0;o<t.length;++o)i[o+oe.constants.SIGN_BYTE_LENGTH]=t[o];return Tu(a,i,i.length,r)>=0};function Qt(e){var t=e.message;if(t instanceof Uint8Array||t instanceof at)return t;var n=e.encoding;if(t===void 0)if(e.md)t=e.md.digest().getBytes(),n="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof t=="string"&&!n)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.from(t,n);t=new ji(t,n)}else if(!(t instanceof ji))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var r=new at(t.length()),i=0;i<r.length;++i)r[i]=t.at(i);return r}var Zi=Z(),Gn=Z([1]),xu=Z([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),_u=Z([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),xs=Z([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),_s=Z([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Yi=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),Eu=Z([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function $r(e,t){var n=Ue.md.sha512.create(),r=new ji(e);n.update(r.getBytes(t),"binary");var i=n.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var a=new at(oe.constants.HASH_BYTE_LENGTH),o=0;o<64;++o)a[o]=i.charCodeAt(o);return a}function Su(e,t){var n=[Z(),Z(),Z(),Z()],r,i=$r(t,32);for(i[0]&=248,i[31]&=127,i[31]|=64,Ji(n,i),$i(e,n),r=0;r<32;++r)t[r+32]=e[r];return 0}function bu(e,t,n,r){var i,a,o=new Float64Array(64),s=[Z(),Z(),Z(),Z()],c=$r(r,32);c[0]&=248,c[31]&=127,c[31]|=64;var l=n+64;for(i=0;i<n;++i)e[64+i]=t[i];for(i=0;i<32;++i)e[32+i]=c[32+i];var u=$r(e.subarray(32),n+32);for(Wi(u),Ji(s,u),$i(e,s),i=32;i<64;++i)e[i]=r[i];var f=$r(e,n+64);for(Wi(f),i=32;i<64;++i)o[i]=0;for(i=0;i<32;++i)o[i]=u[i];for(i=0;i<32;++i)for(a=0;a<32;a++)o[i+a]+=f[i]*c[a];return Ts(e.subarray(32),o),l}function Tu(e,t,n,r){var i,a,o=new at(32),s=[Z(),Z(),Z(),Z()],c=[Z(),Z(),Z(),Z()];if(a=-1,n<64||wu(c,r))return-1;for(i=0;i<n;++i)e[i]=t[i];for(i=0;i<32;++i)e[i+32]=r[i];var l=$r(e,n);if(Wi(l),As(s,c,l),Ji(c,t.subarray(32)),Xi(s,c),$i(o,s),n-=64,ws(t,0,o,0)){for(i=0;i<n;++i)e[i]=0;return-1}for(i=0;i<n;++i)e[i]=t[i+64];return a=n,a}function Ts(e,t){var n,r,i,a;for(r=63;r>=32;--r){for(n=0,i=r-32,a=r-12;i<a;++i)t[i]+=n-16*t[r]*Yi[i-(r-32)],n=t[i]+128>>8,t[i]-=n*256;t[i]+=n,t[r]=0}for(n=0,i=0;i<32;++i)t[i]+=n-(t[31]>>4)*Yi[i],n=t[i]>>8,t[i]&=255;for(i=0;i<32;++i)t[i]-=n*Yi[i];for(r=0;r<32;++r)t[r+1]+=t[r]>>8,e[r]=t[r]&255}function Wi(e){for(var t=new Float64Array(64),n=0;n<64;++n)t[n]=e[n],e[n]=0;Ts(e,t)}function Xi(e,t){var n=Z(),r=Z(),i=Z(),a=Z(),o=Z(),s=Z(),c=Z(),l=Z(),u=Z();Dr(n,e[1],e[0]),Dr(u,t[1],t[0]),Ce(n,n,u),kr(r,e[0],e[1]),kr(u,t[0],t[1]),Ce(r,r,u),Ce(i,e[3],t[3]),Ce(i,i,_u),Ce(a,e[2],t[2]),kr(a,a,a),Dr(o,r,n),Dr(s,a,i),kr(c,a,i),kr(l,r,n),Ce(e[0],o,s),Ce(e[1],l,c),Ce(e[2],c,s),Ce(e[3],o,l)}function Es(e,t,n){for(var r=0;r<4;++r)Ps(e[r],t[r],n)}function $i(e,t){var n=Z(),r=Z(),i=Z();Bu(i,t[2]),Ce(n,t[0],i),Ce(r,t[1],i),Yn(e,r),e[31]^=Is(n)<<7}function Yn(e,t){var n,r,i,a=Z(),o=Z();for(n=0;n<16;++n)o[n]=t[n];for(Qi(o),Qi(o),Qi(o),r=0;r<2;++r){for(a[0]=o[0]-65517,n=1;n<15;++n)a[n]=o[n]-65535-(a[n-1]>>16&1),a[n-1]&=65535;a[15]=o[15]-32767-(a[14]>>16&1),i=a[15]>>16&1,a[14]&=65535,Ps(o,a,1-i)}for(n=0;n<16;n++)e[2*n]=o[n]&255,e[2*n+1]=o[n]>>8}function wu(e,t){var n=Z(),r=Z(),i=Z(),a=Z(),o=Z(),s=Z(),c=Z();return lr(e[2],Gn),Iu(e[1],t),_r(i,e[1]),Ce(a,i,xu),Dr(i,i,e[2]),kr(a,e[2],a),_r(o,a),_r(s,o),Ce(c,s,o),Ce(n,c,i),Ce(n,n,a),Au(n,n),Ce(n,n,i),Ce(n,n,a),Ce(n,n,a),Ce(e[0],n,a),_r(r,e[0]),Ce(r,r,a),Ss(r,i)&&Ce(e[0],e[0],Eu),_r(r,e[0]),Ce(r,r,a),Ss(r,i)?-1:(Is(e[0])===t[31]>>7&&Dr(e[0],Zi,e[0]),Ce(e[3],e[0],e[1]),0)}function Iu(e,t){var n;for(n=0;n<16;++n)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}function Au(e,t){var n=Z(),r;for(r=0;r<16;++r)n[r]=t[r];for(r=250;r>=0;--r)_r(n,n),r!==1&&Ce(n,n,t);for(r=0;r<16;++r)e[r]=n[r]}function Ss(e,t){var n=new at(32),r=new at(32);return Yn(n,e),Yn(r,t),ws(n,0,r,0)}function ws(e,t,n,r){return Pu(e,t,n,r,32)}function Pu(e,t,n,r,i){var a,o=0;for(a=0;a<i;++a)o|=e[t+a]^n[r+a];return(1&o-1>>>8)-1}function Is(e){var t=new at(32);return Yn(t,e),t[0]&1}function As(e,t,n){var r,i;for(lr(e[0],Zi),lr(e[1],Gn),lr(e[2],Gn),lr(e[3],Zi),i=255;i>=0;--i)r=n[i/8|0]>>(i&7)&1,Es(e,t,r),Xi(t,e),Xi(e,e),Es(e,t,r)}function Ji(e,t){var n=[Z(),Z(),Z(),Z()];lr(n[0],xs),lr(n[1],_s),lr(n[2],Gn),Ce(n[3],xs,_s),As(e,n,t)}function lr(e,t){var n;for(n=0;n<16;n++)e[n]=t[n]|0}function Bu(e,t){var n=Z(),r;for(r=0;r<16;++r)n[r]=t[r];for(r=253;r>=0;--r)_r(n,n),r!==2&&r!==4&&Ce(n,n,t);for(r=0;r<16;++r)e[r]=n[r]}function Qi(e){var t,n,r=1;for(t=0;t<16;++t)n=e[t]+r+65535,r=Math.floor(n/65536),e[t]=n-r*65536;e[0]+=r-1+37*(r-1)}function Ps(e,t,n){for(var r,i=~(n-1),a=0;a<16;++a)r=i&(e[a]^t[a]),e[a]^=r,t[a]^=r}function Z(e){var t,n=new Float64Array(16);if(e)for(t=0;t<e.length;++t)n[t]=e[t];return n}function kr(e,t,n){for(var r=0;r<16;++r)e[r]=t[r]+n[r]}function Dr(e,t,n){for(var r=0;r<16;++r)e[r]=t[r]-n[r]}function _r(e,t){Ce(e,t,t)}function Ce(e,t,n){var r,i,a=0,o=0,s=0,c=0,l=0,u=0,f=0,g=0,C=0,m=0,S=0,b=0,w=0,O=0,M=0,H=0,V=0,k=0,J=0,ne=0,he=0,me=0,ye=0,Ee=0,Je=0,ut=0,ve=0,Ie=0,G=0,cr=0,Sr=0,Ae=n[0],Pe=n[1],Oe=n[2],Fe=n[3],Ke=n[4],qe=n[5],He=n[6],ze=n[7],Ge=n[8],Ye=n[9],Qe=n[10],je=n[11],Ze=n[12],We=n[13],Xe=n[14],$e=n[15];r=t[0],a+=r*Ae,o+=r*Pe,s+=r*Oe,c+=r*Fe,l+=r*Ke,u+=r*qe,f+=r*He,g+=r*ze,C+=r*Ge,m+=r*Ye,S+=r*Qe,b+=r*je,w+=r*Ze,O+=r*We,M+=r*Xe,H+=r*$e,r=t[1],o+=r*Ae,s+=r*Pe,c+=r*Oe,l+=r*Fe,u+=r*Ke,f+=r*qe,g+=r*He,C+=r*ze,m+=r*Ge,S+=r*Ye,b+=r*Qe,w+=r*je,O+=r*Ze,M+=r*We,H+=r*Xe,V+=r*$e,r=t[2],s+=r*Ae,c+=r*Pe,l+=r*Oe,u+=r*Fe,f+=r*Ke,g+=r*qe,C+=r*He,m+=r*ze,S+=r*Ge,b+=r*Ye,w+=r*Qe,O+=r*je,M+=r*Ze,H+=r*We,V+=r*Xe,k+=r*$e,r=t[3],c+=r*Ae,l+=r*Pe,u+=r*Oe,f+=r*Fe,g+=r*Ke,C+=r*qe,m+=r*He,S+=r*ze,b+=r*Ge,w+=r*Ye,O+=r*Qe,M+=r*je,H+=r*Ze,V+=r*We,k+=r*Xe,J+=r*$e,r=t[4],l+=r*Ae,u+=r*Pe,f+=r*Oe,g+=r*Fe,C+=r*Ke,m+=r*qe,S+=r*He,b+=r*ze,w+=r*Ge,O+=r*Ye,M+=r*Qe,H+=r*je,V+=r*Ze,k+=r*We,J+=r*Xe,ne+=r*$e,r=t[5],u+=r*Ae,f+=r*Pe,g+=r*Oe,C+=r*Fe,m+=r*Ke,S+=r*qe,b+=r*He,w+=r*ze,O+=r*Ge,M+=r*Ye,H+=r*Qe,V+=r*je,k+=r*Ze,J+=r*We,ne+=r*Xe,he+=r*$e,r=t[6],f+=r*Ae,g+=r*Pe,C+=r*Oe,m+=r*Fe,S+=r*Ke,b+=r*qe,w+=r*He,O+=r*ze,M+=r*Ge,H+=r*Ye,V+=r*Qe,k+=r*je,J+=r*Ze,ne+=r*We,he+=r*Xe,me+=r*$e,r=t[7],g+=r*Ae,C+=r*Pe,m+=r*Oe,S+=r*Fe,b+=r*Ke,w+=r*qe,O+=r*He,M+=r*ze,H+=r*Ge,V+=r*Ye,k+=r*Qe,J+=r*je,ne+=r*Ze,he+=r*We,me+=r*Xe,ye+=r*$e,r=t[8],C+=r*Ae,m+=r*Pe,S+=r*Oe,b+=r*Fe,w+=r*Ke,O+=r*qe,M+=r*He,H+=r*ze,V+=r*Ge,k+=r*Ye,J+=r*Qe,ne+=r*je,he+=r*Ze,me+=r*We,ye+=r*Xe,Ee+=r*$e,r=t[9],m+=r*Ae,S+=r*Pe,b+=r*Oe,w+=r*Fe,O+=r*Ke,M+=r*qe,H+=r*He,V+=r*ze,k+=r*Ge,J+=r*Ye,ne+=r*Qe,he+=r*je,me+=r*Ze,ye+=r*We,Ee+=r*Xe,Je+=r*$e,r=t[10],S+=r*Ae,b+=r*Pe,w+=r*Oe,O+=r*Fe,M+=r*Ke,H+=r*qe,V+=r*He,k+=r*ze,J+=r*Ge,ne+=r*Ye,he+=r*Qe,me+=r*je,ye+=r*Ze,Ee+=r*We,Je+=r*Xe,ut+=r*$e,r=t[11],b+=r*Ae,w+=r*Pe,O+=r*Oe,M+=r*Fe,H+=r*Ke,V+=r*qe,k+=r*He,J+=r*ze,ne+=r*Ge,he+=r*Ye,me+=r*Qe,ye+=r*je,Ee+=r*Ze,Je+=r*We,ut+=r*Xe,ve+=r*$e,r=t[12],w+=r*Ae,O+=r*Pe,M+=r*Oe,H+=r*Fe,V+=r*Ke,k+=r*qe,J+=r*He,ne+=r*ze,he+=r*Ge,me+=r*Ye,ye+=r*Qe,Ee+=r*je,Je+=r*Ze,ut+=r*We,ve+=r*Xe,Ie+=r*$e,r=t[13],O+=r*Ae,M+=r*Pe,H+=r*Oe,V+=r*Fe,k+=r*Ke,J+=r*qe,ne+=r*He,he+=r*ze,me+=r*Ge,ye+=r*Ye,Ee+=r*Qe,Je+=r*je,ut+=r*Ze,ve+=r*We,Ie+=r*Xe,G+=r*$e,r=t[14],M+=r*Ae,H+=r*Pe,V+=r*Oe,k+=r*Fe,J+=r*Ke,ne+=r*qe,he+=r*He,me+=r*ze,ye+=r*Ge,Ee+=r*Ye,Je+=r*Qe,ut+=r*je,ve+=r*Ze,Ie+=r*We,G+=r*Xe,cr+=r*$e,r=t[15],H+=r*Ae,V+=r*Pe,k+=r*Oe,J+=r*Fe,ne+=r*Ke,he+=r*qe,me+=r*He,ye+=r*ze,Ee+=r*Ge,Je+=r*Ye,ut+=r*Qe,ve+=r*je,Ie+=r*Ze,G+=r*We,cr+=r*Xe,Sr+=r*$e,a+=38*V,o+=38*k,s+=38*J,c+=38*ne,l+=38*he,u+=38*me,f+=38*ye,g+=38*Ee,C+=38*Je,m+=38*ut,S+=38*ve,b+=38*Ie,w+=38*G,O+=38*cr,M+=38*Sr,i=1,r=a+i+65535,i=Math.floor(r/65536),a=r-i*65536,r=o+i+65535,i=Math.floor(r/65536),o=r-i*65536,r=s+i+65535,i=Math.floor(r/65536),s=r-i*65536,r=c+i+65535,i=Math.floor(r/65536),c=r-i*65536,r=l+i+65535,i=Math.floor(r/65536),l=r-i*65536,r=u+i+65535,i=Math.floor(r/65536),u=r-i*65536,r=f+i+65535,i=Math.floor(r/65536),f=r-i*65536,r=g+i+65535,i=Math.floor(r/65536),g=r-i*65536,r=C+i+65535,i=Math.floor(r/65536),C=r-i*65536,r=m+i+65535,i=Math.floor(r/65536),m=r-i*65536,r=S+i+65535,i=Math.floor(r/65536),S=r-i*65536,r=b+i+65535,i=Math.floor(r/65536),b=r-i*65536,r=w+i+65535,i=Math.floor(r/65536),w=r-i*65536,r=O+i+65535,i=Math.floor(r/65536),O=r-i*65536,r=M+i+65535,i=Math.floor(r/65536),M=r-i*65536,r=H+i+65535,i=Math.floor(r/65536),H=r-i*65536,a+=i-1+37*(i-1),i=1,r=a+i+65535,i=Math.floor(r/65536),a=r-i*65536,r=o+i+65535,i=Math.floor(r/65536),o=r-i*65536,r=s+i+65535,i=Math.floor(r/65536),s=r-i*65536,r=c+i+65535,i=Math.floor(r/65536),c=r-i*65536,r=l+i+65535,i=Math.floor(r/65536),l=r-i*65536,r=u+i+65535,i=Math.floor(r/65536),u=r-i*65536,r=f+i+65535,i=Math.floor(r/65536),f=r-i*65536,r=g+i+65535,i=Math.floor(r/65536),g=r-i*65536,r=C+i+65535,i=Math.floor(r/65536),C=r-i*65536,r=m+i+65535,i=Math.floor(r/65536),m=r-i*65536,r=S+i+65535,i=Math.floor(r/65536),S=r-i*65536,r=b+i+65535,i=Math.floor(r/65536),b=r-i*65536,r=w+i+65535,i=Math.floor(r/65536),w=r-i*65536,r=O+i+65535,i=Math.floor(r/65536),O=r-i*65536,r=M+i+65535,i=Math.floor(r/65536),M=r-i*65536,r=H+i+65535,i=Math.floor(r/65536),H=r-i*65536,a+=i-1+37*(i-1),e[0]=a,e[1]=o,e[2]=s,e[3]=c,e[4]=l,e[5]=u,e[6]=f,e[7]=g,e[8]=C,e[9]=m,e[10]=S,e[11]=b,e[12]=w,e[13]=O,e[14]=M,e[15]=H}});var Rs=X((zp,Ns)=>{"use strict";var ct=re();ue();ht();Qr();Ns.exports=ct.kem=ct.kem||{};var Ms=ct.jsbn.BigInteger;ct.kem.rsa={};ct.kem.rsa.create=function(e,t){t=t||{};var n=t.prng||ct.random,r={};return r.encrypt=function(i,a){var o=Math.ceil(i.n.bitLength()/8),s;do s=new Ms(ct.util.bytesToHex(n.getBytesSync(o)),16).mod(i.n);while(s.compareTo(Ms.ONE)<=0);s=ct.util.hexToBytes(s.toString(16));var c=o-s.length;c>0&&(s=ct.util.fillString("\0",c)+s);var l=i.encrypt(s,"NONE"),u=e.generate(s,a);return{encapsulation:l,key:u}},r.decrypt=function(i,a,o){var s=i.decrypt(a,"NONE");return e.generate(s,o)},r};ct.kem.kdf1=function(e,t){Ls(this,e,0,t||e.digestLength)};ct.kem.kdf2=function(e,t){Ls(this,e,1,t||e.digestLength)};function Ls(e,t,n,r){e.generate=function(i,a){for(var o=new ct.util.ByteBuffer,s=Math.ceil(a/r)+n,c=new ct.util.ByteBuffer,l=n;l<s;++l){c.putInt32(l),t.start(),t.update(i+c.getBytes());var u=t.digest();o.putBytes(u.getBytes(r))}return o.truncate(o.length()-a),o.getBytes()}}});var Us=X((Gp,Vs)=>{"use strict";var se=re();ue();Vs.exports=se.log=se.log||{};se.log.levels=["none","error","warning","info","debug","verbose","max"];var Qn={},ra=[],en=null;se.log.LEVEL_LOCKED=2;se.log.NO_LEVEL_CHECK=4;se.log.INTERPOLATE=8;for(Ft=0;Ft<se.log.levels.length;++Ft)ea=se.log.levels[Ft],Qn[ea]={index:Ft,name:ea.toUpperCase()};var ea,Ft;se.log.logMessage=function(e){for(var t=Qn[e.level].index,n=0;n<ra.length;++n){var r=ra[n];if(r.flags&se.log.NO_LEVEL_CHECK)r.f(e);else{var i=Qn[r.level].index;t<=i&&r.f(r,e)}}};se.log.prepareStandard=function(e){"standard"in e||(e.standard=Qn[e.level].name+" ["+e.category+"] "+e.message)};se.log.prepareFull=function(e){if(!("full"in e)){var t=[e.message];t=t.concat([]),e.full=se.util.format.apply(this,t)}};se.log.prepareStandardFull=function(e){"standardFull"in e||(se.log.prepareStandard(e),e.standardFull=e.standard)};for(ta=["error","warning","info","debug","verbose"],Ft=0;Ft<ta.length;++Ft)(function(t){se.log[t]=function(n,r){var i=Array.prototype.slice.call(arguments).slice(2),a={timestamp:new Date,level:t,category:n,message:r,arguments:i};se.log.logMessage(a)}})(ta[Ft]);var ta,Ft;se.log.makeLogger=function(e){var t={flags:0,f:e};return se.log.setLevel(t,"none"),t};se.log.setLevel=function(e,t){var n=!1;if(e&&!(e.flags&se.log.LEVEL_LOCKED))for(var r=0;r<se.log.levels.length;++r){var i=se.log.levels[r];if(t==i){e.level=t,n=!0;break}}return n};se.log.lock=function(e,t){typeof t>"u"||t?e.flags|=se.log.LEVEL_LOCKED:e.flags&=~se.log.LEVEL_LOCKED};se.log.addLogger=function(e){ra.push(e)};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(ks={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},tn=function(e,t){se.log.prepareStandard(t);var n=ks[t.level],r=[t.standard];r=r.concat(t.arguments.slice()),n.apply(console,r)},Vr=se.log.makeLogger(tn)):(tn=function(t,n){se.log.prepareStandardFull(n),console.log(n.standardFull)},Vr=se.log.makeLogger(tn)),se.log.setLevel(Vr,"debug"),se.log.addLogger(Vr),en=Vr):console={log:function(){}};var Vr,ks,tn;en!==null&&typeof window<"u"&&window.location&&(Jr=new URL(window.location.href).searchParams,Jr.has("console.level")&&se.log.setLevel(en,Jr.get("console.level").slice(-1)[0]),Jr.has("console.lock")&&(Ds=Jr.get("console.lock").slice(-1)[0],Ds=="true"&&se.log.lock(en)));var Jr,Ds;se.log.consoleLogger=en});var Ks=X((Yp,Fs)=>{"use strict";Fs.exports=Mt();Tn();Or();gi();zi()});var zs=X((Qp,Hs)=>{"use strict";var F=re();er();_t();Gr();tr();hr();Pi();ht();ue();Fn();var y=F.asn1,nt=Hs.exports=F.pkcs7=F.pkcs7||{};nt.messageFromPem=function(e){var t=F.pem.decode(e)[0];if(t.type!=="PKCS7"){var n=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw n.headerType=t.type,n}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var r=y.fromDer(t.body);return nt.messageFromAsn1(r)};nt.messageToPem=function(e,t){var n={type:"PKCS7",body:y.toDer(e.toAsn1()).getBytes()};return F.pem.encode(n,{maxline:t})};nt.messageFromAsn1=function(e){var t={},n=[];if(!y.validate(e,nt.asn1.contentInfoValidator,t,n)){var r=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw r.errors=n,r}var i=y.derToOid(t.contentType),a;switch(i){case F.pki.oids.envelopedData:a=nt.createEnvelopedData();break;case F.pki.oids.encryptedData:a=nt.createEncryptedData();break;case F.pki.oids.signedData:a=nt.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return a.fromAsn1(t.content.value[0]),a};nt.createSignedData=function(){var e=null;return e={type:F.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(r){if(ia(e,r,nt.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var i=e.rawCapture.certificates.value,a=0;a<i.length;++a)e.certificates.push(F.pki.certificateFromAsn1(i[a]))},toAsn1:function(){e.contentInfo||e.sign();for(var r=[],i=0;i<e.certificates.length;++i)r.push(F.pki.certificateToAsn1(e.certificates[i]));var a=[],o=y.create(y.Class.CONTEXT_SPECIFIC,0,!0,[y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,y.integerToDer(e.version).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return r.length>0&&o.value[0].value.push(y.create(y.Class.CONTEXT_SPECIFIC,0,!0,r)),a.length>0&&o.value[0].value.push(y.create(y.Class.CONTEXT_SPECIFIC,1,!0,a)),o.value[0].value.push(y.create(y.Class.UNIVERSAL,y.Type.SET,!0,e.signerInfos)),y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(e.type).getBytes()),o])},addSigner:function(r){var i=r.issuer,a=r.serialNumber;if(r.certificate){var o=r.certificate;typeof o=="string"&&(o=F.pki.certificateFromPem(o)),i=o.issuer.attributes,a=o.serialNumber}var s=r.key;if(!s)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof s=="string"&&(s=F.pki.privateKeyFromPem(s));var c=r.digestAlgorithm||F.pki.oids.sha1;switch(c){case F.pki.oids.sha1:case F.pki.oids.sha256:case F.pki.oids.sha384:case F.pki.oids.sha512:case F.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+c)}var l=r.authenticatedAttributes||[];if(l.length>0){for(var u=!1,f=!1,g=0;g<l.length;++g){var C=l[g];if(!u&&C.type===F.pki.oids.contentType){if(u=!0,f)break;continue}if(!f&&C.type===F.pki.oids.messageDigest){if(f=!0,u)break;continue}}if(!u||!f)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:s,version:1,issuer:i,serialNumber:a,digestAlgorithm:c,signatureAlgorithm:F.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:l,unauthenticatedAttributes:[]})},sign:function(r){if(r=r||{},(typeof e.content!="object"||e.contentInfo===null)&&(e.contentInfo=y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(F.pki.oids.data).getBytes())]),"content"in e)){var i;e.content instanceof F.util.ByteBuffer?i=e.content.bytes():typeof e.content=="string"&&(i=F.util.encodeUtf8(e.content)),r.detached?e.detachedContent=y.create(y.Class.UNIVERSAL,y.Type.OCTETSTRING,!1,i):e.contentInfo.value.push(y.create(y.Class.CONTEXT_SPECIFIC,0,!0,[y.create(y.Class.UNIVERSAL,y.Type.OCTETSTRING,!1,i)]))}if(e.signers.length!==0){var a=t();n(a)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(r){typeof r=="string"&&(r=F.pki.certificateFromPem(r)),e.certificates.push(r)},addCertificateRevokationList:function(r){throw new Error("PKCS#7 CRL support not yet implemented.")}},e;function t(){for(var r={},i=0;i<e.signers.length;++i){var a=e.signers[i],o=a.digestAlgorithm;o in r||(r[o]=F.md[F.pki.oids[o]].create()),a.authenticatedAttributes.length===0?a.md=r[o]:a.md=F.md[F.pki.oids[o]].create()}e.digestAlgorithmIdentifiers=[];for(var o in r)e.digestAlgorithmIdentifiers.push(y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(o).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.NULL,!1,"")]));return r}function n(r){var i;if(e.detachedContent?i=e.detachedContent:(i=e.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var a=y.derToOid(e.contentInfo.value[0].value),o=y.toDer(i);o.getByte(),y.getBerValueLength(o),o=o.getBytes();for(var s in r)r[s].start().update(o);for(var c=new Date,l=0;l<e.signers.length;++l){var u=e.signers[l];if(u.authenticatedAttributes.length===0){if(a!==F.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{u.authenticatedAttributesAsn1=y.create(y.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var f=y.create(y.Class.UNIVERSAL,y.Type.SET,!0,[]),g=0;g<u.authenticatedAttributes.length;++g){var C=u.authenticatedAttributes[g];C.type===F.pki.oids.messageDigest?C.value=r[u.digestAlgorithm].digest():C.type===F.pki.oids.signingTime&&(C.value||(C.value=c)),f.value.push(na(C)),u.authenticatedAttributesAsn1.value.push(na(C))}o=y.toDer(f).getBytes(),u.md.start().update(o)}u.signature=u.key.sign(u.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=ku(e.signers)}};nt.createEncryptedData=function(){var e=null;return e={type:F.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:F.pki.oids["aes256-CBC"]},fromAsn1:function(t){ia(e,t,nt.asn1.encryptedDataValidator)},decrypt:function(t){t!==void 0&&(e.encryptedContent.key=t),qs(e)}},e};nt.createEnvelopedData=function(){var e=null;return e={type:F.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:F.pki.oids["aes256-CBC"]},fromAsn1:function(t){var n=ia(e,t,nt.asn1.envelopedDataValidator);e.recipients=Lu(n.recipientInfos.value)},toAsn1:function(){return y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(e.type).getBytes()),y.create(y.Class.CONTEXT_SPECIFIC,0,!0,[y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,y.integerToDer(e.version).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.SET,!0,Nu(e.recipients)),y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,Du(e.encryptedContent))])])])},findRecipient:function(t){for(var n=t.issuer.attributes,r=0;r<e.recipients.length;++r){var i=e.recipients[r],a=i.issuer;if(i.serialNumber===t.serialNumber&&a.length===n.length){for(var o=!0,s=0;s<n.length;++s)if(a[s].type!==n[s].type||a[s].value!==n[s].value){o=!1;break}if(o)return i}}return null},decrypt:function(t,n){if(e.encryptedContent.key===void 0&&t!==void 0&&n!==void 0)switch(t.encryptedContent.algorithm){case F.pki.oids.rsaEncryption:case F.pki.oids.desCBC:var r=n.decrypt(t.encryptedContent.content);e.encryptedContent.key=F.util.createBuffer(r);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}qs(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:F.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,n){if(e.encryptedContent.content===void 0){n=n||e.encryptedContent.algorithm,t=t||e.encryptedContent.key;var r,i,a;switch(n){case F.pki.oids["aes128-CBC"]:r=16,i=16,a=F.aes.createEncryptionCipher;break;case F.pki.oids["aes192-CBC"]:r=24,i=16,a=F.aes.createEncryptionCipher;break;case F.pki.oids["aes256-CBC"]:r=32,i=16,a=F.aes.createEncryptionCipher;break;case F.pki.oids["des-EDE3-CBC"]:r=24,i=8,a=F.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+n)}if(t===void 0)t=F.util.createBuffer(F.random.getBytes(r));else if(t.length()!=r)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+r+".");e.encryptedContent.algorithm=n,e.encryptedContent.key=t,e.encryptedContent.parameter=F.util.createBuffer(F.random.getBytes(i));var o=a(t);if(o.start(e.encryptedContent.parameter.copy()),o.update(e.content),!o.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=o.output}for(var s=0;s<e.recipients.length;++s){var c=e.recipients[s];if(c.encryptedContent.content===void 0)switch(c.encryptedContent.algorithm){case F.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}}},e};function Ou(e){var t={},n=[];if(!y.validate(e,nt.asn1.recipientInfoValidator,t,n)){var r=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw r.errors=n,r}return{version:t.version.charCodeAt(0),issuer:F.pki.RDNAttributesAsArray(t.issuer),serialNumber:F.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:y.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:void 0,content:t.encKey}}}function Mu(e){return y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,y.integerToDer(e.version).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[F.pki.distinguishedNameToAsn1({attributes:e.issuer}),y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,F.util.hexToBytes(e.serialNumber))]),y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(e.encryptedContent.algorithm).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.NULL,!1,"")]),y.create(y.Class.UNIVERSAL,y.Type.OCTETSTRING,!1,e.encryptedContent.content)])}function Lu(e){for(var t=[],n=0;n<e.length;++n)t.push(Ou(e[n]));return t}function Nu(e){for(var t=[],n=0;n<e.length;++n)t.push(Mu(e[n]));return t}function Ru(e){var t=y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,y.integerToDer(e.version).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[F.pki.distinguishedNameToAsn1({attributes:e.issuer}),y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,F.util.hexToBytes(e.serialNumber))]),y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(e.digestAlgorithm).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(e.signatureAlgorithm).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.NULL,!1,"")])),t.value.push(y.create(y.Class.UNIVERSAL,y.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var n=y.create(y.Class.CONTEXT_SPECIFIC,1,!0,[]),r=0;r<e.unauthenticatedAttributes.length;++r){var i=e.unauthenticatedAttributes[r];n.values.push(na(i))}t.value.push(n)}return t}function ku(e){for(var t=[],n=0;n<e.length;++n)t.push(Ru(e[n]));return t}function na(e){var t;if(e.type===F.pki.oids.contentType)t=y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(e.value).getBytes());else if(e.type===F.pki.oids.messageDigest)t=y.create(y.Class.UNIVERSAL,y.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===F.pki.oids.signingTime){var n=new Date("1950-01-01T00:00:00Z"),r=new Date("2050-01-01T00:00:00Z"),i=e.value;if(typeof i=="string"){var a=Date.parse(i);isNaN(a)?i.length===13?i=y.utcTimeToDate(i):i=y.generalizedTimeToDate(i):i=new Date(a)}i>=n&&i<r?t=y.create(y.Class.UNIVERSAL,y.Type.UTCTIME,!1,y.dateToUtcTime(i)):t=y.create(y.Class.UNIVERSAL,y.Type.GENERALIZEDTIME,!1,y.dateToGeneralizedTime(i))}return y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(e.type).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.SET,!0,[t])])}function Du(e){return[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(F.pki.oids.data).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(e.algorithm).getBytes()),e.parameter?y.create(y.Class.UNIVERSAL,y.Type.OCTETSTRING,!1,e.parameter.getBytes()):void 0]),y.create(y.Class.CONTEXT_SPECIFIC,0,!0,[y.create(y.Class.UNIVERSAL,y.Type.OCTETSTRING,!1,e.content.getBytes())])]}function ia(e,t,n){var r={},i=[];if(!y.validate(t,n,r,i)){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw a.errors=a,a}var o=y.derToOid(r.contentType);if(o!==F.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(r.encryptedContent){var s="";if(F.util.isArray(r.encryptedContent))for(var c=0;c<r.encryptedContent.length;++c){if(r.encryptedContent[c].type!==y.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");s+=r.encryptedContent[c].value}else s=r.encryptedContent;e.encryptedContent={algorithm:y.derToOid(r.encAlgorithm),parameter:F.util.createBuffer(r.encParameter.value),content:F.util.createBuffer(s)}}if(r.content){var s="";if(F.util.isArray(r.content))for(var c=0;c<r.content.length;++c){if(r.content[c].type!==y.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");s+=r.content[c].value}else s=r.content;e.content=F.util.createBuffer(s)}return e.version=r.version.charCodeAt(0),e.rawCapture=r,r}function qs(e){if(e.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(e.content===void 0){var t;switch(e.encryptedContent.algorithm){case F.pki.oids["aes128-CBC"]:case F.pki.oids["aes192-CBC"]:case F.pki.oids["aes256-CBC"]:t=F.aes.createDecryptionCipher(e.encryptedContent.key);break;case F.pki.oids.desCBC:case F.pki.oids["des-EDE3-CBC"]:t=F.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}});var Ys=X((jp,Gs)=>{"use strict";var Be=re();er();Ir();Tn();Or();ue();var Zn=Gs.exports=Be.ssh=Be.ssh||{};Zn.privateKeyToPutty=function(e,t,n){n=n||"",t=t||"";var r="ssh-rsa",i=t===""?"none":"aes256-cbc",a="PuTTY-User-Key-File-2: "+r+`\r
`;a+="Encryption: "+i+`\r
`,a+="Comment: "+n+`\r
`;var o=Be.util.createBuffer();Ur(o,r),Kt(o,e.e),Kt(o,e.n);var s=Be.util.encode64(o.bytes(),64),c=Math.floor(s.length/66)+1;a+="Public-Lines: "+c+`\r
`,a+=s;var l=Be.util.createBuffer();Kt(l,e.d),Kt(l,e.p),Kt(l,e.q),Kt(l,e.qInv);var u;if(!t)u=Be.util.encode64(l.bytes(),64);else{var f=l.length()+16-1;f-=f%16;var g=jn(l.bytes());g.truncate(g.length()-f+l.length()),l.putBuffer(g);var C=Be.util.createBuffer();C.putBuffer(jn("\0\0\0\0",t)),C.putBuffer(jn("\0\0\0",t));var m=Be.aes.createEncryptionCipher(C.truncate(8),"CBC");m.start(Be.util.createBuffer().fillWithByte(0,16)),m.update(l.copy()),m.finish();var S=m.output;S.truncate(16),u=Be.util.encode64(S.bytes(),64)}c=Math.floor(u.length/66)+1,a+=`\r
Private-Lines: `+c+`\r
`,a+=u;var b=jn("putty-private-key-file-mac-key",t),w=Be.util.createBuffer();Ur(w,r),Ur(w,i),Ur(w,n),w.putInt32(o.length()),w.putBuffer(o),w.putInt32(l.length()),w.putBuffer(l);var O=Be.hmac.create();return O.start("sha1",b),O.update(w.bytes()),a+=`\r
Private-MAC: `+O.digest().toHex()+`\r
`,a};Zn.publicKeyToOpenSSH=function(e,t){var n="ssh-rsa";t=t||"";var r=Be.util.createBuffer();return Ur(r,n),Kt(r,e.e),Kt(r,e.n),n+" "+Be.util.encode64(r.bytes())+" "+t};Zn.privateKeyToOpenSSH=function(e,t){return t?Be.pki.encryptRsaPrivateKey(e,t,{legacy:!0,algorithm:"aes128"}):Be.pki.privateKeyToPem(e)};Zn.getPublicKeyFingerprint=function(e,t){t=t||{};var n=t.md||Be.md.md5.create(),r="ssh-rsa",i=Be.util.createBuffer();Ur(i,r),Kt(i,e.e),Kt(i,e.n),n.start(),n.update(i.getBytes());var a=n.digest();if(t.encoding==="hex"){var o=a.toHex();return t.delimiter?o.match(/.{2}/g).join(t.delimiter):o}else{if(t.encoding==="binary")return a.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return a};function Kt(e,t){var n=t.toString(16);n[0]>="8"&&(n="00"+n);var r=Be.util.hexToBytes(n);e.putInt32(r.length),e.putBytes(r)}function Ur(e,t){e.putInt32(t.length),e.putString(t)}function jn(){for(var e=Be.md.sha1.create(),t=arguments.length,n=0;n<t;++n)e.update(arguments[n]);return e.digest()}});var js=X((Zp,Qs)=>{"use strict";Qs.exports=re();er();ds();_t();Cn();Gr();Os();Ir();Rs();Us();Ks();Bi();Bn();hr();bi();Li();zs();Ri();wi();mi();Dn();ht();yi();Ys();Ki();ue()});var Fr=t0(js());function Ku(e,t){e&1&&U(0,"app-loader",57),e&2&&P("overlayColor","rgba(255, 255, 255, 0.1)")}function qu(e,t){e&1&&(x(0,"div"),I(1,"Email is required"),E())}function Hu(e,t){e&1&&(x(0,"div"),I(1,"Please enter a valid email"),E())}function zu(e,t){if(e&1&&(x(0,"div",58),Y(1,qu,2,0,"div",59)(2,Hu,2,0,"div",59),E()),e&2){let n,r,i=W();B(),P("ngIf",(n=i.loginForm.get("email"))==null||n.errors==null?null:n.errors.required),B(),P("ngIf",(r=i.loginForm.get("email"))==null||r.errors==null?null:r.errors.email)}}function Gu(e,t){e&1&&(x(0,"div",58),I(1," Password is required "),E())}var Zs=(()=>{class e{togglePasswordVisibility(){this.hidePassword=!this.hidePassword}setActiveTab(n){this.activeTab=n}constructor(n,r,i,a,o,s,c){this.authService=n,this.router=r,this.fb=i,this._storage=a,this._user=o,this._snackbar=s,this._currentYacht=c,this.username="",this.password="",this.errorMessage="",this.subscriptions=new nn,this.hidePassword=!0,this.activeTab="email",this.isLoading=!1,this.loginForm=this.fb.group({email:["",[ee.required,ee.email]],password:["",ee.required]})}onSubmit(){this.loginForm.valid||this.loginForm.markAllAsTouched()}fetchUservessels(n){let r=this._user.getYachtsByUserId(n).subscribe(i=>{if(this.yachts=i,this.yachts.length>0){let a=this.yachts[0];localStorage.setItem("defaultYacht",a.id),localStorage.setItem("defaultYachtName",a.vesselName),this.setDefaultYacht(a.id)}this.isLoading=!1,this.router.navigate(["/owner"])},i=>{console.error("Error fetching yacht data (from onView)",i),this.isLoading=!1,this.router.navigate(["/owner"])});this.subscriptions.add(r)}setDefaultYacht(n){this._currentYacht.setYachtId(n),localStorage.setItem("defaultYacht",n),this._storage.setDefaultYacht(n),this._currentYacht.currentYachtId$.subscribe(r=>{})}encryptPassword(n,r){let i=`-----BEGIN PUBLIC KEY-----
${r}
-----END PUBLIC KEY-----`,o=Fr.pki.publicKeyFromPem(i).encrypt(n,"RSA-OAEP",{md:Fr.md.sha256.create()});return Fr.util.encode64(o)}login(){this.isLoading=!0,this._storage.clearAllData();let n=this.loginForm.get("email");n&&(this.username=n.value);let r=this.loginForm.get("password");if(r&&(this.password=r.value),!this.username||!this.password){this.errorMessage="Please enter both username and password.",this.isLoading=!1;return}this._user.getPublicKey().subscribe(i=>{this.password=this.encryptPassword(this.password,i.publicKey),this.authService.login(this.username,this.password).subscribe(a=>{let o=a.role;a.response.role=="Owner"?(this._currentYacht.clearYachtId(),this.fetchUservessels(a.response.id)):a.response.role=="Crew"?(this.isLoading=!1,this.router.navigate(["/crew"])):(this._snackbar.error("Invalid username or password."),this.isLoading=!1)},a=>{this._snackbar.error("Invalid username or password."),this.isLoading=!1})})}ngOnDestroy(){this.subscriptions&&this.subscriptions.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)(pe(Xt),pe(Zt),pe(Ot),pe(dn),pe(hn),pe(Wt),pe(gn))}}static{this.\u0275cmp=ft({type:e,selectors:[["app-login"]],decls:84,vars:18,consts:[[1,"container-fluid"],[3,"overlayColor",4,"ngIf"],[1,"row"],[1,"col-lg-6","hero-section"],[1,"hero-content"],[1,"back-link"],["routerLink","/",1,"text-white","text-decoration-none"],[1,"bi","bi-arrow-left-circle"],[1,"brand"],[1,"fw-bold"],[1,"hero-text"],[1,"display-5","fw-bold"],[1,"lead"],[1,"col-lg-6","form-section"],[1,"form-container"],[1,"text-center"],[1,"text-muted-first"],[1,"login-tabs"],[1,"tab-btn","active",3,"click"],[1,"tab-btn","disabled",3,"click"],[1,"scrollTabLogin"],[1,"tab-content"],[1,"tab-pane","fade"],[3,"ngSubmit","formGroup"],[1,"fieldLogin"],[1,"form-group"],["for","email"],["type","email","id","email","placeholder","Enter Email","formControlName","email",1,"form-control","form-control-lg"],["class","text-danger errormessage",4,"ngIf"],["for","password"],[1,"input-group"],["id","password","placeholder","Enter Password","formControlName","password",1,"form-control","form-control-lg",3,"type"],["type","button",1,"btn","btn-eye",3,"click"],[1,"bi",3,"ngClass"],[1,"d-flex","justify-content-end","align-items-center"],["routerLink","/auth/forgot-password",1,"text-password","small","text-decoration-none"],["type","submit",1,"btn","btn-primary","btn-lg","w-100","d-flex","justify-content-center","align-items-center","gap-2",3,"click"],[1,"bi","bi-chevron-right"],[1,"text-center","py-4"],[1,"text-muted"],[1,"social-login","mt-4","disabled"],[1,"divider"],["_ngcontent-ng-c2850015536","",1,"bg-white","px-3","text-muted","small"],[1,"row","g-2"],[1,"col-4"],[1,"btn-footer","w-100","social-btn"],["src","../../../../assets/img/google-icon.png","alt","Google","height","15"],["src","../../../../assets/img/facebook-icon.png","alt","Facebook","height","15"],["src","../../../../assets/img/twitter-icon.png","alt","X","height","15"],[1,"text-center","mt-4"],["routerLink","/auth/signup",1,"text-sign","text-decoration-none","ms-1","fw-medium"],[1,"footer","mt-auto"],[1,"d-flex","justify-content-between","align-items-center","text-muted","small"],[1,"copy-right"],[1,"mail","copy-right"],["href","mailto:support@smartyacht.app",1,"text-muted","text-decoration-none"],[1,"bi","bi-envelope","me-1"],[3,"overlayColor"],[1,"text-danger","errormessage"],[4,"ngIf"]],template:function(r,i){if(r&1&&(x(0,"div",0),Y(1,Ku,1,1,"app-loader",1),x(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"a",6),U(7,"i",7),I(8,"Back to website "),E(),x(9,"div",8)(10,"h1",9),I(11,"smartYacht"),E()()(),x(12,"div",10)(13,"h2",11),I(14,"Welcome to the world of luxury yachting"),E(),x(15,"p",12),I(16,"Connect with top crews, manage your fleet, or offer premium services - Your maritime journey starts here."),E()()()(),x(17,"div",13)(18,"div",14)(19,"div",15)(20,"h2"),I(21,"Welcome back"),E(),x(22,"p",16),I(23,"Please enter your details to access your account"),E()(),x(24,"div",17)(25,"button",18),ge("click",function(){return i.setActiveTab("email")}),I(26,"Email"),E(),x(27,"button",19),ge("click",function(){return i.setActiveTab("social")}),I(28,"Social Media"),E()(),x(29,"div",20)(30,"div",21)(31,"div",22)(32,"form",23),ge("ngSubmit",function(){return i.onSubmit()}),x(33,"div",24)(34,"div",25)(35,"label",26),I(36,"Email Address"),E(),U(37,"input",27),Y(38,zu,3,2,"div",28),E(),x(39,"div",25)(40,"label",29),I(41,"Password"),E(),x(42,"div",30),U(43,"input",31),x(44,"button",32),ge("click",function(){return i.togglePasswordVisibility()}),U(45,"i",33),E()(),Y(46,Gu,2,0,"div",28),E(),x(47,"div",34)(48,"a",35),I(49,"Forgot Password?"),E()(),x(50,"button",36),ge("click",function(){return i.login()}),I(51," Login "),U(52,"i",37),E()()()(),x(53,"div",22)(54,"div",38)(55,"p",39),I(56,"Choose a social media platform to login"),E()()()(),x(57,"div",40)(58,"div",41)(59,"span",42),I(60,"OR CONTINUE WITH"),E()(),x(61,"div",43)(62,"div",44)(63,"button",45),U(64,"img",46),E()(),x(65,"div",44)(66,"button",45),U(67,"img",47),E()(),x(68,"div",44)(69,"button",45),U(70,"img",48),E()()()(),x(71,"div",49)(72,"span",39),I(73,"Don't have an account?"),E(),x(74,"a",50),I(75,"Sign up for free"),E()(),x(76,"div",51)(77,"div",52)(78,"div",53),I(79,"\xA9 2025 smartYacht All rights reserved."),E(),x(80,"div",54)(81,"a",55),U(82,"i",56),I(83," support@smartyacht.app "),E()()()()()()()()()),r&2){let a,o;B(),P("ngIf",i.isLoading),B(24),fr("active",i.activeTab==="email"),B(2),fr("active",i.activeTab==="social"),B(4),fr("show",i.activeTab==="email")("active",i.activeTab==="email"),B(),P("formGroup",i.loginForm),B(6),P("ngIf",((a=i.loginForm.get("email"))==null?null:a.invalid)&&((a=i.loginForm.get("email"))==null?null:a.touched)),B(5),P("type",i.hidePassword?"password":"text"),B(2),P("ngClass",i.hidePassword?"bi-eye-slash":"bi-eye"),B(),P("ngIf",((o=i.loginForm.get("password"))==null?null:o.invalid)&&((o=i.loginForm.get("password"))==null?null:o.touched)),B(7),fr("show",i.activeTab==="social")("active",i.activeTab==="social")}},dependencies:[br,St,At,Tt,wt,It,Pt,Bt,bt,Aa],styles:['.hero-section[_ngcontent-%COMP%]{position:relative;min-height:100vh;background-image:url("./media/login-QTTUHSTS.jpg");background-size:cover;background-position:0% center;color:#fff}@media (max-width: 992px){.hero-section[_ngcontent-%COMP%]{min-height:auto;padding:25px}}.hero-section[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(#0000,#000);z-index:1}.hero-section[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]{position:relative;z-index:2;height:100%;display:flex;flex-direction:column;justify-content:space-between;padding:10px}@media (max-width: 1199px){.hero-section[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]{padding:0}}.hero-section[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:400;font-size:16px;line-height:19px;color:#fff;display:inline-flex;align-items:center;gap:10px}.hero-section[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:600;font-size:25.8px;padding:0;margin-bottom:0}.hero-section[_ngcontent-%COMP%]   .hero-text[_ngcontent-%COMP%]{margin-bottom:0}@media (max-width: 992px){.hero-section[_ngcontent-%COMP%]   .hero-text[_ngcontent-%COMP%]{display:none}}.hero-section[_ngcontent-%COMP%]   .hero-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:500;font-size:32px;margin-bottom:10px}.hero-section[_ngcontent-%COMP%]   .hero-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:.9;font-weight:400;font-size:16px;line-height:24px}.login-tabs[_ngcontent-%COMP%]{display:flex;background-color:#f2f2f2;border-radius:8px;margin-bottom:2rem}@media (max-width: 992px){.login-tabs[_ngcontent-%COMP%]{margin-bottom:18px}}.tab-btn[_ngcontent-%COMP%]{flex:1;padding:.8rem;border:none;background:none;cursor:pointer;font-weight:500;font-size:16px;line-height:19px;color:#444;border-radius:8px;transition:all .3s ease}@media (max-width: 575.98px){.tab-btn[_ngcontent-%COMP%]{padding:.6rem;font-size:14px}}.tab-btn.active[_ngcontent-%COMP%]{background-color:#fff;color:#444;box-shadow:0 2px 8px #0000001a}.form-section[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:column;padding:3rem 2rem;overflow:auto}@media (max-width: 992px){.form-section[_ngcontent-%COMP%]{height:auto;padding:20px}}.form-section[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{max-width:447px;display:flex;flex-direction:column;justify-content:center;margin:0 auto;width:100%;height:100%}@media (max-width: 992px){.form-section[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{height:auto;max-width:100%}}.form-section[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-weight:500;font-size:14.1px;line-height:17px;color:#444}.form-section[_ngcontent-%COMP%]   .text-password[_ngcontent-%COMP%]{font-weight:500;font-size:12px;line-height:15px;color:#3a0764;margin-bottom:15px}.form-section[_ngcontent-%COMP%]   .text-password[_ngcontent-%COMP%]:hover{color:#000}.form-section[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{border:1px solid #F2F2F2}.form-section[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-weight:600;font-size:16px;line-height:19px;color:#444;border:none;padding:.75rem 1.5rem;margin-bottom:-1px;cursor:pointer}.form-section[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#444;border-bottom:2px solid #444444;font-weight:500}.form-section[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover:not(.active){border-bottom:2px solid rgba(0,0,0,.1)}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:14px}}.form-section[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:600;font-size:24px;line-height:29px;text-align:start}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;line-height:24px}}.form-section[_ngcontent-%COMP%]   .text-muted-first[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:17px;text-align:start;color:#777}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .text-muted-first[_ngcontent-%COMP%]{font-size:13px;line-height:16px}}.form-section[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:17px;color:#444}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{font-size:13px}}.form-section[_ngcontent-%COMP%]   .text-sign[_ngcontent-%COMP%]{font-weight:600;font-size:14.3px;line-height:17px;color:#5d87ff}.form-section[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .tab-pane[_ngcontent-%COMP%]{display:none}.form-section[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .tab-pane.active[_ngcontent-%COMP%]{display:block}.form-section[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .tab-pane.show[_ngcontent-%COMP%]{opacity:1}.form-section[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding:.65rem 1rem;font-size:12px}.form-section[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .25rem #4a75f240;border-color:#4a75f2}.form-section[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{display:flex;align-items:center;margin:2rem 0;color:#999;font-size:.8rem}.form-section[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]:before, .form-section[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid #eee}.form-section[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 1rem;font-family:Roboto,sans-serif;font-weight:500;font-size:11.9px;line-height:14px;color:#777}.form-section[_ngcontent-%COMP%]   .small[_ngcontent-%COMP%]{font-weight:500;font-size:12px;line-height:14px;color:#5d87ff}.form-section[_ngcontent-%COMP%]   .copy-right[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:17px;color:#444}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .copy-right[_ngcontent-%COMP%]{font-size:12px;line-height:16px}}.form-section[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]{height:48px;display:flex;align-items:center;justify-content:center;padding:.5rem}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]{height:42px}}.form-section[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#4a75f2;border-color:#4a75f2;height:42px;font-weight:500;font-size:14px}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{height:38px;font-size:13px}}.form-section[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:17px;color:#444}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:13px}}.form-section[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{padding-top:2rem;margin-top:auto}.continue[_ngcontent-%COMP%]{font-weight:500;font-size:11.9px;line-height:14px;text-align:center;color:#777}.btn-eye[_ngcontent-%COMP%]{border:none}.btn-footer[_ngcontent-%COMP%]{border:1px solid #E9E9E9;width:133px;height:50px;border-radius:18px;background:#fff}.btn-outline-secondary[_ngcontent-%COMP%]{border:1px solid #F2F2F2}@media (max-width: 575.98px){.btn-outline-secondary[_ngcontent-%COMP%]{font-size:13px}}.fieldLogin[_ngcontent-%COMP%]{display:flex;flex-direction:column}.fieldLogin[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}@media (max-width: 992px){.scrollTabLogin[_ngcontent-%COMP%]{overflow:auto;height:calc(100dvh - 297px);padding:20px 11px 20px 0}}.errormessage[_ngcontent-%COMP%]{position:absolute;right:0;font-size:11px;font-weight:400}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5;-webkit-user-select:none;user-select:none;cursor:not-allowed}']})}}return e})();function Yu(e,t){e&1&&(x(0,"span",5),I(1,"*"),E())}function Qu(e,t){if(e&1&&(x(0,"label",1),I(1),Y(2,Yu,2,0,"span",5),E()),e&2){let n=W();P("for",n.label()),B(),pr(" ",n.label()," "),B(),Jn(2,n.required()?2:-1)}}var $n=(()=>{class e{constructor(){this.label=Ht("Password"),this.placeholder=Ht(""),this.displayLabel=Ht(!0),this.required=Ht(!1),this.name=Ht("password"),this.id=Ht(""),this.disabled=Ht(!1),this.readOnly=Ht(!1),this.type=ln("password"),this.value=ln(null),this.isFieldDisabled=ln(!1)}writeValue(n){this.value.set(n)}ngOnChanges(n){n.disabled&&(this.isFieldDisabled.set(n.disabled.currentValue),alert(this.isFieldDisabled()))}registerOnChange(n){this.onChange=n}registerOnTouched(n){this.onTouched=n}setDisabledState(n){this.isFieldDisabled.set(n)}onInput(n){let r=n.target;this.value.set(r.value),this.onChange(this.value()),this.onTouched()}onTouched(){}onChange(n){}togglePasswordVisibility(){this.type.set(this.type()==="password"?"text":"password")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=ft({type:e,selectors:[["app-password-input"]],inputs:{label:[qt.SignalBased,"label"],placeholder:[qt.SignalBased,"placeholder"],displayLabel:[qt.SignalBased,"displayLabel"],required:[qt.SignalBased,"required"],name:[qt.SignalBased,"name"],id:[qt.SignalBased,"id"],disabled:[qt.SignalBased,"disabled"],readOnly:[qt.SignalBased,"readOnly"]},standalone:!0,features:[da([{provide:ya,useExisting:sa(()=>e),multi:!0}]),la,ha],decls:5,vars:9,consts:[[1,"input-group","form-group"],[3,"for"],[1,"form-control",3,"input","blur","type","name","placeholder","id","disabled","readOnly","value"],["type","button","role","button",1,"btn","btn-eye",3,"click"],[1,"bi",3,"ngClass"],[1,"text-danger"]],template:function(r,i){r&1&&(x(0,"div",0),Y(1,Qu,3,3,"label",1),x(2,"input",2),ge("input",function(o){return i.onInput(o)})("blur",function(){return i.onTouched()}),E(),x(3,"button",3),ge("click",function(){return i.togglePasswordVisibility()}),U(4,"i",4),E()()),r&2&&(B(),Jn(1,i.displayLabel()?1:-1),B(),P("type",i.type())("name",i.name())("placeholder",i.placeholder())("id",i.id())("disabled",i.isFieldDisabled())("readOnly",i.readOnly())("value",i.value()),B(2),P("ngClass",i.type()==="password"?"bi-eye-slash":"bi-eye"))},dependencies:[fn,br],styles:[".item-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}input[type=password][_ngcontent-%COMP%]::-ms-reveal, input[type=password][_ngcontent-%COMP%]::-ms-clear{display:none}input[_ngcontent-%COMP%]{border:none;background-color:transparent;padding:0 20px!important}.form-group[_ngcontent-%COMP%]:focus-within{border:1px solid var(--primary-color)}.form-control[_ngcontent-%COMP%]:focus{background-color:transparent}"]})}}return e})();var Wu=e=>({active:e});function Xu(e,t){e&1&&(Me(),x(0,"svg",18),U(1,"path",19),x(2,"mask",20),U(3,"path",21)(4,"path",22),E(),U(5,"path",23),E())}function $u(e,t){e&1&&(Me(),x(0,"svg",24),U(1,"path",25)(2,"path",26),E())}function Ju(e,t){e&1&&(Me(),x(0,"svg",27),U(1,"path",28),E())}function ef(e,t){if(e&1){let n=jt();x(0,"div",13),ge("click",function(){let i=pt(n).$implicit,a=W();return dt(a.selectRole(i))}),ot(1,14),Y(2,Xu,6,0,"svg",15)(3,$u,3,0,"svg",16)(4,Ju,2,0,"svg",17),st(),x(5,"span"),I(6),E()()}if(e&2){let n=t.$implicit,r=W();P("ngClass",ga(6,Wu,r.selectedRoleName===n.roleName)),B(),P("ngSwitch",n.roleName),B(),P("ngSwitchCase","Owner"),B(),P("ngSwitchCase","Crew"),B(),P("ngSwitchCase","Crew Purser"),B(2),cn(n.roleName)}}function tf(e,t){if(e&1&&U(0,"app-field-errors",60),e&2){let n,r=W(2);P("errors",(n=r.signupForm.get("email"))==null?null:n.errors)}}function rf(e,t){if(e&1&&U(0,"app-field-errors",61),e&2){let n,r=W(2);P("errors",(n=r.signupForm.get("password"))==null?null:n.errors)("displayAll",!0)}}function nf(e,t){if(e&1&&U(0,"app-field-errors",61),e&2){let n,r=W(2);P("errors",(n=r.signupForm.get("confirmPassword"))==null?null:n.errors)("displayAll",!0)}}function af(e,t){if(e&1&&U(0,"app-error-message",60),e&2){let n,r=W(2);P("errors",(n=r.signupForm.get("TnC"))==null?null:n.errors)}}function of(e,t){e&1&&(x(0,"small"),I(1,"You must agree to the terms and conditions."),E())}function sf(e,t){e&1&&(x(0,"div",62)(1,"div",63),I(2," \xA9 2025 smartYacht All rights reserved. "),E(),x(3,"div",64),Me(),x(4,"svg",49),U(5,"path",65)(6,"path",66),E(),ur(),x(7,"a",67),I(8,"support@smartyacht.app"),E()()())}function lf(e,t){if(e&1){let n=jt();x(0,"div",29)(1,"h2"),I(2,"Create your account"),E(),x(3,"p",30),I(4,"Seamless yacht management at your fingertips"),E(),x(5,"div",31)(6,"form",32),ge("ngSubmit",function(){pt(n);let i=W();return dt(i.onSubmit())}),x(7,"div",33)(8,"label",34),I(9,"Email Address"),E(),U(10,"input",35),Y(11,tf,1,1,"app-field-errors",36),E(),x(12,"div",33),U(13,"app-password-input",37),Y(14,rf,1,2,"app-field-errors",38),E(),x(15,"div",33),U(16,"app-password-input",39),Y(17,nf,1,2,"app-field-errors",38),E(),x(18,"div",40),U(19,"input",41),x(20,"label",42),I(21,"I acknowledge that the smartYacht system will send marketing communications such as promotions and offers."),E(),Y(22,af,1,1,"app-error-message",36),E(),Y(23,of,2,0,"small",43),x(24,"button",44),I(25,"Create Account"),E()(),x(26,"div",45)(27,"span",46),I(28,"OR CONTINUE WITH"),E()(),x(29,"div",47)(30,"button",48),Me(),x(31,"svg",49),U(32,"path",50)(33,"path",51)(34,"path",52)(35,"path",53),E()(),ur(),x(36,"button",54),Me(),x(37,"svg",49),U(38,"path",55),E()(),ur(),x(39,"button",56),Me(),x(40,"svg",49),U(41,"path",57),E()()(),ur(),x(42,"div",58)(43,"p"),I(44,"Already have an account? "),x(45,"a",59),I(46,"Login"),E()()(),Y(47,sf,9,0,"div",12),E()()}if(e&2){let n,r,i,a,o,s=W();B(6),P("formGroup",s.signupForm),B(5),P("ngIf",((n=s.signupForm.get("email"))==null?null:n.invalid)&&((n=s.signupForm.get("email"))==null?null:n.touched)),B(2),P("required",!0),B(),P("ngIf",((r=s.signupForm.get("password"))==null?null:r.invalid)&&((r=s.signupForm.get("password"))==null?null:r.touched)),B(2),P("required",!0),B(),P("ngIf",((i=s.signupForm.get("confirmPassword"))==null?null:i.invalid)&&((i=s.signupForm.get("confirmPassword"))==null?null:i.touched)),B(5),P("ngIf",((a=s.signupForm.get("TnC"))==null?null:a.invalid)&&(((a=s.signupForm.get("TnC"))==null?null:a.touched)||s.submitted)),B(),P("ngIf",((o=s.signupForm.get("TnC"))==null?null:o.invalid)&&s.submitted),B(24),P("ngIf",s.selectedRoleName==="Owner")}}function cf(e,t){if(e&1&&U(0,"app-field-errors",74),e&2){let n,r=W(2);P("errors",(n=r.signupForm.get("email"))==null?null:n.errors)}}function uf(e,t){if(e&1&&U(0,"app-field-errors",75),e&2){let n,r=W(2);P("errors",(n=r.signupForm.get("password"))==null?null:n.errors)("displayAll",!0)}}function ff(e,t){if(e&1){let n=jt();x(0,"div",68)(1,"h2"),I(2,"Login"),E(),x(3,"p",30),I(4,"Seamless yacht management at your fingertips"),E(),x(5,"form",69)(6,"div",33)(7,"label",34),I(8,"Email Address"),E(),U(9,"input",70),E(),Y(10,cf,1,1,"app-field-errors",71),x(11,"div",33),U(12,"app-password-input",37),E(),Y(13,uf,1,2,"app-field-errors",72),x(14,"button",73),ge("click",function(){pt(n);let i=W();return dt(i.login())}),I(15,"Login"),E()()()}if(e&2){let n,r,i=W();B(5),P("formGroup",i.loginForm),B(5),P("ngIf",((n=i.signupForm.get("email"))==null?null:n.invalid)&&((n=i.signupForm.get("email"))==null?null:n.touched)),B(2),P("required",!0),B(),P("ngIf",((r=i.signupForm.get("password"))==null?null:r.invalid)&&((r=i.signupForm.get("password"))==null?null:r.touched))}}function pf(e,t){e&1&&(x(0,"div",62)(1,"div",63),I(2," \xA9 2025 smartYacht All rights reserved. "),E(),x(3,"div",64),Me(),x(4,"svg",49),U(5,"path",65)(6,"path",66),E(),ur(),x(7,"a",67),I(8,"support@smartyacht.app"),E()()())}function df(e,t){if(e&1&&U(0,"app-error-message",74),e&2){let n,r=W(2);P("errors",(n=r.crewSignupForm.get("fullName"))==null?null:n.errors)}}function hf(e,t){if(e&1&&U(0,"app-error-message",74),e&2){let n,r=W(2);P("errors",(n=r.crewSignupForm.get("surName"))==null?null:n.errors)}}function gf(e,t){if(e&1&&(x(0,"option",102),I(1),E()),e&2){let n=t.$implicit;P("ngValue",n.name),B(),cn(n.name)}}function mf(e,t){if(e&1&&U(0,"app-error-message",74),e&2){let n,r=W(2);P("errors",(n=r.crewSignupForm.get("group"))==null?null:n.errors)}}function vf(e,t){if(e&1&&(x(0,"option",102),I(1),E()),e&2){let n=t.$implicit;P("ngValue",n.id),B(),cn(n.name)}}function Cf(e,t){if(e&1&&U(0,"app-error-message",74),e&2){let n,r=W(2);P("errors",(n=r.crewSignupForm.get("positionId"))==null?null:n.errors)}}function yf(e,t){if(e&1&&(ot(0),U(1,"img",103),I(2),st()),e&2){let n=W(2);B(),P("src",n.selectedCountry.flagUrl,sn),B(),pr(" ",n.selectedCountry.dial_code," ")}}function xf(e,t){if(e&1&&(ot(0),U(1,"img",103),I(2),st()),e&2){let n=W(2);B(),P("src",n.selectedCountry.flagUrl,sn),B(),pr(" ",n.selectedCountry.dial_code," ")}}function _f(e,t){if(e&1){let n=jt();x(0,"li",104),ge("click",function(){let i=pt(n).$implicit,a=W(2);return dt(a.selectCountry(i))}),x(1,"a",105),U(2,"img",106),I(3),E()()}if(e&2){let n=t.$implicit;B(2),P("src",n.flagUrl,sn),B(),pa(" ",n.name," (",n.dial_code,") ")}}function Ef(e,t){if(e&1&&U(0,"app-error-message",74),e&2){let n,r=W(2);P("errors",(n=r.crewSignupForm.get("phoneNumber"))==null?null:n.errors)}}function Sf(e,t){if(e&1&&U(0,"app-error-message",74),e&2){let n,r=W(2);P("errors",(n=r.crewSignupForm.get("email"))==null?null:n.errors)}}function bf(e,t){e&1&&(ot(0),Me(),x(1,"svg",107),U(2,"path",108)(3,"path",109)(4,"path",110),E(),st())}function Tf(e,t){e&1&&(ot(0),Me(),x(1,"svg",107),U(2,"path",111)(3,"circle",112),E(),st())}function wf(e,t){if(e&1&&U(0,"app-error-message",74),e&2){let n,r=W(2);P("errors",(n=r.crewSignupForm.get("password"))==null?null:n.errors)}}function If(e,t){e&1&&(ot(0),Me(),x(1,"svg",107),U(2,"path",108)(3,"path",109)(4,"path",110),E(),st())}function Af(e,t){e&1&&(ot(0),Me(),x(1,"svg",107),U(2,"path",111)(3,"circle",112),E(),st())}function Pf(e,t){if(e&1&&U(0,"app-error-message",74),e&2){let n,r=W(2);P("errors",(n=r.crewSignupForm.get("confirmPassword"))==null?null:n.errors)}}function Bf(e,t){e&1&&(x(0,"div",113),I(1," Passwords do not match "),E())}function Of(e,t){if(e&1&&U(0,"app-error-message",74),e&2){let n,r=W(2);P("errors",(n=r.crewSignupForm.get("TnC"))==null?null:n.errors)}}function Mf(e,t){e&1&&(x(0,"small"),I(1,"You must agree to the terms and conditions."),E())}function Lf(e,t){e&1&&(x(0,"div",62)(1,"div",63),I(2," \xA9 2025 smartYacht All rights reserved. "),E(),x(3,"div",64),Me(),x(4,"svg",49),U(5,"path",65)(6,"path",66),E(),ur(),x(7,"a",67),I(8,"support@smartyacht.app"),E()()())}function Nf(e,t){if(e&1){let n=jt();x(0,"div",29)(1,"h2"),I(2,"Create your account"),E(),x(3,"p",30),I(4,"Create your account as a crew"),E(),x(5,"div",31)(6,"form",32),ge("ngSubmit",function(){pt(n);let i=W();return dt(i.onSubmitCrew())}),x(7,"div",76)(8,"div",77)(9,"div",33)(10,"label",34),I(11,"Name"),x(12,"span",78),I(13,"*"),E()(),U(14,"input",79),Y(15,df,1,1,"app-error-message",71),E()(),x(16,"div",77)(17,"div",33)(18,"label",34),I(19,"Surname"),x(20,"span",78),I(21,"*"),E()(),U(22,"input",80),Y(23,hf,1,1,"app-error-message",71),E()()(),x(24,"div",33)(25,"label",81),I(26,"Group"),x(27,"span",78),I(28,"*"),E()(),x(29,"select",82),ge("ngModelChange",function(i){pt(n);let a=W();return dt(a.onGroupChange(i))}),x(30,"option",83),I(31,"Select Group"),E(),Y(32,gf,2,2,"option",84),E(),Y(33,mf,1,1,"app-error-message",71),E(),x(34,"div",33)(35,"label",85),I(36," Primary Position "),x(37,"span",78),I(38,"*"),E()(),x(39,"select",86)(40,"option",83),I(41,"Select Primary Position"),E(),Y(42,vf,2,2,"option",84),E(),Y(43,Cf,1,1,"app-error-message",71),E(),x(44,"div",87)(45,"div",88)(46,"button",89),Y(47,yf,3,2,"ng-container",43)(48,xf,3,2,"ng-container",43),E(),x(49,"ul",90),Y(50,_f,4,3,"li",91),E()(),x(51,"div",33)(52,"label",92),I(53,"Phone "),x(54,"span",78),I(55,"*"),E()(),U(56,"input",93),Y(57,Ef,1,1,"app-error-message",71),E()(),x(58,"div",33)(59,"label",34),I(60,"Email Address "),x(61,"span",78),I(62,"*"),E()(),U(63,"input",35),Y(64,Sf,1,1,"app-error-message",71),E(),x(65,"div",94)(66,"label",95),I(67,"Create Password "),x(68,"span",78),I(69,"*"),E()(),x(70,"div",96),U(71,"input",97),x(72,"span",98),ge("click",function(){pt(n);let i=W();return dt(i.togglePasswordVisibility())}),Y(73,bf,5,0,"ng-container",43)(74,Tf,4,0,"ng-container",43),E()(),Y(75,wf,1,1,"app-error-message",71),E(),x(76,"div",94)(77,"label",99),I(78,"Confirm Password"),E(),x(79,"div",96),U(80,"input",100),x(81,"span",98),ge("click",function(){pt(n);let i=W();return dt(i.toggleConfirmPasswordVisibility())}),Y(82,If,5,0,"ng-container",43)(83,Af,4,0,"ng-container",43),E()(),Y(84,Pf,1,1,"app-error-message",71)(85,Bf,2,0,"div",101),E(),x(86,"div",40),U(87,"input",41),x(88,"label",42),I(89,"I acknowledge that the smartYacht system will send marketing communications such as promotions and offers."),E(),Y(90,Of,1,1,"app-error-message",71),E(),Y(91,Mf,2,0,"small",43),x(92,"button",44),I(93,"Create Account"),E()(),x(94,"div",58)(95,"p"),I(96,"Already have an account? "),x(97,"a",59),I(98,"Login"),E()()(),Y(99,Lf,9,0,"div",12),E()()}if(e&2){let n,r,i,a,o,s,c,l,u,f,g=W();B(6),P("formGroup",g.crewSignupForm),B(9),P("ngIf",((n=g.crewSignupForm.get("fullName"))==null?null:n.invalid)&&((n=g.crewSignupForm.get("fullName"))==null?null:n.touched)),B(8),P("ngIf",((r=g.crewSignupForm.get("surName"))==null?null:r.invalid)&&((r=g.crewSignupForm.get("surName"))==null?null:r.touched)),B(9),P("ngForOf",g.groups),B(),P("ngIf",((i=g.crewSignupForm.get("group"))==null?null:i.invalid)&&((i=g.crewSignupForm.get("group"))==null?null:i.touched)),B(9),P("ngForOf",g.positions),B(),P("ngIf",((a=g.crewSignupForm.get("positionId"))==null?null:a.invalid)&&((a=g.crewSignupForm.get("positionId"))==null?null:a.touched)),B(4),P("ngIf",g.selectedCountry),B(),P("ngIf",!g.selectedCountry),B(2),P("ngForOf",g.countryCodes),B(7),P("ngIf",((o=g.crewSignupForm.get("phoneNumber"))==null?null:o.invalid)&&((o=g.crewSignupForm.get("phoneNumber"))==null?null:o.touched)),B(7),P("ngIf",((s=g.crewSignupForm.get("email"))==null?null:s.invalid)&&((s=g.crewSignupForm.get("email"))==null?null:s.touched)),B(7),P("type",g.showPassword?"text":"password"),B(2),P("ngIf",!g.showPassword),B(),P("ngIf",g.showPassword),B(),P("ngIf",((c=g.crewSignupForm.get("password"))==null?null:c.invalid)&&((c=g.crewSignupForm.get("password"))==null?null:c.touched)),B(5),P("type",g.showConfirmPassword?"text":"password"),B(2),P("ngIf",!g.showConfirmPassword),B(),P("ngIf",g.showConfirmPassword),B(),P("ngIf",((l=g.crewSignupForm.get("confirmPassword"))==null?null:l.invalid)&&((l=g.crewSignupForm.get("confirmPassword"))==null?null:l.touched)),B(),P("ngIf",(g.crewSignupForm.errors==null?null:g.crewSignupForm.errors.mismatch)&&g.crewSignupForm.touched),B(5),P("ngIf",((u=g.crewSignupForm.get("TnC"))==null?null:u.invalid)&&(((u=g.crewSignupForm.get("TnC"))==null?null:u.touched)||g.submitted)),B(),P("ngIf",((f=g.crewSignupForm.get("TnC"))==null?null:f.invalid)&&g.submitted),B(8),P("ngIf",g.selectedRoleName==="Crew")}}var Ws=(()=>{class e{constructor(n,r,i,a,o,s,c,l){this.fb=n,this.accountService=r,this.router=i,this._snackbar=a,this._authService=o,this._storage=s,this._currentYacht=c,this._user=l,this.submitted=!1,this.passwordMatch=!0,this.passwordMatchCrew=!0,this.isLoading=!1,this.countryCodes=ti,this.selectedCountry=ti[100],this.showPassword=!1,this.showConfirmPassword=!1,this.subscriptions=new nn,this.groups=[],this.positions=[],this.userRolesData=[],this.selectedRoleName="Owner",this.username="",this.password="",this.hidePassword=!0}ngOnInit(){this.getAllRoles(),this.getGroupAndPositionData(),this.loginForm=this.fb.group({email:["",[ee.required,ee.email]],password:["",ee.required]}),this.signupForm=this.fb.group({email:["",[ee.required,ee.email]],confirmPassword:["",[ee.required]],TnC:[!1,[ee.requiredTrue]],password:["",[ee.required,ee.minLength(8),this.passwordValidator.bind(this)]]}),this.crewSignupForm=this.fb.group({fullName:["",[ee.required]],surName:["",[ee.required]],positionId:["",[ee.required]],group:["",[ee.required]],phoneNumber:["",[ee.required]],email:["",[ee.required]],password:["",[ee.required,ee.minLength(8),this.passwordValidator.bind(this)]],confirmPassword:["",[ee.required]],TnC:[!1,[ee.requiredTrue]]},{validators:this.passwordMatchValidator})}getAllRoles(){this._authService.getAllRoles().subscribe({next:n=>{if(n){this.userRolesData=n.response;let r=this.userRolesData.find(i=>i.roleName==="Owner");r&&this.selectRole(r)}},error:n=>{},complete:()=>{}})}getGroupAndPositionData(){this._authService.getAllGroupAndPosition().subscribe({next:n=>{n&&(this.groupData=n.response,this.groups=Object.keys(this.groupData).map((r,i)=>({id:i+1,name:r})))},error:n=>{}})}onGroupChange(n){let r=n,i=this.groupData[r]||[];this.positions=i.map(a=>({id:a.id,name:a.position})),this.crewSignupForm.get("positionId")?.setValue("")}checkPasswordMatch(){let n=this.signupForm.get("password")?.value,r=this.signupForm.get("confirmPassword")?.value;this.passwordMatch=n===r}checkPasswordMatchCrew(){let n=this.crewSignupForm.get("password")?.value,r=this.crewSignupForm.get("confirmPassword")?.value;this.passwordMatchCrew=n===r}onSubmit(){if(this.submitted=!0,this.signupForm.valid){if(this.signupForm.value.password!==this.signupForm.value.confirmPassword){this.signupForm.get("confirmPassword")?.setErrors({other:"Passwords must match"}),this.passwordMatch=!1;return}let n=this.signupForm.value;delete n.TnC,n.roleId=this.selectedRoleId,this.accountService.signup(n).subscribe({next:r=>{if(r.isError===!1)this.router.navigate(["auth/login"]),this._snackbar.success("Signup Successfully");else{let i=r.errors.map(a=>`\u2022 ${a.errorMessage}`).join(`
`);this._snackbar.error(`Signup failed:
${i}`)}},error:r=>{console.error("Signup failed",r)}})}else this.signupForm.markAllAsTouched()}onSubmitCrew(){if(this.submitted=!0,this.crewSignupForm.valid){if(this.crewSignupForm.value.password!==this.crewSignupForm.value.confirmPassword){this.passwordMatchCrew=!1;return}let n=this.crewSignupForm.value;delete n.TnC,n.roleId=this.selectedRoleId,this.accountService.signup(n).subscribe({next:r=>{if(r.isError===!1)this.router.navigate(["auth/login"]),this._snackbar.success("Signup Successfully");else{let i=r.errors.map(a=>`\u2022 ${a.errorMessage}`).join(`
`);this._snackbar.error(`Signup failed:
${i}`)}},error:r=>{console.error("Signup failed",r)}})}else this.crewSignupForm.markAllAsTouched()}getControl(n){return this.signupForm.get(n)}getTnCError(){return this.signupForm.get("TnC")?.errors?.requiredTrue?"You must accept the Terms and Conditions":""}getErrorMessages(){return{TnC:{requiredTrue:"You must accept the Terms and Conditions to proceed"}}}passwordValidator(n){let r=n.value;if(!r)return null;let i={};return/[^a-zA-Z0-9]/.test(r)||(i.nonAlphanumeric="Must contain at least one non-alphanumeric character"),/[a-z]/.test(r)||(i.lowercase="Must contain at least one lowercase letter (a-z)"),/[A-Z]/.test(r)||(i.uppercase="Must contain at least one uppercase letter (A-Z)"),Object.keys(i).length?i:null}passwordMatchValidator(n){let r=n.get("password")?.value,i=n.get("confirmPassword")?.value;return!r||!i||r===i?null:{mismatch:!0}}togglePasswordVisibility(){this.hidePassword=!this.hidePassword,this.showPassword=!this.showPassword}toggleConfirmPasswordVisibility(){this.showConfirmPassword=!this.showConfirmPassword}selectRole(n){this.selectedRoleId=n.roleId,this.selectedRoleName=n.roleName}selectCountry(n){n&&(this.selectedCountry=n)}login(){this._storage.clearAllData();let n=this.loginForm.get("email");n&&(this.username=n.value);let r=this.loginForm.get("password");r&&(this.password=r.value),!(!this.username||!this.password)&&this._authService.login(this.username,this.password).subscribe({next:i=>{i.response.role==="Crew"&&i.response.position==="Purser"?(this._currentYacht.clearYachtId(),this.fetchUservessels(i.response.id)):this._snackbar.error("Invalid username or password.")},error:i=>{this._snackbar.error("Invalid username or password.")}})}fetchUservessels(n){let r=this._user.getOwnerDetailsById(n).subscribe(i=>{let a=i;localStorage.setItem("role","Owner"),localStorage.setItem("Position","Purser"),localStorage.setItem("userId",JSON.stringify(a.userId));let o=this._user.getYachtsByUserId(a.userId).subscribe({next:s=>{if(this.yachts=s,this.yachts.length>0){let c=this.yachts[0];localStorage.setItem("defaultYacht",c.id),localStorage.setItem("defaultYachtName",c.vesselName),this.setDefaultYacht(c.id)}this.isLoading=!1,this.router.navigate(["/owner/scheduler/my-applicants"])},error:s=>{console.error("Error fetching yacht data (from onView)",s),this.isLoading=!1,this.router.navigate(["/owner/scheduler/my-applicants"])}});this.subscriptions.add(o)});this.subscriptions.add(r)}setDefaultYacht(n){this._currentYacht.setYachtId(n),localStorage.setItem("defaultYacht",n),this._storage.setDefaultYacht(n),this._currentYacht.currentYachtId$.subscribe(r=>{})}ngOnDestroy(){this.subscriptions&&this.subscriptions.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)(pe(Ot),pe(Pa),pe(Zt),pe(Wt),pe(Xt),pe(dn),pe(gn),pe(hn))}}static{this.\u0275cmp=ft({type:e,selectors:[["app-signup"]],decls:20,vars:5,consts:[[1,"container-signup"],[1,"left-section-signup"],["routerLink","/",1,"back-button-signup"],[1,"bi","bi-arrow-left-circle"],[1,"welcome-content-signup"],["_ngcontent-ng-c2850015536","",1,"display-5"],[1,"role-cards"],["class","role-card",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"copyright-signup"],[1,"right-section-signup"],["class","signup-form",4,"ngIf"],["class","signup-form purser-login",4,"ngIf"],["class","bottom-info",4,"ngIf"],[1,"role-card",3,"click","ngClass"],[3,"ngSwitch"],["xmlns","http://www.w3.org/2000/svg","width","43","height","39","viewBox","0 0 43 39","fill","none",4,"ngSwitchCase"],["xmlns","http://www.w3.org/2000/svg","width","42","height","42","viewBox","0 0 42 42","fill","none",4,"ngSwitchCase"],["xmlns","http://www.w3.org/2000/svg","width","38","height","38","viewBox","0 0 38 38","fill","none",4,"ngSwitchCase"],["xmlns","http://www.w3.org/2000/svg","width","43","height","39","viewBox","0 0 43 39","fill","none"],["d","M30.7083 37.3337L30.375 34.667C30.1944 34.5975 30.0244 34.5142 29.865 34.417C29.7056 34.3198 29.5492 34.2156 29.3958 34.1045L26.9167 35.1462L24.625 31.1878L26.7708 29.5628C26.7569 29.4656 26.75 29.372 26.75 29.282V28.7195C26.75 28.6289 26.7569 28.535 26.7708 28.4378L24.625 26.8128L26.9167 22.8545L29.3958 23.8962C29.5486 23.785 29.7083 23.6809 29.875 23.5837C30.0417 23.4864 30.2083 23.4031 30.375 23.3337L30.7083 20.667H35.2917L35.625 23.3337C35.8056 23.4031 35.9758 23.4864 36.1358 23.5837C36.2958 23.6809 36.4519 23.785 36.6042 23.8962L39.0833 22.8545L41.375 26.8128L39.2292 28.4378C39.2431 28.535 39.25 28.6289 39.25 28.7195V29.2812C39.25 29.3717 39.2361 29.4656 39.2083 29.5628L41.3542 31.1878L39.0625 35.1462L36.6042 34.1045C36.4514 34.2156 36.2917 34.3198 36.125 34.417C35.9583 34.5142 35.7917 34.5975 35.625 34.667L35.2917 37.3337H30.7083ZM33.0417 31.917C33.8472 31.917 34.5347 31.6323 35.1042 31.0628C35.6736 30.4934 35.9583 29.8059 35.9583 29.0003C35.9583 28.1948 35.6736 27.5073 35.1042 26.9378C34.5347 26.3684 33.8472 26.0837 33.0417 26.0837C32.2222 26.0837 31.5311 26.3684 30.9683 26.9378C30.4056 27.5073 30.1244 28.1948 30.125 29.0003C30.1256 29.8059 30.4069 30.4934 30.9692 31.0628C31.5314 31.6323 32.2222 31.917 33.0417 31.917Z","fill","#5D87FF"],["id","path-2-inside-1_1763_2080","fill","white"],["d","M24.1223 18.2546C24.1223 20.7006 23.355 25.062 20.5317 27.2813L19.3758 29.3981C18.6652 29.01 18.1946 28.2891 18.127 27.4826C18.0595 26.6762 18.4033 25.8878 19.0404 25.3863C21.1229 23.7492 21.7092 20.1436 21.7092 18.2558V13.1651C21.7092 11.393 18.6229 8.45165 15.1372 8.45165C11.7155 8.45165 8.44818 11.4328 8.44818 13.1651V18.2558C8.44818 20.1714 9.31569 23.7601 11.3391 25.3815C11.9689 25.8866 12.3055 26.6737 12.2331 27.4778C12.1607 28.2819 11.6902 28.9955 10.9795 29.3813L3.18647 33.6041C3.13217 33.6354 3.07547 33.6631 3.01876 33.6885C2.82813 33.7753 2.58561 33.9211 2.41308 34.0477V36.2031H26V38.5L2.03664 38.6117C0.91335 38.6117 0 37.7003 0 36.5756V33.5209C0 32.3914 2.03664 31.4848 2.03664 31.4848L9.82846 27.262C6.97621 24.9764 6.03511 20.4788 6.03511 18.2546V13.1639C6.03511 9.79335 10.6368 6.03947 15.1372 6.03947C19.64 6.03947 24.1223 9.79335 24.1223 13.1639V18.2546Z"],["d","M32.5669 7.16178V12.2525C32.5669 14.116 32.0556 17.0914 30.5636 19.3842L28.4193 18.2558C29.6959 16.4319 30.1538 13.7808 30.1538 12.2537V7.16299C30.1538 5.38972 26.9553 2.41217 23.4696 2.41217C21.7237 2.41217 20.1166 2.99924 18.8449 3.98895C17.899 3.68758 16.8047 3.68637 15.8117 3.62489C17.5527 1.59003 20.5437 0 23.4696 0C27.9724 0 32.5669 3.79125 32.5669 7.16178Z"],["d","M20.5317 27.2813L18.9197 25.2306L18.4989 25.5614L18.2423 26.0312L20.5317 27.2813ZM9.82846 27.262L11.0713 29.5553L14.5255 27.6833L11.4596 25.2265L9.82846 27.262ZM2.03664 31.4848L3.09733 33.8678L3.19015 33.8265L3.27949 33.7781L2.03664 31.4848ZM2.03664 38.6117V41.2201L2.04879 41.22L2.03664 38.6117ZM2.41308 36.2031H-0.195326V38.8115H2.41308V36.2031ZM2.41308 34.0477L0.870167 31.9445L-0.195326 32.7262V34.0477H2.41308ZM3.01876 33.6885L1.95549 31.3066L1.94668 31.3105L1.9379 31.3145L3.01876 33.6885ZM3.18647 33.6041L1.94377 31.3107L1.91287 31.3275L1.88243 31.345L3.18647 33.6041ZM10.9795 29.3813L12.2222 31.6746L12.2239 31.6737L10.9795 29.3813ZM11.3391 25.3815L12.971 23.3466L12.9702 23.346L11.3391 25.3815ZM19.0404 25.3863L17.4284 23.3356L17.427 23.3367L19.0404 25.3863ZM19.3758 29.3981L18.1254 31.6873L20.4149 32.9379L21.6651 30.6482L19.3758 29.3981ZM15.8117 3.62489L13.8297 1.92912L10.428 5.90496L15.6505 6.22831L15.8117 3.62489ZM18.8449 3.98895L18.0531 6.47426L19.3625 6.89142L20.4469 6.04742L18.8449 3.98895ZM26 36.2031H28.6084V33.5947H26V36.2031ZM26 38.5L26.0122 41.1084L28.6084 41.0963V38.5H26ZM28.4193 18.2558L26.2823 16.7601L24.5846 19.1856L27.2046 20.5642L28.4193 18.2558ZM30.5636 19.3842L29.349 21.6925L31.4531 22.7997L32.7499 20.8069L30.5636 19.3842ZM22.1436 29.332C24.1074 27.7884 25.2306 25.6126 25.866 23.6603C26.5073 21.6904 26.7307 19.7116 26.7307 18.2546H21.5139C21.5139 19.2436 21.3537 20.6685 20.9054 22.0456C20.4514 23.4404 19.7792 24.555 18.9197 25.2306L22.1436 29.332ZM26.7307 18.2546V13.1639H21.5139V18.2546H26.7307ZM26.7307 13.1639C26.7307 10.3758 24.9579 7.92452 22.9574 6.3086C20.8903 4.6389 18.0808 3.43107 15.1372 3.43107V8.64788C16.6964 8.64788 18.3796 9.31699 19.6793 10.3669C21.0456 11.4705 21.5139 12.5814 21.5139 13.1639H26.7307ZM15.1372 3.43107C12.1998 3.43107 9.36763 4.63503 7.27679 6.29476C5.25923 7.89632 3.4267 10.3494 3.4267 13.1639H8.64351C8.64351 12.6078 9.11185 11.4987 10.5203 10.3807C11.8554 9.32086 13.5743 8.64788 15.1372 8.64788V3.43107ZM3.4267 13.1639V18.2546H8.64351V13.1639H3.4267ZM3.4267 18.2546C3.4267 19.6681 3.71417 21.64 4.40066 23.5982C5.0824 25.5429 6.25056 27.7375 8.19736 29.2975L11.4596 25.2265C10.5541 24.5009 9.82559 23.3039 9.32371 21.8723C8.82659 20.4543 8.64351 19.0653 8.64351 18.2546H3.4267ZM8.58562 24.9687L0.793789 29.1916L3.27949 33.7781L11.0713 29.5553L8.58562 24.9687ZM2.03664 31.4848C0.975947 29.1018 0.975399 29.1021 0.974844 29.1023C0.974649 29.1024 0.974084 29.1027 0.973692 29.1028C0.972907 29.1032 0.972089 29.1035 0.971238 29.1039C0.969536 29.1047 0.967702 29.1055 0.965737 29.1064C0.961809 29.1082 0.957358 29.1102 0.952401 29.1124C0.942491 29.1169 0.93054 29.1224 0.916684 29.1288C0.889 29.1417 0.853538 29.1584 0.811389 29.1788C0.727423 29.2195 0.61506 29.2759 0.483408 29.3466C0.226175 29.4849 -0.133685 29.6937 -0.50914 29.9649C-0.870234 30.2258 -1.33699 30.6092 -1.73544 31.1181C-2.12548 31.6162 -2.6084 32.4401 -2.6084 33.5209H2.6084C2.6084 34.037 2.38006 34.324 2.37189 34.3344C2.35531 34.3556 2.39771 34.3006 2.54578 34.1937C2.67948 34.0971 2.82878 34.0086 2.95342 33.9416C3.0127 33.9098 3.05945 33.8865 3.08686 33.8732C3.1004 33.8666 3.1087 33.8628 3.11085 33.8618C3.11191 33.8613 3.11139 33.8615 3.10919 33.8625C3.10809 33.863 3.10656 33.8637 3.10458 33.8646C3.1036 33.865 3.1025 33.8655 3.10129 33.8661C3.10069 33.8663 3.10006 33.8666 3.0994 33.8669C3.09907 33.8671 3.09855 33.8673 3.09838 33.8674C3.09786 33.8676 3.09733 33.8678 2.03664 31.4848ZM-2.6084 33.5209V36.5756H2.6084V33.5209H-2.6084ZM-2.6084 36.5756C-2.6084 39.143 -0.525083 41.2201 2.03664 41.2201V36.0033C2.35178 36.0033 2.6084 36.2576 2.6084 36.5756H-2.6084ZM5.02148 36.2031V34.0477H-0.195326V36.2031H5.02148ZM3.95599 36.1508C3.95804 36.1493 3.96808 36.1421 3.98581 36.1305C4.00306 36.1191 4.02295 36.1066 4.0437 36.0943C4.06457 36.0819 4.08236 36.0719 4.09533 36.065C4.10926 36.0576 4.11068 36.0573 4.09962 36.0624L1.9379 31.3145C1.56286 31.4853 1.16663 31.7271 0.870167 31.9445L3.95599 36.1508ZM4.08203 36.0703C4.19236 36.0211 4.33497 35.9529 4.49051 35.8631L1.88243 31.345C1.92938 31.3179 1.95857 31.3052 1.95549 31.3066L4.08203 36.0703ZM4.42917 35.8974L12.2222 31.6746L9.73681 27.0879L1.94377 31.3107L4.42917 35.8974ZM12.2239 31.6737C13.6986 30.8732 14.68 29.3887 14.831 27.7117L9.6352 27.2439C9.6414 27.175 9.68167 27.1178 9.73512 27.0888L12.2239 31.6737ZM14.831 27.7117C14.982 26.0339 14.2798 24.3963 12.971 23.3466L9.70714 27.4163C9.65792 27.3768 9.62893 27.3135 9.6352 27.2439L14.831 27.7117ZM12.9702 23.346C12.501 22.97 11.9903 22.1891 11.5962 21.0656C11.2137 19.9751 11.0566 18.8907 11.0566 18.2558H5.83978C5.83978 19.5365 6.11641 21.2042 6.67349 22.7924C7.21896 24.3474 8.15371 26.1715 9.70795 27.417L12.9702 23.346ZM11.0566 18.2558V13.1651H5.83978V18.2558H11.0566ZM11.0566 13.1651C11.0566 13.4834 10.9422 13.4945 11.1613 13.176C11.3435 12.9111 11.6594 12.5667 12.1046 12.2226C13.0228 11.513 14.1493 11.0601 15.1372 11.0601V5.84324C12.7035 5.84324 10.4854 6.88083 8.91452 8.09488C8.11518 8.71264 7.40037 9.43839 6.86303 10.2196C6.36254 10.9473 5.83978 11.9806 5.83978 13.1651H11.0566ZM15.1372 11.0601C16.1657 11.0601 17.2543 11.5097 18.1102 12.1881C18.5284 12.5195 18.8216 12.8523 18.9905 13.1101C19.187 13.4102 19.1008 13.4251 19.1008 13.1651H24.3177C24.3177 12.0191 23.8457 11.0018 23.3546 10.2519C22.8359 9.45983 22.1397 8.72506 21.3505 8.09963C19.7919 6.86432 17.5944 5.84324 15.1372 5.84324V11.0601ZM19.1008 13.1651V18.2558H24.3177V13.1651H19.1008ZM19.1008 18.2558C19.1008 18.9758 18.9832 20.0909 18.6596 21.1582C18.3224 22.2703 17.8655 22.992 17.4284 23.3356L20.6524 27.4369C22.2977 26.1436 23.1753 24.2439 23.6519 22.672C24.1421 21.0553 24.3177 19.4237 24.3177 18.2558H19.1008ZM17.427 23.3367C16.1038 24.3783 15.3867 26.0172 15.5277 27.7004L20.7263 27.2649C20.7322 27.3351 20.7028 27.3972 20.6538 27.4359L17.427 23.3367ZM15.5277 27.7004C15.6687 29.3827 16.648 30.8803 18.1254 31.6873L20.6262 27.109C20.6823 27.1396 20.7205 27.1955 20.7263 27.2649L15.5277 27.7004ZM35.1753 12.2525V7.16178H29.9585V12.2525H35.1753ZM35.1753 7.16178C35.1753 4.35295 33.3508 1.89172 31.3362 0.280089C29.2488 -1.38975 26.4154 -2.6084 23.4696 -2.6084V2.6084C25.0266 2.6084 26.7418 3.28538 28.0774 4.35379C29.4857 5.48042 29.9585 6.60007 29.9585 7.16178H35.1753ZM23.4696 -2.6084C19.6925 -2.6084 16.0054 -0.613733 13.8297 1.92912L17.7936 5.32066C19.1 3.7938 21.395 2.6084 23.4696 2.6084V-2.6084ZM15.6505 6.22831C16.8998 6.30566 17.5084 6.30071 18.0531 6.47426L19.6367 1.50363C18.2896 1.07444 16.7095 1.06708 15.9729 1.02147L15.6505 6.22831ZM20.4469 6.04742C21.271 5.40611 22.317 5.02058 23.4696 5.02058V-0.19623C21.1305 -0.19623 18.9623 0.592378 17.2429 1.93047L20.4469 6.04742ZM23.4696 5.02058C24.4959 5.02058 25.6173 5.47763 26.512 6.17734C26.9478 6.51815 27.2554 6.8602 27.433 7.12509C27.6419 7.43668 27.5454 7.44442 27.5454 7.16299H32.7622C32.7622 5.99492 32.2659 4.96549 31.7661 4.22006C31.2351 3.42793 30.5252 2.69311 29.7256 2.06787C28.1497 0.835492 25.9289 -0.19623 23.4696 -0.19623V5.02058ZM27.5454 7.16299V12.2537H32.7622V7.16299H27.5454ZM18.2423 26.0312L17.0865 28.1481L21.6651 30.6482L22.821 28.5314L18.2423 26.0312ZM26 33.5947H2.41308V38.8115H26V33.5947ZM23.3916 36.2031V38.5H28.6084V36.2031H23.3916ZM25.9878 35.8916L2.02448 36.0033L2.04879 41.22L26.0122 41.1084L25.9878 35.8916ZM27.5454 12.2537C27.5454 13.4731 27.1434 15.5299 26.2823 16.7601L30.5562 19.7516C32.2484 17.334 32.7622 14.0886 32.7622 12.2537H27.5454ZM32.7499 20.8069C34.599 17.9653 35.1753 14.4472 35.1753 12.2525H29.9585C29.9585 13.7849 29.5123 16.2174 28.3774 17.9615L32.7499 20.8069ZM27.2046 20.5642L29.349 21.6925L31.7782 17.0758L29.6339 15.9475L27.2046 20.5642Z","fill","#5D87FF","mask","url(#path-2-inside-1_1763_2080)"],["xmlns","http://www.w3.org/2000/svg","width","42","height","42","viewBox","0 0 42 42","fill","none"],["d","M22.6504 4.87402C23.423 6.74252 24.6057 10.056 25.0088 13.6758C25.4453 17.5959 24.9726 21.9171 22.0303 25.1338V25.7549H31.0293L31.0391 25.7559C32.3451 25.8756 33.6461 25.4596 34.665 24.5947L34.8516 24.4287C35.7643 23.5739 36.3505 22.3978 36.4932 21.1182L36.4941 21.1123L36.5254 20.8594C37.0783 15.6183 32.5163 8.45511 22.6504 4.87402ZM20.583 9.65234C16.7881 19.2712 11.5859 23.7589 8.29883 25.7549H20.583V9.65234ZM22.0303 22.6885C23.5411 20.2137 23.8373 17.1828 23.5693 14.2656C23.3346 11.7113 22.6672 9.26633 22.0303 7.39941V22.6885ZM22.0303 3.11133C33.4165 6.80799 38.7775 15.1498 37.9268 21.3213L37.9277 21.3223C37.7264 23.0433 36.8962 24.6196 35.6074 25.7236C34.3988 26.7589 32.8737 27.3045 31.3135 27.2637L31.001 27.248H22.0303V28.8125L40.9189 27.5674C41.0626 27.5546 41.2062 27.5881 41.3301 27.6621C41.4562 27.7375 41.5549 27.851 41.6143 27.9854H41.6133C41.659 28.0803 41.6849 28.1833 41.6885 28.2881L41.6846 28.3965C41.669 28.5401 41.6123 28.6759 41.5215 28.7881L41.5225 28.7891L35.7783 35.9434L35.7715 35.9512C35.6778 36.0572 35.5562 36.1332 35.4219 36.1699L35.2832 36.1934C35.0946 36.2061 34.91 36.1426 34.7676 36.0186C34.6611 35.9257 34.5842 35.8047 34.5439 35.6709L34.5166 35.5332C34.4962 35.3458 34.5453 35.1562 34.6562 35.0039L34.6621 34.9951L34.8408 35.1387L34.6631 34.9951L39.3438 29.1602L10.0938 31.0898V35.4805C10.0865 35.6211 10.0407 35.7565 9.96191 35.8711L9.87207 35.9785C9.73827 36.1105 9.55919 36.1855 9.37109 36.1855C9.22979 36.1855 9.09333 36.1435 8.97754 36.0664L8.86914 35.9785C8.73562 35.8466 8.65708 35.668 8.64746 35.4805V30.3965L8.66016 30.2578C8.68521 30.1219 8.74742 29.9944 8.84082 29.8906L8.94238 29.7969C9.05233 29.7136 9.18452 29.6628 9.32422 29.6533L20.583 28.9121V27.2471H4.98926V27.2461C4.80995 27.2492 4.63688 27.1848 4.50293 27.0654C4.40163 26.9752 4.3282 26.8587 4.28809 26.7305L4.25879 26.5986C4.23611 26.4189 4.27827 26.2352 4.37793 26.084L4.46191 25.9785C4.55473 25.8819 4.67309 25.8125 4.80469 25.7793L4.92188 25.7412C4.99925 25.7148 5.11411 25.6742 5.2627 25.6152C5.55667 25.4985 5.97975 25.3132 6.50293 25.0381C7.54954 24.4878 8.99678 23.5766 10.6113 22.1338C13.8389 19.2494 17.7436 14.2302 20.4541 5.68555L20.4561 5.68164L20.4912 5.59473C20.516 5.54368 20.547 5.49596 20.583 5.45215V1.48535L20.8115 1.49707L20.584 1.48535C20.5935 1.29789 20.6713 1.11923 20.8047 0.987305L20.9131 0.898438C21.0288 0.821441 21.1654 0.779303 21.3066 0.779297C21.4949 0.779297 21.6747 0.855074 21.8086 0.987305L21.8975 1.09375C21.9765 1.20852 22.0221 1.34444 22.0293 1.48535L22.0303 1.49707V3.11133Z","fill","#5D87FF","stroke","#5D87FF","stroke-width","0.456471"],["d","M6.74951 36.3486L6.84424 36.3604C6.86974 36.3653 6.89457 36.3732 6.91943 36.3809C6.92992 36.3829 6.9403 36.3852 6.95068 36.3877H6.99658L7.04834 36.417C7.08788 36.439 7.12452 36.4655 7.15869 36.4951L7.23584 36.5537L7.24658 36.5625L7.25635 36.5742L7.31104 36.6445C7.32658 36.6673 7.34019 36.6913 7.35303 36.7158H7.354L7.34912 36.708C7.35133 36.7109 7.35162 36.7105 7.35498 36.7148L7.40088 36.79L7.40283 36.7949L7.54932 37.1113C7.9152 37.8352 8.44472 38.4566 9.09229 38.9219L9.37549 39.1113C10.0453 39.5244 10.8016 39.7628 11.5806 39.8076C12.4773 39.7531 13.3434 39.4449 14.0854 38.9141L14.3579 38.7051C14.9755 38.195 15.4696 37.5368 15.7954 36.7832L15.8003 36.7705L15.8071 36.7588C15.8233 36.7309 15.8431 36.7052 15.8628 36.6797C15.9141 36.585 15.9909 36.5072 16.0864 36.4561C16.1061 36.4413 16.1258 36.4266 16.147 36.4141L16.1616 36.4053L16.1763 36.3984C16.2489 36.3688 16.3265 36.354 16.4048 36.3506V36.3486C16.4252 36.3472 16.4458 36.3472 16.4663 36.3486L16.4653 36.3496C16.5155 36.3527 16.5645 36.3633 16.6128 36.377L16.6138 36.376C16.6306 36.3788 16.647 36.3837 16.6636 36.3877H16.7095L16.7622 36.417L16.8276 36.46C16.8436 36.4718 16.8577 36.4858 16.8726 36.499L16.9497 36.5527L16.9624 36.5645L16.9741 36.5781C17.0098 36.6204 17.0401 36.6668 17.0659 36.7158H17.0669L17.062 36.708C17.0641 36.7108 17.0636 36.7105 17.0669 36.7148L17.1138 36.79L17.1157 36.7949L17.2622 37.1113C17.6279 37.8354 18.1567 38.4574 18.8042 38.9229L19.0874 39.1113C19.7575 39.5249 20.514 39.7637 21.2935 39.8086C22.1901 39.754 23.0564 39.4468 23.7983 38.916L24.0708 38.707C24.6885 38.1969 25.1815 37.5378 25.5073 36.7842L25.5112 36.7754L25.5161 36.7666C25.5296 36.7416 25.5473 36.7193 25.564 36.6963L25.603 36.6328C25.6167 36.6126 25.6312 36.5929 25.647 36.5742L25.6567 36.5625L25.6675 36.5527C25.708 36.5155 25.7528 36.4836 25.8003 36.4561C25.8181 36.4425 25.8359 36.4287 25.855 36.417L25.8706 36.4072L25.8872 36.4004C25.9653 36.3683 26.0489 36.3509 26.1333 36.3486H26.1772C26.2304 36.3523 26.2824 36.364 26.3335 36.3789C26.3473 36.3815 26.3609 36.3844 26.3745 36.3877H26.4253L26.479 36.4199C26.5075 36.4369 26.5323 36.4588 26.5581 36.4795L26.5591 36.4785L26.6587 36.5498L26.6743 36.5635L26.688 36.5801C26.7192 36.618 26.7464 36.659 26.77 36.7021L26.7778 36.7119L26.8237 36.7852L26.8286 36.7949L26.9751 37.1104C27.3404 37.8334 27.8678 38.4547 28.5142 38.9199L28.7974 39.1094C29.4661 39.5226 30.2214 39.7618 30.9995 39.8076C31.896 39.7529 32.7616 39.4447 33.5034 38.9141L33.7759 38.7051C34.3935 38.195 34.8876 37.5368 35.2134 36.7832L35.2173 36.7744L35.2222 36.7656C35.236 36.7399 35.2538 36.7169 35.271 36.6934C35.2938 36.6515 35.3208 36.6111 35.3511 36.5742L35.3608 36.5625L35.3716 36.5527C35.4115 36.5155 35.4563 36.4834 35.5034 36.4561L35.5015 36.457L35.5024 36.4561C35.505 36.4539 35.5042 36.4545 35.5083 36.4512C35.5166 36.4444 35.5459 36.4195 35.5864 36.4014L35.6313 36.3818H35.6567C35.712 36.3646 35.7686 36.3526 35.8267 36.3496V36.3486C35.847 36.3473 35.8678 36.3473 35.8882 36.3486L35.8872 36.3496C35.9476 36.3529 36.0067 36.3655 36.064 36.3848C36.0698 36.3858 36.0757 36.3864 36.0815 36.3877H36.1353L36.188 36.418C36.2301 36.4421 36.2693 36.4713 36.3052 36.5039L36.3745 36.5547L36.3843 36.5635L36.3931 36.5732C36.4279 36.6124 36.4572 36.656 36.4819 36.7021L36.5259 36.7656L36.5347 36.7803L36.5405 36.7949C36.903 37.6542 37.4865 38.3911 38.2251 38.9238L38.5083 39.1123C39.1809 39.5289 39.9408 39.771 40.7241 39.8154C40.8161 39.8133 40.9076 39.8283 40.9937 39.8613L41.062 39.8916C41.1281 39.9253 41.1887 39.9691 41.2417 40.0215C41.3126 40.0915 41.3687 40.1754 41.4067 40.2676C41.4448 40.3597 41.4643 40.4589 41.4644 40.5586C41.4644 40.6085 41.4593 40.6583 41.4497 40.707L41.4067 40.8496C41.3687 40.9418 41.3126 41.0257 41.2417 41.0957C41.1886 41.1482 41.1283 41.1928 41.062 41.2266L40.9937 41.2568C40.9006 41.2925 40.8011 41.3082 40.7017 41.3027V41.3018C39.8114 41.2825 38.9388 41.0573 38.146 40.6445L37.8101 40.4561C37.0346 39.9858 36.3731 39.3412 35.8716 38.5723C35.4351 39.2311 34.8833 39.7988 34.2427 40.2432L33.9175 40.4531C33.0324 40.9865 32.0319 41.2793 31.0083 41.3027H30.9985C29.9779 41.2819 28.9793 40.9903 28.0981 40.4561C27.3229 39.986 26.6614 39.3416 26.1597 38.5732C25.7231 39.2321 25.1705 39.7998 24.5298 40.2441L24.2046 40.4541C23.3189 40.9876 22.3167 41.2798 21.2925 41.3027H21.2827C20.3896 41.2847 19.5136 41.0595 18.7183 40.6455L18.3833 40.4561C17.6077 39.9858 16.9455 39.3412 16.4438 38.5723C16.0076 39.2313 15.4555 39.7987 14.8149 40.2432L14.4907 40.4541C13.6056 40.9875 12.6042 41.2797 11.5806 41.3027H11.5708C10.6778 41.2844 9.8016 41.0585 9.00635 40.6445L8.67041 40.4561C7.89478 39.9858 7.23288 39.3411 6.73096 38.5723C6.2947 39.2309 5.74338 39.7989 5.10303 40.2432L4.77783 40.4541C3.89263 40.9876 2.8914 41.2795 1.86768 41.3027H1.8501C1.70909 41.2949 1.57484 41.2452 1.46338 41.1621L1.35986 41.0674C1.23372 40.9286 1.16455 40.7462 1.16455 40.5586C1.1646 40.3709 1.23364 40.1886 1.35986 40.0498L1.46338 39.9561C1.57469 39.873 1.70829 39.8234 1.84912 39.8154L2.18604 39.7842C2.96795 39.6831 3.71722 39.3872 4.37061 38.9199L4.64404 38.7109C5.26277 38.2 5.75675 37.5394 6.08252 36.7842L6.08838 36.7715L6.09521 36.7588L6.16162 36.6621C6.17958 36.6329 6.19765 36.6038 6.21924 36.5771L6.22998 36.5645L6.24268 36.5527C6.28683 36.5121 6.33572 36.4772 6.38818 36.4482V36.4473C6.38386 36.4497 6.38076 36.4525 6.37842 36.4541C6.3789 36.4537 6.37954 36.4526 6.38135 36.4512C6.39042 36.4438 6.41832 36.4208 6.45752 36.4033L6.46533 36.3994L6.57959 36.3643C6.61838 36.3557 6.65794 36.3507 6.69775 36.3486H6.74951Z","fill","#5D87FF","stroke","#5D87FF","stroke-width","0.456471"],["xmlns","http://www.w3.org/2000/svg","width","38","height","38","viewBox","0 0 38 38","fill","none"],["d","M14.8975 5.94336C19.3288 5.94337 23.74 9.63801 23.7402 12.9551V17.9658C23.7402 20.3731 22.9845 24.6656 20.2061 26.8496L27.6826 30.9873L27.6816 30.9863C27.7141 30.9997 29.6865 31.8207 29.6865 32.9902V35.9961C29.6865 37.1018 28.788 37.9999 27.6826 38H2.00391C0.898627 37.9997 0 37.1028 0 35.9961V32.9902C0 31.8886 1.96848 31.0022 2.00391 30.9863L9.67285 26.8301C6.86593 24.5808 5.93955 20.1548 5.93945 17.9658V12.9551C5.9397 9.63801 10.4685 5.94336 14.8975 5.94336ZM14.8975 8.31738C11.5302 8.31738 8.31507 11.2511 8.31445 12.9561V17.9668C8.3145 19.852 9.16799 23.3838 11.1592 24.9795C11.779 25.4766 12.1103 26.2516 12.0391 27.043C11.9677 27.8341 11.5049 28.5364 10.8057 28.916L3.13574 33.0713C3.08231 33.1021 3.02651 33.1304 2.9707 33.1553C2.78315 33.2407 2.54469 33.3843 2.375 33.5088V35.6299H27.3115V33.4834C27.1537 33.3743 26.9393 33.2505 26.7637 33.1758C26.6948 33.1449 26.6102 33.1059 26.5449 33.0703L19.0693 28.9326C18.3699 28.5506 17.9063 27.8406 17.8398 27.0469C17.7735 26.2535 18.1117 25.4778 18.7383 24.9844C20.7877 23.3733 21.3652 19.8247 21.3652 17.9668V12.9561C21.3647 11.2665 18.5144 8.49758 15.2178 8.32617L14.8975 8.31738ZM23.5137 0.0107422C27.8075 0.232868 32.0504 3.83456 32.0508 7.04785V12.0586C32.0507 14.4658 31.1838 18.7583 28.4053 20.9424L35.9932 25.0801C35.9932 25.0801 37.9983 25.9057 38 27.0859V30.0557C38 31.1612 37.1014 32.0593 35.9961 32.0596H32.0547C31.7733 31.0132 31.5544 30.2322 30.8301 29.6865H35.624V27.5762C35.4661 27.467 35.2509 27.3443 35.0752 27.2695C35.0063 27.2387 34.9218 27.1987 34.8564 27.1631L27.2695 23.0254C26.5691 22.6434 26.1066 21.9354 26.04 21.1406C25.9735 20.3469 26.3113 19.5707 26.9395 19.0771C28.9876 17.466 29.6758 13.9174 29.6758 12.0596V7.0498C29.6758 5.35924 26.7222 2.55658 23.4189 2.38281L23.0977 2.37402C21.3796 2.37406 19.7983 2.95192 18.5469 3.92578C17.616 3.62921 16.5387 3.62787 15.5615 3.56738C17.275 1.56489 20.2183 5.40559e-05 23.0977 0L23.5137 0.0107422Z","fill","#5D87FF"],[1,"signup-form"],[1,"subtitle"],[1,"scrollTabLogin"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","placeholder","Enter Your Email","formControlName","email",1,"form-control"],["class","errormessage",3,"errors",4,"ngIf"],["name","password","placeholder","Enter Password","formControlName","password",3,"required"],["class","errormessage",3,"errors","displayAll",4,"ngIf"],["name","confirmPassword","id","confirm-password","placeholder","Enter Password Again","formControlName","confirmPassword",3,"required"],[1,"checkbox-group"],["type","checkbox","id","marketing","formControlName","TnC"],["for","marketing"],[4,"ngIf"],["type","submit",1,"create-account-btn"],[1,"divider"],["_ngcontent-ng-c2850015536","",1,"bg-white","px-3","text-muted","small"],[1,"social-login"],[1,"social-btn","google"],["width","20","height","20","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M21.8055 10.0415H21V10H12V14H17.6515C16.827 16.3285 14.6115 18 12 18C8.6865 18 6 15.3135 6 12C6 8.6865 8.6865 6 12 6C13.5295 6 14.921 6.577 15.9805 7.5195L18.809 4.691C17.023 3.0265 14.634 2 12 2C6.4775 2 2 6.4775 2 12C2 17.5225 6.4775 22 12 22C17.5225 22 22 17.5225 22 12C22 11.3295 21.931 10.675 21.8055 10.0415Z","fill","#FFC107"],["d","M3.15295 7.3455L6.43845 9.755C7.32745 7.554 9.48045 6 12 6C13.5295 6 14.921 6.577 15.9805 7.5195L18.809 4.691C17.023 3.0265 14.634 2 12 2C8.15895 2 4.82795 4.1685 3.15295 7.3455Z","fill","#FF3D00"],["d","M12 22C14.583 22 16.93 21.0115 18.7045 19.404L15.6095 16.785C14.5718 17.5742 13.3038 18.001 12 18C9.39903 18 7.19053 16.3415 6.35853 14.027L3.09753 16.5395C4.75253 19.778 8.11353 22 12 22Z","fill","#4CAF50"],["d","M21.8055 10.0415H21V10H12V14H17.6515C17.2571 15.1082 16.5467 16.0766 15.608 16.7855L15.6095 16.7845L18.7045 19.4035C18.4855 19.6025 22 17 22 12C22 11.3295 21.931 10.675 21.8055 10.0415Z","fill","#1976D2"],[1,"social-btn","facebook"],["d","M12 2C6.477 2 2 6.477 2 12C2 16.991 5.657 21.128 10.438 21.879V14.89H7.898V12H10.438V9.797C10.438 7.291 11.93 5.907 14.215 5.907C15.309 5.907 16.453 6.102 16.453 6.102V8.562H15.193C13.95 8.562 13.563 9.333 13.563 10.124V12H16.336L15.893 14.89H13.563V21.879C18.343 21.129 22 16.99 22 12C22 6.477 17.523 2 12 2Z","fill","#1877F2"],[1,"social-btn","twitter"],["d","M13.6823 10.6218L20.2391 3H18.6854L12.9921 9.61788L8.44486 3H3.2002L10.0765 13.0074L3.2002 21H4.75404L10.7663 14.0113L15.5549 21H20.7996L13.6819 10.6218H13.6823ZM11.5541 13.0956L10.8574 12.0991L5.31391 4.16971H7.70053L12.1742 10.5689L12.8709 11.5655L18.6861 19.8835H16.2995L11.5541 13.096V13.0956Z","fill","black"],[1,"login-link"],["routerLink","/auth/login"],[1,"errormessage",3,"errors"],[1,"errormessage",3,"errors","displayAll"],[1,"bottom-info"],[1,"copyright-right"],[1,"support"],["d","M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z","stroke","#666666","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M22 6L12 13L2 6","stroke","#666666","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["href","mailto:support@smartyacht.app"],[1,"signup-form","purser-login"],[3,"formGroup"],["type","email","id","email","placeholder","Enter Your Email","formControlName","email"],[3,"errors",4,"ngIf"],[3,"errors","displayAll",4,"ngIf"],["type","submit",1,"create-account-btn",3,"click"],[3,"errors"],[3,"errors","displayAll"],[1,"row"],[1,"col-md-6"],[1,"required"],["type","text","id","name","placeholder","Enter Your Name","formControlName","fullName",1,"form-control"],["type","text","id","surname","placeholder","Enter Your Surname","formControlName","surName",1,"form-control"],["for","crewMember",1,"form-label"],["id","crewMember","formControlName","group",1,"form-select",3,"ngModelChange"],["value",""],[3,"ngValue",4,"ngFor","ngForOf"],["for","positionId",1,"form-label"],["id","positionId","formControlName","positionId",1,"form-select"],[1,"signUpFielddFlex"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown",1,"btn","dropdown-toggle","country-selector"],[1,"dropdown-menu"],[3,"click",4,"ngFor","ngForOf"],["for","phone"],["type","tel","id","phone","minlength","10","maxlength","10","name","phoneNumber","formControlName","phoneNumber","placeholder","Enter Number",1,"form-control"],[1,"form-group","password-wrapper"],["for","password"],[1,"password-input-container"],["id","password","placeholder","Enter Password","formControlName","password",1,"form-control",3,"type"],[1,"toggle-password",3,"click"],["for","confirm-password"],["id","confirm-password","placeholder","Enter Password Again","formControlName","confirmPassword",1,"form-control",3,"type"],["class","text-danger errormessage mt-1",4,"ngIf"],[3,"ngValue"],["width","20","height","15",1,"me-1",3,"src"],[3,"click"],[1,"dropdown-item","d-flex","align-items-center"],["width","20","height","15",1,"me-2",3,"src"],["xmlns","http://www.w3.org/2000/svg","width","19","height","14","viewBox","0 0 19 14","fill","none"],["d","M15.5 1.18164L3.5 13.1816","stroke","#999999","stroke-linecap","round"],["d","M1 7.18182C1 7.18182 4.09091 1 9.5 1C14.9091 1 18 7.18182 18 7.18182C18 7.18182 14.9091 13.3636 9.5 13.3636C4.09091 13.3636 1 7.18182 1 7.18182Z","stroke","#999999","stroke-linecap","round","stroke-linejoin","round"],["d","M9.5 9.5C10.7803 9.5 11.8182 8.46211 11.8182 7.18182C11.8182 5.90152 10.7803 4.86364 9.5 4.86364C8.2197 4.86364 7.18182 5.90152 7.18182 7.18182C7.18182 8.46211 8.2197 9.5 9.5 9.5Z","stroke","#999999","stroke-linecap","round","stroke-linejoin","round"],["d","M1 7C1 7 4.09091 1 9.5 1C14.9091 1 18 7 18 7C18 7 14.9091 13 9.5 13C4.09091 13 1 7 1 7Z","stroke","#999999","stroke-linecap","round","stroke-linejoin","round"],["cx","9.5","cy","7","r","2.5","stroke","#999999","stroke-linecap","round","stroke-linejoin","round"],[1,"text-danger","errormessage","mt-1"]],template:function(r,i){r&1&&(x(0,"div",0)(1,"div",1)(2,"div",2),U(3,"i",3),x(4,"span"),I(5,"Back to website"),E()(),x(6,"div",4)(7,"h2",5),I(8,"WELCOME TO smartYacht"),E(),x(9,"p"),I(10,"Choose Your Role and Explore Our Platform"),E(),x(11,"div",6),Y(12,ef,7,8,"div",7),E()(),x(13,"div",8),I(14," \xA9 2025 smartYacht.All rights reserved. "),E()(),x(15,"div",9),Y(16,lf,48,9,"div",10)(17,ff,16,4,"div",11)(18,pf,9,0,"div",12)(19,Nf,100,24,"div",10),E()()),r&2&&(B(12),P("ngForOf",i.userRolesData),B(4),P("ngIf",i.selectedRoleName==="Owner"),B(),P("ngIf",i.selectedRoleName==="Crew Purser"),B(),P("ngIf",i.selectedRoleName==="Crew Purser"),B(),P("ngIf",i.selectedRoleName==="Crew"))},dependencies:[br,un,St,ma,va,At,Ea,Sa,Tt,xa,_a,wt,It,ba,Ta,pn,Pt,Bt,bt,mn,$n,Ba],styles:['.container-signup[_ngcontent-%COMP%]{display:flex;height:100vh}@media (max-width: 992px){.container-signup[_ngcontent-%COMP%]{flex-direction:column;overflow-y:auto;height:auto}}.left-section-signup[_ngcontent-%COMP%]{flex:1;background-image:linear-gradient(#030f4dbd),url("./media/signup1-HHJF67PA.jpg");background-size:cover;background-position:center;color:#fff;padding:2rem;display:flex;flex-direction:column;justify-content:space-between;position:relative}@media (max-width: 992px){.left-section-signup[_ngcontent-%COMP%]{padding:16px}}.left-section-signup[_ngcontent-%COMP%]   .back-button-signup[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer;font-size:.9rem;margin-bottom:0}.left-section-signup[_ngcontent-%COMP%]   .back-button-signup[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400;font-size:16px;line-height:19px;color:#fff}.left-section-signup[_ngcontent-%COMP%]   .welcome-content-signup[_ngcontent-%COMP%]{text-align:center;margin-top:0}@media (max-width: 992px){.left-section-signup[_ngcontent-%COMP%]   .welcome-content-signup[_ngcontent-%COMP%]{margin-bottom:20px}}.left-section-signup[_ngcontent-%COMP%]   .welcome-content-signup[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:600;font-size:28px;text-align:center;text-transform:uppercase;color:#fff;margin-bottom:4px;letter-spacing:1px}@media (max-width: 992px){.left-section-signup[_ngcontent-%COMP%]   .welcome-content-signup[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{display:none}}.left-section-signup[_ngcontent-%COMP%]   .welcome-content-signup[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:16px;text-align:center;color:#fff;margin-bottom:10px;opacity:.9}@media (max-width: 992px){.left-section-signup[_ngcontent-%COMP%]   .welcome-content-signup[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:none}}.left-section-signup[_ngcontent-%COMP%]   .role-cards[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;margin-top:0}@media (max-width: 768px){.left-section-signup[_ngcontent-%COMP%]   .role-cards[_ngcontent-%COMP%]{margin-top:1rem}}.left-section-signup[_ngcontent-%COMP%]   .role-card[_ngcontent-%COMP%]{background-color:#fff;color:#5d87ff;width:90px;height:90px;border-radius:20px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.5rem;cursor:pointer;transition:all .3s ease}@media (max-width: 992px){.left-section-signup[_ngcontent-%COMP%]   .role-card[_ngcontent-%COMP%]{width:80px;height:80px}}.left-section-signup[_ngcontent-%COMP%]   .role-card.active[_ngcontent-%COMP%]{background-color:#5d87ff;color:#fff}.left-section-signup[_ngcontent-%COMP%]   .role-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400;font-size:12px;line-height:14px;text-align:center}.left-section-signup[_ngcontent-%COMP%]   .role-card.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke:#fff!important}.left-section-signup[_ngcontent-%COMP%]   .copyright-signup[_ngcontent-%COMP%]{font-weight:400;font-size:12px;line-height:14px;color:#fff;opacity:.8;text-align:center;margin-top:0}.right-section-signup[_ngcontent-%COMP%]{flex:1;padding:2rem;display:flex;flex-direction:column;justify-content:space-between;align-items:center;margin:0 auto}.right-section-signup[_ngcontent-%COMP%]   .scrollTabLogin[_ngcontent-%COMP%]{overflow:auto;height:calc(100dvh - 200px);padding:20px 12px 20px 0}@media (max-width: 992px){.right-section-signup[_ngcontent-%COMP%]   .scrollTabLogin[_ngcontent-%COMP%]{height:calc(100dvh - 300px)}}@media (max-width: 992px){.right-section-signup[_ngcontent-%COMP%]{flex:none;padding:2rem 1.5rem}}@media (max-width: 576px){.right-section-signup[_ngcontent-%COMP%]{padding:1.5rem 1rem}}.right-section-signup[_ngcontent-%COMP%]   .signup-form[_ngcontent-%COMP%]{max-width:450px;margin:0 auto;width:100%}@media (max-width: 992px){.right-section-signup[_ngcontent-%COMP%]   .signup-form[_ngcontent-%COMP%]{max-width:100%}}.right-section-signup[_ngcontent-%COMP%]   .signup-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-style:normal;font-weight:600;font-size:24px;line-height:28px;color:#333;margin-bottom:.5rem}@media (max-width: 576px){.right-section-signup[_ngcontent-%COMP%]   .signup-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem;margin-top:1rem}}.right-section-signup[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:17px;text-align:start;color:#777;margin-bottom:2rem}@media (max-width: 992px){.right-section-signup[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin-bottom:10px}}.right-section-signup[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem;flex:1}@media (max-width: 576px){.right-section-signup[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.2rem}}.right-section-signup[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:400;font-size:12px;line-height:14px;color:#5e6169;margin-bottom:.5rem}.right-section-signup[_ngcontent-%COMP%]   .phone-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:5px}@media (max-width: 576px){.right-section-signup[_ngcontent-%COMP%]   .phone-container[_ngcontent-%COMP%]{gap:5px}}.right-section-signup[_ngcontent-%COMP%]   .phone-container[_ngcontent-%COMP%]   .country-code[_ngcontent-%COMP%]{flex-shrink:0;width:45px;height:40px;border:1px solid #dee2e6;border-radius:8px;display:flex;align-items:center;justify-content:center;background-color:#fff;font-size:14px;font-weight:500;color:#495057}@media (max-width: 576px){.right-section-signup[_ngcontent-%COMP%]   .phone-container[_ngcontent-%COMP%]   .country-code[_ngcontent-%COMP%]{width:40px;height:36px}}.right-section-signup[_ngcontent-%COMP%]   .phone-container[_ngcontent-%COMP%]   .country-code[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:14px;margin-right:2px}@media (max-width: 576px){.right-section-signup[_ngcontent-%COMP%]   .phone-container[_ngcontent-%COMP%]   .country-code[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px;height:12px}}.right-section-signup[_ngcontent-%COMP%]   .phone-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{flex:1;height:40px;border-radius:8px;border:1px solid #dee2e6;padding:10px 15px;font-size:14px}@media (max-width: 576px){.right-section-signup[_ngcontent-%COMP%]   .phone-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:36px;padding:8px 12px;font-size:13px}}.right-section-signup[_ngcontent-%COMP%]   .phone-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{flex-shrink:0;width:40px;height:40px;background-color:#4285f4;border-radius:8px;display:flex;justify-content:center;align-items:center;cursor:pointer;border:none;color:#fff;font-size:18px}@media (max-width: 576px){.right-section-signup[_ngcontent-%COMP%]   .phone-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{width:36px;height:36px;font-size:16px}}.right-section-signup[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{padding:10px;max-width:240px;max-height:250px;font-size:14px;overflow-x:hidden;overflow-y:auto}@media (max-width: 576px){.right-section-signup[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{max-width:200px;max-height:200px;font-size:13px}}.right-section-signup[_ngcontent-%COMP%]   .country-selector[_ngcontent-%COMP%]{width:auto;font-size:14px;padding:8px 18px;border:1px solid #CDD5DF;background-color:#fff;transition:border .2s ease-in-out}.right-section-signup[_ngcontent-%COMP%]   .country-selector[_ngcontent-%COMP%]:focus, .right-section-signup[_ngcontent-%COMP%]   .country-selector[_ngcontent-%COMP%]:active{border:1px solid #CDD5DF!important;outline:none!important}.right-section-signup[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{cursor:pointer}.right-section-signup[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.right-section-signup[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:1.5rem}@media (max-width: 576px){.right-section-signup[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]{margin-bottom:1.2rem}}.right-section-signup[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-weight:400;font-size:12px;line-height:18px;color:#444}@media (max-width: 576px){.right-section-signup[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:11px;line-height:16px}}.right-section-signup[_ngcontent-%COMP%]   .create-account-btn[_ngcontent-%COMP%]{width:100%;padding:.8rem;background-color:#5d87ff;border:none;border-radius:.5rem;font-family:Roboto,sans-serif;font-weight:500;font-size:14px;line-height:16px;color:#fff;cursor:pointer;transition:background-color .3s ease}@media (max-width: 576px){.right-section-signup[_ngcontent-%COMP%]   .create-account-btn[_ngcontent-%COMP%]{padding:.7rem;font-size:13px}}.right-section-signup[_ngcontent-%COMP%]   .create-account-btn[_ngcontent-%COMP%]:hover{background-color:#4361ee}.right-section-signup[_ngcontent-%COMP%]   .create-account-btn[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #5d87ff4d}.right-section-signup[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{display:flex;align-items:center;margin:2rem 0;color:#999;font-size:.8rem}@media (max-width: 576px){.right-section-signup[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{margin:1.5rem 0}}.right-section-signup[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]:before, .right-section-signup[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid #eee}.right-section-signup[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 1rem;font-family:Roboto,sans-serif;font-style:normal;font-weight:500;font-size:11.9px;line-height:14px;color:#777}@media (max-width: 576px){.right-section-signup[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 .8rem}}.right-section-signup[_ngcontent-%COMP%]   .social-login[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:6px;margin-bottom:2rem}@media (max-width: 576px){.right-section-signup[_ngcontent-%COMP%]   .social-login[_ngcontent-%COMP%]{gap:5px;margin-bottom:1.5rem;flex-wrap:wrap}}.right-section-signup[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]{width:132px;height:48px;border-radius:15px;border:1px solid #eee;background-color:#fff;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease}@media (max-width: 576px){.right-section-signup[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]{width:120px;height:40px;border-radius:12px;margin-bottom:5px}}.right-section-signup[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]:hover{background-color:#f8f8f8}.right-section-signup[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;margin-top:1rem;font-family:Roboto,sans-serif;font-weight:400;font-size:14px;line-height:17px;color:#444}@media (max-width: 576px){.right-section-signup[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}}.right-section-signup[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#5d87ff;text-decoration:none;font-family:Roboto,sans-serif;font-weight:500;font-size:13.9px;line-height:16px}.right-section-signup[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.right-section-signup[_ngcontent-%COMP%]   .bottom-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;color:#666;font-size:.8rem;margin-top:2rem;width:100%;margin-left:0}@media (max-width: 992px){.right-section-signup[_ngcontent-%COMP%]   .bottom-info[_ngcontent-%COMP%]{width:100%}}@media (max-width: 768px){.right-section-signup[_ngcontent-%COMP%]   .bottom-info[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;text-align:center}}.right-section-signup[_ngcontent-%COMP%]   .copyright-right[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-weight:400;font-size:14px;line-height:16px;color:#444}@media (max-width: 576px){.right-section-signup[_ngcontent-%COMP%]   .copyright-right[_ngcontent-%COMP%]{font-size:12px}}.right-section-signup[_ngcontent-%COMP%]   .support[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}@media (max-width: 768px){.right-section-signup[_ngcontent-%COMP%]   .support[_ngcontent-%COMP%]{justify-content:center}}.right-section-signup[_ngcontent-%COMP%]   .support[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:16px;color:#444;text-decoration:none}@media (max-width: 576px){.right-section-signup[_ngcontent-%COMP%]   .support[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:12px}}.right-section-signup[_ngcontent-%COMP%]   .support[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#5d87ff}small[_ngcontent-%COMP%]{color:red;font-size:12px;margin-top:5px;display:block}small.password-mismatch[_ngcontent-%COMP%]{margin-top:-23px!important;margin-bottom:13px;text-align:right}.error-container[_ngcontent-%COMP%]{position:absolute;bottom:-25px;right:10px;width:auto;display:flex;flex-direction:column;justify-content:flex-start}@media (max-width: 576px){.error-container[_ngcontent-%COMP%]{bottom:-20px;right:5px}}.invalid-feedback[_ngcontent-%COMP%]{margin-top:-10px;position:relative;display:flex;justify-content:end;align-items:end}@media (max-width: 576px){.invalid-feedback[_ngcontent-%COMP%]{margin-top:-8px;font-size:11px}}input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer}.password-input-container[_ngcontent-%COMP%]{position:relative}.password-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding-right:40px}.toggle-password[_ngcontent-%COMP%]{position:absolute;top:50%;right:10px;transform:translateY(-50%);cursor:pointer;display:flex;align-items:center}.input-group[_ngcontent-%COMP%]{border:none!important}.errormessage[_ngcontent-%COMP%]{position:absolute;right:0;font-size:11px;font-weight:400}.role-card.disabled-role[_ngcontent-%COMP%]{pointer-events:none;opacity:.6;cursor:not-allowed}.purser-login[_ngcontent-%COMP%]{margin-top:50px!important}.signUpFielddFlex[_ngcontent-%COMP%]{display:flex;gap:10px}']})}}return e})();function Rf(e,t){e&1&&(x(0,"div"),I(1,"Email is required"),E())}function kf(e,t){e&1&&(x(0,"div"),I(1,"Please enter a valid email"),E())}function Df(e,t){if(e&1&&(x(0,"div",35),Y(1,Rf,2,0,"div",25)(2,kf,2,0,"div",25),E()),e&2){let n,r,i=W();B(),P("ngIf",(n=i.forgotForm.get("email"))==null||n.errors==null?null:n.errors.required),B(),P("ngIf",(r=i.forgotForm.get("email"))==null||r.errors==null?null:r.errors.email)}}function Vf(e,t){e&1&&(x(0,"span"),I(1,"Send Reset Instructions "),U(2,"i",36),E())}function Uf(e,t){e&1&&(x(0,"span"),I(1,"Processing..."),E())}var Xs=(()=>{class e{constructor(n,r,i,a){this.fb=n,this._auth=r,this.snackbar=i,this.router=a,this.isSubmitting=!1,this.forgotForm=this.fb.group({email:["",[ee.required,ee.email]]})}onSubmit(){if(this.forgotForm.invalid||this.isSubmitting)return;this.isSubmitting=!0;let n=this.forgotForm.value.email;this._auth.sendPasswordResetEmail(n).subscribe({next:()=>{this.router.navigate(["/auth/otp-verification"],{queryParams:{email:n}})},error:r=>{this.snackbar.error(r?.message||"Something went wrong. Try again."),this.isSubmitting=!1}})}static{this.\u0275fac=function(r){return new(r||e)(pe(Ot),pe(Xt),pe(Wt),pe(Zt))}}static{this.\u0275cmp=ft({type:e,selectors:[["app-forgot-password"]],decls:48,vars:5,consts:[[1,"container-fluid"],[1,"row"],[1,"col-lg-6","hero-section"],[1,"hero-content"],[1,"back-link"],["routerLink","/",1,"text-white","text-decoration-none"],[1,"bi","bi-arrow-left-circle"],[1,"brand"],[1,"fw-bold"],[1,"hero-text"],[1,"display-5","fw-bold"],[1,"lead"],[1,"col-lg-6","form-section"],[1,"form-container"],[1,"text-center"],[1,"text-muted-first"],[1,"scrollTabLogin"],[1,"tab-content"],[3,"ngSubmit","formGroup"],[1,"fieldLogin"],[1,"form-group"],["for","email"],["type","email","id","email","placeholder","Enter Email","formControlName","email",1,"form-control","form-control-lg"],["class","text-danger errormessage",4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-lg","w-100","d-flex","justify-content-center","align-items-center","gap-2",3,"disabled"],[4,"ngIf"],[1,"text-center","mt-4"],[1,"text-muted"],["routerLink","/auth/login",1,"text-sign","text-decoration-none","ms-1","fw-medium"],[1,"footer","mt-auto"],[1,"d-flex","justify-content-between","align-items-center","text-muted","small"],[1,"copy-right"],[1,"mail","copy-right"],["href","mailto:support@smartyacht.app",1,"text-muted","text-decoration-none"],[1,"bi","bi-envelope","me-1"],[1,"text-danger","errormessage"],[1,"bi","bi-chevron-right"]],template:function(r,i){if(r&1&&(x(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),U(6,"i",6),I(7,"Back to website "),E(),x(8,"div",7)(9,"h1",8),I(10,"smartYacht"),E()()(),x(11,"div",9)(12,"h2",10),I(13,"Welcome to the world of luxury yachting"),E(),x(14,"p",11),I(15,"Connect with top crews, manage your fleet, or offer premium services - Your maritime journey starts here."),E()()()(),x(16,"div",12)(17,"div",13)(18,"div",14)(19,"h2"),I(20,"Forgot Your Password?"),E(),x(21,"p",15),I(22,"No worries! Enter your email address, and we\u2019ll send you instructions to reset your password."),E()(),x(23,"div",16)(24,"div",17)(25,"form",18),ge("ngSubmit",function(){return i.onSubmit()}),x(26,"div",19)(27,"div",20)(28,"label",21),I(29,"Email Address"),E(),U(30,"input",22),Y(31,Df,3,2,"div",23),E(),x(32,"button",24),Y(33,Vf,3,0,"span",25)(34,Uf,2,0,"span",25),E()()()(),x(35,"div",26)(36,"span",27),I(37,"Remember Your Password?"),E(),x(38,"a",28),I(39,"Back to Login"),E()(),x(40,"div",29)(41,"div",30)(42,"div",31),I(43,"\xA9 2025 smartYacht All rights reserved."),E(),x(44,"div",32)(45,"a",33),U(46,"i",34),I(47," support@smartyacht.app "),E()()()()()()()()()),r&2){let a;B(25),P("formGroup",i.forgotForm),B(6),P("ngIf",((a=i.forgotForm.get("email"))==null?null:a.invalid)&&((a=i.forgotForm.get("email"))==null?null:a.touched)),B(),P("disabled",i.forgotForm.invalid||i.isSubmitting),B(),P("ngIf",!i.isSubmitting),B(),P("ngIf",i.isSubmitting)}},dependencies:[St,At,Tt,wt,It,Pt,Bt,bt],styles:['.hero-section[_ngcontent-%COMP%]{position:relative;min-height:100vh;background-image:url("./media/login-QTTUHSTS.jpg");background-size:cover;background-position:0% center;color:#fff}@media (max-width: 992px){.hero-section[_ngcontent-%COMP%]{min-height:auto;padding:25px}}.hero-section[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(#0000,#000);z-index:1}.hero-section[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]{position:relative;z-index:2;height:100%;display:flex;flex-direction:column;justify-content:space-between;padding:10px}@media (max-width: 1199px){.hero-section[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]{padding:0}}.hero-section[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:400;font-size:16px;line-height:19px;color:#fff;display:inline-flex;align-items:center;gap:10px}.hero-section[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:600;font-size:25.8px;padding:0;margin-bottom:0}.hero-section[_ngcontent-%COMP%]   .hero-text[_ngcontent-%COMP%]{margin-bottom:0}@media (max-width: 992px){.hero-section[_ngcontent-%COMP%]   .hero-text[_ngcontent-%COMP%]{display:none}}.hero-section[_ngcontent-%COMP%]   .hero-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:500;font-size:32px;margin-bottom:10px}.hero-section[_ngcontent-%COMP%]   .hero-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:.9;font-weight:400;font-size:16px;line-height:24px}.login-tabs[_ngcontent-%COMP%]{display:flex;background-color:#f2f2f2;border-radius:8px;margin-bottom:2rem}@media (max-width: 992px){.login-tabs[_ngcontent-%COMP%]{margin-bottom:18px}}.tab-btn[_ngcontent-%COMP%]{flex:1;padding:.8rem;border:none;background:none;cursor:pointer;font-weight:500;font-size:16px;line-height:19px;color:#444;border-radius:8px;transition:all .3s ease}@media (max-width: 575.98px){.tab-btn[_ngcontent-%COMP%]{padding:.6rem;font-size:14px}}.tab-btn.active[_ngcontent-%COMP%]{background-color:#fff;color:#444;box-shadow:0 2px 8px #0000001a}.form-section[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:column;padding:3rem 2rem;overflow:auto}@media (max-width: 992px){.form-section[_ngcontent-%COMP%]{height:auto;padding:20px}}.form-section[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{max-width:447px;display:flex;flex-direction:column;justify-content:center;margin:0 auto;width:100%;height:100%}@media (max-width: 992px){.form-section[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{height:auto;max-width:100%}}.form-section[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-weight:500;font-size:14.1px;line-height:17px;color:#444}.form-section[_ngcontent-%COMP%]   .text-password[_ngcontent-%COMP%]{font-weight:500;font-size:12px;line-height:15px;color:#3a0764;margin-bottom:15px}.form-section[_ngcontent-%COMP%]   .text-password[_ngcontent-%COMP%]:hover{color:#000}.form-section[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{border:1px solid #F2F2F2}.form-section[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-weight:600;font-size:16px;line-height:19px;color:#444;border:none;padding:.75rem 1.5rem;margin-bottom:-1px;cursor:pointer}.form-section[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#444;border-bottom:2px solid #444444;font-weight:500}.form-section[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover:not(.active){border-bottom:2px solid rgba(0,0,0,.1)}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:14px}}.form-section[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:600;font-size:24px;line-height:29px;text-align:start}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;line-height:24px}}.form-section[_ngcontent-%COMP%]   .text-muted-first[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:17px;text-align:start;color:#777}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .text-muted-first[_ngcontent-%COMP%]{font-size:13px;line-height:16px}}.form-section[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:17px;color:#444}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{font-size:13px}}.form-section[_ngcontent-%COMP%]   .text-sign[_ngcontent-%COMP%]{font-weight:600;font-size:14.3px;line-height:17px;color:#5d87ff}.form-section[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .tab-pane[_ngcontent-%COMP%]{display:none}.form-section[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .tab-pane.active[_ngcontent-%COMP%]{display:block}.form-section[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .tab-pane.show[_ngcontent-%COMP%]{opacity:1}.form-section[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding:.65rem 1rem;font-size:12px}.form-section[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .25rem #4a75f240;border-color:#4a75f2}.form-section[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{display:flex;align-items:center;margin:2rem 0;color:#999;font-size:.8rem}.form-section[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]:before, .form-section[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid #eee}.form-section[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 1rem;font-family:Roboto,sans-serif;font-weight:500;font-size:11.9px;line-height:14px;color:#777}.form-section[_ngcontent-%COMP%]   .small[_ngcontent-%COMP%]{font-weight:500;font-size:12px;line-height:14px;color:#5d87ff}.form-section[_ngcontent-%COMP%]   .copy-right[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:17px;color:#444}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .copy-right[_ngcontent-%COMP%]{font-size:12px;line-height:16px}}.form-section[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]{height:48px;display:flex;align-items:center;justify-content:center;padding:.5rem}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]{height:42px}}.form-section[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#4a75f2;border-color:#4a75f2;height:42px;font-weight:500;font-size:14px}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{height:38px;font-size:13px}}.form-section[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:17px;color:#444}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:13px}}.form-section[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{padding-top:2rem;margin-top:auto}.continue[_ngcontent-%COMP%]{font-weight:500;font-size:11.9px;line-height:14px;text-align:center;color:#777}.btn-eye[_ngcontent-%COMP%]{border:none}.btn-footer[_ngcontent-%COMP%]{border:1px solid #E9E9E9;width:133px;height:50px;border-radius:18px;background:#fff}.btn-outline-secondary[_ngcontent-%COMP%]{border:1px solid #F2F2F2}@media (max-width: 575.98px){.btn-outline-secondary[_ngcontent-%COMP%]{font-size:13px}}.fieldLogin[_ngcontent-%COMP%]{display:flex;flex-direction:column}.fieldLogin[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.scrollTabLogin[_ngcontent-%COMP%]{margin-top:20px}@media (max-width: 992px){.scrollTabLogin[_ngcontent-%COMP%]{overflow:auto;height:calc(100dvh - 297px);padding:20px 11px 20px 0}}.errormessage[_ngcontent-%COMP%]{position:absolute;right:0;font-size:11px;font-weight:400}']})}}return e})();function Ff(e,t){e&1&&(x(0,"div"),I(1,"Email is required"),E())}function Kf(e,t){e&1&&(x(0,"div"),I(1,"Please enter a valid email"),E())}function qf(e,t){if(e&1&&(x(0,"div",36),Y(1,Ff,2,0,"div",37)(2,Kf,2,0,"div",37),E()),e&2){let n,r,i=W();B(),P("ngIf",(n=i.resetForm.get("password"))==null||n.errors==null?null:n.errors.required),B(),P("ngIf",(r=i.resetForm.get("password"))==null||r.errors==null?null:r.errors.email)}}function Hf(e,t){e&1&&(x(0,"div"),I(1,"Email is required"),E())}function zf(e,t){e&1&&(x(0,"div"),I(1,"Please enter a valid email"),E())}function Gf(e,t){if(e&1&&(x(0,"div",36),Y(1,Hf,2,0,"div",37)(2,zf,2,0,"div",37),E()),e&2){let n,r,i=W();B(),P("ngIf",(n=i.resetForm.get("confirmPassword"))==null||n.errors==null?null:n.errors.required),B(),P("ngIf",(r=i.resetForm.get("confirmPassword"))==null||r.errors==null?null:r.errors.email)}}var $s=(()=>{class e{constructor(n){this.fb=n,this.resetForm=this.fb.group({password:["",[ee.required,ee.minLength(6)]],confirmPassword:["",[ee.required]]},{validator:this.passwordMatchValidator})}passwordMatchValidator(n){let r=n.get("password")?.value,i=n.get("confirmPassword")?.value;return r===i?null:{mismatch:!0}}onSubmit(){if(this.resetForm.invalid)return;let{password:n}=this.resetForm.value}static{this.\u0275fac=function(r){return new(r||e)(pe(Ot))}}static{this.\u0275cmp=ft({type:e,selectors:[["app-reset-password"]],decls:53,vars:3,consts:[[1,"container-fluid"],[1,"row"],[1,"col-lg-6","hero-section"],[1,"hero-content"],[1,"back-link"],["routerLink","/",1,"text-white","text-decoration-none"],[1,"bi","bi-arrow-left-circle"],[1,"brand"],[1,"fw-bold"],[1,"hero-text"],[1,"display-5","fw-bold"],[1,"lead"],[1,"col-lg-6","form-section"],[1,"form-container"],[1,"text-center"],[1,"text-muted-first"],[1,"scrollTabLogin"],[1,"tab-content"],[3,"ngSubmit","formGroup"],[1,"fieldLogin"],[1,"form-group"],["for","email"],["type","email","id","email","placeholder","Enter Your New Password","formControlName","password",1,"form-control","form-control-lg"],["class","text-danger errormessage",4,"ngIf"],["type","email","id","email","placeholder","Confirm Your New Password","formControlName","confirmPassword",1,"form-control","form-control-lg"],["type","submit",1,"btn","btn-primary","btn-lg","w-100","d-flex","justify-content-center","align-items-center","gap-2"],[1,"bi","bi-chevron-right"],[1,"text-center","mt-4"],[1,"text-muted"],["routerLink","/auth/login",1,"text-sign","text-decoration-none","ms-1","fw-medium"],[1,"footer","mt-auto"],[1,"d-flex","justify-content-between","align-items-center","text-muted","small"],[1,"copy-right"],[1,"mail","copy-right"],["href","mailto:support@smartyacht.app",1,"text-muted","text-decoration-none"],[1,"bi","bi-envelope","me-1"],[1,"text-danger","errormessage"],[4,"ngIf"]],template:function(r,i){if(r&1&&(x(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),U(6,"i",6),I(7,"Back to website "),E(),x(8,"div",7)(9,"h1",8),I(10,"smartYacht"),E()()(),x(11,"div",9)(12,"h2",10),I(13,"Welcome to the world of luxury yachting"),E(),x(14,"p",11),I(15,"Connect with top crews, manage your fleet, or offer premium services - Your maritime journey starts here."),E()()()(),x(16,"div",12)(17,"div",13)(18,"div",14)(19,"h2"),I(20,"Reset Your Password"),E(),x(21,"p",15),I(22,"Enter your new password below. Make sure its strong and secure."),E()(),x(23,"div",16)(24,"div",17)(25,"form",18),ge("ngSubmit",function(){return i.onSubmit()}),x(26,"div",19)(27,"div",20)(28,"label",21),I(29,"New Password"),E(),U(30,"input",22),Y(31,qf,3,2,"div",23),E(),x(32,"div",20)(33,"label",21),I(34,"Confirm New Password"),E(),U(35,"input",24),Y(36,Gf,3,2,"div",23),E(),x(37,"button",25),I(38," Update Password "),U(39,"i",26),E()()()(),x(40,"div",27)(41,"span",28),I(42,"Remember Your Password?"),E(),x(43,"a",29),I(44,"Back to Login"),E()(),x(45,"div",30)(46,"div",31)(47,"div",32),I(48,"\xA9 2025 smartYacht All rights reserved."),E(),x(49,"div",33)(50,"a",34),U(51,"i",35),I(52," support@smartyacht.app "),E()()()()()()()()()),r&2){let a,o;B(25),P("formGroup",i.resetForm),B(6),P("ngIf",((a=i.resetForm.get("password"))==null?null:a.invalid)&&((a=i.resetForm.get("password"))==null?null:a.touched)),B(5),P("ngIf",((o=i.resetForm.get("confirmPassword"))==null?null:o.invalid)&&((o=i.resetForm.get("confirmPassword"))==null?null:o.touched))}},dependencies:[St,At,Tt,wt,It,Pt,Bt,bt],styles:['.hero-section[_ngcontent-%COMP%]{position:relative;min-height:100vh;background-image:url("./media/login-QTTUHSTS.jpg");background-size:cover;background-position:0% center;color:#fff}@media (max-width: 992px){.hero-section[_ngcontent-%COMP%]{min-height:auto;padding:25px}}.hero-section[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(#0000,#000);z-index:1}.hero-section[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]{position:relative;z-index:2;height:100%;display:flex;flex-direction:column;justify-content:space-between;padding:10px}@media (max-width: 1199px){.hero-section[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]{padding:0}}.hero-section[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:400;font-size:16px;line-height:19px;color:#fff;display:inline-flex;align-items:center;gap:10px}.hero-section[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:600;font-size:25.8px;padding:0;margin-bottom:0}.hero-section[_ngcontent-%COMP%]   .hero-text[_ngcontent-%COMP%]{margin-bottom:0}@media (max-width: 992px){.hero-section[_ngcontent-%COMP%]   .hero-text[_ngcontent-%COMP%]{display:none}}.hero-section[_ngcontent-%COMP%]   .hero-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:500;font-size:32px;margin-bottom:10px}.hero-section[_ngcontent-%COMP%]   .hero-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:.9;font-weight:400;font-size:16px;line-height:24px}.login-tabs[_ngcontent-%COMP%]{display:flex;background-color:#f2f2f2;border-radius:8px;margin-bottom:2rem}@media (max-width: 992px){.login-tabs[_ngcontent-%COMP%]{margin-bottom:18px}}.tab-btn[_ngcontent-%COMP%]{flex:1;padding:.8rem;border:none;background:none;cursor:pointer;font-weight:500;font-size:16px;line-height:19px;color:#444;border-radius:8px;transition:all .3s ease}@media (max-width: 575.98px){.tab-btn[_ngcontent-%COMP%]{padding:.6rem;font-size:14px}}.tab-btn.active[_ngcontent-%COMP%]{background-color:#fff;color:#444;box-shadow:0 2px 8px #0000001a}.form-section[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:column;padding:3rem 2rem;overflow:auto}@media (max-width: 992px){.form-section[_ngcontent-%COMP%]{height:auto;padding:20px}}.form-section[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{max-width:447px;display:flex;flex-direction:column;justify-content:center;margin:0 auto;width:100%;height:100%}@media (max-width: 992px){.form-section[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{height:auto;max-width:100%}}.form-section[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-weight:500;font-size:14.1px;line-height:17px;color:#444}.form-section[_ngcontent-%COMP%]   .text-password[_ngcontent-%COMP%]{font-weight:500;font-size:12px;line-height:15px;color:#3a0764;margin-bottom:15px}.form-section[_ngcontent-%COMP%]   .text-password[_ngcontent-%COMP%]:hover{color:#000}.form-section[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{border:1px solid #F2F2F2}.form-section[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-weight:600;font-size:16px;line-height:19px;color:#444;border:none;padding:.75rem 1.5rem;margin-bottom:-1px;cursor:pointer}.form-section[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#444;border-bottom:2px solid #444444;font-weight:500}.form-section[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover:not(.active){border-bottom:2px solid rgba(0,0,0,.1)}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:14px}}.form-section[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:600;font-size:24px;line-height:29px;text-align:start}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;line-height:24px}}.form-section[_ngcontent-%COMP%]   .text-muted-first[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:17px;text-align:start;color:#777}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .text-muted-first[_ngcontent-%COMP%]{font-size:13px;line-height:16px}}.form-section[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:17px;color:#444}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{font-size:13px}}.form-section[_ngcontent-%COMP%]   .text-sign[_ngcontent-%COMP%]{font-weight:600;font-size:14.3px;line-height:17px;color:#5d87ff}.form-section[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .tab-pane[_ngcontent-%COMP%]{display:none}.form-section[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .tab-pane.active[_ngcontent-%COMP%]{display:block}.form-section[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .tab-pane.show[_ngcontent-%COMP%]{opacity:1}.form-section[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding:.65rem 1rem;font-size:12px}.form-section[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .25rem #4a75f240;border-color:#4a75f2}.form-section[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{display:flex;align-items:center;margin:2rem 0;color:#999;font-size:.8rem}.form-section[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]:before, .form-section[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid #eee}.form-section[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 1rem;font-family:Roboto,sans-serif;font-weight:500;font-size:11.9px;line-height:14px;color:#777}.form-section[_ngcontent-%COMP%]   .small[_ngcontent-%COMP%]{font-weight:500;font-size:12px;line-height:14px;color:#5d87ff}.form-section[_ngcontent-%COMP%]   .copy-right[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:17px;color:#444}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .copy-right[_ngcontent-%COMP%]{font-size:12px;line-height:16px}}.form-section[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]{height:48px;display:flex;align-items:center;justify-content:center;padding:.5rem}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]{height:42px}}.form-section[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#4a75f2;border-color:#4a75f2;height:42px;font-weight:500;font-size:14px}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{height:38px;font-size:13px}}.form-section[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:17px;color:#444}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:13px}}.form-section[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{padding-top:2rem;margin-top:auto}.continue[_ngcontent-%COMP%]{font-weight:500;font-size:11.9px;line-height:14px;text-align:center;color:#777}.btn-eye[_ngcontent-%COMP%]{border:none}.btn-footer[_ngcontent-%COMP%]{border:1px solid #E9E9E9;width:133px;height:50px;border-radius:18px;background:#fff}.btn-outline-secondary[_ngcontent-%COMP%]{border:1px solid #F2F2F2}@media (max-width: 575.98px){.btn-outline-secondary[_ngcontent-%COMP%]{font-size:13px}}.fieldLogin[_ngcontent-%COMP%]{display:flex;flex-direction:column}.fieldLogin[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.scrollTabLogin[_ngcontent-%COMP%]{margin-top:20px}@media (max-width: 992px){.scrollTabLogin[_ngcontent-%COMP%]{overflow:auto;height:calc(100dvh - 297px);padding:20px 11px 20px 0}}.errormessage[_ngcontent-%COMP%]{position:absolute;right:0;font-size:11px;font-weight:400}']})}}return e})();var Yf=["otpInput"];function Qf(e,t){if(e&1){let n=jt();x(0,"input",45,0),ge("input",function(i){let a=pt(n).index,o=W();return dt(o.onInput(i,a))})("keydown",function(i){let a=pt(n).index,o=W();return dt(o.onKeyDown(i,a))}),E()}if(e&2){let n=t.$implicit;P("formControlName",n)}}function jf(e,t){e&1&&(x(0,"div",46),I(1,"OTP is required"),E())}function Zf(e,t){e&1&&(x(0,"span"),I(1,"Resend OTP"),E())}function Wf(e,t){e&1&&(x(0,"span"),I(1,"Resending..."),E())}function Xf(e,t){e&1&&(ot(0),Me(),x(1,"svg",47),U(2,"path",48)(3,"path",49)(4,"path",50),E(),st())}function $f(e,t){e&1&&(ot(0),Me(),x(1,"svg",47),U(2,"path",51)(3,"circle",52),E(),st())}function Jf(e,t){if(e&1&&U(0,"app-error-message",53),e&2){let n,r=W();P("errors",(n=r.otpForm.get("newPassword"))==null?null:n.errors)}}function ep(e,t){e&1&&(ot(0),Me(),x(1,"svg",47),U(2,"path",48)(3,"path",49)(4,"path",50),E(),st())}function tp(e,t){e&1&&(ot(0),Me(),x(1,"svg",47),U(2,"path",51)(3,"circle",52),E(),st())}function rp(e,t){e&1&&(x(0,"div"),I(1,"Confirm password is required"),E())}function np(e,t){if(e&1&&(x(0,"div",54),Y(1,rp,2,0,"div",26),E()),e&2){let n,r=W();B(),P("ngIf",(n=r.otpForm.get("confirmPassword"))==null||n.errors==null?null:n.errors.required)}}function ip(e,t){e&1&&(x(0,"div",55),I(1," Passwords do not match "),E())}var Js=(()=>{class e{constructor(n,r,i,a,o){this.fb=n,this._auth=r,this.snackbar=i,this.router=a,this.route=o,this.email="",this.resending=!1,this.otpFormKeys=["digit0","digit1","digit2","digit3","digit4","digit5"],this.showPassword=!1,this.showConfirmPassword=!1,this.submitted=!1,this.otpForm=this.fb.group({digit0:["",[ee.required]],digit1:["",[ee.required]],digit2:["",[ee.required]],digit3:["",[ee.required]],digit4:["",[ee.required]],digit5:["",[ee.required]],email:["",[]],newPassword:["",[ee.required,ee.minLength(6)]],confirmPassword:["",[ee.required]]},{validators:[this.passwordsMatchValidator,this.otpRequiredValidator]}),this.hidePassword=!0}passwordsMatchValidator(n){let r=n.get("newPassword")?.value,i=n.get("confirmPassword")?.value;return!r||!i||r===i?null:{mismatch:!0}}otpRequiredValidator(n){return["digit0","digit1","digit2","digit3","digit4","digit5"].every(a=>n.get(a)?.value?.trim()!=="")?null:{otpRequired:!0}}ngOnInit(){this.route.queryParams.subscribe(n=>{this.email=n.email})}togglePasswordVisibility(){this.hidePassword=!this.hidePassword,this.showPassword=!this.showPassword}toggleConfirmPasswordVisibility(){this.showConfirmPassword=!this.showConfirmPassword}onInput(n,r){let a=n.target.value.trim().charAt(0);a&&(this.otpForm.get(`digit${r}`).setValue(a),r<5&&this.otpInputs.toArray()[r+1].nativeElement.focus())}onKeyDown(n,r){n.key==="Backspace"&&!this.otpForm.get(`digit${r}`)?.value&&r>0&&this.otpInputs.toArray()[r-1].nativeElement.focus()}getOtp(){return Object.values(this.otpForm.value).join("")}onSubmit(){if(this.submitted=!0,this.otpForm.invalid){this.otpForm.markAllAsTouched();return}let n=[this.otpForm.value.digit0,this.otpForm.value.digit1,this.otpForm.value.digit2,this.otpForm.value.digit3,this.otpForm.value.digit4,this.otpForm.value.digit5].join(""),r=this.otpForm.value.newPassword,i={email:this.email,otp:n,newPassword:r};this._auth.sendPasswordResetPaasword(i).subscribe({next:()=>{this.snackbar.success("Password Reset Successfully. Please Login to Contunue"),this.submitted=!1,this.router.navigate(["/auth/login"])},error:a=>{this.snackbar.error(a?.message||"Something went wrong. Try again.")}})}resendOtp(){this.email&&(this.resending=!0,this._auth.sendPasswordResetEmail(this.email).subscribe({next:()=>{this.resending=!1,this.snackbar.success("OTP Resent Successfully")},error:()=>{this.resending=!1,this.snackbar.error("Failed to Resend OTP")}}))}static{this.\u0275fac=function(r){return new(r||e)(pe(Ot),pe(Xt),pe(Wt),pe(Zt),pe(Ca))}}static{this.\u0275cmp=ft({type:e,selectors:[["app-otp-verification"]],viewQuery:function(r,i){if(r&1&&ca(Yf,5),r&2){let a;ua(a=fa())&&(i.otpInputs=a)}},decls:66,vars:17,consts:[["otpInput",""],[1,"container-fluid"],[1,"row"],[1,"col-lg-6","hero-section"],[1,"hero-content"],[1,"back-link"],["routerLink","/",1,"text-white","text-decoration-none"],[1,"bi","bi-arrow-left-circle"],[1,"brand"],[1,"fw-bold"],[1,"hero-text"],[1,"display-5","fw-bold"],[1,"lead"],[1,"col-lg-6","form-section"],[1,"form-container"],[1,"text-center"],[1,"text-muted-first"],[1,"scrollTabLogin"],[1,"tab-content"],["autocomplete","off",1,"otp-container",3,"ngSubmit","formGroup"],[1,"d-flex","justify-content-center","gap-2","mb-4"],["type","text","maxlength","1","class","otp-box text-center","autocomplete","off",3,"formControlName","input","keydown",4,"ngFor","ngForOf"],["class","text-end mt-2 mb-4 text-danger mt-1","style","font-size: 11px !important;",4,"ngIf"],[1,"text-center","mt-2","mb-4"],[1,"text-muted"],["href","javascript:void(0)","autocomplete","off",1,"text-sign","text-decoration-none","ms-1","fw-medium","resend-link",3,"click"],[4,"ngIf"],[1,"form-group","password-wrapper"],["for","password"],[1,"required"],[1,"password-input-container"],["id","password","placeholder","Enter Password","formControlName","newPassword",1,"form-control",3,"type"],[1,"toggle-password",3,"click"],[3,"errors",4,"ngIf"],["for","confirm-password"],["id","confirm-password","placeholder","Enter Password Again","formControlName","confirmPassword",1,"form-control",3,"type"],["class","text-danger errormessage",4,"ngIf"],["class","text-danger errormessage mt-1",4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-lg","w-100","d-flex","justify-content-center","align-items-center","gap-2"],[1,"footer","mt-auto"],[1,"d-flex","justify-content-between","align-items-center","text-muted","small"],[1,"copy-right"],[1,"mail","copy-right"],["href","mailto:support@smartyacht.app",1,"text-muted","text-decoration-none"],[1,"bi","bi-envelope","me-1"],["type","text","maxlength","1","autocomplete","off",1,"otp-box","text-center",3,"input","keydown","formControlName"],[1,"text-end","mt-2","mb-4","text-danger","mt-1",2,"font-size","11px !important"],["xmlns","http://www.w3.org/2000/svg","width","19","height","14","viewBox","0 0 19 14","fill","none"],["d","M15.5 1.18164L3.5 13.1816","stroke","#999999","stroke-linecap","round"],["d","M1 7.18182C1 7.18182 4.09091 1 9.5 1C14.9091 1 18 7.18182 18 7.18182C18 7.18182 14.9091 13.3636 9.5 13.3636C4.09091 13.3636 1 7.18182 1 7.18182Z","stroke","#999999","stroke-linecap","round","stroke-linejoin","round"],["d","M9.5 9.5C10.7803 9.5 11.8182 8.46211 11.8182 7.18182C11.8182 5.90152 10.7803 4.86364 9.5 4.86364C8.2197 4.86364 7.18182 5.90152 7.18182 7.18182C7.18182 8.46211 8.2197 9.5 9.5 9.5Z","stroke","#999999","stroke-linecap","round","stroke-linejoin","round"],["d","M1 7C1 7 4.09091 1 9.5 1C14.9091 1 18 7 18 7C18 7 14.9091 13 9.5 13C4.09091 13 1 7 1 7Z","stroke","#999999","stroke-linecap","round","stroke-linejoin","round"],["cx","9.5","cy","7","r","2.5","stroke","#999999","stroke-linecap","round","stroke-linejoin","round"],[3,"errors"],[1,"text-danger","errormessage"],[1,"text-danger","errormessage","mt-1"]],template:function(r,i){if(r&1&&(x(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"a",6),U(6,"i",7),I(7,"Back to website "),E(),x(8,"div",8)(9,"h1",9),I(10,"smartYacht"),E()()(),x(11,"div",10)(12,"h2",11),I(13,"Welcome to the world of luxury yachting"),E(),x(14,"p",12),I(15,"Connect with top crews, manage your fleet, or offer premium services - Your maritime journey starts here."),E()()()(),x(16,"div",13)(17,"div",14)(18,"div",15)(19,"h2"),I(20,"Verify Your Identity"),E(),x(21,"p",16),I(22),E()(),x(23,"div",17)(24,"div",18)(25,"form",19),ge("ngSubmit",function(){return i.onSubmit()}),x(26,"div",20),Y(27,Qf,2,1,"input",21),E(),Y(28,jf,2,0,"div",22),x(29,"div",23)(30,"span",24),I(31,"Didn't receive the code?"),E(),x(32,"a",25),ge("click",function(){return i.resendOtp()}),Y(33,Zf,2,0,"span",26)(34,Wf,2,0,"span",26),E()(),x(35,"div",27)(36,"label",28),I(37,"New Password "),x(38,"span",29),I(39,"*"),E()(),x(40,"div",30),U(41,"input",31),x(42,"span",32),ge("click",function(){return i.togglePasswordVisibility()}),Y(43,Xf,5,0,"ng-container",26)(44,$f,4,0,"ng-container",26),E()(),Y(45,Jf,1,1,"app-error-message",33),E(),x(46,"div",27)(47,"label",34),I(48,"Confirm Password"),E(),x(49,"div",30),U(50,"input",35),x(51,"span",32),ge("click",function(){return i.toggleConfirmPasswordVisibility()}),Y(52,ep,5,0,"ng-container",26)(53,tp,4,0,"ng-container",26),E()(),Y(54,np,2,1,"div",36)(55,ip,2,0,"div",37),E(),x(56,"button",38),I(57," Update Password "),E()()(),x(58,"div",39)(59,"div",40)(60,"div",41),I(61,"\xA9 2025 smartYacht All rights reserved."),E(),x(62,"div",42)(63,"a",43),U(64,"i",44),I(65," support@smartyacht.app "),E()()()()()()()()()),r&2){let a,o;B(22),pr("We've sent a 6-digit verification code to your\xA0email ",i.email,`
`),B(3),P("formGroup",i.otpForm),B(2),P("ngForOf",i.otpFormKeys),B(),P("ngIf",i.submitted&&(i.otpForm.errors==null?null:i.otpForm.errors.otpRequired)),B(4),fr("disabled",i.resending),B(),P("ngIf",!i.resending),B(),P("ngIf",i.resending),B(7),P("type",i.showPassword?"text":"password"),B(2),P("ngIf",!i.showPassword),B(),P("ngIf",i.showPassword),B(),P("ngIf",((a=i.otpForm.get("newPassword"))==null?null:a.invalid)&&((a=i.otpForm.get("newPassword"))==null?null:a.touched)),B(5),P("type",i.showConfirmPassword?"text":"password"),B(2),P("ngIf",!i.showConfirmPassword),B(),P("ngIf",i.showConfirmPassword),B(),P("ngIf",((o=i.otpForm.get("confirmPassword"))==null?null:o.touched)&&((o=i.otpForm.get("confirmPassword"))==null?null:o.invalid)),B(),P("ngIf",(i.otpForm.errors==null?null:i.otpForm.errors.mismatch)&&i.otpForm.touched)}},dependencies:[un,St,At,Tt,wt,It,pn,Pt,Bt,bt,mn],styles:['.hero-section[_ngcontent-%COMP%]{position:relative;min-height:100vh;background-image:url("./media/login-QTTUHSTS.jpg");background-size:cover;background-position:0% center;color:#fff}@media (max-width: 992px){.hero-section[_ngcontent-%COMP%]{min-height:auto;padding:25px}}.hero-section[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(#0000,#000);z-index:1}.hero-section[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]{position:relative;z-index:2;height:100%;display:flex;flex-direction:column;justify-content:space-between;padding:10px}@media (max-width: 1199px){.hero-section[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]{padding:0}}.hero-section[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:400;font-size:16px;line-height:19px;color:#fff;display:inline-flex;align-items:center;gap:10px}.hero-section[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:600;font-size:25.8px;padding:0;margin-bottom:0}.hero-section[_ngcontent-%COMP%]   .hero-text[_ngcontent-%COMP%]{margin-bottom:0}@media (max-width: 992px){.hero-section[_ngcontent-%COMP%]   .hero-text[_ngcontent-%COMP%]{display:none}}.hero-section[_ngcontent-%COMP%]   .hero-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:500;font-size:32px;margin-bottom:10px}.hero-section[_ngcontent-%COMP%]   .hero-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:.9;font-weight:400;font-size:16px;line-height:24px}.login-tabs[_ngcontent-%COMP%]{display:flex;background-color:#f2f2f2;border-radius:8px;margin-bottom:2rem}@media (max-width: 992px){.login-tabs[_ngcontent-%COMP%]{margin-bottom:18px}}.tab-btn[_ngcontent-%COMP%]{flex:1;padding:.8rem;border:none;background:none;cursor:pointer;font-weight:500;font-size:16px;line-height:19px;color:#444;border-radius:8px;transition:all .3s ease}@media (max-width: 575.98px){.tab-btn[_ngcontent-%COMP%]{padding:.6rem;font-size:14px}}.tab-btn.active[_ngcontent-%COMP%]{background-color:#fff;color:#444;box-shadow:0 2px 8px #0000001a}.form-section[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:column;padding:3rem 2rem;overflow:auto}@media (max-width: 992px){.form-section[_ngcontent-%COMP%]{height:auto;padding:20px}}.form-section[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{max-width:447px;display:flex;flex-direction:column;justify-content:center;margin:0 auto;width:100%;height:100%}@media (max-width: 992px){.form-section[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{height:auto;max-width:100%}}.form-section[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-weight:500;font-size:14.1px;line-height:17px;color:#444}.form-section[_ngcontent-%COMP%]   .text-password[_ngcontent-%COMP%]{font-weight:500;font-size:12px;line-height:15px;color:#3a0764;margin-bottom:15px}.form-section[_ngcontent-%COMP%]   .text-password[_ngcontent-%COMP%]:hover{color:#000}.form-section[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{border:1px solid #F2F2F2}.form-section[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-weight:600;font-size:16px;line-height:19px;color:#444;border:none;padding:.75rem 1.5rem;margin-bottom:-1px;cursor:pointer}.form-section[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#444;border-bottom:2px solid #444444;font-weight:500}.form-section[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover:not(.active){border-bottom:2px solid rgba(0,0,0,.1)}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:14px}}.form-section[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:600;font-size:24px;line-height:29px;text-align:start}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;line-height:24px}}.form-section[_ngcontent-%COMP%]   .text-muted-first[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:17px;text-align:start;color:#777}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .text-muted-first[_ngcontent-%COMP%]{font-size:13px;line-height:16px}}.form-section[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:17px;color:#444}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{font-size:13px}}.form-section[_ngcontent-%COMP%]   .text-sign[_ngcontent-%COMP%]{font-weight:600;font-size:14.3px;line-height:17px;color:#5d87ff}.form-section[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .tab-pane[_ngcontent-%COMP%]{display:none}.form-section[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .tab-pane.active[_ngcontent-%COMP%]{display:block}.form-section[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .tab-pane.show[_ngcontent-%COMP%]{opacity:1}.form-section[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding:.65rem 1rem;font-size:12px}.form-section[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .25rem #4a75f240;border-color:#4a75f2}.form-section[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{display:flex;align-items:center;margin:2rem 0;color:#999;font-size:.8rem}.form-section[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]:before, .form-section[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid #eee}.form-section[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 1rem;font-family:Roboto,sans-serif;font-weight:500;font-size:11.9px;line-height:14px;color:#777}.form-section[_ngcontent-%COMP%]   .small[_ngcontent-%COMP%]{font-weight:500;font-size:12px;line-height:14px;color:#5d87ff}.form-section[_ngcontent-%COMP%]   .copy-right[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:17px;color:#444}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .copy-right[_ngcontent-%COMP%]{font-size:12px;line-height:16px}}.form-section[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]{height:48px;display:flex;align-items:center;justify-content:center;padding:.5rem}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]{height:42px}}.form-section[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#4a75f2;border-color:#4a75f2;height:42px;font-weight:500;font-size:14px}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{height:38px;font-size:13px}}.form-section[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:17px;color:#444}@media (max-width: 575.98px){.form-section[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:13px}}.form-section[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{padding-top:2rem;margin-top:auto}.continue[_ngcontent-%COMP%]{font-weight:500;font-size:11.9px;line-height:14px;text-align:center;color:#777}.btn-eye[_ngcontent-%COMP%]{border:none}.btn-footer[_ngcontent-%COMP%]{border:1px solid #E9E9E9;width:133px;height:50px;border-radius:18px;background:#fff}.btn-outline-secondary[_ngcontent-%COMP%]{border:1px solid #F2F2F2}@media (max-width: 575.98px){.btn-outline-secondary[_ngcontent-%COMP%]{font-size:13px}}.fieldLogin[_ngcontent-%COMP%]{display:flex;flex-direction:column}.fieldLogin[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.scrollTabLogin[_ngcontent-%COMP%]{margin-top:20px}@media (max-width: 992px){.scrollTabLogin[_ngcontent-%COMP%]{overflow:auto;height:calc(100dvh - 297px);padding:20px 11px 20px 0}}.errormessage[_ngcontent-%COMP%]{position:absolute;right:0;font-size:11px;font-weight:400}.otp-container[_ngcontent-%COMP%]{text-align:center!important}.otp-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.otp-wrapper[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:16px}.otp-box[_ngcontent-%COMP%]{width:60px;height:60px;font-size:24px;text-align:center;border:2px solid #ccc;border-radius:6px;outline:none;transition:border-color .2s}.otp-box[_ngcontent-%COMP%]:focus{border-color:#007bff}.otp-button[_ngcontent-%COMP%]{margin-top:40px}.resend-link[_ngcontent-%COMP%]{color:#007bff;cursor:pointer;text-decoration:underline}.resend-link.disabled[_ngcontent-%COMP%]{pointer-events:none;color:gray;text-decoration:none}.password-input-container[_ngcontent-%COMP%]{position:relative}.password-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding-right:40px}.toggle-password[_ngcontent-%COMP%]{position:absolute;top:50%;right:10px;transform:translateY(-50%);cursor:pointer;display:flex;align-items:center}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem;flex:1}@media (max-width: 576px){.form-group[_ngcontent-%COMP%]{margin-bottom:1.2rem}}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:400;font-size:12px;line-height:14px;color:#5e6169;margin-bottom:.5rem}']})}}return e})();var ap=[{path:"login",component:Zs},{path:"signup",component:Ws},{path:"forgot-password",component:Xs},{path:"reset-password",component:$s},{path:"otp-verification",component:Js}],e0=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=on({type:e})}static{this.\u0275inj=an({imports:[ei.forChild(ap),ei]})}}return e})();var Fd=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=on({type:e})}static{this.\u0275inj=an({imports:[fn,wa,Ia,e0,Oa,$n]})}}return e})();export{Fd as AuthModule};
