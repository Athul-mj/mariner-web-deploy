import{a,d}from"./chunk-YSHTC3YG.js";import{c as h,m as p}from"./chunk-AYWO7N2Q.js";import{$ as l,H as e,ea as n,ja as s}from"./chunk-442KA2ER.js";var I=(()=>{class o{constructor(t,i,r){this.http=t,this.router=i,this.errorHandler=r,this.apiUrl=a.baseApiUrl,this._baseApiUrl=a.baseApiUrl,this._getAllRolesUrl="api/Role/get-all",this._getGroupAndPositions="api/GroupAndPosition",this._getAllPosition="api/GroupAndPosition/Positions",this._forgotPassword="api/Account/forgot-password",this._resetPasswordUrl="api/Account/reset-password"}login(t,i){return this.http.post(`${this.apiUrl}api/Account/login`,{email:t,password:i}).pipe(l(r=>{localStorage.setItem("token",r.response.token),localStorage.setItem("role",r.response.role),localStorage.setItem("userName",r.response.fullName),localStorage.setItem("Position",""),localStorage.setItem("userId",JSON.stringify(r.response.id))}),e(r=>{throw r}))}logout(){localStorage.removeItem("token"),localStorage.removeItem("role"),localStorage.removeItem("defaultYacht"),localStorage.removeItem("defaultCashbox"),localStorage.removeItem("defaultCard"),localStorage.removeItem("defaultYachtName"),this.router.navigate(["/auth/login"])}getRole(){return localStorage.getItem("role")||""}geToken(){return localStorage.getItem("token")||""}isAuthenticated(){return!!localStorage.getItem("token")}getAllRoles(){return this.http.get(this._baseApiUrl+this._getAllRolesUrl).pipe(e(this.errorHandler.handleError.bind(this.errorHandler)))}getAllGroupAndPosition(){return this.http.get(this._baseApiUrl+this._getGroupAndPositions).pipe(e(this.errorHandler.handleError.bind(this.errorHandler)))}getAllPosition(){return this.http.get(this._baseApiUrl+this._getAllPosition).pipe(e(this.errorHandler.handleError.bind(this.errorHandler)))}sendPasswordResetEmail(t){return this.http.post(this._baseApiUrl+this._forgotPassword,{email:t}).pipe(e(this.errorHandler.handleError.bind(this.errorHandler)))}sendPasswordResetPaasword(t){return this.http.post(this._baseApiUrl+this._resetPasswordUrl,t).pipe(e(this.errorHandler.handleError.bind(this.errorHandler)))}static{this.\u0275fac=function(i){return new(i||o)(s(h),s(p),s(d))}}static{this.\u0275prov=n({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();export{I as a};
